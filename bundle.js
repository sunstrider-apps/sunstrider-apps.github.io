!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=122)}([function(t,e,r){var n=r(1),i=r(7),o=r(14),a=r(11),s=r(17),u=function(t,e,r){var l,c,h,f,p=t&u.F,d=t&u.G,g=t&u.S,y=t&u.P,_=t&u.B,v=d?n:g?n[e]||(n[e]={}):(n[e]||{}).prototype,m=d?i:i[e]||(i[e]={}),b=m.prototype||(m.prototype={});for(l in d&&(r=e),r)h=((c=!p&&v&&void 0!==v[l])?v:r)[l],f=_&&c?s(h,n):y&&"function"==typeof h?s(Function.call,h):h,v&&a(v,l,h,t&u.U),m[l]!=h&&o(m,l,f),y&&b[l]!=h&&(b[l]=h)};n.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){var n=r(4);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){var n=r(48)("wks"),i=r(29),o=r(1).Symbol,a="function"==typeof o;(t.exports=function(t){return n[t]||(n[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=n},function(t,e,r){var n=r(19),i=Math.min;t.exports=function(t){return t>0?i(n(t),9007199254740991):0}},function(t,e){var r=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(t,e,r){t.exports=!r(2)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(3),i=r(89),o=r(26),a=Object.defineProperty;e.f=r(8)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(24);t.exports=function(t){return Object(n(t))}},function(t,e,r){var n=r(1),i=r(14),o=r(13),a=r(29)("src"),s=r(127),u=(""+s).split("toString");r(7).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,r,s){var l="function"==typeof r;l&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(l&&(o(r,a)||i(r,a,t[e]?""+t[e]:u.join(String(e)))),t===n?t[e]=r:s?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,r){var n=r(0),i=r(2),o=r(24),a=/"/g,s=function(t,e,r,n){var i=String(o(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(s),n(n.P+n.F*i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",r)}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){var n=r(9),i=r(28);t.exports=r(8)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(44),i=r(24);t.exports=function(t){return n(i(t))}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t,e){return!!t&&n((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,r){var n=r(18);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var r=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:r)(t)}},function(t,e,r){var n=r(45),i=r(28),o=r(15),a=r(26),s=r(13),u=r(89),l=Object.getOwnPropertyDescriptor;e.f=r(8)?l:function(t,e){if(t=o(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return i(!n.f.call(t,e),t[e])}},function(t,e,r){var n=r(0),i=r(7),o=r(2);t.exports=function(t,e){var r=(i.Object||{})[t]||Object[t],a={};a[t]=e(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},function(t,e,r){var n=r(17),i=r(44),o=r(10),a=r(6),s=r(105);t.exports=function(t,e){var r=1==t,u=2==t,l=3==t,c=4==t,h=6==t,f=5==t||h,p=e||s;return function(e,s,d){for(var g,y,_=o(e),v=i(_),m=n(s,d,3),b=a(v.length),w=0,x=r?p(e,b):u?p(e,0):void 0;b>w;w++)if((f||w in v)&&(y=m(g=v[w],w,_),t))if(r)x[w]=y;else if(y)switch(t){case 3:return!0;case 5:return g;case 6:return w;case 2:x.push(g)}else if(c)return!1;return h?-1:l||c?c:x}}},function(t,e){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,r){"use strict";if(r(8)){var n=r(30),i=r(1),o=r(2),a=r(0),s=r(59),u=r(85),l=r(17),c=r(42),h=r(28),f=r(14),p=r(43),d=r(19),g=r(6),y=r(116),_=r(32),v=r(26),m=r(13),b=r(46),w=r(4),x=r(10),S=r(77),E=r(33),O=r(35),M=r(34).f,P=r(79),T=r(29),C=r(5),I=r(22),R=r(49),L=r(47),A=r(81),k=r(40),F=r(52),j=r(41),N=r(80),D=r(107),z=r(9),G=r(20),B=z.f,U=G.f,W=i.RangeError,Y=i.TypeError,V=i.Uint8Array,X=Array.prototype,Z=u.ArrayBuffer,q=u.DataView,K=I(0),H=I(2),J=I(3),Q=I(4),$=I(5),tt=I(6),et=R(!0),rt=R(!1),nt=A.values,it=A.keys,ot=A.entries,at=X.lastIndexOf,st=X.reduce,ut=X.reduceRight,lt=X.join,ct=X.sort,ht=X.slice,ft=X.toString,pt=X.toLocaleString,dt=C("iterator"),gt=C("toStringTag"),yt=T("typed_constructor"),_t=T("def_constructor"),vt=s.CONSTR,mt=s.TYPED,bt=s.VIEW,wt=I(1,(function(t,e){return Mt(L(t,t[_t]),e)})),xt=o((function(){return 1===new V(new Uint16Array([1]).buffer)[0]})),St=!!V&&!!V.prototype.set&&o((function(){new V(1).set({})})),Et=function(t,e){var r=d(t);if(r<0||r%e)throw W("Wrong offset!");return r},Ot=function(t){if(w(t)&&mt in t)return t;throw Y(t+" is not a typed array!")},Mt=function(t,e){if(!w(t)||!(yt in t))throw Y("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Tt(L(t,t[_t]),e)},Tt=function(t,e){for(var r=0,n=e.length,i=Mt(t,n);n>r;)i[r]=e[r++];return i},Ct=function(t,e,r){B(t,e,{get:function(){return this._d[r]}})},It=function(t){var e,r,n,i,o,a,s=x(t),u=arguments.length,c=u>1?arguments[1]:void 0,h=void 0!==c,f=P(s);if(null!=f&&!S(f)){for(a=f.call(s),n=[],e=0;!(o=a.next()).done;e++)n.push(o.value);s=n}for(h&&u>2&&(c=l(c,arguments[2],2)),e=0,r=g(s.length),i=Mt(this,r);r>e;e++)i[e]=h?c(s[e],e):s[e];return i},Rt=function(){for(var t=0,e=arguments.length,r=Mt(this,e);e>t;)r[t]=arguments[t++];return r},Lt=!!V&&o((function(){pt.call(new V(1))})),At=function(){return pt.apply(Lt?ht.call(Ot(this)):Ot(this),arguments)},kt={copyWithin:function(t,e){return D.call(Ot(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Q(Ot(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(Ot(this),arguments)},filter:function(t){return Pt(this,H(Ot(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(Ot(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){K(Ot(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return rt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Ot(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return lt.apply(Ot(this),arguments)},lastIndexOf:function(t){return at.apply(Ot(this),arguments)},map:function(t){return wt(Ot(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Ot(this),arguments)},reduceRight:function(t){return ut.apply(Ot(this),arguments)},reverse:function(){for(var t,e=Ot(this).length,r=Math.floor(e/2),n=0;n<r;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return J(Ot(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(Ot(this),t)},subarray:function(t,e){var r=Ot(this),n=r.length,i=_(t,n);return new(L(r,r[_t]))(r.buffer,r.byteOffset+i*r.BYTES_PER_ELEMENT,g((void 0===e?n:_(e,n))-i))}},Ft=function(t,e){return Pt(this,ht.call(Ot(this),t,e))},jt=function(t){Ot(this);var e=Et(arguments[1],1),r=this.length,n=x(t),i=g(n.length),o=0;if(i+e>r)throw W("Wrong length!");for(;o<i;)this[e+o]=n[o++]},Nt={entries:function(){return ot.call(Ot(this))},keys:function(){return it.call(Ot(this))},values:function(){return nt.call(Ot(this))}},Dt=function(t,e){return w(t)&&t[mt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Dt(t,e=v(e,!0))?h(2,t[e]):U(t,e)},Gt=function(t,e,r){return!(Dt(t,e=v(e,!0))&&w(r)&&m(r,"value"))||m(r,"get")||m(r,"set")||r.configurable||m(r,"writable")&&!r.writable||m(r,"enumerable")&&!r.enumerable?B(t,e,r):(t[e]=r.value,t)};vt||(G.f=zt,z.f=Gt),a(a.S+a.F*!vt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Gt}),o((function(){ft.call({})}))&&(ft=pt=function(){return lt.call(this)});var Bt=p({},kt);p(Bt,Nt),f(Bt,dt,Nt.values),p(Bt,{slice:Ft,set:jt,constructor:function(){},toString:ft,toLocaleString:At}),Ct(Bt,"buffer","b"),Ct(Bt,"byteOffset","o"),Ct(Bt,"byteLength","l"),Ct(Bt,"length","e"),B(Bt,gt,{get:function(){return this[mt]}}),t.exports=function(t,e,r,u){var l=t+((u=!!u)?"Clamped":"")+"Array",h="get"+t,p="set"+t,d=i[l],_=d||{},v=d&&O(d),m=!d||!s.ABV,x={},S=d&&d.prototype,P=function(t,r){B(t,r,{get:function(){return function(t,r){var n=t._d;return n.v[h](r*e+n.o,xt)}(this,r)},set:function(t){return function(t,r,n){var i=t._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),i.v[p](r*e+i.o,n,xt)}(this,r,t)},enumerable:!0})};m?(d=r((function(t,r,n,i){c(t,d,l,"_d");var o,a,s,u,h=0,p=0;if(w(r)){if(!(r instanceof Z||"ArrayBuffer"==(u=b(r))||"SharedArrayBuffer"==u))return mt in r?Tt(d,r):It.call(d,r);o=r,p=Et(n,e);var _=r.byteLength;if(void 0===i){if(_%e)throw W("Wrong length!");if((a=_-p)<0)throw W("Wrong length!")}else if((a=g(i)*e)+p>_)throw W("Wrong length!");s=a/e}else s=y(r),o=new Z(a=s*e);for(f(t,"_d",{b:o,o:p,l:a,e:s,v:new q(o)});h<s;)P(t,h++)})),S=d.prototype=E(Bt),f(S,"constructor",d)):o((function(){d(1)}))&&o((function(){new d(-1)}))&&F((function(t){new d,new d(null),new d(1.5),new d(t)}),!0)||(d=r((function(t,r,n,i){var o;return c(t,d,l),w(r)?r instanceof Z||"ArrayBuffer"==(o=b(r))||"SharedArrayBuffer"==o?void 0!==i?new _(r,Et(n,e),i):void 0!==n?new _(r,Et(n,e)):new _(r):mt in r?Tt(d,r):It.call(d,r):new _(y(r))})),K(v!==Function.prototype?M(_).concat(M(v)):M(_),(function(t){t in d||f(d,t,_[t])})),d.prototype=S,n||(S.constructor=d));var T=S[dt],C=!!T&&("values"==T.name||null==T.name),I=Nt.values;f(d,yt,!0),f(S,mt,l),f(S,bt,!0),f(S,_t,d),(u?new d(1)[gt]==l:gt in S)||B(S,gt,{get:function(){return l}}),x[l]=d,a(a.G+a.W+a.F*(d!=_),x),a(a.S,l,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o((function(){_.of.call(d,1)})),l,{from:It,of:Rt}),"BYTES_PER_ELEMENT"in S||f(S,"BYTES_PER_ELEMENT",e),a(a.P,l,kt),j(l),a(a.P+a.F*St,l,{set:jt}),a(a.P+a.F*!C,l,Nt),n||S.toString==ft||(S.toString=ft),a(a.P+a.F*o((function(){new d(1).slice()})),l,{slice:Ft}),a(a.P+a.F*(o((function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()}))||!o((function(){S.toLocaleString.call([1,2])}))),l,{toLocaleString:At}),k[l]=C?T:I,n||C||f(S,dt,I)}}else t.exports=function(){}},function(t,e,r){var n=r(4);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,r){var n=r(29)("meta"),i=r(4),o=r(13),a=r(9).f,s=0,u=Object.isExtensible||function(){return!0},l=!r(2)((function(){return u(Object.preventExtensions({}))})),c=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!o(t,n)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return l&&h.NEED&&u(t)&&!o(t,n)&&c(t),t}}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+n).toString(36))}},function(t,e){t.exports=!1},function(t,e,r){var n=r(91),i=r(64);t.exports=Object.keys||function(t){return n(t,i)}},function(t,e,r){var n=r(19),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=n(t))<0?i(t+e,0):o(t,e)}},function(t,e,r){var n=r(3),i=r(92),o=r(64),a=r(63)("IE_PROTO"),s=function(){},u=function(){var t,e=r(61)("iframe"),n=o.length;for(e.style.display="none",r(65).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;n--;)delete u.prototype[o[n]];return u()};t.exports=Object.create||function(t,e){var r;return null!==t?(s.prototype=n(t),r=new s,s.prototype=null,r[a]=t):r=u(),void 0===e?r:i(r,e)}},function(t,e,r){var n=r(91),i=r(64).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},function(t,e,r){var n=r(13),i=r(10),o=r(63)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,r){var n=r(5)("unscopables"),i=Array.prototype;null==i[n]&&r(14)(i,n,{}),t.exports=function(t){i[n][t]=!0}},function(t,e,r){var n=r(4);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,r){var n=r(9).f,i=r(13),o=r(5)("toStringTag");t.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},function(t,e,r){var n=r(0),i=r(24),o=r(2),a=r(67),s="["+a+"]",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),c=function(t,e,r){var i={},s=o((function(){return!!a[t]()||"​"!="​"[t]()})),u=i[t]=s?e(h):a[t];r&&(i[r]=u),n(n.P+n.F*s,"String",i)},h=c.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},function(t,e){t.exports={}},function(t,e,r){"use strict";var n=r(1),i=r(9),o=r(8),a=r(5)("species");t.exports=function(t){var e=n[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},function(t,e,r){var n=r(11);t.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},function(t,e,r){var n=r(23);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,r){var n=r(23),i=r(5)("toStringTag"),o="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?r:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,r){var n=r(3),i=r(18),o=r(5)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||null==(r=n(a)[o])?e:i(r)}},function(t,e,r){var n=r(7),i=r(1),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:r(30)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,r){var n=r(15),i=r(6),o=r(32);t.exports=function(t){return function(e,r,a){var s,u=n(e),l=i(u.length),c=o(a,l);if(t&&r!=r){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===r)return t||c||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,r){var n=r(23);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,r){var n=r(5)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},t(o)}catch(t){}return r}},function(t,e,r){"use strict";var n=r(3);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,r){"use strict";var n=r(46),i=RegExp.prototype.exec;t.exports=function(t,e){var r=t.exec;if("function"==typeof r){var o=r.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,r){"use strict";r(109);var n=r(11),i=r(14),o=r(2),a=r(24),s=r(5),u=r(82),l=s("species"),c=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2===r.length&&"a"===r[0]&&"b"===r[1]}();t.exports=function(t,e,r){var f=s(t),p=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),d=p?!o((function(){var e=!1,r=/a/;return r.exec=function(){return e=!0,null},"split"===t&&(r.constructor={},r.constructor[l]=function(){return r}),r[f](""),!e})):void 0;if(!p||!d||"replace"===t&&!c||"split"===t&&!h){var g=/./[f],y=r(a,f,""[t],(function(t,e,r,n,i){return e.exec===u?p&&!i?{done:!0,value:g.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}})),_=y[0],v=y[1];n(String.prototype,t,_),i(RegExp.prototype,f,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)})}}},function(t,e,r){var n=r(17),i=r(104),o=r(77),a=r(3),s=r(6),u=r(79),l={},c={};(e=t.exports=function(t,e,r,h,f){var p,d,g,y,_=f?function(){return t}:u(t),v=n(r,h,e?2:1),m=0;if("function"!=typeof _)throw TypeError(t+" is not iterable!");if(o(_)){for(p=s(t.length);p>m;m++)if((y=e?v(a(d=t[m])[0],d[1]):v(t[m]))===l||y===c)return y}else for(g=_.call(t);!(d=g.next()).done;)if((y=i(g,v,d.value,e))===l||y===c)return y}).BREAK=l,e.RETURN=c},function(t,e,r){var n=r(1).navigator;t.exports=n&&n.userAgent||""},function(t,e,r){"use strict";var n=r(1),i=r(0),o=r(11),a=r(43),s=r(27),u=r(56),l=r(42),c=r(4),h=r(2),f=r(52),p=r(38),d=r(68);t.exports=function(t,e,r,g,y,_){var v=n[t],m=v,b=y?"set":"add",w=m&&m.prototype,x={},S=function(t){var e=w[t];o(w,t,"delete"==t||"has"==t?function(t){return!(_&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return _&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(_||w.forEach&&!h((function(){(new m).entries().next()})))){var E=new m,O=E[b](_?{}:-0,1)!=E,M=h((function(){E.has(1)})),P=f((function(t){new m(t)})),T=!_&&h((function(){for(var t=new m,e=5;e--;)t[b](e,e);return!t.has(-0)}));P||((m=e((function(e,r){l(e,m,t);var n=d(new v,e,m);return null!=r&&u(r,y,n[b],n),n}))).prototype=w,w.constructor=m),(M||T)&&(S("delete"),S("has"),y&&S("get")),(T||O)&&S(b),_&&w.clear&&delete w.clear}else m=g.getConstructor(e,t,y,b),a(m.prototype,r),s.NEED=!0;return p(m,t),x[t]=m,i(i.G+i.W+i.F*(m!=v),x),_||g.setStrong(m,t,y),m}},function(t,e,r){for(var n,i=r(1),o=r(14),a=r(29),s=a("typed_array"),u=a("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,h=0,f="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(n=i[f[h++]])?(o(n.prototype,s,!0),o(n.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n=r(4),i=r(1).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){e.f=r(5)},function(t,e,r){var n=r(48)("keys"),i=r(29);t.exports=function(t){return n[t]||(n[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,r){var n=r(1).document;t.exports=n&&n.documentElement},function(t,e,r){var n=r(4),i=r(3),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=r(17)(Function.call,r(20).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,r){return o(t,r),e?t.__proto__=r:n(t,r),t}}({},!1):void 0),check:o}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,r){var n=r(4),i=r(66).set;t.exports=function(t,e,r){var o,a=e.constructor;return a!==r&&"function"==typeof a&&(o=a.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},function(t,e,r){"use strict";var n=r(19),i=r(24);t.exports=function(t){var e=String(i(this)),r="",o=n(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(r+=e);return r}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var r=Math.expm1;t.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||-2e-17!=r(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},function(t,e,r){var n=r(19),i=r(24);t.exports=function(t){return function(e,r){var o,a,s=String(i(e)),u=n(r),l=s.length;return u<0||u>=l?t?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===l||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(t,e,r){"use strict";var n=r(30),i=r(0),o=r(11),a=r(14),s=r(40),u=r(103),l=r(38),c=r(35),h=r(5)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,r,d,g,y,_){u(r,e,d);var v,m,b,w=function(t){if(!f&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new r(this,t)}}return function(){return new r(this,t)}},x=e+" Iterator",S="values"==g,E=!1,O=t.prototype,M=O[h]||O["@@iterator"]||g&&O[g],P=M||w(g),T=g?S?w("entries"):P:void 0,C="Array"==e&&O.entries||M;if(C&&(b=c(C.call(new t)))!==Object.prototype&&b.next&&(l(b,x,!0),n||"function"==typeof b[h]||a(b,h,p)),S&&M&&"values"!==M.name&&(E=!0,P=function(){return M.call(this)}),n&&!_||!f&&!E&&O[h]||a(O,h,P),s[e]=P,s[x]=p,g)if(v={values:S?P:w("values"),keys:y?P:w("keys"),entries:T},_)for(m in v)m in O||o(O,m,v[m]);else i(i.P+i.F*(f||E),e,v);return v}},function(t,e,r){var n=r(75),i=r(24);t.exports=function(t,e,r){if(n(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(i(t))}},function(t,e,r){var n=r(4),i=r(23),o=r(5)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,r){var n=r(5)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,r){var n=r(40),i=r(5)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},function(t,e,r){"use strict";var n=r(9),i=r(28);t.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},function(t,e,r){var n=r(46),i=r(5)("iterator"),o=r(40);t.exports=r(7).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[n(t)]}},function(t,e,r){"use strict";var n=r(10),i=r(32),o=r(6);t.exports=function(t){for(var e=n(this),r=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,r),u=a>2?arguments[2]:void 0,l=void 0===u?r:i(u,r);l>s;)e[s++]=t;return e}},function(t,e,r){"use strict";var n=r(36),i=r(108),o=r(40),a=r(15);t.exports=r(73)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?r:"values"==e?t[r]:[r,t[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(t,e,r){"use strict";var n,i,o=r(53),a=RegExp.prototype.exec,s=String.prototype.replace,u=a,l=(n=/a/,i=/b*/g,a.call(n,"a"),a.call(i,"a"),0!==n.lastIndex||0!==i.lastIndex),c=void 0!==/()??/.exec("")[1];(l||c)&&(u=function(t){var e,r,n,i,u=this;return c&&(r=new RegExp("^"+u.source+"$(?!\\s)",o.call(u))),l&&(e=u.lastIndex),n=a.call(u,t),l&&n&&(u.lastIndex=u.global?n.index+n[0].length:e),c&&n&&n.length>1&&s.call(n[0],r,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(n[i]=void 0)})),n}),t.exports=u},function(t,e,r){"use strict";var n=r(72)(!0);t.exports=function(t,e,r){return e+(r?n(t,e).length:1)}},function(t,e,r){var n,i,o,a=r(17),s=r(97),u=r(65),l=r(61),c=r(1),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,g=c.Dispatch,y=0,_={},v=function(){var t=+this;if(_.hasOwnProperty(t)){var e=_[t];delete _[t],e()}},m=function(t){v.call(t.data)};f&&p||(f=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return _[++y]=function(){s("function"==typeof t?t:Function(t),e)},n(y),y},p=function(t){delete _[t]},"process"==r(23)(h)?n=function(t){h.nextTick(a(v,t,1))}:g&&g.now?n=function(t){g.now(a(v,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=m,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",m,!1)):n="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),v.call(t)}}:function(t){setTimeout(a(v,t,1),0)}),t.exports={set:f,clear:p}},function(t,e,r){"use strict";var n=r(1),i=r(8),o=r(30),a=r(59),s=r(14),u=r(43),l=r(2),c=r(42),h=r(19),f=r(6),p=r(116),d=r(34).f,g=r(9).f,y=r(80),_=r(38),v=n.ArrayBuffer,m=n.DataView,b=n.Math,w=n.RangeError,x=n.Infinity,S=v,E=b.abs,O=b.pow,M=b.floor,P=b.log,T=b.LN2,C=i?"_b":"buffer",I=i?"_l":"byteLength",R=i?"_o":"byteOffset";function L(t,e,r){var n,i,o,a=new Array(r),s=8*r-e-1,u=(1<<s)-1,l=u>>1,c=23===e?O(2,-24)-O(2,-77):0,h=0,f=t<0||0===t&&1/t<0?1:0;for((t=E(t))!=t||t===x?(i=t!=t?1:0,n=u):(n=M(P(t)/T),t*(o=O(2,-n))<1&&(n--,o*=2),(t+=n+l>=1?c/o:c*O(2,1-l))*o>=2&&(n++,o/=2),n+l>=u?(i=0,n=u):n+l>=1?(i=(t*o-1)*O(2,e),n+=l):(i=t*O(2,l-1)*O(2,e),n=0));e>=8;a[h++]=255&i,i/=256,e-=8);for(n=n<<e|i,s+=e;s>0;a[h++]=255&n,n/=256,s-=8);return a[--h]|=128*f,a}function A(t,e,r){var n,i=8*r-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=r-1,l=t[u--],c=127&l;for(l>>=7;s>0;c=256*c+t[u],u--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=e;s>0;n=256*n+t[u],u--,s-=8);if(0===c)c=1-a;else{if(c===o)return n?NaN:l?-x:x;n+=O(2,e),c-=a}return(l?-1:1)*n*O(2,c-e)}function k(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function F(t){return[255&t]}function j(t){return[255&t,t>>8&255]}function N(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function D(t){return L(t,52,8)}function z(t){return L(t,23,4)}function G(t,e,r){g(t.prototype,e,{get:function(){return this[r]}})}function B(t,e,r,n){var i=p(+r);if(i+e>t[I])throw w("Wrong index!");var o=t[C]._b,a=i+t[R],s=o.slice(a,a+e);return n?s:s.reverse()}function U(t,e,r,n,i,o){var a=p(+r);if(a+e>t[I])throw w("Wrong index!");for(var s=t[C]._b,u=a+t[R],l=n(+i),c=0;c<e;c++)s[u+c]=l[o?c:e-c-1]}if(a.ABV){if(!l((function(){v(1)}))||!l((function(){new v(-1)}))||l((function(){return new v,new v(1.5),new v(NaN),"ArrayBuffer"!=v.name}))){for(var W,Y=(v=function(t){return c(this,v),new S(p(t))}).prototype=S.prototype,V=d(S),X=0;V.length>X;)(W=V[X++])in v||s(v,W,S[W]);o||(Y.constructor=v)}var Z=new m(new v(2)),q=m.prototype.setInt8;Z.setInt8(0,2147483648),Z.setInt8(1,2147483649),!Z.getInt8(0)&&Z.getInt8(1)||u(m.prototype,{setInt8:function(t,e){q.call(this,t,e<<24>>24)},setUint8:function(t,e){q.call(this,t,e<<24>>24)}},!0)}else v=function(t){c(this,v,"ArrayBuffer");var e=p(t);this._b=y.call(new Array(e),0),this[I]=e},m=function(t,e,r){c(this,m,"DataView"),c(t,v,"DataView");var n=t[I],i=h(e);if(i<0||i>n)throw w("Wrong offset!");if(i+(r=void 0===r?n-i:f(r))>n)throw w("Wrong length!");this[C]=t,this[R]=i,this[I]=r},i&&(G(v,"byteLength","_l"),G(m,"buffer","_b"),G(m,"byteLength","_l"),G(m,"byteOffset","_o")),u(m.prototype,{getInt8:function(t){return B(this,1,t)[0]<<24>>24},getUint8:function(t){return B(this,1,t)[0]},getInt16:function(t){var e=B(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=B(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return k(B(this,4,t,arguments[1]))},getUint32:function(t){return k(B(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return A(B(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return A(B(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){U(this,1,t,F,e)},setUint8:function(t,e){U(this,1,t,F,e)},setInt16:function(t,e){U(this,2,t,j,e,arguments[2])},setUint16:function(t,e){U(this,2,t,j,e,arguments[2])},setInt32:function(t,e){U(this,4,t,N,e,arguments[2])},setUint32:function(t,e){U(this,4,t,N,e,arguments[2])},setFloat32:function(t,e){U(this,4,t,z,e,arguments[2])},setFloat64:function(t,e){U(this,8,t,D,e,arguments[2])}});_(v,"ArrayBuffer"),_(m,"DataView"),s(m.prototype,a.VIEW,!0),e.ArrayBuffer=v,e.DataView=m},function(t,e){var r=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,r){t.exports=!r(121)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e,r){t.exports=!r(8)&&!r(2)((function(){return 7!=Object.defineProperty(r(61)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(1),i=r(7),o=r(30),a=r(62),s=r(9).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,r){var n=r(13),i=r(15),o=r(49)(!1),a=r(63)("IE_PROTO");t.exports=function(t,e){var r,s=i(t),u=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;e.length>u;)n(s,r=e[u++])&&(~o(l,r)||l.push(r));return l}},function(t,e,r){var n=r(9),i=r(3),o=r(31);t.exports=r(8)?Object.defineProperties:function(t,e){i(t);for(var r,a=o(e),s=a.length,u=0;s>u;)n.f(t,r=a[u++],e[r]);return t}},function(t,e,r){var n=r(15),i=r(34).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(n(t))}},function(t,e,r){"use strict";var n=r(8),i=r(31),o=r(50),a=r(45),s=r(10),u=r(44),l=Object.assign;t.exports=!l||r(2)((function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=l({},t)[r]||Object.keys(l({},e)).join("")!=n}))?function(t,e){for(var r=s(t),l=arguments.length,c=1,h=o.f,f=a.f;l>c;)for(var p,d=u(arguments[c++]),g=h?i(d).concat(h(d)):i(d),y=g.length,_=0;y>_;)p=g[_++],n&&!f.call(d,p)||(r[p]=d[p]);return r}:l},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,r){"use strict";var n=r(18),i=r(4),o=r(97),a=[].slice,s={},u=function(t,e,r){if(!(e in s)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";s[e]=Function("F,a","return new F("+n.join(",")+")")}return s[e](t,r)};t.exports=Function.bind||function(t){var e=n(this),r=a.call(arguments,1),s=function(){var n=r.concat(a.call(arguments));return this instanceof s?u(e,n.length,n):o(e,n,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},function(t,e){t.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},function(t,e,r){var n=r(1).parseInt,i=r(39).trim,o=r(67),a=/^[-+]?0[xX]/;t.exports=8!==n(o+"08")||22!==n(o+"0x16")?function(t,e){var r=i(String(t),3);return n(r,e>>>0||(a.test(r)?16:10))}:n},function(t,e,r){var n=r(1).parseFloat,i=r(39).trim;t.exports=1/n(r(67)+"-0")!=-1/0?function(t){var e=i(String(t),3),r=n(e);return 0===r&&"-"==e.charAt(0)?-0:r}:n},function(t,e,r){var n=r(23);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,r){var n=r(4),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,r){"use strict";var n=r(33),i=r(28),o=r(38),a={};r(14)(a,r(5)("iterator"),(function(){return this})),t.exports=function(t,e,r){t.prototype=n(a,{next:i(1,r)}),o(t,e+" Iterator")}},function(t,e,r){var n=r(3);t.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},function(t,e,r){var n=r(217);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,r){var n=r(18),i=r(10),o=r(44),a=r(6);t.exports=function(t,e,r,s,u){n(e);var l=i(t),c=o(l),h=a(l.length),f=u?h-1:0,p=u?-1:1;if(r<2)for(;;){if(f in c){s=c[f],f+=p;break}if(f+=p,u?f<0:h<=f)throw TypeError("Reduce of empty array with no initial value")}for(;u?f>=0:h>f;f+=p)f in c&&(s=e(s,c[f],f,l));return s}},function(t,e,r){"use strict";var n=r(10),i=r(32),o=r(6);t.exports=[].copyWithin||function(t,e){var r=n(this),a=o(r.length),s=i(t,a),u=i(e,a),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?a:i(l,a))-u,a-s),h=1;for(u<s&&s<u+c&&(h=-1,u+=c-1,s+=c-1);c-- >0;)u in r?r[s]=r[u]:delete r[s],s+=h,u+=h;return r}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,r){"use strict";var n=r(82);r(0)({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},function(t,e,r){r(8)&&"g"!=/./g.flags&&r(9).f(RegExp.prototype,"flags",{configurable:!0,get:r(53)})},function(t,e,r){"use strict";var n,i,o,a,s=r(30),u=r(1),l=r(17),c=r(46),h=r(0),f=r(4),p=r(18),d=r(42),g=r(56),y=r(47),_=r(84).set,v=r(237)(),m=r(112),b=r(238),w=r(57),x=r(113),S=u.TypeError,E=u.process,O=E&&E.versions,M=O&&O.v8||"",P=u.Promise,T="process"==c(E),C=function(){},I=i=m.f,R=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[r(5)("species")]=function(t){t(C,C)};return(T||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e&&0!==M.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(t){}}(),L=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var r=t._c;v((function(){for(var n=t._v,i=1==t._s,o=0,a=function(e){var r,o,a,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&j(t),t._h=1),!0===s?r=n:(c&&c.enter(),r=s(n),c&&(c.exit(),a=!0)),r===e.promise?l(S("Promise-chain cycle")):(o=L(r))?o.call(r,u,l):u(r)):l(n)}catch(t){c&&!a&&c.exit(),l(t)}};r.length>o;)a(r[o++]);t._c=[],t._n=!1,e&&!t._h&&k(t)}))}},k=function(t){_.call(u,(function(){var e,r,n,i=t._v,o=F(t);if(o&&(e=b((function(){T?E.emit("unhandledRejection",i,t):(r=u.onunhandledrejection)?r({promise:t,reason:i}):(n=u.console)&&n.error&&n.error("Unhandled promise rejection",i)})),t._h=T||F(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},F=function(t){return 1!==t._h&&0===(t._a||t._c).length},j=function(t){_.call(u,(function(){var e;T?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})}))},N=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},D=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw S("Promise can't be resolved itself");(e=L(t))?v((function(){var n={_w:r,_d:!1};try{e.call(t,l(D,n,1),l(N,n,1))}catch(t){N.call(n,t)}})):(r._v=t,r._s=1,A(r,!1))}catch(t){N.call({_w:r,_d:!1},t)}}};R||(P=function(t){d(this,P,"Promise","_h"),p(t),n.call(this);try{t(l(D,this,1),l(N,this,1))}catch(t){N.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=r(43)(P.prototype,{then:function(t,e){var r=I(y(this,P));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=T?E.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&A(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new n;this.promise=t,this.resolve=l(D,t,1),this.reject=l(N,t,1)},m.f=I=function(t){return t===P||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!R,{Promise:P}),r(38)(P,"Promise"),r(41)("Promise"),a=r(7).Promise,h(h.S+h.F*!R,"Promise",{reject:function(t){var e=I(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!R),"Promise",{resolve:function(t){return x(s&&this===a?P:this,t)}}),h(h.S+h.F*!(R&&r(52)((function(t){P.all(t).catch(C)}))),"Promise",{all:function(t){var e=this,r=I(e),n=r.resolve,i=r.reject,o=b((function(){var r=[],o=0,a=1;g(t,!1,(function(t){var s=o++,u=!1;r.push(void 0),a++,e.resolve(t).then((function(t){u||(u=!0,r[s]=t,--a||n(r))}),i)})),--a||n(r)}));return o.e&&i(o.v),r.promise},race:function(t){var e=this,r=I(e),n=r.reject,i=b((function(){g(t,!1,(function(t){e.resolve(t).then(r.resolve,n)}))}));return i.e&&n(i.v),r.promise}})},function(t,e,r){"use strict";var n=r(18);function i(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=n(e),this.reject=n(r)}t.exports.f=function(t){return new i(t)}},function(t,e,r){var n=r(3),i=r(4),o=r(112);t.exports=function(t,e){if(n(t),i(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},function(t,e,r){"use strict";var n=r(9).f,i=r(33),o=r(43),a=r(17),s=r(42),u=r(56),l=r(73),c=r(108),h=r(41),f=r(8),p=r(27).fastKey,d=r(37),g=f?"_s":"size",y=function(t,e){var r,n=p(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,l){var c=t((function(t,n){s(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[g]=0,null!=n&&u(n,r,t[l],t)}));return o(c.prototype,{clear:function(){for(var t=d(this,e),r=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];t._f=t._l=void 0,t[g]=0},delete:function(t){var r=d(this,e),n=y(r,t);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[g]--}return!!n},forEach:function(t){d(this,e);for(var r,n=a(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!y(d(this,e),t)}}),f&&n(c.prototype,"size",{get:function(){return d(this,e)[g]}}),c},def:function(t,e,r){var n,i,o=y(t,e);return o?o.v=r:(t._l=o={i:i=p(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[g]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,r){l(t,e,(function(t,r){this._t=d(t,e),this._k=r,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))}),r?"entries":"values",!r,!0),h(e)}}},function(t,e,r){"use strict";var n=r(43),i=r(27).getWeak,o=r(3),a=r(4),s=r(42),u=r(56),l=r(22),c=r(13),h=r(37),f=l(5),p=l(6),d=0,g=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},_=function(t,e){return f(t.a,(function(t){return t[0]===e}))};y.prototype={get:function(t){var e=_(this,t);if(e)return e[1]},has:function(t){return!!_(this,t)},set:function(t,e){var r=_(this,t);r?r[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,(function(e){return e[0]===t}));return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,r,o){var l=t((function(t,n){s(t,l,e,"_i"),t._t=e,t._i=d++,t._l=void 0,null!=n&&u(n,r,t[o],t)}));return n(l.prototype,{delete:function(t){if(!a(t))return!1;var r=i(t);return!0===r?g(h(this,e)).delete(t):r&&c(r,this._i)&&delete r[this._i]},has:function(t){if(!a(t))return!1;var r=i(t);return!0===r?g(h(this,e)).has(t):r&&c(r,this._i)}}),l},def:function(t,e,r){var n=i(o(e),!0);return!0===n?g(t).set(e,r):n[t._i]=r,t},ufstore:g}},function(t,e,r){var n=r(19),i=r(6);t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw RangeError("Wrong length!");return r}},function(t,e,r){var n=r(34),i=r(50),o=r(3),a=r(1).Reflect;t.exports=a&&a.ownKeys||function(t){var e=n.f(o(t)),r=i.f;return r?e.concat(r(t)):e}},function(t,e,r){var n=r(6),i=r(69),o=r(24);t.exports=function(t,e,r,a){var s=String(o(t)),u=s.length,l=void 0===r?" ":String(r),c=n(e);if(c<=u||""==l)return s;var h=c-u,f=i.call(l,Math.ceil(h/l.length));return f.length>h&&(f=f.slice(0,h)),a?f+s:s+f}},function(t,e,r){var n=r(8),i=r(31),o=r(15),a=r(45).f;t.exports=function(t){return function(e){for(var r,s=o(e),u=i(s),l=u.length,c=0,h=[];l>c;)r=u[c++],n&&!a.call(s,r)||h.push(t?[r,s[r]]:s[r]);return h}}},function(t,e){var r=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=r)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,r){"use strict";r.r(e);r(123);var n=r(309),i=r(310),o=r(312),a=r(316),s=i.control.defaults({zoom:!1}),u=new i.Map({target:"div1",layers:[new i.layer.Tile({source:new i.source.OSM})],controls:s,view:new i.View({center:i.proj.fromLonLat([37.41,8.82]),zoom:4})}),l=document.createElement("button");l.innerHTML="EXPORT",l.addEventListener("click",(function(){o.zip(O[0]).then((function(t){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(new Blob([t],{type:"application/zip"}),O[0].fileName);else{var e=document.createElement("a");e.style.display="none",document.body.appendChild(e),e.href=window.URL.createObjectURL(new Blob([t],{type:"application/zip"})),e.setAttribute("download",O[0].fileName),e.click(),window.URL.revokeObjectURL(e.href),document.body.removeChild(e)}})).catch((function(t){return console.log(t)}))}),!1);var c=document.createElement("div");c.className="export-control ol-unselectable ol-control",c.appendChild(l);var h,f,p,d=new i.control.Control({element:c});function g(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t=parseInt(t),f&&f.set("active",!1),p[t].set("active",!0),f=p[t],h&&(h.style.backgroundColor=""),(h=document.getElementById("table1").rows[t+1]).style.backgroundColor="rgba(0, 0, 255, 0.5)",e){h.scrollIntoView({block:"center",inline:"center",behavior:"smooth"});var r=f.getGeometry().getExtent(),n=[r[0],r[1],2*r[2]-r[0],r[3]];u.getView().fit(n,{size:u.getSize(),duration:600,padding:[30,30,30,30]})}}u.on("pointermove",(function(t){var e=t.coordinate;for(var r in p){p[r].getGeometry().intersectsCoordinate(e)&&g(r)}})),u.on("click",(function(t){var e=t.coordinate;for(var r in p){p[r].getGeometry().intersectsCoordinate(e)&&g(r,!0)}}));var y=new i.format.GeoJSON,_=u.getView().getProjection();function v(t){var e=document.getElementById("table1");e.innerHTML="";var r=new Set,n=[],i=e.createTHead().insertRow();for(var o in n.push(i),t){var a=(l=t[o]).getProperties();for(var s in a)s!=l.getGeometryName()&&r.add(s)}r.forEach((function(t){i.insertCell().appendChild(document.createTextNode(t))}));var u=e.createTBody();for(var o in t){var l=t[o],c=u.insertRow();c.addEventListener("click",(function(t){g(t.target.parentNode.rowIndex-1,!0)})),c.addEventListener("input",(function(t){b(t.target)})),n.push(c);a=l.getProperties();r.forEach((function(t){var e=c.insertCell();e.setAttribute("contenteditable",!0),e.appendChild(document.createTextNode(a[t]))}))}document.getElementById("div2").style.display="block"}function m(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p=y.readFeatures(t,{featureProjection:_}),e&&(O=[]).push(t);var r=new i.source.Vector({features:p}),n=new i.layer.Vector({source:r,style:function(t){var e=i.sphere.getArea(t.getGeometry());return e=(e/=1e4).toFixed(4).toString()+" ha",t.get("active")?new i.style.Style({stroke:new i.style.Stroke({color:"blue",width:2}),fill:new i.style.Fill({color:"rgba(0, 0, 255, 1)"}),text:new i.style.Text({overflow:!0,text:e.toString(),font:"26px Calibri,sans-serif",fill:new i.style.Fill({color:"#000"}),stroke:new i.style.Stroke({color:"rgba(255, 255, 255, 0.9)",width:3})})}):new i.style.Style({stroke:new i.style.Stroke({color:"blue",width:2}),fill:new i.style.Fill({color:"rgba(0, 0, 255, 0.1)"})})}});u.addLayer(n);var o=r.getExtent();o[2]+=o[2]-o[0],u.getView().fit(o,u.getSize()),v(p),u.addControl(d);var a=document.getElementById("hello-container");a.style.display="none"}function b(t){var e=t.innerText,r=t.cellIndex,n=t.parentNode.rowIndex-1,i=O[0],o=document.getElementById("table1").rows[0].cells[r].innerText;i.features[n].properties[o]=e}function w(t){t.preventDefault()}function x(t){t.preventDefault();var e=t.dataTransfer.files[0],r=new FileReader;r.onloadend=function(){n(r.result).then((function(t){return m(t,!0)})).catch((function(t){return console.log(t)}))},r.readAsArrayBuffer(e)}a(".resize-drag").resizable({edges:{left:!0,right:!1,bottom:!1,top:!1},listeners:{move:function(t){var e=t.target,r=parseFloat(e.getAttribute("data-x"))||0;e.style.width=t.rect.width+"px",r+=t.deltaRect.left,e.setAttribute("data-x",r)}},modifiers:[a.modifiers.restrictEdges({outer:"parent"}),a.modifiers.restrictSize({min:{width:200,height:50}})],inertia:!0});var S=document.getElementById("div1"),E=document.getElementById("hello-container");S.addEventListener("drop",x),S.addEventListener("dragover",w),E.addEventListener("drop",x),E.addEventListener("dragover",w),E.addEventListener("click",(function(){document.getElementById("file-input").click()})),document.getElementById("file-input").addEventListener("change",(function(t){t.preventDefault();var e=t.target.files[0],r=new FileReader;r.onloadend=function(){n(r.result).then((function(t){return m(t,!0)})).catch((function(t){return console.log(t)}))},r.readAsArrayBuffer(e)})),"ro"==(navigator.language||navigator.userLanguage)&&(E.innerHTML="Click pentru selectare sau trageți fișierul Shapefile pe ecran pentru a începe");var O=JSON.parse(window.localStorage.getItem("myKey"));O?m(O[0]):O=[]},function(t,e,r){"use strict";r(124);var n,i=(n=r(296))&&n.__esModule?n:{default:n};i.default._babelPolyfill&&"undefined"!=typeof console&&console.warn&&console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),i.default._babelPolyfill=!0},function(t,e,r){"use strict";r(125),r(268),r(270),r(273),r(275),r(277),r(279),r(281),r(283),r(285),r(287),r(289),r(291),r(295)},function(t,e,r){r(126),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(136),r(137),r(138),r(139),r(140),r(141),r(142),r(143),r(144),r(145),r(146),r(147),r(148),r(149),r(150),r(151),r(152),r(153),r(154),r(155),r(156),r(157),r(158),r(159),r(160),r(161),r(162),r(163),r(164),r(165),r(166),r(167),r(168),r(169),r(170),r(172),r(173),r(174),r(175),r(176),r(177),r(178),r(179),r(180),r(181),r(182),r(183),r(184),r(185),r(186),r(187),r(188),r(189),r(190),r(191),r(192),r(193),r(194),r(195),r(196),r(197),r(198),r(199),r(200),r(201),r(202),r(203),r(204),r(205),r(207),r(208),r(210),r(211),r(212),r(213),r(214),r(215),r(216),r(218),r(219),r(220),r(221),r(222),r(223),r(224),r(225),r(226),r(227),r(228),r(229),r(230),r(81),r(231),r(109),r(232),r(110),r(233),r(234),r(235),r(236),r(111),r(239),r(240),r(241),r(242),r(243),r(244),r(245),r(246),r(247),r(248),r(249),r(250),r(251),r(252),r(253),r(254),r(255),r(256),r(257),r(258),r(259),r(260),r(261),r(262),r(263),r(264),r(265),r(266),r(267),t.exports=r(7)},function(t,e,r){"use strict";var n=r(1),i=r(13),o=r(8),a=r(0),s=r(11),u=r(27).KEY,l=r(2),c=r(48),h=r(38),f=r(29),p=r(5),d=r(62),g=r(90),y=r(128),_=r(51),v=r(3),m=r(4),b=r(10),w=r(15),x=r(26),S=r(28),E=r(33),O=r(93),M=r(20),P=r(50),T=r(9),C=r(31),I=M.f,R=T.f,L=O.f,A=n.Symbol,k=n.JSON,F=k&&k.stringify,j=p("_hidden"),N=p("toPrimitive"),D={}.propertyIsEnumerable,z=c("symbol-registry"),G=c("symbols"),B=c("op-symbols"),U=Object.prototype,W="function"==typeof A&&!!P.f,Y=n.QObject,V=!Y||!Y.prototype||!Y.prototype.findChild,X=o&&l((function(){return 7!=E(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=I(U,e);n&&delete U[e],R(t,e,r),n&&t!==U&&R(U,e,n)}:R,Z=function(t){var e=G[t]=E(A.prototype);return e._k=t,e},q=W&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},K=function(t,e,r){return t===U&&K(B,e,r),v(t),e=x(e,!0),v(r),i(G,e)?(r.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),r=E(r,{enumerable:S(0,!1)})):(i(t,j)||R(t,j,S(1,{})),t[j][e]=!0),X(t,e,r)):R(t,e,r)},H=function(t,e){v(t);for(var r,n=y(e=w(e)),i=0,o=n.length;o>i;)K(t,r=n[i++],e[r]);return t},J=function(t){var e=D.call(this,t=x(t,!0));return!(this===U&&i(G,t)&&!i(B,t))&&(!(e||!i(this,t)||!i(G,t)||i(this,j)&&this[j][t])||e)},Q=function(t,e){if(t=w(t),e=x(e,!0),t!==U||!i(G,e)||i(B,e)){var r=I(t,e);return!r||!i(G,e)||i(t,j)&&t[j][e]||(r.enumerable=!0),r}},$=function(t){for(var e,r=L(w(t)),n=[],o=0;r.length>o;)i(G,e=r[o++])||e==j||e==u||n.push(e);return n},tt=function(t){for(var e,r=t===U,n=L(r?B:w(t)),o=[],a=0;n.length>a;)!i(G,e=n[a++])||r&&!i(U,e)||o.push(G[e]);return o};W||(s((A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(r){this===U&&e.call(B,r),i(this,j)&&i(this[j],t)&&(this[j][t]=!1),X(this,t,S(1,r))};return o&&V&&X(U,t,{configurable:!0,set:e}),Z(t)}).prototype,"toString",(function(){return this._k})),M.f=Q,T.f=K,r(34).f=O.f=$,r(45).f=J,P.f=tt,o&&!r(30)&&s(U,"propertyIsEnumerable",J,!0),d.f=function(t){return Z(p(t))}),a(a.G+a.W+a.F*!W,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)p(et[rt++]);for(var nt=C(p.store),it=0;nt.length>it;)g(nt[it++]);a(a.S+a.F*!W,"Symbol",{for:function(t){return i(z,t+="")?z[t]:z[t]=A(t)},keyFor:function(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var e in z)if(z[e]===t)return e},useSetter:function(){V=!0},useSimple:function(){V=!1}}),a(a.S+a.F*!W,"Object",{create:function(t,e){return void 0===e?E(t):H(E(t),e)},defineProperty:K,defineProperties:H,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var ot=l((function(){P.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return P.f(b(t))}}),k&&a(a.S+a.F*(!W||l((function(){var t=A();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))}))),"JSON",{stringify:function(t){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=e=n[1],(m(e)||void 0!==t)&&!q(t))return _(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!q(e))return e}),n[1]=e,F.apply(k,n)}}),A.prototype[N]||r(14)(A.prototype,N,A.prototype.valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,r){t.exports=r(48)("native-function-to-string",Function.toString)},function(t,e,r){var n=r(31),i=r(50),o=r(45);t.exports=function(t){var e=n(t),r=i.f;if(r)for(var a,s=r(t),u=o.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},function(t,e,r){var n=r(0);n(n.S,"Object",{create:r(33)})},function(t,e,r){var n=r(0);n(n.S+n.F*!r(8),"Object",{defineProperty:r(9).f})},function(t,e,r){var n=r(0);n(n.S+n.F*!r(8),"Object",{defineProperties:r(92)})},function(t,e,r){var n=r(15),i=r(20).f;r(21)("getOwnPropertyDescriptor",(function(){return function(t,e){return i(n(t),e)}}))},function(t,e,r){var n=r(10),i=r(35);r(21)("getPrototypeOf",(function(){return function(t){return i(n(t))}}))},function(t,e,r){var n=r(10),i=r(31);r(21)("keys",(function(){return function(t){return i(n(t))}}))},function(t,e,r){r(21)("getOwnPropertyNames",(function(){return r(93).f}))},function(t,e,r){var n=r(4),i=r(27).onFreeze;r(21)("freeze",(function(t){return function(e){return t&&n(e)?t(i(e)):e}}))},function(t,e,r){var n=r(4),i=r(27).onFreeze;r(21)("seal",(function(t){return function(e){return t&&n(e)?t(i(e)):e}}))},function(t,e,r){var n=r(4),i=r(27).onFreeze;r(21)("preventExtensions",(function(t){return function(e){return t&&n(e)?t(i(e)):e}}))},function(t,e,r){var n=r(4);r(21)("isFrozen",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,r){var n=r(4);r(21)("isSealed",(function(t){return function(e){return!n(e)||!!t&&t(e)}}))},function(t,e,r){var n=r(4);r(21)("isExtensible",(function(t){return function(e){return!!n(e)&&(!t||t(e))}}))},function(t,e,r){var n=r(0);n(n.S+n.F,"Object",{assign:r(94)})},function(t,e,r){var n=r(0);n(n.S,"Object",{is:r(95)})},function(t,e,r){var n=r(0);n(n.S,"Object",{setPrototypeOf:r(66).set})},function(t,e,r){"use strict";var n=r(46),i={};i[r(5)("toStringTag")]="z",i+""!="[object z]"&&r(11)(Object.prototype,"toString",(function(){return"[object "+n(this)+"]"}),!0)},function(t,e,r){var n=r(0);n(n.P,"Function",{bind:r(96)})},function(t,e,r){var n=r(9).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||r(8)&&n(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,r){"use strict";var n=r(4),i=r(35),o=r(5)("hasInstance"),a=Function.prototype;o in a||r(9).f(a,o,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,r){var n=r(0),i=r(98);n(n.G+n.F*(parseInt!=i),{parseInt:i})},function(t,e,r){var n=r(0),i=r(99);n(n.G+n.F*(parseFloat!=i),{parseFloat:i})},function(t,e,r){"use strict";var n=r(1),i=r(13),o=r(23),a=r(68),s=r(26),u=r(2),l=r(34).f,c=r(20).f,h=r(9).f,f=r(39).trim,p=n.Number,d=p,g=p.prototype,y="Number"==o(r(33)(g)),_="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var r,n,i,o=(e=_?e.trim():f(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+e}for(var a,u=e.slice(2),l=0,c=u.length;l<c;l++)if((a=u.charCodeAt(l))<48||a>i)return NaN;return parseInt(u,n)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof p&&(y?u((function(){g.valueOf.call(r)})):"Number"!=o(r))?a(new d(v(e)),r,p):v(e)};for(var m,b=r(8)?l(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;b.length>w;w++)i(d,m=b[w])&&!i(p,m)&&h(p,m,c(d,m));p.prototype=g,g.constructor=p,r(11)(n,"Number",p)}},function(t,e,r){"use strict";var n=r(0),i=r(19),o=r(100),a=r(69),s=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",h=function(t,e){for(var r=-1,n=e;++r<6;)n+=t*l[r],l[r]=n%1e7,n=u(n/1e7)},f=function(t){for(var e=6,r=0;--e>=0;)r+=l[e],l[e]=u(r/t),r=r%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var r=String(l[t]);e=""===e?r:e+a.call("0",7-r.length)+r}return e},d=function(t,e,r){return 0===e?r:e%2==1?d(t,e-1,r*t):d(t*t,e/2,r)};n(n.P+n.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r(2)((function(){s.call({})}))),"Number",{toFixed:function(t){var e,r,n,s,u=o(this,c),l=i(t),g="",y="0";if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(g="-",u=-u),u>1e-21)if(r=(e=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e}(u*d(2,69,1))-69)<0?u*d(2,-e,1):u/d(2,e,1),r*=4503599627370496,(e=52-e)>0){for(h(0,r),n=l;n>=7;)h(1e7,0),n-=7;for(h(d(10,n,1),0),n=e-1;n>=23;)f(1<<23),n-=23;f(1<<n),h(1,1),f(2),y=p()}else h(0,r),h(1<<-e,0),y=p()+a.call("0",l);return y=l>0?g+((s=y.length)<=l?"0."+a.call("0",l-s)+y:y.slice(0,s-l)+"."+y.slice(s-l)):g+y}})},function(t,e,r){"use strict";var n=r(0),i=r(2),o=r(100),a=1..toPrecision;n(n.P+n.F*(i((function(){return"1"!==a.call(1,void 0)}))||!i((function(){a.call({})}))),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,r){var n=r(0),i=r(1).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,r){var n=r(0);n(n.S,"Number",{isInteger:r(101)})},function(t,e,r){var n=r(0);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,r){var n=r(0),i=r(101),o=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,r){var n=r(0);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,r){var n=r(0);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,r){var n=r(0),i=r(99);n(n.S+n.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,r){var n=r(0),i=r(98);n(n.S+n.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,r){var n=r(0),i=r(102),o=Math.sqrt,a=Math.acosh;n(n.S+n.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e,r){var n=r(0),i=Math.asinh;n(n.S+n.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,r){var n=r(0),i=Math.atanh;n(n.S+n.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,r){var n=r(0),i=r(70);n(n.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,r){var n=r(0),i=Math.exp;n(n.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,r){var n=r(0),i=r(71);n(n.S+n.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,r){var n=r(0);n(n.S,"Math",{fround:r(171)})},function(t,e,r){var n=r(70),i=Math.pow,o=i(2,-52),a=i(2,-23),s=i(2,127)*(2-a),u=i(2,-126);t.exports=Math.fround||function(t){var e,r,i=Math.abs(t),l=n(t);return i<u?l*(i/u/a+1/o-1/o)*u*a:(r=(e=(1+a/o)*i)-(e-i))>s||r!=r?l*(1/0):l*r}},function(t,e,r){var n=r(0),i=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var r,n,o=0,a=0,s=arguments.length,u=0;a<s;)u<(r=i(arguments[a++]))?(o=o*(n=u/r)*n+1,u=r):o+=r>0?(n=r/u)*n:r;return u===1/0?1/0:u*Math.sqrt(o)}})},function(t,e,r){var n=r(0),i=Math.imul;n(n.S+n.F*r(2)((function(){return-5!=i(4294967295,5)||2!=i.length})),"Math",{imul:function(t,e){var r=+t,n=+e,i=65535&r,o=65535&n;return 0|i*o+((65535&r>>>16)*o+i*(65535&n>>>16)<<16>>>0)}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,r){var n=r(0);n(n.S,"Math",{log1p:r(102)})},function(t,e,r){var n=r(0);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,r){var n=r(0);n(n.S,"Math",{sign:r(70)})},function(t,e,r){var n=r(0),i=r(71),o=Math.exp;n(n.S+n.F*r(2)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,r){var n=r(0),i=r(71),o=Math.exp;n(n.S,"Math",{tanh:function(t){var e=i(t=+t),r=i(-t);return e==1/0?1:r==1/0?-1:(e-r)/(o(t)+o(-t))}})},function(t,e,r){var n=r(0);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,r){var n=r(0),i=r(32),o=String.fromCharCode,a=String.fromCodePoint;n(n.S+n.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,a=0;n>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");r.push(e<65536?o(e):o(55296+((e-=65536)>>10),e%1024+56320))}return r.join("")}})},function(t,e,r){var n=r(0),i=r(15),o=r(6);n(n.S,"String",{raw:function(t){for(var e=i(t.raw),r=o(e.length),n=arguments.length,a=[],s=0;r>s;)a.push(String(e[s++])),s<n&&a.push(String(arguments[s]));return a.join("")}})},function(t,e,r){"use strict";r(39)("trim",(function(t){return function(){return t(this,3)}}))},function(t,e,r){"use strict";var n=r(72)(!0);r(73)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,r=this._i;return r>=e.length?{value:void 0,done:!0}:(t=n(e,r),this._i+=t.length,{value:t,done:!1})}))},function(t,e,r){"use strict";var n=r(0),i=r(72)(!1);n(n.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,r){"use strict";var n=r(0),i=r(6),o=r(74),a="".endsWith;n(n.P+n.F*r(76)("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),r=arguments.length>1?arguments[1]:void 0,n=i(e.length),s=void 0===r?n:Math.min(i(r),n),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,r){"use strict";var n=r(0),i=r(74);n(n.P+n.F*r(76)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,r){var n=r(0);n(n.P,"String",{repeat:r(69)})},function(t,e,r){"use strict";var n=r(0),i=r(6),o=r(74),a="".startsWith;n(n.P+n.F*r(76)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),r=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return a?a.call(e,n,r):e.slice(r,r+n.length)===n}})},function(t,e,r){"use strict";r(12)("anchor",(function(t){return function(e){return t(this,"a","name",e)}}))},function(t,e,r){"use strict";r(12)("big",(function(t){return function(){return t(this,"big","","")}}))},function(t,e,r){"use strict";r(12)("blink",(function(t){return function(){return t(this,"blink","","")}}))},function(t,e,r){"use strict";r(12)("bold",(function(t){return function(){return t(this,"b","","")}}))},function(t,e,r){"use strict";r(12)("fixed",(function(t){return function(){return t(this,"tt","","")}}))},function(t,e,r){"use strict";r(12)("fontcolor",(function(t){return function(e){return t(this,"font","color",e)}}))},function(t,e,r){"use strict";r(12)("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},function(t,e,r){"use strict";r(12)("italics",(function(t){return function(){return t(this,"i","","")}}))},function(t,e,r){"use strict";r(12)("link",(function(t){return function(e){return t(this,"a","href",e)}}))},function(t,e,r){"use strict";r(12)("small",(function(t){return function(){return t(this,"small","","")}}))},function(t,e,r){"use strict";r(12)("strike",(function(t){return function(){return t(this,"strike","","")}}))},function(t,e,r){"use strict";r(12)("sub",(function(t){return function(){return t(this,"sub","","")}}))},function(t,e,r){"use strict";r(12)("sup",(function(t){return function(){return t(this,"sup","","")}}))},function(t,e,r){var n=r(0);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,r){"use strict";var n=r(0),i=r(10),o=r(26);n(n.P+n.F*r(2)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(t){var e=i(this),r=o(e);return"number"!=typeof r||isFinite(r)?e.toISOString():null}})},function(t,e,r){var n=r(0),i=r(206);n(n.P+n.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,r){"use strict";var n=r(2),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=n((function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-50000000000001))}))||!n((function(){o.call(new Date(NaN))}))?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),r=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(r>99?r:"0"+a(r))+"Z"}:o},function(t,e,r){var n=Date.prototype,i=n.toString,o=n.getTime;new Date(NaN)+""!="Invalid Date"&&r(11)(n,"toString",(function(){var t=o.call(this);return t==t?i.call(this):"Invalid Date"}))},function(t,e,r){var n=r(5)("toPrimitive"),i=Date.prototype;n in i||r(14)(i,n,r(209))},function(t,e,r){"use strict";var n=r(3),i=r(26);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(n(this),"number"!=t)}},function(t,e,r){var n=r(0);n(n.S,"Array",{isArray:r(51)})},function(t,e,r){"use strict";var n=r(17),i=r(0),o=r(10),a=r(104),s=r(77),u=r(6),l=r(78),c=r(79);i(i.S+i.F*!r(52)((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,i,h,f=o(t),p="function"==typeof this?this:Array,d=arguments.length,g=d>1?arguments[1]:void 0,y=void 0!==g,_=0,v=c(f);if(y&&(g=n(g,d>2?arguments[2]:void 0,2)),null==v||p==Array&&s(v))for(r=new p(e=u(f.length));e>_;_++)l(r,_,y?g(f[_],_):f[_]);else for(h=v.call(f),r=new p;!(i=h.next()).done;_++)l(r,_,y?a(h,g,[i.value,_],!0):i.value);return r.length=_,r}})},function(t,e,r){"use strict";var n=r(0),i=r(78);n(n.S+n.F*r(2)((function(){function t(){}return!(Array.of.call(t)instanceof t)})),"Array",{of:function(){for(var t=0,e=arguments.length,r=new("function"==typeof this?this:Array)(e);e>t;)i(r,t,arguments[t++]);return r.length=e,r}})},function(t,e,r){"use strict";var n=r(0),i=r(15),o=[].join;n(n.P+n.F*(r(44)!=Object||!r(16)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,r){"use strict";var n=r(0),i=r(65),o=r(23),a=r(32),s=r(6),u=[].slice;n(n.P+n.F*r(2)((function(){i&&u.call(i)})),"Array",{slice:function(t,e){var r=s(this.length),n=o(this);if(e=void 0===e?r:e,"Array"==n)return u.call(this,t,e);for(var i=a(t,r),l=a(e,r),c=s(l-i),h=new Array(c),f=0;f<c;f++)h[f]="String"==n?this.charAt(i+f):this[i+f];return h}})},function(t,e,r){"use strict";var n=r(0),i=r(18),o=r(10),a=r(2),s=[].sort,u=[1,2,3];n(n.P+n.F*(a((function(){u.sort(void 0)}))||!a((function(){u.sort(null)}))||!r(16)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,r){"use strict";var n=r(0),i=r(22)(0),o=r(16)([].forEach,!0);n(n.P+n.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,r){var n=r(4),i=r(51),o=r(5)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,r){"use strict";var n=r(0),i=r(22)(1);n(n.P+n.F*!r(16)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(22)(2);n(n.P+n.F*!r(16)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(22)(3);n(n.P+n.F*!r(16)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(22)(4);n(n.P+n.F*!r(16)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(106);n(n.P+n.F*!r(16)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,r){"use strict";var n=r(0),i=r(106);n(n.P+n.F*!r(16)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,r){"use strict";var n=r(0),i=r(49)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(a||!r(16)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,r){"use strict";var n=r(0),i=r(15),o=r(19),a=r(6),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(u||!r(16)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),r=a(e.length),n=r-1;for(arguments.length>1&&(n=Math.min(n,o(arguments[1]))),n<0&&(n=r+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,r){var n=r(0);n(n.P,"Array",{copyWithin:r(107)}),r(36)("copyWithin")},function(t,e,r){var n=r(0);n(n.P,"Array",{fill:r(80)}),r(36)("fill")},function(t,e,r){"use strict";var n=r(0),i=r(22)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),n(n.P+n.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(36)("find")},function(t,e,r){"use strict";var n=r(0),i=r(22)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),n(n.P+n.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(36)(o)},function(t,e,r){r(41)("Array")},function(t,e,r){var n=r(1),i=r(68),o=r(9).f,a=r(34).f,s=r(75),u=r(53),l=n.RegExp,c=l,h=l.prototype,f=/a/g,p=/a/g,d=new l(f)!==f;if(r(8)&&(!d||r(2)((function(){return p[r(5)("match")]=!1,l(f)!=f||l(p)==p||"/a/i"!=l(f,"i")})))){l=function(t,e){var r=this instanceof l,n=s(t),o=void 0===e;return!r&&n&&t.constructor===l&&o?t:i(d?new c(n&&!o?t.source:t,e):c((n=t instanceof l)?t.source:t,n&&o?u.call(t):e),r?this:h,l)};for(var g=function(t){t in l||o(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},y=a(c),_=0;y.length>_;)g(y[_++]);h.constructor=l,l.prototype=h,r(11)(n,"RegExp",l)}r(41)("RegExp")},function(t,e,r){"use strict";r(110);var n=r(3),i=r(53),o=r(8),a=/./.toString,s=function(t){r(11)(RegExp.prototype,"toString",t,!0)};r(2)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(t,e,r){"use strict";var n=r(3),i=r(6),o=r(83),a=r(54);r(55)("match",1,(function(t,e,r,s){return[function(r){var n=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=s(r,t,this);if(e.done)return e.value;var u=n(t),l=String(this);if(!u.global)return a(u,l);var c=u.unicode;u.lastIndex=0;for(var h,f=[],p=0;null!==(h=a(u,l));){var d=String(h[0]);f[p]=d,""===d&&(u.lastIndex=o(l,i(u.lastIndex),c)),p++}return 0===p?null:f}]}))},function(t,e,r){"use strict";var n=r(3),i=r(10),o=r(6),a=r(19),s=r(83),u=r(54),l=Math.max,c=Math.min,h=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g;r(55)("replace",2,(function(t,e,r,d){return[function(n,i){var o=t(this),a=null==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},function(t,e){var i=d(r,t,this,e);if(i.done)return i.value;var h=n(t),f=String(this),p="function"==typeof e;p||(e=String(e));var y=h.global;if(y){var _=h.unicode;h.lastIndex=0}for(var v=[];;){var m=u(h,f);if(null===m)break;if(v.push(m),!y)break;""===String(m[0])&&(h.lastIndex=s(f,o(h.lastIndex),_))}for(var b,w="",x=0,S=0;S<v.length;S++){m=v[S];for(var E=String(m[0]),O=l(c(a(m.index),f.length),0),M=[],P=1;P<m.length;P++)M.push(void 0===(b=m[P])?b:String(b));var T=m.groups;if(p){var C=[E].concat(M,O,f);void 0!==T&&C.push(T);var I=String(e.apply(void 0,C))}else I=g(E,f,O,M,T,e);O>=x&&(w+=f.slice(x,O)+I,x=O+E.length)}return w+f.slice(x)}];function g(t,e,n,o,a,s){var u=n+t.length,l=o.length,c=p;return void 0!==a&&(a=i(a),c=f),r.call(s,c,(function(r,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(u);case"<":s=a[i.slice(1,-1)];break;default:var c=+i;if(0===c)return r;if(c>l){var f=h(c/10);return 0===f?r:f<=l?void 0===o[f-1]?i.charAt(1):o[f-1]+i.charAt(1):r}s=o[c-1]}return void 0===s?"":s}))}}))},function(t,e,r){"use strict";var n=r(3),i=r(95),o=r(54);r(55)("search",1,(function(t,e,r,a){return[function(r){var n=t(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,n):new RegExp(r)[e](String(n))},function(t){var e=a(r,t,this);if(e.done)return e.value;var s=n(t),u=String(this),l=s.lastIndex;i(l,0)||(s.lastIndex=0);var c=o(s,u);return i(s.lastIndex,l)||(s.lastIndex=l),null===c?-1:c.index}]}))},function(t,e,r){"use strict";var n=r(75),i=r(3),o=r(47),a=r(83),s=r(6),u=r(54),l=r(82),c=r(2),h=Math.min,f=[].push,p="length",d=!c((function(){RegExp(4294967295,"y")}));r(55)("split",2,(function(t,e,r,c){var g;return g="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[p]||2!="ab".split(/(?:ab)*/)[p]||4!=".".split(/(.?)(.?)/)[p]||".".split(/()()/)[p]>1||"".split(/.?/)[p]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!n(t))return r.call(i,t,e);for(var o,a,s,u=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,d=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,c+"g");(o=l.call(g,i))&&!((a=g.lastIndex)>h&&(u.push(i.slice(h,o.index)),o[p]>1&&o.index<i[p]&&f.apply(u,o.slice(1)),s=o[0][p],h=a,u[p]>=d));)g.lastIndex===o.index&&g.lastIndex++;return h===i[p]?!s&&g.test("")||u.push(""):u.push(i.slice(h)),u[p]>d?u.slice(0,d):u}:"0".split(void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)}:r,[function(r,n){var i=t(this),o=null==r?void 0:r[e];return void 0!==o?o.call(r,i,n):g.call(String(i),r,n)},function(t,e){var n=c(g,t,this,e,g!==r);if(n.done)return n.value;var l=i(t),f=String(this),p=o(l,RegExp),y=l.unicode,_=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(d?"y":"g"),v=new p(d?l:"^(?:"+l.source+")",_),m=void 0===e?4294967295:e>>>0;if(0===m)return[];if(0===f.length)return null===u(v,f)?[f]:[];for(var b=0,w=0,x=[];w<f.length;){v.lastIndex=d?w:0;var S,E=u(v,d?f:f.slice(w));if(null===E||(S=h(s(v.lastIndex+(d?0:w)),f.length))===b)w=a(f,w,y);else{if(x.push(f.slice(b,w)),x.length===m)return x;for(var O=1;O<=E.length-1;O++)if(x.push(E[O]),x.length===m)return x;w=b=S}}return x.push(f.slice(b)),x}]}))},function(t,e,r){var n=r(1),i=r(84).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r(23)(a);t.exports=function(){var t,e,r,l=function(){var n,i;for(u&&(n=a.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(l)};else if(!o||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);r=function(){c.then(l)}}else r=function(){i.call(n,l)};else{var h=!0,f=document.createTextNode("");new o(l).observe(f,{characterData:!0}),r=function(){f.data=h=!h}}return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,r){"use strict";var n=r(114),i=r(37);t.exports=r(58)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=n.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(i(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,r){"use strict";var n=r(114),i=r(37);t.exports=r(58)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(i(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,r){"use strict";var n,i=r(1),o=r(22)(0),a=r(11),s=r(27),u=r(94),l=r(115),c=r(4),h=r(37),f=r(37),p=!i.ActiveXObject&&"ActiveXObject"in i,d=s.getWeak,g=Object.isExtensible,y=l.ufstore,_=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(t){if(c(t)){var e=d(t);return!0===e?y(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(h(this,"WeakMap"),t,e)}},m=t.exports=r(58)("WeakMap",_,v,l,!0,!0);f&&p&&(u((n=l.getConstructor(_,"WeakMap")).prototype,v),s.NEED=!0,o(["delete","has","get","set"],(function(t){var e=m.prototype,r=e[t];a(e,t,(function(e,i){if(c(e)&&!g(e)){this._f||(this._f=new n);var o=this._f[t](e,i);return"set"==t?this:o}return r.call(this,e,i)}))})))},function(t,e,r){"use strict";var n=r(115),i=r(37);r(58)("WeakSet",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return n.def(i(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,r){"use strict";var n=r(0),i=r(59),o=r(85),a=r(3),s=r(32),u=r(6),l=r(4),c=r(1).ArrayBuffer,h=r(47),f=o.ArrayBuffer,p=o.DataView,d=i.ABV&&c.isView,g=f.prototype.slice,y=i.VIEW;n(n.G+n.W+n.F*(c!==f),{ArrayBuffer:f}),n(n.S+n.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||l(t)&&y in t}}),n(n.P+n.U+n.F*r(2)((function(){return!new f(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(t,e){if(void 0!==g&&void 0===e)return g.call(a(this),t);for(var r=a(this).byteLength,n=s(t,r),i=s(void 0===e?r:e,r),o=new(h(this,f))(u(i-n)),l=new p(this),c=new p(o),d=0;n<i;)c.setUint8(d++,l.getUint8(n++));return o}}),r(41)("ArrayBuffer")},function(t,e,r){var n=r(0);n(n.G+n.W+n.F*!r(59).ABV,{DataView:r(85).DataView})},function(t,e,r){r(25)("Int8",1,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(25)("Uint8",1,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(25)("Uint8",1,(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0)},function(t,e,r){r(25)("Int16",2,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(25)("Uint16",2,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(25)("Int32",4,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(25)("Uint32",4,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(25)("Float32",4,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){r(25)("Float64",8,(function(t){return function(e,r,n){return t(this,e,r,n)}}))},function(t,e,r){var n=r(0),i=r(18),o=r(3),a=(r(1).Reflect||{}).apply,s=Function.apply;n(n.S+n.F*!r(2)((function(){a((function(){}))})),"Reflect",{apply:function(t,e,r){var n=i(t),u=o(r);return a?a(n,e,u):s.call(n,e,u)}})},function(t,e,r){var n=r(0),i=r(33),o=r(18),a=r(3),s=r(4),u=r(2),l=r(96),c=(r(1).Reflect||{}).construct,h=u((function(){function t(){}return!(c((function(){}),[],t)instanceof t)})),f=!u((function(){c((function(){}))}));n(n.S+n.F*(h||f),"Reflect",{construct:function(t,e){o(t),a(e);var r=arguments.length<3?t:o(arguments[2]);if(f&&!h)return c(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(l.apply(t,n))}var u=r.prototype,p=i(s(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},function(t,e,r){var n=r(9),i=r(0),o=r(3),a=r(26);i(i.S+i.F*r(2)((function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(t,e,r){o(t),e=a(e,!0),o(r);try{return n.f(t,e,r),!0}catch(t){return!1}}})},function(t,e,r){var n=r(0),i=r(20).f,o=r(3);n(n.S,"Reflect",{deleteProperty:function(t,e){var r=i(o(t),e);return!(r&&!r.configurable)&&delete t[e]}})},function(t,e,r){"use strict";var n=r(0),i=r(3),o=function(t){this._t=i(t),this._i=0;var e,r=this._k=[];for(e in t)r.push(e)};r(103)(o,"Object",(function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}})),n(n.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,r){var n=r(20),i=r(35),o=r(13),a=r(0),s=r(4),u=r(3);a(a.S,"Reflect",{get:function t(e,r){var a,l,c=arguments.length<3?e:arguments[2];return u(e)===c?e[r]:(a=n.f(e,r))?o(a,"value")?a.value:void 0!==a.get?a.get.call(c):void 0:s(l=i(e))?t(l,r,c):void 0}})},function(t,e,r){var n=r(20),i=r(0),o=r(3);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(o(t),e)}})},function(t,e,r){var n=r(0),i=r(35),o=r(3);n(n.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,r){var n=r(0),i=r(3),o=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,r){var n=r(0);n(n.S,"Reflect",{ownKeys:r(117)})},function(t,e,r){var n=r(0),i=r(3),o=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,r){var n=r(9),i=r(20),o=r(35),a=r(13),s=r(0),u=r(28),l=r(3),c=r(4);s(s.S,"Reflect",{set:function t(e,r,s){var h,f,p=arguments.length<4?e:arguments[3],d=i.f(l(e),r);if(!d){if(c(f=o(e)))return t(f,r,s,p);d=u(0)}if(a(d,"value")){if(!1===d.writable||!c(p))return!1;if(h=i.f(p,r)){if(h.get||h.set||!1===h.writable)return!1;h.value=s,n.f(p,r,h)}else n.f(p,r,u(0,s));return!0}return void 0!==d.set&&(d.set.call(p,s),!0)}})},function(t,e,r){var n=r(0),i=r(66);i&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,r){r(269),t.exports=r(7).Array.includes},function(t,e,r){"use strict";var n=r(0),i=r(49)(!0);n(n.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),r(36)("includes")},function(t,e,r){r(271),t.exports=r(7).Array.flatMap},function(t,e,r){"use strict";var n=r(0),i=r(272),o=r(10),a=r(6),s=r(18),u=r(105);n(n.P,"Array",{flatMap:function(t){var e,r,n=o(this);return s(t),e=a(n.length),r=u(n,0),i(r,n,n,e,0,1,t,arguments[1]),r}}),r(36)("flatMap")},function(t,e,r){"use strict";var n=r(51),i=r(4),o=r(6),a=r(17),s=r(5)("isConcatSpreadable");t.exports=function t(e,r,u,l,c,h,f,p){for(var d,g,y=c,_=0,v=!!f&&a(f,p,3);_<l;){if(_ in u){if(d=v?v(u[_],_,r):u[_],g=!1,i(d)&&(g=void 0!==(g=d[s])?!!g:n(d)),g&&h>0)y=t(e,r,d,o(d.length),y,h-1)-1;else{if(y>=9007199254740991)throw TypeError();e[y]=d}y++}_++}return y}},function(t,e,r){r(274),t.exports=r(7).String.padStart},function(t,e,r){"use strict";var n=r(0),i=r(118),o=r(57),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,r){r(276),t.exports=r(7).String.padEnd},function(t,e,r){"use strict";var n=r(0),i=r(118),o=r(57),a=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);n(n.P+n.F*a,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,r){r(278),t.exports=r(7).String.trimLeft},function(t,e,r){"use strict";r(39)("trimLeft",(function(t){return function(){return t(this,1)}}),"trimStart")},function(t,e,r){r(280),t.exports=r(7).String.trimRight},function(t,e,r){"use strict";r(39)("trimRight",(function(t){return function(){return t(this,2)}}),"trimEnd")},function(t,e,r){r(282),t.exports=r(62).f("asyncIterator")},function(t,e,r){r(90)("asyncIterator")},function(t,e,r){r(284),t.exports=r(7).Object.getOwnPropertyDescriptors},function(t,e,r){var n=r(0),i=r(117),o=r(15),a=r(20),s=r(78);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,r,n=o(t),u=a.f,l=i(n),c={},h=0;l.length>h;)void 0!==(r=u(n,e=l[h++]))&&s(c,e,r);return c}})},function(t,e,r){r(286),t.exports=r(7).Object.values},function(t,e,r){var n=r(0),i=r(119)(!1);n(n.S,"Object",{values:function(t){return i(t)}})},function(t,e,r){r(288),t.exports=r(7).Object.entries},function(t,e,r){var n=r(0),i=r(119)(!0);n(n.S,"Object",{entries:function(t){return i(t)}})},function(t,e,r){"use strict";r(111),r(290),t.exports=r(7).Promise.finally},function(t,e,r){"use strict";var n=r(0),i=r(7),o=r(1),a=r(47),s=r(113);n(n.P+n.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),r="function"==typeof t;return this.then(r?function(r){return s(e,t()).then((function(){return r}))}:t,r?function(r){return s(e,t()).then((function(){throw r}))}:t)}})},function(t,e,r){r(292),r(293),r(294),t.exports=r(7)},function(t,e,r){var n=r(1),i=r(0),o=r(57),a=[].slice,s=/MSIE .\./.test(o),u=function(t){return function(e,r){var n=arguments.length>2,i=!!n&&a.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,r)}};i(i.G+i.B+i.F*s,{setTimeout:u(n.setTimeout),setInterval:u(n.setInterval)})},function(t,e,r){var n=r(0),i=r(84);n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,r){for(var n=r(81),i=r(31),o=r(11),a=r(1),s=r(14),u=r(40),l=r(5),c=l("iterator"),h=l("toStringTag"),f=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),g=0;g<d.length;g++){var y,_=d[g],v=p[_],m=a[_],b=m&&m.prototype;if(b&&(b[c]||s(b,c,f),b[h]||s(b,h,_),u[_]=f,v))for(y in n)b[y]||o(b,y,n[y],!0)}},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r,n){var i=e&&e.prototype instanceof c?e:c,o=Object.create(i.prototype),a=new x(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return E()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=m(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===l)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var l={};function c(){}function h(){}function f(){}var p={};p[i]=function(){return this};var d=Object.getPrototypeOf,g=d&&d(d(S([])));g&&g!==e&&r.call(g,i)&&(p=g);var y=f.prototype=c.prototype=Object.create(p);function _(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function v(t,e){var n;this._invoke=function(i,o){function a(){return new e((function(n,a){!function n(i,o,a,s){var l=u(t[i],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function m(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,m(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=y.constructor=f,f.constructor=h,f[a]=h.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},_(v.prototype),v.prototype[o]=function(){return this},t.AsyncIterator=v,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new v(s(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(y),y[a]="Generator",y[i]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=S,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;w(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){r(297),t.exports=r(120).global},function(t,e,r){var n=r(298);n(n.G,{global:r(86)})},function(t,e,r){var n=r(86),i=r(120),o=r(299),a=r(301),s=r(308),u=function(t,e,r){var l,c,h,f=t&u.F,p=t&u.G,d=t&u.S,g=t&u.P,y=t&u.B,_=t&u.W,v=p?i:i[e]||(i[e]={}),m=v.prototype,b=p?n:d?n[e]:(n[e]||{}).prototype;for(l in p&&(r=e),r)(c=!f&&b&&void 0!==b[l])&&s(v,l)||(h=c?b[l]:r[l],v[l]=p&&"function"!=typeof b[l]?r[l]:y&&c?o(h,n):_&&b[l]==h?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(h):g&&"function"==typeof h?o(Function.call,h):h,g&&((v.virtual||(v.virtual={}))[l]=h,t&u.R&&m&&!m[l]&&a(m,l,h)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e,r){var n=r(300);t.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,r){var n=r(302),i=r(307);t.exports=r(88)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},function(t,e,r){var n=r(303),i=r(304),o=r(306),a=Object.defineProperty;e.f=r(88)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},function(t,e,r){var n=r(87);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e,r){t.exports=!r(88)&&!r(121)((function(){return 7!=Object.defineProperty(r(305)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,r){var n=r(87),i=r(86).document,o=n(i)&&n(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,r){var n=r(87);t.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var r={}.hasOwnProperty;t.exports=function(t,e){return r.call(t,e)}},function(t,e,r){(function(r){var n,i,o,a;function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a=function(){return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};e[a][0].call(l.exports,(function(t){var r=e[a][1][t];return i(r||t)}),l,l.exports,t,e,r,n)}return r[a].exports}for(var o=!1,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){(function(r){"use strict";var n=t("lie");e.exports=function(t){return new n((function(e,n){var i=t.slice(-3),o=new XMLHttpRequest;o.open("GET",t,!0),"prj"!==i&&"cpg"!==i&&(o.responseType="arraybuffer"),o.addEventListener("load",(function(){return o.status>399?"prj"===i||"cpg"===i?e(!1):n(new Error(o.status)):e("prj"!==i&&"cpg"!==i?new r(o.response):o.response)}),!1),o.send()}))}}).call(this,t("buffer").Buffer)},{buffer:6,lie:34}],2:[function(t,e,r){"use strict";function n(t,e){return!function(t){for(var e,r,n=0,i=1,o=t.length;i<o;)e=r||t[0],n+=((r=t[i])[0]-e[0])*(r[1]+e[1]),i++;return n>0}(e)&&t.length?t[t.length-1].push(e):t.push([e]),t}o.prototype.parsePoint=function(t){return{type:"Point",coordinates:this.parseCoord(t,0)}},o.prototype.parseZPoint=function(t){var e=this.parsePoint(t);return e.coordinates.push(this.parseCoord(t,16)),e},o.prototype.parsePointArray=function(t,e,r){for(var n=[],i=0;i<r;)n.push(this.parseCoord(t,e)),e+=16,i++;return n},o.prototype.parseZPointArray=function(t,e,r,n){for(var i=0;i<r;)n[i].push(t.readDoubleLE(e)),i++,e+=8;return n},o.prototype.parseArrayGroup=function(t,e,r,n,i){for(var o,a,s=[],u=0,l=0;u<n;)r+=4,o=l,(a=(l=++u===n?i:t.readInt32LE(r))-o)&&(s.push(this.parsePointArray(t,e,a)),e+=a<<4);return s},o.prototype.parseZArrayGroup=function(t,e,r,n){for(var i=0;i<r;)n[i]=this.parseZPointArray(t,e,n[i].length,n[i]),e+=n[i].length<<3,i++;return n},o.prototype.parseMultiPoint=function(t){var e={},r=this.parseCoord(t,0),n=this.parseCoord(t,16);e.bbox=[r[0],r[1],n[0],n[1]];var i=t.readInt32LE(32,!0);return 1===i?(e.type="Point",e.coordinates=this.parseCoord(t,36)):(e.type="MultiPoint",e.coordinates=this.parsePointArray(t,36,i)),e},o.prototype.parseZMultiPoint=function(t){var e,r=this.parseMultiPoint(t);if("Point"===r.type)return r.coordinates.push(t.readDoubleLE(72)),r;var n=52+((e=r.coordinates.length)<<4);return r.coordinates=this.parseZPointArray(t,n,e,r.coordinates),r},o.prototype.parsePolyline=function(t){var e={},r=this.parseCoord(t,0),n=this.parseCoord(t,16);e.bbox=[r[0],r[1],n[0],n[1]];var i,o=t.readInt32LE(32),a=t.readInt32LE(36);return 1===o?(e.type="LineString",i=44,e.coordinates=this.parsePointArray(t,i,a)):(e.type="MultiLineString",i=40+(o<<2),e.coordinates=this.parseArrayGroup(t,i,40,o,a)),e},o.prototype.parseZPolyline=function(t){var e,r=this.parsePolyline(t),n=r.coordinates.length;return"LineString"===r.type?(e=60+(n<<4),r.coordinates=this.parseZPointArray(t,e,n,r.coordinates),r):(e=56+(r.coordinates.reduce((function(t,e){return t+e.length}),0)<<4)+(n<<2),r.coordinates=this.parseZArrayGroup(t,e,n,r.coordinates),r)},o.prototype.polyFuncs=function(t){return"LineString"===t.type?(t.type="Polygon",t.coordinates=[t.coordinates],t):(t.coordinates=t.coordinates.reduce(n,[]),1===t.coordinates.length?(t.type="Polygon",t.coordinates=t.coordinates[0],t):(t.type="MultiPolygon",t))},o.prototype.parsePolygon=function(t){return this.polyFuncs(this.parsePolyline(t))},o.prototype.parseZPolygon=function(t){return this.polyFuncs(this.parseZPolyline(t))};var i={1:"parsePoint",3:"parsePolyline",5:"parsePolygon",8:"parseMultiPoint",11:"parseZPoint",13:"parseZPolyline",15:"parseZPolygon",18:"parseZMultiPoint"};function o(t,e){if(!(this instanceof o))return new o(t,e);this.buffer=t,this.shpFuncs(e),this.rows=this.getRows()}o.prototype.shpFuncs=function(t){var e,r=this.getShpCode();if(r>20&&(r-=20),!(r in i))throw new Error("I don't know that shp type");this.parseFunc=this[i[r]],this.parseCoord=(e=t)?function(t,r){return e.inverse([t.readDoubleLE(r),t.readDoubleLE(r+8)])}:function(t,e){return[t.readDoubleLE(e),t.readDoubleLE(e+8)]}},o.prototype.getShpCode=function(){return this.parseHeader().shpCode},o.prototype.parseHeader=function(){var t=this.buffer.slice(0,100);return{length:t.readInt32BE(24),version:t.readInt32LE(28),shpCode:t.readInt32LE(32),bbox:[t.readDoubleLE(36),t.readDoubleLE(44),t.readDoubleLE(52),t.readDoubleLE(52)]}},o.prototype.getRows=function(){for(var t,e=100,r=this.buffer.byteLength,n=[];e<r;)t=this.getRow(e),e+=8,e+=t.len,t.type&&n.push(this.parseFunc(t.data));return n},o.prototype.getRow=function(t){var e=this.buffer.slice(t,t+12),r=e.readInt32BE(4)<<1,n=this.buffer.slice(t+12,t+r+8);return{id:e.readInt32BE(0),len:r,data:n,type:e.readInt32LE(8)}},e.exports=function(t,e){return new o(t,e).rows}},{}],3:[function(t,e,r){"use strict";var n=t("jszip");e.exports=function(t){var e=new n(t).file(/.+/),r={};return e.forEach((function(t){"shp"===t.name.slice(-3).toLowerCase()||"dbf"===t.name.slice(-3).toLowerCase()?r[t.name]=t.asNodeBuffer():r[t.name]=t.asText()})),r}},{jszip:19}],4:[function(t,e,r){"use strict";r.byteLength=function(t){return 3*t.length/4-l(t)},r.toByteArray=function(t){var e,r,n,a,s,u=t.length;a=l(t),s=new o(3*u/4-a),r=a>0?u-4:u;var c=0;for(e=0;e<r;e+=4)n=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],s[c++]=n>>16&255,s[c++]=n>>8&255,s[c++]=255&n;return 2===a?(n=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,s[c++]=255&n):1===a&&(n=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,s[c++]=n>>8&255,s[c++]=255&n),s},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o="",a=[],s=0,u=r-i;s<u;s+=16383)a.push(c(t,s,s+16383>u?u:s+16383));return 1===i?(e=t[r-1],o+=n[e>>2],o+=n[e<<4&63],o+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],o+=n[e>>10],o+=n[e>>4&63],o+=n[e<<2&63],o+="="),a.push(o),a.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function c(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],5:[function(t,e,r){},{}],6:[function(t,e,n){(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */"use strict";var r=t("base64-js"),i=t("ieee754"),o=t("isarray");function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return M(this,e,r);case"ascii":return P(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function m(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function b(t,e,r,n){return B(z(e,t.length-r),t,r,n)}function w(t,e,r,n){return B(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function S(t,e,r,n){return B(G(e),t,r,n)}function E(t,e,r,n){return B(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function M(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){var n,i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var o="",a=e;a<r;++a)o+=(n=t[a])<16?"0"+n.toString(16):n.toString(16);return o}function I(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function F(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,o){return o||F(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,o){return o||F(t,0,r,8),i.write(t,e,r,n,52,8),r+8}n.Buffer=u,n.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=t.slice(e,r),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:z(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function z(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":4,ieee754:7,isarray:9}],7:[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*g}},{}],8:[function(t,e,n){(function(t){"use strict";var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,r=function(){u.port2.postMessage(0)}}var l=[];function c(){var t,e;n=!0;for(var r=l.length;r;){for(e=l,l=[],t=-1;++t<r;)e[t]();r=l.length}n=!1}e.exports=function(t){1!==l.push(t)||n||r()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],10:[function(t,e,r){"use strict";var n=t("./dataReader");function i(t){if(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0;for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}}i.prototype=new n,i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"./dataReader":15}],11:[function(t,e,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t,e){for(var r,i,o,a,s,u,l,c="",h=0;h<t.length;)a=(r=t.charCodeAt(h++))>>2,s=(3&r)<<4|(i=t.charCodeAt(h++))>>4,u=(15&i)<<2|(o=t.charCodeAt(h++))>>6,l=63&o,isNaN(i)?u=l=64:isNaN(o)&&(l=64),c=c+n.charAt(a)+n.charAt(s)+n.charAt(u)+n.charAt(l);return c},r.decode=function(t,e){var r,i,o,a,s,u,l="",c=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<t.length;)r=n.indexOf(t.charAt(c++))<<2|(a=n.indexOf(t.charAt(c++)))>>4,i=(15&a)<<4|(s=n.indexOf(t.charAt(c++)))>>2,o=(3&s)<<6|(u=n.indexOf(t.charAt(c++))),l+=String.fromCharCode(r),64!=s&&(l+=String.fromCharCode(i)),64!=u&&(l+=String.fromCharCode(o));return l}},{}],12:[function(t,e,r){"use strict";function n(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}n.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=n},{}],13:[function(t,e,r){"use strict";r.STORE={magic:"\0\0",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},r.DEFLATE=t("./flate")},{"./flate":18}],14:[function(t,e,r){"use strict";var n=t("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function(t,e){if(void 0===t||!t.length)return 0;var r="string"!==n.getTypeOf(t);void 0===e&&(e=0);var o=0;e^=-1;for(var a=0,s=t.length;a<s;a++)o=r?t[a]:t.charCodeAt(a),e=e>>>8^i[255&(e^o)];return-1^e}},{"./utils":31}],15:[function(t,e,r){"use strict";var n=t("./utils");function i(t){this.data=null,this.length=0,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=i},{"./utils":31}],16:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],17:[function(t,e,r){"use strict";var n=t("./utils");r.string2binary=function(t){return n.string2binary(t)},r.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},r.uint8Array2String=function(t){return n.transformTo("string",t)},r.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},r.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},r.transformTo=function(t,e){return n.transformTo(t,e)},r.getTypeOf=function(t){return n.getTypeOf(t)},r.checkSupport=function(t){return n.checkSupport(t)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(t){return n.pretty(t)},r.findCompression=function(t){return n.findCompression(t)},r.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":31}],18:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\0",r.compress=function(t,e){return i.deflateRaw(t,{level:e.level||-1})},r.uncompress=function(t){return i.inflateRaw(t)}},{pako:36}],19:[function(t,e,r){"use strict";var n=t("./base64");function i(t,e){if(!(this instanceof i))return new i(t,e);this.files={},this.comment=null,this.root="",t&&this.load(t,e),this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}i.prototype=t("./object"),i.prototype.load=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.utils=t("./deprecatedPublicUtils"),i.base64={encode:function(t){return n.encode(t)},decode:function(t){return n.decode(t)}},i.compressions=t("./compressions"),e.exports=i},{"./base64":11,"./compressions":13,"./defaults":16,"./deprecatedPublicUtils":17,"./load":20,"./object":23,"./support":27}],20:[function(t,e,r){"use strict";var n=t("./base64"),i=t("./utf8"),o=t("./utils"),a=t("./zipEntries");e.exports=function(t,e){var r,s,u,l;for((e=o.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode})).base64&&(t=n.decode(t)),r=(s=new a(t,e)).files,u=0;u<r.length;u++)l=r[u],this.file(l.fileNameStr,l.decompressed,{binary:!0,optimizedBinaryString:!0,date:l.date,dir:l.dir,comment:l.fileCommentStr.length?l.fileCommentStr:null,unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions,createFolders:e.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},{"./base64":11,"./utf8":30,"./utils":31,"./zipEntries":32}],21:[function(t,e,r){(function(t){"use strict";e.exports=function(e,r){return new t(e,r)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,t("buffer").Buffer)},{buffer:6}],22:[function(t,e,r){"use strict";var n=t("./uint8ArrayReader");function i(t){this.data=t,this.length=this.data.length,this.index=0,this.zero=0}i.prototype=new n,i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"./uint8ArrayReader":28}],23:[function(t,e,r){"use strict";var n=t("./support"),i=t("./utils"),o=t("./crc32"),a=t("./signature"),s=t("./defaults"),u=t("./base64"),l=t("./compressions"),c=t("./compressedObject"),h=t("./nodeBuffer"),f=t("./utf8"),p=t("./stringWriter"),d=t("./uint8ArrayWriter"),g=function(t){if(t._data instanceof c&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===i.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},y=function(t){var e=g(t);return"string"===i.getTypeOf(e)?!t.options.binary&&n.nodebuffer?h(e,"utf-8"):t.asBinary():e},_=function(t){var e=g(this);return null==e?"":(this.options.base64&&(e=u.decode(e)),e=t&&this.options.binary?M.utf8decode(e):i.transformTo("string",e),t||this.options.binary||(e=i.transformTo("string",M.utf8encode(e))),e)},v=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};v.prototype={asText:function(){return _.call(this,!0)},asBinary:function(){return _.call(this,!1)},asNodeBuffer:function(){var t=y(this);return i.transformTo("nodebuffer",t)},asUint8Array:function(){var t=y(this);return i.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var m=function(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},b=function(t,e,r){var n,o=i.getTypeOf(e);if("string"==typeof(r=function(t){return!0!==(t=t||{}).base64||null!==t.binary&&void 0!==t.binary||(t.binary=!0),(t=i.extend(t,s)).date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t}(r)).unixPermissions&&(r.unixPermissions=parseInt(r.unixPermissions,8)),r.unixPermissions&&16384&r.unixPermissions&&(r.dir=!0),r.dosPermissions&&16&r.dosPermissions&&(r.dir=!0),r.dir&&(t=x(t)),r.createFolders&&(n=w(t))&&S.call(this,n,!0),r.dir||null==e)r.base64=!1,r.binary=!1,e=null,o=null;else if("string"===o)r.binary&&!r.base64&&!0!==r.optimizedBinaryString&&(e=i.string2binary(e));else{if(r.base64=!1,r.binary=!0,!(o||e instanceof c))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===o&&(e=i.transformTo("uint8array",e))}var a=new v(t,e,r);return this.files[t]=a,a},w=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},x=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},S=function(t,e){return e=void 0!==e&&e,t=x(t),this.files[t]||b.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},E=function(t,e,r){var n,a=new c;return t._data instanceof c?(a.uncompressedSize=t._data.uncompressedSize,a.crc32=t._data.crc32,0===a.uncompressedSize||t.dir?(e=l.STORE,a.compressedContent="",a.crc32=0):t._data.compressionMethod===e.magic?a.compressedContent=t._data.getCompressedContent():(n=t._data.getContent(),a.compressedContent=e.compress(i.transformTo(e.compressInputType,n),r))):((n=y(t))&&0!==n.length&&!t.dir||(e=l.STORE,n=""),a.uncompressedSize=n.length,a.crc32=o(n),a.compressedContent=e.compress(i.transformTo(e.compressInputType,n),r)),a.compressedSize=a.compressedContent.length,a.compressionMethod=e.magic,a},O=function(t,e,r,n,s,u){r.compressedContent;var l,c,h,p,d=u!==f.utf8encode,g=i.transformTo("string",u(e.name)),y=i.transformTo("string",f.utf8encode(e.name)),_=e.comment||"",v=i.transformTo("string",u(_)),b=i.transformTo("string",f.utf8encode(_)),w=y.length!==e.name.length,x=b.length!==_.length,S=e.options,E="",O="",M="";h=e._initialMetadata.dir!==e.dir?e.dir:S.dir,p=e._initialMetadata.date!==e.date?e.date:S.date;var P,T,C,I=0,R=0;h&&(I|=16),"UNIX"===s?(R=798,I|=(P=e.unixPermissions,T=h,C=P,P||(C=T?16893:33204),(65535&C)<<16)):(R=20,I|=63&(e.dosPermissions||0)),l=p.getHours(),l<<=6,l|=p.getMinutes(),l<<=5,l|=p.getSeconds()/2,c=p.getFullYear()-1980,c<<=4,c|=p.getMonth()+1,c<<=5,c|=p.getDate(),w&&(O=m(1,1)+m(o(g),4)+y,E+="up"+m(O.length,2)+O),x&&(M=m(1,1)+m(this.crc32(v),4)+b,E+="uc"+m(M.length,2)+M);var L="";return L+="\n\0",L+=d||!w&&!x?"\0\0":"\0\b",L+=r.compressionMethod,L+=m(l,2),L+=m(c,2),L+=m(r.crc32,4),L+=m(r.compressedSize,4),L+=m(r.uncompressedSize,4),L+=m(g.length,2),L+=m(E.length,2),{fileRecord:a.LOCAL_FILE_HEADER+L+g+E,dirRecord:a.CENTRAL_FILE_HEADER+m(R,2)+L+m(v.length,2)+"\0\0\0\0"+m(I,4)+m(n,4)+g+E+v,compressedObject:r}},M={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e,r,n,o,a=[];for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],o=new v(n.name,n._data,i.extend(n.options)),r=e.slice(this.root.length,e.length),e.slice(0,this.root.length)===this.root&&t(r,o)&&a.push(o));return a},file:function(t,e,r){if(1===arguments.length){if(i.isRegExp(t)){var n=t;return this.filter((function(t,e){return!e.dir&&n.test(t)}))}return this.filter((function(e,r){return!r.dir&&e===t}))[0]||null}return t=this.root+t,b.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(i.isRegExp(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=S.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){t=i.extend(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode}),i.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e,r,n,o=[],s=0,c=0,h=i.transformTo("string",t.encodeFileName(t.comment||this.comment||""));for(var g in this.files)if(this.files.hasOwnProperty(g)){var y=this.files[g],_=y.options.compression||t.compression.toUpperCase(),v=l[_];if(!v)throw new Error(_+" is not a valid compression method !");var b=y.options.compressionOptions||t.compressionOptions||{},w=E.call(this,y,v,b),x=O.call(this,g,y,w,s,t.platform,t.encodeFileName);s+=x.fileRecord.length+w.compressedSize,c+=x.dirRecord.length,o.push(x)}n=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+m(o.length,2)+m(o.length,2)+m(c,4)+m(s,4)+m(h.length,2)+h;var S=t.type.toLowerCase();for(e="uint8array"===S||"arraybuffer"===S||"blob"===S||"nodebuffer"===S?new d(s+c+n.length):new p(s+c+n.length),r=0;r<o.length;r++)e.append(o[r].fileRecord),e.append(o[r].compressedObject.compressedContent);for(r=0;r<o.length;r++)e.append(o[r].dirRecord);e.append(n);var M=e.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(t.type.toLowerCase(),M);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",M),t.mimeType);case"base64":return t.base64?u.encode(M):M;default:return M}},crc32:function(t,e){return o(t,e)},utf8encode:function(t){return i.transformTo("string",f.utf8encode(t))},utf8decode:function(t){return f.utf8decode(t)}};e.exports=M},{"./base64":11,"./compressedObject":12,"./compressions":13,"./crc32":14,"./defaults":16,"./nodeBuffer":21,"./signature":24,"./stringWriter":26,"./support":27,"./uint8ArrayWriter":29,"./utf8":30,"./utils":31}],24:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],25:[function(t,e,r){"use strict";var n=t("./dataReader"),i=t("./utils");function o(t,e){this.data=t,e||(this.data=i.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}o.prototype=new n,o.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},o.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},o.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=o},{"./dataReader":15,"./utils":31}],26:[function(t,e,r){"use strict";var n=t("./utils"),i=function(){this.data=[]};i.prototype={append:function(t){t=n.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=i},{"./utils":31}],27:[function(t,e,r){(function(t){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var e=new ArrayBuffer(0);try{r.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);n.append(e),r.blob=0===n.getBlob("application/zip").size}catch(t){r.blob=!1}}}}).call(this,t("buffer").Buffer)},{buffer:6}],28:[function(t,e,r){"use strict";var n=t("./arrayReader");function i(t){t&&(this.data=t,this.length=this.data.length,this.index=0,this.zero=0)}i.prototype=new n,i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"./arrayReader":10}],29:[function(t,e,r){"use strict";var n=t("./utils"),i=function(t){this.data=new Uint8Array(t),this.index=0};i.prototype={append:function(t){0!==t.length&&(t=n.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=i},{"./utils":31}],30:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),o=t("./nodeBuffer"),a=new Array(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var u=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e},l=function(t){var e,r,i,o,s=t.length,u=new Array(2*s);for(r=0,e=0;e<s;)if((i=t[e++])<128)u[r++]=i;else if((o=a[i])>4)u[r++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<s;)i=i<<6|63&t[e++],o--;o>1?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)};r.utf8encode=function(t){return i.nodebuffer?o(t,"utf-8"):function(t){var e,r,n,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e}(t)},r.utf8decode=function(t){if(i.nodebuffer)return n.transformTo("nodebuffer",t).toString("utf-8");for(var e=[],r=0,o=(t=n.transformTo(i.uint8array?"uint8array":"array",t)).length;r<o;){var a=u(t,Math.min(r+65536,o));i.uint8array?e.push(l(t.subarray(r,a))):e.push(l(t.slice(r,a))),r=a}return e.join("")}},{"./nodeBuffer":21,"./support":27,"./utils":31}],31:[function(t,e,r){"use strict";var n=t("./support"),i=t("./compressions"),o=t("./nodeBuffer");function a(t){return t}function s(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function u(t){var e=65536,n=[],i=t.length,a=r.getTypeOf(t),s=0,u=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,o(0))}}catch(t){u=!1}if(!u){for(var l="",c=0;c<t.length;c++)l+=String.fromCharCode(t[c]);return l}for(;s<i&&e>1;)try{"array"===a||"nodebuffer"===a?n.push(String.fromCharCode.apply(null,t.slice(s,Math.min(s+e,i)))):n.push(String.fromCharCode.apply(null,t.subarray(s,Math.min(s+e,i)))),s+=e}catch(t){e=Math.floor(e/2)}return n.join("")}function l(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.string2binary=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r));return e},r.arrayBuffer2Blob=function(t,e){r.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(r){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=u;var c={};c.string={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return c.string.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:function(t){return s(t,o(t.length))}},c.array={string:u,array:a,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(t)}},c.arraybuffer={string:function(t){return u(new Uint8Array(t))},array:function(t){return l(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:a,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o(new Uint8Array(t))}},c.uint8array={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:a,nodebuffer:function(t){return o(t)}},c.nodebuffer={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return c.nodebuffer.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:a},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return c[n][t](e)},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&o.test(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},r.findCompression=function(t){for(var e in i)if(i.hasOwnProperty(e)&&i[e].magic===t)return i[e];return null},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r}},{"./compressions":13,"./nodeBuffer":21,"./support":27}],32:[function(t,e,r){"use strict";var n=t("./stringReader"),i=t("./nodeBufferReader"),o=t("./uint8ArrayReader"),a=t("./arrayReader"),s=t("./utils"),u=t("./signature"),l=t("./zipEntry"),c=t("./support");function h(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}t("./object"),h.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+s.pretty(e)+", expected "+s.pretty(t)+")")},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=c.uint8array?"uint8array":"array",r=s.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===u.CENTRAL_FILE_HEADER;)(t=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip : can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(n>0)this.isSignature(e,u.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){var e=s.getTypeOf(t);if(s.checkSupport(e),"string"!==e||c.uint8array)if("nodebuffer"===e)this.reader=new i(t);else if(c.uint8array)this.reader=new o(s.transformTo("uint8array",t));else{if(!c.array)throw new Error("Unexpected error: unsupported type '"+e+"'");this.reader=new a(s.transformTo("array",t))}else this.reader=new n(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=h},{"./arrayReader":10,"./nodeBufferReader":22,"./object":23,"./signature":24,"./stringReader":25,"./support":27,"./uint8ArrayReader":28,"./utils":31,"./zipEntry":33}],33:[function(t,e,r){"use strict";var n=t("./stringReader"),i=t("./utils"),o=t("./compressedObject"),a=t("./object"),s=t("./support");function u(t,e){this.options=t,this.loadOptions=e}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(t,e,r){return function(){var n=t.index;t.setIndex(e);var i=t.readData(r);return t.setIndex(n),i}},prepareContent:function(t,e,r,n,o){return function(){var t=i.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==o)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(e=i.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");if(this.decompressed=new o,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=i.transformTo("string",this.decompressed.getContent()),a.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readData(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index;for(this.extraFields=this.extraFields||{};t.index<i+this.extraFieldsLength;)e=t.readInt(2),r=t.readInt(2),n=t.readString(r),this.extraFields[e]={id:e,length:r,value:n}},handleUTF8:function(){var t=s.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new n(t.value);return 1!==e.readInt(1)||a.crc32(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new n(t.value);return 1!==e.readInt(1)||a.crc32(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readString(t.length-5))}return null}},e.exports=u},{"./compressedObject":12,"./object":23,"./stringReader":25,"./support":27,"./utils":31}],34:[function(t,e,r){"use strict";var n=t("immediate");function i(){}var o={},a=["REJECTED"],u=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function h(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){n((function(){var n;try{n=e(r)}catch(e){return o.reject(t,e)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n)}))}function p(t){var e=t&&t.then;if(t&&("object"===s(t)||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,o.reject(t,e))}function i(e){r||(r=!0,o.resolve(t,e))}var a=g((function(){e(i,n)}));"error"===a.status&&n(a.value)}function g(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===u||"function"!=typeof e&&this.state===a)return this;var r=new this.constructor(i);return this.state!==l?f(r,this.state===u?t:e,this.outcome):this.queue.push(new h(r,t,e)),r},h.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){o.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},o.resolve=function(t,e){var r=g(p,e);if("error"===r.status)return o.reject(t,r.value);var n=r.value;if(n)d(t,n);else{t.state=u,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,u=-1,l=new this(i);++u<r;)c(t[u],u);return l;function c(t,i){e.resolve(t).then((function(t){a[i]=t,++s!==r||n||(n=!0,o.resolve(l,a))}),(function(t){n||(n=!0,o.reject(l,t))}))}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a,s=-1,u=new this(i);++s<r;)a=t[s],e.resolve(a).then((function(t){n||(n=!0,o.resolve(u,t))}),(function(t){n||(n=!0,o.reject(u,t))}));return u}},{immediate:8}],35:[function(t,e,r){!function(){function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function r(){return 1}"object"===s(e)&&e.exports?e.exports=o:this.LRUCache=o;var n=!1;function i(t){n||"string"==typeof t||"number"==typeof t||(n=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+s(t)).stack))}function o(t){if(!(this instanceof o))return new o(t);"number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||r,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=r),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,this.reset()}function a(t,e,r){i(e);var n=t._cache[e];return n&&(u(t,n)?(h(t,n),t._allowStale||(n=void 0)):r&&function(t,e){c(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}(t,n),n&&(n=n.value)),n}function u(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t._maxAge&&r>t._maxAge}function l(t){for(;t._lru<t._mru&&t._length>t._max;)h(t,t._lruList[t._lru])}function c(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function h(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],c(t,e))}function f(t,e,r,n,i,o){this.key=t,this.value=e,this.lu=r,this.length=n,this.now=i,o&&(this.maxAge=o)}Object.defineProperty(o.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this._max=t,this._length>this._max&&l(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(o.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t)for(var e in this._lengthCalculator=r,this._length=this._itemCount,this._cache)this._cache[e].length=1;else for(var e in this._lengthCalculator=t,this._length=0,this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length;this._length>this._max&&l(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(o.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),o.prototype.forEach=function(t,e){e=e||this;for(var r=0,n=this._itemCount,i=this._mru-1;i>=0&&r<n;i--)if(this._lruList[i]){r++;var o=this._lruList[i];u(this,o)&&(h(this,o),this._allowStale||(o=void 0)),o&&t.call(e,o.value,o.key,this)}},o.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,r=this._mru-1;r>=0&&e<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];t[e++]=n.key}return t},o.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,r=this._mru-1;r>=0&&e<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];t[e++]=n.value}return t},o.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},o.prototype.dump=function(){for(var t=[],e=0,r=this._mru-1;r>=0&&e<this._itemCount;r--)if(this._lruList[r]){var n=this._lruList[r];u(this,n)||(++e,t.push({k:n.key,v:n.value,e:n.now+(n.maxAge||0)}))}return t},o.prototype.dumpLru=function(){return this._lruList},o.prototype.set=function(e,r,n){n=n||this._maxAge,i(e);var o=n?Date.now():0,a=this._lengthCalculator(r);if(t(this._cache,e))return a>this._max?(h(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=o,this._cache[e].maxAge=n,this._cache[e].value=r,this._length+=a-this._cache[e].length,this._cache[e].length=a,this.get(e),this._length>this._max&&l(this),!0);var s=new f(e,r,this._mru++,a,o,n);return s.length>this._max?(this._dispose&&this._dispose(e,r),!1):(this._length+=s.length,this._lruList[s.lu]=this._cache[e]=s,this._itemCount++,this._length>this._max&&l(this),!0)},o.prototype.has=function(e){return i(e),!!t(this._cache,e)&&!u(this,this._cache[e])},o.prototype.get=function(t){return i(t),a(this,t,!0)},o.prototype.peek=function(t){return i(t),a(this,t,!1)},o.prototype.pop=function(){var t=this._lruList[this._lru];return h(this,t),t||null},o.prototype.del=function(t){i(t),h(this,this._cache[t])},o.prototype.load=function(t){this.reset();for(var e=Date.now(),r=t.length-1;r>=0;r--){var n=t[r];i(n.k);var o=n.e||0;if(0===o)this.set(n.k,n.v);else{var a=o-e;a>0&&this.set(n.k,n.v,a)}}}}()},{}],36:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":37,"./lib/inflate":38,"./lib/utils/common":39,"./lib/zlib/constants":42}],37:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),u=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(a[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(a[r]);this._dict_set=!0}}function c(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg||a[r.err];return r.result}l.prototype.push=function(t,e){var r,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(r=n.deflate(s,a))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),s.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=l,r.deflate=c,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},{"./utils/common":39,"./utils/strings":40,"./zlib/deflate":44,"./zlib/messages":49,"./zlib/zstream":51}],38:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),u=t("./zlib/zstream"),l=t("./zlib/gzheader"),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function f(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg||s[r.err];return r.result}h.prototype.push=function(t,e){var r,s,u,l,h,f,p=this.strm,d=this.options.chunkSize,g=this.options.dictionary,y=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(d),p.next_out=0,p.avail_out=d),(r=n.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(f="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===c.call(g)?new Uint8Array(g):g,r=n.inflateSetDictionary(this.strm,f)),r===a.Z_BUF_ERROR&&!0===y&&(r=a.Z_OK,y=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&r!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(p.output,p.next_out),l=p.next_out-u,h=o.buf2string(p.output,u),p.next_out=l,p.avail_out=d-l,l&&i.arraySet(p.output,p.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(y=!0)}while((p.avail_in>0||0===p.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),p.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=h,r.inflate=f,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},r.ungzip=f},{"./utils/common":39,"./utils/strings":40,"./zlib/constants":42,"./zlib/gzheader":45,"./zlib/inflate":47,"./zlib/messages":49,"./zlib/zstream":51}],39:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!==s(r))throw new TypeError(r+"must be non-object");for(var n in r)i(r,n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var o={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},a={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],40:[function(t,e,r){"use strict";var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,r.string2buf=function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,s=e||t.length,l=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)l[n++]=i;else if((o=a[i])>4)l[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}},{"./common":39}],41:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},{}],42:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],43:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var o=n,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},{}],44:[function(t,e,r){"use strict";var n,i=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),u=t("./messages");function l(t,e){return t.msg=u[e],e}function c(t){return(t<<1)-(t>4?9:0)}function h(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function p(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function d(t,e){t.pending_buf[t.pending++]=e}function g(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function y(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+258,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(r=e)+a]===d&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<f);if(n=258-(f-o),o=f-258,n>a){if(t.match_start=e,a=n,n>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function _(t){var e,r,n,o,u,l,c,h,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-262)){i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--r);e=r=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--r);o+=d}if(0===t.strm.avail_in)break;if(l=t.strm,c=t.window,h=t.strstart+t.lookahead,f=o,p=void 0,(p=l.avail_in)>f&&(p=f),r=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,c,p,h):2===l.state.wrap&&(l.adler=s(l.adler,c,p,h)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function v(t,e){for(var r,n;;){if(t.lookahead<262){if(_(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function m(t,e){for(var r,n,i;;){if(t.lookahead<262){if(_(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(p(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&p(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):l(t,-2)}function S(t){var e,r=x(t);return 0===r&&((e=t.state).window_size=2*e.w_size,h(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function E(t,e,r,n,o,a){if(!t)return-2;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||8!==r||n<8||n>15||e<0||e>9||a<0||a>4)return l(t,-2);8===n&&(n=9);var u=new w;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,S(t)}n=[new b(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,p(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(p(t,!1),t.strm.avail_out),1)})),new b(4,4,8,4,v),new b(4,5,16,8,v),new b(4,6,32,32,v),new b(4,4,16,16,m),new b(8,16,32,32,m),new b(8,16,128,128,m),new b(8,32,128,256,m),new b(32,128,258,1024,m),new b(32,258,258,4096,m)],r.deflateInit=function(t,e){return E(t,e,8,15,8,0)},r.deflateInit2=E,r.deflateReset=S,r.deflateResetKeep=x,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},r.deflate=function(t,e){var r,i,a,u;if(!t||!t.state||e>5||e<0)return t?l(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,d(i,31),d(i,139),d(i,8),i.gzhead?(d(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),d(i,255&i.gzhead.time),d(i,i.gzhead.time>>8&255),d(i,i.gzhead.time>>16&255),d(i,i.gzhead.time>>24&255),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(d(i,255&i.gzhead.extra.length),d(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(d(i,0),d(i,0),d(i,0),d(i,0),d(i,0),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,g(i,y),0!==i.strstart&&(g(i,t.adler>>>16),g(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending!==i.pending_buf_size));)d(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(t),i.pending+2<=i.pending_buf_size&&(d(i,255&t.adler),d(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(f(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&c(e)<=c(r)&&4!==e)return l(t,-5);if(666===i.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var v=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=258){if(_(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+258;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=258-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(d(i,255&t.adler),d(i,t.adler>>8&255),d(i,t.adler>>16&255),d(i,t.adler>>24&255),d(i,255&t.total_in),d(i,t.total_in>>8&255),d(i,t.total_in>>16&255),d(i,t.total_in>>24&255)):(g(i,t.adler>>>16),g(i,65535&t.adler)),f(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0):-2},r.deflateSetDictionary=function(t,e){var r,n,o,s,u,l,c,f,p=e.length;if(!t||!t.state)return-2;if(2===(s=(r=t.state).wrap)||1===s&&42!==r.status||r.lookahead)return-2;for(1===s&&(t.adler=a(t.adler,e,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(h(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new i.Buf8(r.w_size),i.arraySet(f,e,p-r.w_size,r.w_size,0),e=f,p=r.w_size),u=t.avail_in,l=t.next_in,c=t.input,t.avail_in=p,t.next_in=0,t.input=e,_(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=2,_(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=u,r.wrap=s,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":39,"./adler32":41,"./crc32":43,"./messages":49,"./trees":50}],45:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],46:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,b,w,x,S,E,O,M;r=t.state,n=t.next_in,O=t.input,i=n+(t.avail_in-5),o=t.next_out,M=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,p=r.hold,d=r.bits,g=r.lencode,y=r.distcode,_=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{d<15&&(p+=O[n++]<<d,d+=8,p+=O[n++]<<d,d+=8),m=g[p&_];e:for(;;){if(p>>>=b=m>>>24,d-=b,0==(b=m>>>16&255))M[o++]=65535&m;else{if(!(16&b)){if(0==(64&b)){m=g[(65535&m)+(p&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&m,(b&=15)&&(d<b&&(p+=O[n++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=O[n++]<<d,d+=8,p+=O[n++]<<d,d+=8),m=y[p&v];r:for(;;){if(p>>>=b=m>>>24,d-=b,!(16&(b=m>>>16&255))){if(0==(64&b)){m=y[(65535&m)+(p&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&m,d<(b&=15)&&(p+=O[n++]<<d,(d+=8)<b&&(p+=O[n++]<<d,d+=8)),(x+=p&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=b,d-=b,x>(b=o-a)){if((b=x-b)>c&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(S=0,E=f,0===h){if(S+=l-b,b<w){w-=b;do{M[o++]=f[S++]}while(--b);S=o-x,E=M}}else if(h<b){if(S+=l+h-b,(b-=h)<w){w-=b;do{M[o++]=f[S++]}while(--b);if(S=0,h<w){w-=b=h;do{M[o++]=f[S++]}while(--b);S=o-x,E=M}}}else if(S+=h-b,b<w){w-=b;do{M[o++]=f[S++]}while(--b);S=o-x,E=M}for(;w>2;)M[o++]=E[S++],M[o++]=E[S++],M[o++]=E[S++],w-=3;w&&(M[o++]=E[S++],w>1&&(M[o++]=E[S++]))}else{S=o-x;do{M[o++]=M[S++],M[o++]=M[S++],M[o++]=M[S++],w-=3}while(w>2);w&&(M[o++]=M[S++],w>1&&(M[o++]=M[S++]))}break}}break}}while(n<i&&o<s);n-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=p,r.bits=d}},{}],47:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees");function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):-2}function f(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):-2}function p(t,e){var r,n;return t?(n=new l,t.state=n,n.window=null,0!==(r=f(t,e))&&(t.state=null),r):-2}var d,g,y=!0;function _(t){if(y){var e;for(d=new n.Buf32(512),g=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,g,0,t.work,{bits:5}),y=!1}t.lencode=d,t.lenbits=9,t.distcode=g,t.distbits=5}function v(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}r.inflateReset=h,r.inflateReset2=f,r.inflateResetKeep=c,r.inflateInit=function(t){return p(t,15)},r.inflateInit2=p,r.inflate=function(t,e){var r,l,c,h,f,p,d,g,y,m,b,w,x,S,E,O,M,P,T,C,I,R,L,A,k=0,F=new n.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(r=t.state).mode&&(r.mode=13),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,g=r.hold,y=r.bits,m=p,b=d,R=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(2&r.wrap&&35615===g){r.check=0,F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0),g=0,y=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",r.mode=30;break}if(y-=4,I=8+(15&(g>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,t.adler=r.check=1,r.mode=512&g?10:12,g=0,y=0;break;case 2:for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(r.flags=g,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0)),g=0,y=0,r.mode=3;case 3:for(;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.head&&(r.head.time=g),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,F[2]=g>>>16&255,F[3]=g>>>24&255,r.check=o(r.check,F,4,0)),g=0,y=0,r.mode=4;case 4:for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0)),g=0,y=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0)),g=0,y=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>p&&(w=p),w&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,l,h,w,I)),512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,r.length-=w),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;w=0;do{I=l[h+w++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I))}while(I&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;w=0;do{I=l[h+w++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I))}while(I&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(g!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}g=0,y=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}t.adler=r.check=u(g),g=0,y=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=g,r.bits=y,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){g>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}switch(r.last=1&g,y-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(_(r),r.mode=20,6===e){g>>>=2,y-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}g>>>=2,y-=2;break;case 14:for(g>>>=7&y,y-=7&y;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,g=0,y=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(w=r.length){if(w>p&&(w=p),w>d&&(w=d),0===w)break t;n.arraySet(c,l,h,w,f),p-=w,h+=w,d-=w,f+=w,r.length-=w;break}r.mode=12;break;case 17:for(;y<14;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(r.nlen=257+(31&g),g>>>=5,y-=5,r.ndist=1+(31&g),g>>>=5,y-=5,r.ncode=4+(15&g),g>>>=4,y-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.lens[j[r.have++]]=7&g,g>>>=3,y-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},R=s(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,R){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;O=(k=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&k,!((E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(M<16)g>>>=E,y-=E,r.lens[r.have++]=M;else{if(16===M){for(A=E+2;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(g>>>=E,y-=E,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],w=3+(3&g),g>>>=2,y-=2}else if(17===M){for(A=E+3;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}y-=E,I=0,w=3+(7&(g>>>=E)),g>>>=3,y-=3}else{for(A=E+7;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}y-=E,I=0,w=11+(127&(g>>>=E)),g>>>=7,y-=7}if(r.have+w>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,L={bits:r.lenbits},R=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,R){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},R=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,R){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(p>=6&&d>=258){t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=g,r.bits=y,a(t,b),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,g=r.hold,y=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;O=(k=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&k,!((E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(O&&0==(240&O)){for(P=E,T=O,C=M;O=(k=r.lencode[C+((g&(1<<P+T)-1)>>P)])>>>16&255,M=65535&k,!(P+(E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}g>>>=P,y-=P,r.back+=P}if(g>>>=E,y-=E,r.back+=E,r.length=M,0===O){r.mode=26;break}if(32&O){r.back=-1,r.mode=12;break}if(64&O){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&O,r.mode=22;case 22:if(r.extra){for(A=r.extra;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;O=(k=r.distcode[g&(1<<r.distbits)-1])>>>16&255,M=65535&k,!((E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(0==(240&O)){for(P=E,T=O,C=M;O=(k=r.distcode[C+((g&(1<<P+T)-1)>>P)])>>>16&255,M=65535&k,!(P+(E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}g>>>=P,y-=P,r.back+=P}if(g>>>=E,y-=E,r.back+=E,64&O){t.msg="invalid distance code",r.mode=30;break}r.offset=M,r.extra=15&O,r.mode=24;case 24:if(r.extra){for(A=r.extra;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===d)break t;if(w=b-d,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,x=r.wsize-w):x=r.wnext-w,w>r.length&&(w=r.length),S=r.window}else S=c,x=f-r.offset,w=r.length;w>d&&(w=d),d-=w,r.length-=w;do{c[f++]=S[x++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===d)break t;c[f++]=r.length,d--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===p)break t;p--,g|=l[h++]<<y,y+=8}if(b-=d,t.total_out+=b,r.total+=b,b&&(t.adler=r.check=r.flags?o(r.check,c,b,f-b):i(r.check,c,b,f-b)),b=d,(r.flags?g:u(g))!==r.check){t.msg="incorrect data check",r.mode=30;break}g=0,y=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(g!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}g=0,y=0}r.mode=29;case 29:R=1;break t;case 30:R=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=g,r.bits=y,(r.wsize||b!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&v(t,t.output,t.next_out,b-t.avail_out)?(r.mode=31,-4):(m-=t.avail_in,b-=t.avail_out,t.total_in+=m,t.total_out+=b,r.total+=b,r.wrap&&b&&(t.adler=r.check=r.flags?o(r.check,c,b,t.next_out-b):i(r.check,c,b,t.next_out-b)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===m&&0===b||4===e)&&0===R&&(R=-5),R)},r.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:(r.head=e,e.done=!1,0):-2},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,e,n,0)!==r.check?-3:v(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":39,"./adler32":41,"./crc32":43,"./inffast":46,"./inftrees":48}],48:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,l,c,h,f){var p,d,g,y,_,v,m,b,w,x=f.bits,S=0,E=0,O=0,M=0,P=0,T=0,C=0,I=0,R=0,L=0,A=null,k=0,F=new n.Buf16(16),j=new n.Buf16(16),N=null,D=0;for(S=0;S<=15;S++)F[S]=0;for(E=0;E<u;E++)F[e[r+E]]++;for(P=x,M=15;M>=1&&0===F[M];M--);if(P>M&&(P=M),0===M)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(O=1;O<M&&0===F[O];O++);for(P<O&&(P=O),I=1,S=1;S<=15;S++)if(I<<=1,(I-=F[S])<0)return-1;if(I>0&&(0===t||1!==M))return-1;for(j[1]=0,S=1;S<15;S++)j[S+1]=j[S]+F[S];for(E=0;E<u;E++)0!==e[r+E]&&(h[j[e[r+E]]++]=E);if(0===t?(A=N=h,v=19):1===t?(A=i,k-=257,N=o,D-=257,v=256):(A=a,N=s,v=-1),L=0,E=0,S=O,_=c,T=P,C=0,g=-1,y=(R=1<<P)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){m=S-C,h[E]<v?(b=0,w=h[E]):h[E]>v?(b=N[D+h[E]],w=A[k+h[E]]):(b=96,w=0),p=1<<S-C,O=d=1<<T;do{l[_+(L>>C)+(d-=p)]=m<<24|b<<16|w|0}while(0!==d);for(p=1<<S-1;L&p;)p>>=1;if(0!==p?(L&=p-1,L+=p):L=0,E++,0==--F[S]){if(S===M)break;S=e[r+h[E]]}if(S>P&&(L&y)!==g){for(0===C&&(C=P),_+=O,I=1<<(T=S-C);T+C<M&&!((I-=F[T+C])<=0);)T++,I<<=1;if(R+=1<<T,1===t&&R>852||2===t&&R>592)return 1;l[g=L&y]=P<<24|T<<16|_-c|0}}return 0!==L&&(l[_+L]=S-C<<24|64<<16|0),f.bits=P,0}},{"../utils/common":39}],49:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],50:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var c=new Array(60);i(c);var h=new Array(512);i(h);var f=new Array(256);i(f);var p=new Array(29);i(p);var d,g,y,_=new Array(30);function v(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?h[t]:h[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function S(t,e,r){x(t,r[2*e],r[2*e+1])}function E(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function O(t,e,r){var n,i,o=new Array(16),a=0;for(n=1;n<=15;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=E(o[s]++,s))}}function M(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function P(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function C(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function I(t,e,r){var n,i,s,u,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===n?S(t,i,e):(S(t,(s=f[i])+256+1,e),0!==(u=o[s])&&x(t,i-=p[s],u),S(t,s=b(--n),r),0!==(u=a[s])&&x(t,n-=_[s],u))}while(l<t.last_lit);S(t,256,e)}function R(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)C(t,o,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,C(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,g=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)>d&&(o=d,g++),u[2*n+1]=o,n>l||(t.bl_count[o]++,a=0,n>=p&&(a=f[n-p]),s=u[2*n],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*n+1]+a)));if(0!==g){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,g-=2}while(g>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),O(o,l,t.bl_count)}function L(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function A(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<u&&i===a)){if(s<l)do{S(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(S(t,i,t.bl_tree),s--),S(t,16,t.bl_tree),x(t,s-3,2)):s<=10?(S(t,17,t.bl_tree),x(t,s-3,3)):(S(t,18,t.bl_tree),x(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}i(_);var k=!1;function F(t,e,r,i){x(t,0+(i?1:0),3),function(t,e,r,i){P(t),i&&(w(t,r),w(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}r._tr_init=function(t){k||(function(){var t,e,r,n,i,u=new Array(16);for(r=0,n=0;n<28;n++)for(p[n]=r,t=0;t<1<<o[n];t++)f[r++]=n;for(f[r-1]=n,i=0,n=0;n<16;n++)for(_[n]=i,t=0;t<1<<a[n];t++)h[i++]=n;for(i>>=7;n<30;n++)for(_[n]=i<<7,t=0;t<1<<a[n]-7;t++)h[256+i++]=n;for(e=0;e<=15;e++)u[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,u[8]++;for(;t<=255;)l[2*t+1]=9,t++,u[9]++;for(;t<=279;)l[2*t+1]=7,t++,u[7]++;for(;t<=287;)l[2*t+1]=8,t++,u[8]++;for(O(l,287,u),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=E(t,5);d=new v(l,o,257,286,15),g=new v(c,a,0,30,15),y=new v(new Array(0),s,0,19,7)}(),k=!0),t.l_desc=new m(t.dyn_ltree,d),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,M(t)},r._tr_stored_block=F,r._tr_flush_block=function(t,e,r,n){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),R(t,t.l_desc),R(t,t.d_desc),a=function(t){var e;for(L(t,t.dyn_ltree,t.l_desc.max_code),L(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*u[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?F(t,e,r,n):4===t.strategy||o===i?(x(t,2+(n?1:0),3),I(t,l,c)):(x(t,4+(n?1:0),3),function(t,e,r,n){var i;for(x(t,e-257,5),x(t,r-1,5),x(t,n-4,4),i=0;i<n;i++)x(t,t.bl_tree[2*u[i]+1],3);A(t,t.dyn_ltree,e-1),A(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),I(t,t.dyn_ltree,t.dyn_dtree)),M(t),n&&P(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(f[r]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){x(t,2,3),S(t,256,l),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":39}],51:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],52:[function(t,e,r){t("text-encoding-polyfill");var n=t("string_decoder").StringDecoder;function i(t){var e=new n;return(e.write(t)+e.end()).replace(/\0/g,"").trim()}e.exports=function(t){if(!t)return i;try{new TextDecoder(t.trim())}catch(r){var e=o.exec(t);e&&(t="windows-"+e[1])}return function(e){var r=new TextDecoder(t);return(r.decode(e,{stream:!0})+r.decode()).replace(/\0/g,"").trim()}};var o=/^(?:ASNI\s)?(\d+)$/m},{string_decoder:55,"text-encoding-polyfill":56}],53:[function(t,e,r){var n=t("./decoder");function i(t,e,r,n,i){var o=i(t.slice(e,e+r));switch(n){case"N":case"F":case"O":return parseFloat(o,10);case"D":return new Date(o.slice(0,4),parseInt(o.slice(4,6),10)-1,o.slice(6,8));case"L":return"y"===o.toLowerCase()||"t"===o.toLowerCase();default:return o}}function o(t,e,r,n){for(var o,a,s={},u=0,l=r.length;u<l;)o=i(t,e,(a=r[u]).len,a.dataType,n),e+=a.len,void 0!==o&&(s[a.name]=o),u++;return s}e.exports=function(t,e){for(var r=n(e),i=function(t){var e={};return e.lastUpdated=new Date(t.readUInt8(1)+1900,t.readUInt8(2),t.readUInt8(3)),e.records=t.readUInt32LE(4),e.headerLen=t.readUInt16LE(8),e.recLen=t.readUInt16LE(10),e}(t),a=function(t,e,r){for(var n=[],i=32;i<e&&(n.push({name:r(t.slice(i,i+11)),dataType:String.fromCharCode(t.readUInt8(i+11)),len:t.readUInt8(i+16),decimal:t.readUInt8(i+17)}),13!==t.readUInt8(i+32));)i+=32;return n}(t,i.headerLen-1,r),s=2+(a.length+1<<5),u=i.recLen,l=i.records,c=[];l;)c.push(o(t,s,a,r)),s+=u,l--;return c}},{"./decoder":52}],54:[function(t,e,r){!function(t,n){"object"===s(r)&&void 0!==e?e.exports=n():t.proj4=n()}(this,(function(){"use strict";var t=484813681109536e-20,e=Math.PI/2,r=.017453292519943295,n=57.29577951308232,i=Math.PI/4,o=2*Math.PI,a=3.14159265359,u={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},l={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},c=/[\s_\-\/\(\)]/g;function h(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),i=e.toLowerCase().replace(c,""),o=-1;++o<n.length;)if((r=n[o]).toLowerCase().replace(c,"")===i)return t[r]}var f=function(t){var e,n,i,o={},a=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t}),{}),s={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*r},lat_1:function(t){o.lat1=t*r},lat_2:function(t){o.lat2=t*r},lat_ts:function(t){o.lat_ts=t*r},lon_0:function(t){o.long0=t*r},lon_1:function(t){o.long1=t*r},lon_2:function(t){o.long2=t*r},alpha:function(t){o.alpha=parseFloat(t)*r},lonc:function(t){o.longc=t*r},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(t){o.units=t;var e=h(l,t);e&&(o.to_meter=e.to_meter)},from_greenwich:function(t){o.from_greenwich=t*r},pm:function(t){var e=h(u,t);o.from_greenwich=(e||parseFloat(t))*r},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)}};for(e in a)n=a[e],e in s?"function"==typeof(i=s[e])?i(n):o[i]=n:o[e]=n;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o},p=/\s/,d=/[A-Za-z]/,g=/[A-Za-z84]/,y=/[,\]]/,_=/[\d\.E\-\+]/;function v(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function m(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,i=r.reduce((function(t,e){return b(e,t),t}),n);e&&(t[e]=i)}function b(t,e){if(Array.isArray(t)){var r,n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void b(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n)switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&b(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&b(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void m(e,n,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return b(t,e[n]);return m(e,n,t)}else e[n]=t;else e[n]=!0}else e[t]=!0}function w(t){return.017453292519943295*t}v.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;p.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},v.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(y.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},v.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},v.prototype.number=function(t){if(!_.test(t)){if(y.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},v.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},v.prototype.keyword=function(t){if(g.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=1)}if(!y.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},v.prototype.neutral=function(t){if(d.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(_.test(t))return this.word=t,void(this.state=3);if(!y.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},v.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var x=function(t){var e=new v(t).output(),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var i={};return b(e,i),function(t){"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===s(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var e=t.GEOGCS;function r(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(e=t),e&&(e.DATUM?t.datumCode=e.DATUM.name.toLowerCase():t.datumCode=e.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),e.DATUM&&e.DATUM.SPHEROID&&(t.ellps=e.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=e.DATUM.SPHEROID.a,t.rf=parseFloat(e.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",w],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",w],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",w],["lat0","latitude_of_origin",w],["lat0","standard_parallel_1",w],["lat1","standard_parallel_1",w],["lat2","standard_parallel_2",w],["alpha","azimuth",w],["srsCode","name"]].forEach((function(e){return r=t,i=(n=e)[0],o=n[1],void(!(i in r)&&o in r&&(r[i]=r[o],3===n.length&&(r[i]=n[2](r[i]))));var r,n,i,o})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=w(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(i),i};function S(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?S[t]=f(arguments[1]):S[t]=x(arguments[1]):S[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?S.apply(e,t):S(t)}));if("string"==typeof t){if(t in S)return S[t]}else"EPSG"in t?S["EPSG:"+t.EPSG]=t:"ESRI"in t?S["ESRI:"+t.ESRI]=t:"IAU2000"in t?S["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(S);var E=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function O(t){return function(t){return"string"==typeof t}(t)?function(t){return t in S}(t)?S[t]:function(t){return E.some((function(e){return t.indexOf(e)>-1}))}(t)?x(t):function(t){return"+"===t[0]}(t)?f(t):void 0:t}var M=function(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t},P=function(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)},T=function(t){return t<0?-1:1},C=function(t){return Math.abs(t)<=a?t:t-T(t)*o},I=function(t,r,n){var i=t*n,o=.5*t;return i=Math.pow((1-i)/(1+i),o),Math.tan(.5*(e-r))/i},R=function(t,r){for(var n,i,o=.5*t,a=e-2*Math.atan(r),s=0;s<=15;s++)if(n=t*Math.sin(a),a+=i=e-2*Math.atan(r*Math.pow((1-n)/(1+n),o))-a,Math.abs(i)<=1e-10)return a;return-9999};function L(t){return t}var A=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var r,o,a=t.x,s=t.y;if(s*n>90&&s*n<-90&&a*n>180&&a*n<-180)return null;if(Math.abs(Math.abs(s)-e)<=1e-10)return null;if(this.sphere)r=this.x0+this.a*this.k0*C(a-this.long0),o=this.y0+this.a*this.k0*Math.log(Math.tan(i+.5*s));else{var u=Math.sin(s),l=I(this.e,s,u);r=this.x0+this.a*this.k0*C(a-this.long0),o=this.y0-this.a*this.k0*Math.log(l)}return t.x=r,t.y=o,t},inverse:function(t){var r,n,i=t.x-this.x0,o=t.y-this.y0;if(this.sphere)n=e-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var a=Math.exp(-o/(this.a*this.k0));if(-9999===(n=R(this.e,a)))return null}return r=C(this.long0+i/(this.a*this.k0)),t.x=r,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:L,inverse:L,names:["longlat","identity"]}],k={},F=[];function j(t,e){var r=F.length;return t.names?(F[r]=t,t.names.forEach((function(t){k[t.toLowerCase()]=r})),this):(console.log(e),!0)}var N={start:function(){A.forEach(j)},add:j,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==k[e]&&F[k[e]]?F[k[e]]:void 0}},D={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},z=D.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};D.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var G={};function B(e,r){if(!(this instanceof B))return new B(e);r=r||function(t){if(t)throw t};var n=O(e);if("object"===s(n)){var i=B.projections.get(n.projName);if(n.datumCode&&"none"!==n.datumCode){var o=h(G,n.datumCode);o&&(n.datum_params=o.towgs84?o.towgs84.split(","):null,n.ellps=o.ellipse,n.datumName=o.datumName?o.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var a,u,l,c,f,p,d,g=function(t,e,r,n,i){if(!t){var o=h(D,n);o||(o=z),t=o.a,e=o.b,r=o.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<1e-10)&&(i=!0,e=t),{a:t,b:e,rf:r,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),y=(a=g.a,u=g.b,g.rf,l=n.R_A,p=((c=a*a)-(f=u*u))/c,d=0,l?(c=(a*=1-p*(.16666666666666666+p*(.04722222222222222+.022156084656084655*p)))*a,p=0):d=Math.sqrt(p),{es:p,e:d,ep2:(c-f)/f}),_=n.datum||function(e,r,n,i,o,a){var s={};return s.datum_type=void 0===e||"none"===e?5:4,r&&(s.datum_params=r.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=1),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=2,s.datum_params[3]*=t,s.datum_params[4]*=t,s.datum_params[5]*=t,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=n,s.b=i,s.es=o,s.ep2=a,s}(n.datumCode,n.datum_params,g.a,g.b,y.es,y.ep2);M(this,n),M(this,i),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=y.es,this.e=y.e,this.ep2=y.ep2,this.datum=_,this.init(),r(null,this)}else r(e)}function U(t){return 1===t||2===t}G.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},G.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},G.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},G.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},G.dealul_piscului_1970={towgs84:"28,-121,-77,0,0,0,0",ellipse:"WGS84",datumName:"WGS84"},G.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},G.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},G.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},G.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},G.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},G.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},G.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},G.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},G.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},G.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},G.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},G.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},G.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},B.projections=N,B.projections.start();var W=function(t,r,n){return function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,r)||5===t.datum_type||5===r.datum_type?n:t.es!==r.es||t.a!==r.a||U(t.datum_type)||U(r.datum_type)?(n=function(t,r,n){var i,o,a,s,u=t.x,l=t.y,c=t.z?t.z:0;if(l<-e&&l>-1.001*e)l=-e;else if(l>e&&l<1.001*e)l=e;else if(l<-e||l>e)return null;return u>Math.PI&&(u-=2*Math.PI),o=Math.sin(l),s=Math.cos(l),a=o*o,{x:((i=n/Math.sqrt(1-r*a))+c)*s*Math.cos(u),y:(i+c)*s*Math.sin(u),z:(i*(1-r)+c)*o}}(n,t.es,t.a),U(t.datum_type)&&(n=function(t,e,r){if(1===e)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6];return{x:l*(t.x-u*t.y+s*t.z)+n,y:l*(u*t.x+t.y-a*t.z)+i,z:l*(-s*t.x+a*t.y+t.z)+o}}}(n,t.datum_type,t.datum_params)),U(r.datum_type)&&(n=function(t,e,r){if(1===e)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(2===e){var n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],c=(t.x-n)/l,h=(t.y-i)/l,f=(t.z-o)/l;return{x:c+u*h-s*f,y:-u*c+h+a*f,z:s*c-a*h+f}}}(n,r.datum_type,r.datum_params)),function(t,e,r,n){var i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m=t.x,b=t.y,w=t.z?t.z:0;if(i=Math.sqrt(m*m+b*b),o=Math.sqrt(m*m+b*b+w*w),i/r<1e-12){if(_=0,o/r<1e-12)return v=-n,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(b,m);a=w/o,h=(s=i/o)*(1-e)*(u=1/Math.sqrt(1-e*(2-e)*s*s)),f=a*u,y=0;do{y++,l=e*(c=r/Math.sqrt(1-e*f*f))/(c+(v=i*h+w*f-c*(1-e*f*f))),g=(d=a*(u=1/Math.sqrt(1-l*(2-l)*s*s)))*h-(p=s*(1-l)*u)*f,h=p,f=d}while(g*g>1e-24&&y<30);return{x:_,y:Math.atan(d/Math.abs(p)),z:v}}(n,r.es,r.a,r.b)):n},Y=function(t,e,r){var n,i,o,a=r.x,s=r.y,u=r.z||0,l={};for(o=0;o<3;o++)if(!e||2!==o||void 0!==r.z)switch(0===o?(n=a,i="x"):1===o?(n=s,i="y"):(n=u,i="z"),t.axis[o]){case"e":l[i]=n;break;case"w":l[i]=-n;break;case"n":l[i]=n;break;case"s":l[i]=-n;break;case"u":void 0!==r[i]&&(l.z=n);break;case"d":void 0!==r[i]&&(l.z=-n);break;default:return null}return l},V=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e};function X(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Z(t,e,i){var o;return Array.isArray(i)&&(i=V(i)),function(t){X(t.x),X(t.y)}(i),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(i=Z(t,o=new B("WGS84"),i),t=o),"enu"!==t.axis&&(i=Y(t,!1,i)),"longlat"===t.projName?i={x:i.x*r,y:i.y*r}:(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter}),i=t.inverse(i)),t.from_greenwich&&(i.x+=t.from_greenwich),i=W(t.datum,e.datum,i),e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y}),"longlat"===e.projName?i={x:i.x*n,y:i.y*n}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter})),"enu"!==e.axis?Y(e,!0,i):i}var q=B("WGS84");function K(t,e,r){var n,i,o;return Array.isArray(r)?(n=Z(t,e,r),3===r.length?[n.x,n.y,n.z]:[n.x,n.y]):(i=Z(t,e,r),2===(o=Object.keys(r)).length||o.forEach((function(t){"x"!==t&&"y"!==t&&(i[t]=r[t])})),i)}function H(t){return t instanceof B?t:t.oProj?t.oProj:B(t)}function J(t,e,r){t=H(t);var n,i=!1;return void 0===e?(e=t,t=q,i=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=q,i=!0),e=H(e),r?K(t,e,r):(n={forward:function(r){return K(t,e,r)},inverse:function(r){return K(e,t,r)}},i&&(n.oProj=e),n)}var Q=65,$=73,tt=79,et={forward:rt,inverse:function(t){var e=at(ut(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:nt};function rt(t,e){return e=e||5,function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,g,y="00000"+t.easting,_="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(c=t.easting,h=t.northing,f=t.zoneNumber,p=st(f),d=Math.floor(c/1e5),g=Math.floor(h/1e5)%20,r=d,n=g,o="AJSAJS".charCodeAt(i=p-1),a="AFAFAF".charCodeAt(i),l=!1,(s=o+r-1)>90&&(s=s-90+Q-1,l=!0),(s===$||o<$&&s>$||(s>$||o<$)&&l)&&s++,(s===tt||o<tt&&s>tt||(s>tt||o<tt)&&l)&&++s===$&&s++,s>90&&(s=s-90+Q-1),(u=a+n)>86?(u=u-86+Q-1,l=!0):l=!1,(u===$||a<$&&u>$||(u>$||a<$)&&l)&&u++,(u===tt||a<tt&&u>tt||(u>tt||a<tt)&&l)&&++u===$&&u++,u>86&&(u=u-86+Q-1),String.fromCharCode(s)+String.fromCharCode(u))+y.substr(y.length-5,e)+_.substr(_.length-5,e)}(function(t){var e,r,n,i,o,a,s,u=t.lat,l=t.lon,c=6378137,h=it(u),f=it(l);s=Math.floor((l+180)/6)+1,180===l&&(s=60),u>=56&&u<64&&l>=3&&l<12&&(s=32),u>=72&&u<84&&(l>=0&&l<9?s=31:l>=9&&l<21?s=33:l>=21&&l<33?s=35:l>=33&&l<42&&(s=37)),a=it(6*(s-1)-180+3),e=c/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),r=Math.tan(h)*Math.tan(h),n=.006739496752268451*Math.cos(h)*Math.cos(h),i=Math.cos(h)*(f-a),o=c*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var p,d,g=.9996*e*(i+(1-r+n)*i*i*i/6+(5-18*r+r*r+72*n-.39089081163157013)*i*i*i*i*i/120)+5e5,y=.9996*(o+e*Math.tan(h)*(i*i/2+(5-r+9*n+4*n*n)*i*i*i*i/24+(61-58*r+r*r+600*n-2.2240339282485886)*i*i*i*i*i*i/720));return u<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(g),zoneNumber:s,zoneLetter:(p=u,d="Z",84>=p&&p>=72?d="X":72>p&&p>=64?d="W":64>p&&p>=56?d="V":56>p&&p>=48?d="U":48>p&&p>=40?d="T":40>p&&p>=32?d="S":32>p&&p>=24?d="R":24>p&&p>=16?d="Q":16>p&&p>=8?d="P":8>p&&p>=0?d="N":0>p&&p>=-8?d="M":-8>p&&p>=-16?d="L":-16>p&&p>=-24?d="K":-24>p&&p>=-32?d="J":-32>p&&p>=-40?d="H":-40>p&&p>=-48?d="G":-48>p&&p>=-56?d="F":-56>p&&p>=-64?d="E":-64>p&&p>=-72?d="D":-72>p&&p>=-80&&(d="C"),d)}}({lat:t[1],lon:t[0]}),e)}function nt(t){var e=at(ut(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function it(t){return t*(Math.PI/180)}function ot(t){return t/Math.PI*180}function at(t){var e=t.northing,r=t.easting,n=t.zoneLetter,i=t.zoneNumber;if(i<0||i>60)return null;var o,a,s,u,l,c,h,f,p=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),g=r-5e5,y=e;n<"N"&&(y-=1e7),c=6*(i-1)-180+3,f=(h=y/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),o=p/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),s=.006739496752268451*Math.cos(f)*Math.cos(f),u=.99330562*p/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),l=g/(.9996*o);var _=f-o*Math.tan(f)/u*(l*l/2-(5+3*a+10*s-4*s*s-.06065547077041606)*l*l*l*l/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*l*l*l*l*l*l/720);_=ot(_);var v,m=(l-(1+2*a+s)*l*l*l/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*l*l*l*l*l/120)/Math.cos(f);if(m=c+ot(m),t.accuracy){var b=at({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});v={top:b.lat,right:b.lon,bottom:_,left:m}}else v={lat:_,lon:m};return v}function st(t){var e=t%6;return 0===e&&(e=6),e}function ut(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,i="",o=0;!/[A-Z]/.test(e=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;i+=e,o++}var a=parseInt(i,10);if(0===o||o+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(o,o+=2);for(var u=st(a),l=function(t,e){for(var r="AJSAJS".charCodeAt(e-1),n=1e5,i=!1;r!==t.charCodeAt(0);){if(++r===$&&r++,r===tt&&r++,r>90){if(i)throw"Bad character: "+t;r=Q,i=!0}n+=1e5}return n}(n.charAt(0),u),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var r="AFAFAF".charCodeAt(e-1),n=0,i=!1;r!==t.charCodeAt(0);){if(++r===$&&r++,r===tt&&r++,r>86){if(i)throw"Bad character: "+t;r=Q,i=!0}n+=1e5}return n}(n.charAt(1),u);c<lt(s);)c+=2e6;var h=r-o;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var f,p,d,g=h/2,y=0,_=0;return g>0&&(f=1e5/Math.pow(10,g),p=t.substring(o,o+g),y=parseFloat(p)*f,d=t.substring(o+g),_=parseFloat(d)*f),{easting:y+l,northing:_+c,zoneLetter:s,zoneNumber:a,accuracy:f}}function lt(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function ct(t,e,r){if(!(this instanceof ct))return new ct(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===s(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}ct.fromMGRS=function(t){return new ct(nt(t))},ct.prototype.toMGRS=function(t){return rt([this.x,this.y],t)};var ht=.01068115234375,ft=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*ht))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*ht)));var r=t*t;return e[2]=r*(.46875-t*(.013020833333333334+.007120768229166667*t)),r*=t,e[3]=r*(.3645833333333333-.005696614583333333*t),e[4]=r*t*.3076171875,e},pt=function(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))},dt=function(t,e,r){for(var n=1/(1-e),i=t,o=20;o;--o){var a=Math.sin(i),s=1-e*a*a;if(i-=s=(pt(i,a,Math.cos(i),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<1e-10)return i}return i},gt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ft(this.es),this.ml0=pt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,i=t.x,o=t.y,a=C(i-this.long0),s=Math.sin(o),u=Math.cos(o);if(this.es){var l=u*a,c=Math.pow(l,2),h=this.ep2*Math.pow(u,2),f=Math.pow(h,2),p=Math.abs(u)>1e-10?Math.tan(o):0,d=Math.pow(p,2),g=Math.pow(d,2);e=1-this.es*Math.pow(s,2),l/=Math.sqrt(e);var y=pt(o,s,u,this.en);r=this.a*(this.k0*l*(1+c/6*(1-d+h+c/20*(5-18*d+g+14*h-58*d*h+c/42*(61+179*g-g*d-479*d)))))+this.x0,n=this.a*(this.k0*(y-this.ml0+s*a*l/2*(1+c/12*(5-d+9*h+4*f+c/30*(61+g-58*d+270*h-330*d*h+c/56*(1385+543*g-g*d-3111*d))))))+this.y0}else{var _=u*Math.sin(a);if(Math.abs(Math.abs(_)-1)<1e-10)return 93;if(r=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,n=u*Math.cos(a)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(n))>=1){if(_-1>1e-10)return 93;n=0}else n=Math.acos(n);o<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var r,n,i,o,a=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(r=this.ml0+s/this.k0,n=dt(r,this.es,this.en),Math.abs(n)<e){var u=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>1e-10?Math.tan(n):0,h=this.ep2*Math.pow(l,2),f=Math.pow(h,2),p=Math.pow(c,2),d=Math.pow(p,2);r=1-this.es*Math.pow(u,2);var g=a*Math.sqrt(r)/this.k0,y=Math.pow(g,2);i=n-(r*=c)*y/(1-this.es)*.5*(1-y/12*(5+3*p-9*h*p+h-4*f-y/30*(61+90*p-252*h*p+45*d+46*h-y/56*(1385+3633*p+4095*d+1574*d*p)))),o=C(this.long0+g*(1-y/6*(1+2*p+h-y/20*(5+28*p+24*d+8*h*p+6*h-y/42*(61+662*p+1320*d+720*d*p))))/l)}else i=e*T(s),o=0;else{var _=Math.exp(a/this.k0),v=.5*(_-1/_),m=this.lat0+s/this.k0,b=Math.cos(m);r=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),i=Math.asin(r),s<0&&(i=-i),o=0===v&&0===b?0:C(Math.atan2(v,b)+this.long0)}return t.x=o,t.y=i,t},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},yt=function(t){var e=Math.exp(t);return e=(e-1/e)/2},_t=function(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))},vt=function(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(_t(1,e)+1))),t<0?-e:e},mt=function(t,e){for(var r,n=2*Math.cos(2*e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return e+r*Math.sin(2*e)},bt=function(t,e,r){for(var n,i,o=Math.sin(e),a=Math.cos(e),s=yt(r),u=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),l=2*a*u,c=-2*o*s,h=t.length-1,f=t[h],p=0,d=0,g=0;--h>=0;)n=d,i=p,f=l*(d=f)-n-c*(p=g)+t[h],g=c*d-i+l*p;return[(l=o*u)*f-(c=a*s)*g,l*g+c*f]},wt={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=.6650675310896665*r;var n=mt(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),i=t.length-1,o=t[i],a=0;--i>=0;)r=n*o-a+t[i],a=o,o=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=C(t.x-this.long0),r=t.y;r=mt(this.cbg,r);var n=Math.sin(r),i=Math.cos(r),o=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*i),e=Math.atan2(o*i,_t(n,i*a)),e=vt(Math.tan(e));var s,u,l=bt(this.gtu,2*r,2*e);return r+=l[0],e+=l[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,u=1/0),t.x=s,t.y=u,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),i=(t.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var o=bt(this.utg,2*i,2*n);i+=o[0],n+=o[1],n=Math.atan(yt(n));var a=Math.sin(i),s=Math.cos(i),u=Math.sin(n),l=Math.cos(n);i=Math.atan2(a*l,_t(u,l*s)),n=Math.atan2(u,l*s),e=C(n+this.long0),r=mt(this.cgb,i)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},xt={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(C(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*r,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,wt.init.apply(this),this.forward=wt.forward,this.inverse=wt.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},St=function(t,e){return Math.pow((1-t)/(1+t),e)},Et={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+i)/(Math.pow(Math.tan(.5*this.lat0+i),this.C)*St(this.e*t,this.ratexp))},forward:function(t){var r=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+i),this.C)*St(this.e*Math.sin(n),this.ratexp))-e,t.x=this.C*r,t},inverse:function(t){for(var r=t.x/this.C,n=t.y,o=Math.pow(Math.tan(.5*n+i)/this.K,1/this.C),a=20;a>0&&(n=2*Math.atan(o*St(this.e*Math.sin(t.y),-.5*this.e))-e,!(Math.abs(n-t.y)<1e-14));--a)t.y=n;return a?(t.x=r,t.y=n,t):null},names:["gauss"]},Ot={init:function(){Et.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,i;return t.x=C(t.x-this.long0),Et.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),i=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=i*r*Math.sin(t.x),t.y=i*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,i,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(o,this.R2);e=Math.sin(a),r=Math.cos(a),i=Math.asin(r*this.sinc0+t.y*e*this.cosc0/o),n=Math.atan2(t.x*e,o*this.cosc0*r-t.y*this.sinc0*e)}else i=this.phic0,n=0;return t.x=n,t.y=i,Et.inverse.apply(this,[t]),t.x=C(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},Mt={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+T(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/I(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=P(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-e,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var r,n,i,o,a,s,u=t.x,l=t.y,c=Math.sin(l),h=Math.cos(l),f=C(u-this.long0);return Math.abs(Math.abs(u-this.long0)-Math.PI)<=1e-10&&Math.abs(l+this.lat0)<=1e-10?(t.x=NaN,t.y=NaN,t):this.sphere?(r=2*this.k0/(1+this.sinlat0*c+this.coslat0*h*Math.cos(f)),t.x=this.a*r*h*Math.sin(f)+this.x0,t.y=this.a*r*(this.coslat0*c-this.sinlat0*h*Math.cos(f))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,c,this.e))-e,o=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=1e-10?(a=I(this.e,l*this.con,this.con*c),s=2*this.a*this.k0*a/this.cons,t.x=this.x0+s*Math.sin(u-this.long0),t.y=this.y0-this.con*s*Math.cos(u-this.long0),t):(Math.abs(this.sinlat0)<1e-10?(r=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=r*i):(r=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*o*Math.cos(f))),t.y=r*(this.cosX0*i-this.sinX0*o*Math.cos(f))+this.y0),t.x=r*o*Math.sin(f)+this.x0,t))},inverse:function(t){var r,n,i,o,a;t.x-=this.x0,t.y-=this.y0;var s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(s/(.5*this.a*this.k0));return r=this.long0,n=this.lat0,s<=1e-10?(t.x=r,t.y=n,t):(n=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/s),r=Math.abs(this.coslat0)<1e-10?this.lat0>0?C(this.long0+Math.atan2(t.x,-1*t.y)):C(this.long0+Math.atan2(t.x,t.y)):C(this.long0+Math.atan2(t.x*Math.sin(u),s*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u))),t.x=r,t.y=n,t)}if(Math.abs(this.coslat0)<=1e-10){if(s<=1e-10)return n=this.lat0,r=this.long0,t.x=r,t.y=n,t;t.x*=this.con,t.y*=this.con,i=s*this.cons/(2*this.a*this.k0),n=this.con*R(this.e,i),r=this.con*C(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),r=this.long0,s<=1e-10?a=this.X0:(a=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/s),r=C(this.long0+Math.atan2(t.x*Math.sin(o),s*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),n=-1*R(this.e,Math.tan(.5*(e+a)));return t.x=r,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,r,n){return r*=n,Math.tan(.5*(e+t))*Math.pow((1-r)/(1+r),.5*n)}},Pt={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,i=2*n-Math.pow(n,2),o=this.e=Math.sqrt(i);this.R=this.k0*r*Math.sqrt(1-i)/(1-i*Math.pow(e,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),u=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*s+this.alpha*o/2*u},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,i=2*(Math.atan(Math.exp(n))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,i=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,u=0,l=o,c=-1e3,h=0;Math.abs(l-c)>1e-7;){if(++h>20)return;u=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),c=l,l=2*Math.atan(Math.exp(u))-Math.PI/2}return t.x=s,t.y=l,t},names:["somerc"]},Tt={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),r=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var n,i,o=I(this.e,this.lat0,t),a=this.bl/e*Math.sqrt((1-this.es)/(1-r*r));if(a*a<1&&(a=1),isNaN(this.longc)){var s=I(this.e,this.lat1,Math.sin(this.lat1)),u=I(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var l=Math.pow(s,this.bl),c=Math.pow(u,this.bl);i=.5*((n=this.el/l)-1/n);var h=(this.el*this.el-c*l)/(this.el*this.el+c*l),f=(c-l)/(c+l),p=C(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*p)/f)/this.bl,this.long0=C(this.long0);var d=C(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else n=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=n*Math.pow(o,this.bl),i=.5*(n-1/n),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(t){var r,n,o,a=t.x,s=t.y,u=C(a-this.long0);if(Math.abs(Math.abs(s)-e)<=1e-10)o=s>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(i+o*this.gamma0*.5)),r=-1*o*e*this.al/this.bl;else{var l=I(this.e,s,Math.sin(s)),c=this.el/Math.pow(l,this.bl),h=.5*(c-1/c),f=.5*(c+1/c),p=Math.sin(this.bl*u),d=(h*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/f;n=Math.abs(Math.abs(d)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-d)/(1+d))/this.bl,r=Math.abs(Math.cos(this.bl*u))<=1e-10?this.al*this.bl*u:this.al*Math.atan2(h*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*u))/this.bl}return this.no_rot?(t.x=this.x0+r,t.y=this.y0+n):(r-=this.uc,t.x=this.x0+n*Math.cos(this.alpha)+r*Math.sin(this.alpha),t.y=this.y0+r*Math.cos(this.alpha)-n*Math.sin(this.alpha)),t},inverse:function(t){var r,n;this.no_rot?(n=t.y-this.y0,r=t.x-this.x0):(n=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),r=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),r+=this.uc);var i=Math.exp(-1*this.bl*n/this.al),o=.5*(i-1/i),a=.5*(i+1/i),s=Math.sin(this.bl*r/this.al),u=(s*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/a,l=Math.pow(this.el/Math.sqrt((1+u)/(1-u)),1/this.bl);return Math.abs(u-1)<1e-10?(t.x=this.long0,t.y=e):Math.abs(u+1)<1e-10?(t.x=this.long0,t.y=-1*e):(t.y=R(this.e,l),t.x=C(this.long0-Math.atan2(o*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*r/this.al))/this.bl)),t},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},Ct={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=P(this.e,e,r),i=I(this.e,this.lat1,e),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=P(this.e,o,a),u=I(this.e,this.lat2,o),l=I(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(n/s)/Math.log(i/u):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(l,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var r=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=1e-10&&(n=T(n)*(e-2e-10));var i,o,a=Math.abs(Math.abs(n)-e);if(a>1e-10)i=I(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(i,this.ns);else{if((a=n*this.ns)<=0)return null;o=0}var s=this.ns*C(r-this.long0);return t.x=this.k0*(o*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(s))+this.y0,t},inverse:function(t){var r,n,i,o,a,s=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(r=Math.sqrt(s*s+u*u),n=1):(r=-Math.sqrt(s*s+u*u),n=-1);var l=0;if(0!==r&&(l=Math.atan2(n*s,n*u)),0!==r||this.ns>0){if(n=1/this.ns,i=Math.pow(r/(this.a*this.f0),n),-9999===(o=R(this.e,i)))return null}else o=-e;return a=C(l/this.ns+this.long0),t.x=a,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},It={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y,c=C(u-this.long0);return e=Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(l/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),o=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,i,o,a,s,u=t.x;t.x=t.y,t.y=u,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),i=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,l+=1}while(0===s&&l<15);return l>=15?null:t},names:["Krovak","krovak"]},Rt=function(t,e,r,n,i){return t*i-e*Math.sin(2*i)+r*Math.sin(4*i)-n*Math.sin(6*i)},Lt=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},At=function(t){return.375*t*(1+.25*t*(1+.46875*t))},kt=function(t){return.05859375*t*t*(1+.75*t)},Ft=function(t){return t*t*t*(35/3072)},jt=function(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)},Nt=function(t){return Math.abs(t)<e?t:t-T(t)*Math.PI},Dt=function(t,e,r,n,i){var o,a;o=t/e;for(var s=0;s<15;s++)if(o+=a=(t-(e*o-r*Math.sin(2*o)+n*Math.sin(4*o)-i*Math.sin(6*o)))/(e-2*r*Math.cos(2*o)+4*n*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN},zt={init:function(){this.sphere||(this.e0=Lt(this.es),this.e1=At(this.es),this.e2=kt(this.es),this.e3=Ft(this.es),this.ml0=this.a*Rt(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,i=t.y;if(n=C(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(i)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(i),Math.cos(n))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=jt(this.a,this.e,o),u=Math.tan(i)*Math.tan(i),l=n*Math.cos(i),c=l*l,h=this.es*a*a/(1-this.es);e=s*l*(1-c*u*(1/6-(8-u+8*h)*c/120)),r=this.a*Rt(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-u+6*h)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var r,n,i=t.x/this.a,o=t.y/this.a;if(this.sphere){var a=o+this.lat0;r=Math.asin(Math.sin(a)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(a))}else{var s=this.ml0/this.a+o,u=Dt(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(u)-e)<=1e-10)return t.x=this.long0,t.y=e,o<0&&(t.y*=-1),t;var l=jt(this.a,this.e,Math.sin(u)),c=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(u),2),f=i*this.a/l,p=f*f;r=u-l*Math.tan(u)/c*f*f*(.5-(1+3*h)*f*f/24),n=f*(1-p*(h/3+(1+3*h)*h*p/15))/Math.cos(u)}return t.x=C(n+this.long0),t.y=Nt(r),t},names:["Cassini","Cassini_Soldner","cass"]},Gt=function(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e},Bt={init:function(){var t,r=Math.abs(this.lat0);if(Math.abs(r-e)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(r)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Gt(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=.3333333333333333*t,e=t*t,r[0]+=.17222222222222222*e,r[1]=.06388888888888888*e,e*=t,r[0]+=.10257936507936508*e,r[1]+=.0664021164021164*e,r[2]=.016415012942191543*e,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Gt(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var r,n,o,a,s,u,l,c,h,f,p=t.x,d=t.y;if(p=C(p-this.long0),this.sphere){if(s=Math.sin(d),f=Math.cos(d),o=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+f*o:1+this.sinph0*s+this.cosph0*f*o)<=1e-10)return null;r=(n=Math.sqrt(2/n))*f*Math.sin(p),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*f*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),Math.abs(d+this.phi0)<1e-10)return null;n=i-.5*d,r=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=o}}else{switch(l=0,c=0,h=0,o=Math.cos(p),a=Math.sin(p),s=Math.sin(d),u=Gt(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(l=u/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*c*o;break;case this.EQUIT:h=1+c*o;break;case this.N_POLE:h=e+d,u=this.qp-u;break;case this.S_POLE:h=d-e,u=this.qp+u}if(Math.abs(h)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),n=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*l-this.sinb1*c*o):(h=Math.sqrt(2/(1+c*o)))*l*this.ymf,r=this.xmf*h*c*a;break;case this.N_POLE:case this.S_POLE:u>=0?(r=(h=Math.sqrt(u))*a,n=o*(this.mode===this.S_POLE?h:-h)):r=n=0}}return t.x=this.a*r+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var r,n,i,o,a,s,u,l,c,h,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var d,g=0,y=0;if((n=.5*(d=Math.sqrt(f*f+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),g=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=1e-10?0:Math.asin(p*y/d),f*=y,p=g*d;break;case this.OBLIQ:n=Math.abs(d)<=1e-10?this.phi0:Math.asin(g*this.sinph0+p*y*this.cosph0/d),f*=y*this.cosph0,p=(g-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:p=-p,n=e-n;break;case this.S_POLE:n-=e}r=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(s=Math.sqrt(f*f+p*p))<1e-10)return t.x=0,t.y=this.phi0,t;o=2*Math.asin(.5*s/this.rq),i=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(u=i*this.sinb1+p*o*this.cosb1/s,a=this.qp*u,p=s*this.cosb1*i-p*this.sinb1*o):(u=p*o/s,a=this.qp*u,p=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(a=f*f+p*p))return t.x=0,t.y=this.phi0,t;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}r=Math.atan2(f,p),l=Math.asin(u),c=this.apa,h=l+l,n=l+c[0]*Math.sin(h)+c[1]*Math.sin(h+h)+c[2]*Math.sin(h+h+h)}return t.x=C(this.long0+r),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Ut=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},Wt={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=P(this.e3,this.sin_po,this.cos_po),this.qs1=Gt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=P(this.e3,this.sin_po,this.cos_po),this.qs2=Gt(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Gt(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=Gt(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*C(e-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),i=0,0!==e&&(i=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),o=C(i/this.ns0+this.long0),t.x=o,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,i,o,a=Ut(.5*e);if(t<1e-10)return a;for(var s=t*t,u=1;u<=25;u++)if(a+=o=.5*(i=1-(n=t*(r=Math.sin(a)))*n)*i/Math.cos(a)*(e/(1-s)-r/i+.5/t*Math.log((1-n)/(1+n))),Math.abs(o)<=1e-7)return a;return null}},Yt={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=C(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),(o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=1e-10?(a=this.x0+1*this.a*r*Math.sin(n)/o,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)/o):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i,o,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.atan2(e,this.rc),r=Math.sin(i),n=Math.cos(i),a=Ut(n*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),o=C(this.long0+o)):(a=this.phic0,o=0),t.x=o,t.y=a,t},names:["gnom"]},Vt={init:function(){this.sphere||(this.k0=P(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,i=t.y,o=C(n-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=Gt(this.e,Math.sin(i));e=this.x0+this.a*this.k0*o,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var r,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(r=C(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,r){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(r)-n)<1e-6)return r<0?-1*e:e;for(var i,o,a,s,u=Math.asin(.5*r),l=0;l<30;l++)if(o=Math.sin(u),a=Math.cos(u),s=t*o,u+=i=Math.pow(1-s*s,2)/(2*a)*(r/(1-t*t)-o/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),Math.abs(i)<=1e-10)return u;return NaN}(this.e,2*t.y*this.k0/this.a),r=C(this.long0+t.x/(this.a*this.k0))),t.x=r,t.y=n,t},names:["cea"]},Xt={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=C(e-this.long0),i=Nt(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*i,t},inverse:function(t){var e=t.x,r=t.y;return t.x=C(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Nt(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Zt={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Lt(this.es),this.e1=At(this.es),this.e2=kt(this.es),this.e3=Ft(this.es),this.ml0=this.a*Rt(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,i=t.x,o=t.y,a=C(i-this.long0);if(n=a*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(o),r=this.a*(Nt(o-this.lat0)+(1-Math.cos(n))/Math.tan(o)));else if(Math.abs(o)<=1e-10)e=this.a*a,r=-1*this.ml0;else{var s=jt(this.a,this.e,Math.sin(o))/Math.tan(o);e=s*Math.sin(n),r=this.a*Rt(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,i,o,a,s,u,l;if(n=t.x-this.x0,i=t.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=1e-10)e=C(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+i/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(u+=l=-1*(a*(u*(c=Math.tan(u))+1)-u-.5*(u*u+s)*c)/((u-a)/c-1),Math.abs(l)<=1e-10){r=u;break}e=C(this.long0+Math.asin(n*Math.tan(u)/this.a)/Math.sin(r))}else if(Math.abs(i+this.ml0)<=1e-10)r=0,e=C(this.long0+n/this.a);else{var h,f,p,d,g;for(a=(this.ml0+i)/this.a,s=n*n/this.a/this.a+a*a,u=a,o=20;o;--o)if(g=this.e*Math.sin(u),h=Math.sqrt(1-g*g)*Math.tan(u),f=this.a*Rt(this.e0,this.e1,this.e2,this.e3,u),p=this.e0-2*this.e1*Math.cos(2*u)+4*this.e2*Math.cos(4*u)-6*this.e3*Math.cos(6*u),u-=l=(a*(h*(d=f/this.a)+1)-d-.5*h*(d*d+s))/(this.es*Math.sin(2*u)*(d*d+s-2*a*d)/(4*h)+(a-d)*(h*p-2/Math.sin(2*u))-p),Math.abs(l)<=1e-10){r=u;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=C(this.long0+Math.asin(n*h/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]},qt={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var r,n=e.x,i=e.y-this.lat0,o=n-this.long0,a=i/t*1e-5,s=o,u=1,l=0;for(r=1;r<=10;r++)u*=a,l+=this.A[r]*u;var c,h=l,f=s,p=1,d=0,g=0,y=0;for(r=1;r<=6;r++)c=d*h+p*f,p=p*h-d*f,d=c,g=g+this.B_re[r]*p-this.B_im[r]*d,y=y+this.B_im[r]*p+this.B_re[r]*d;return e.x=y*this.a+this.x0,e.y=g*this.a+this.y0,e},inverse:function(e){var r,n,i=e.x,o=e.y,a=i-this.x0,s=(o-this.y0)/this.a,u=a/this.a,l=1,c=0,h=0,f=0;for(r=1;r<=6;r++)n=c*s+l*u,l=l*s-c*u,c=n,h=h+this.C_re[r]*l-this.C_im[r]*c,f=f+this.C_im[r]*l+this.C_re[r]*c;for(var p=0;p<this.iterations;p++){var d,g=h,y=f,_=s,v=u;for(r=2;r<=6;r++)d=y*h+g*f,g=g*h-y*f,y=d,_+=(r-1)*(this.B_re[r]*g-this.B_im[r]*y),v+=(r-1)*(this.B_im[r]*g+this.B_re[r]*y);g=1,y=0;var m=this.B_re[1],b=this.B_im[1];for(r=2;r<=6;r++)d=y*h+g*f,g=g*h-y*f,y=d,m+=r*(this.B_re[r]*g-this.B_im[r]*y),b+=r*(this.B_im[r]*g+this.B_re[r]*y);var w=m*m+b*b;h=(_*m+v*b)/w,f=(v*m-_*b)/w}var x=h,S=f,E=1,O=0;for(r=1;r<=9;r++)E*=x,O+=this.D[r]*E;var M=this.lat0+O*t*1e5,P=this.long0+S;return e.x=P,e.y=M,e},names:["New_Zealand_Map_Grid","nzmg"]},Kt={init:function(){},forward:function(t){var e=t.x,r=t.y,n=C(e-this.long0),i=this.x0+this.a*n,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=i,t.y=o,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=C(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},Ht={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ft(this.es)},forward:function(t){var e,r,n=t.x,i=t.y;if(n=C(n-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=20;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<1e-10)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;e=this.a*this.C_x*n*(this.m+Math.cos(i)),r=this.a*this.C_y*i}else{var u=Math.sin(i),l=Math.cos(i);r=this.a*pt(i,u,l,this.en),e=this.a*n*l/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=r,t},inverse:function(t){var r,n,i,o;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,r=t.y/this.a,this.sphere?(r/=this.C_y,i/=this.C_x*(this.m+Math.cos(r)),this.m?r=Ut((this.m*r+Math.sin(r))/this.n):1!==this.n&&(r=Ut(Math.sin(r)/this.n)),i=C(i+this.long0),r=Nt(r)):(r=dt(t.y/this.a,this.es,this.en),(o=Math.abs(r))<e?(o=Math.sin(r),n=this.long0+t.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(r)),i=C(n)):o-1e-10<e&&(i=this.long0)),t.x=i,t.y=r,t},names:["Sinusoidal","sinu"]},Jt={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=C(e-this.long0),i=r,o=Math.PI*Math.sin(r);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<1e-10)break}i/=2,Math.PI/2-Math.abs(r)<1e-10&&(n=0);var s=.900316316158*this.a*n*Math.cos(i)+this.x0,u=1.4142135623731*this.a*Math.sin(i)+this.y0;return t.x=s,t.y=u,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=C(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var i=Math.asin(r);return t.x=n,t.y=i,t},names:["Mollweide","moll"]},Qt={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Lt(this.es),this.e1=At(this.es),this.e2=kt(this.es),this.e3=Ft(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=P(this.e,this.sinphi,this.cosphi),this.ml1=Rt(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=P(this.e,this.sinphi,this.cosphi),this.ml2=Rt(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Rt(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var i=Rt(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-i)}var o=this.ns*C(r-this.long0),a=this.x0+e*Math.sin(o),s=this.y0+this.rh-e*Math.cos(o);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,i;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(0!==r&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return i=C(this.long0+o/this.ns),n=Nt(this.g-r/this.a),t.x=i,t.y=n,t;var a=this.g-r/this.a;return n=Dt(a,this.e0,this.e1,this.e2,this.e3),i=C(this.long0+o/this.ns),t.x=i,t.y=n,t},names:["Equidistant_Conic","eqdc"]},$t={init:function(){this.R=this.a},forward:function(t){var r,n,i=t.x,o=t.y,a=C(i-this.long0);Math.abs(o)<=1e-10&&(r=this.x0+this.R*a,n=this.y0);var s=Ut(2*Math.abs(o/Math.PI));(Math.abs(a)<=1e-10||Math.abs(Math.abs(o)-e)<=1e-10)&&(r=this.x0,n=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var u=.5*Math.abs(Math.PI/a-a/Math.PI),l=u*u,c=Math.sin(s),h=Math.cos(s),f=h/(c+h-1),p=f*f,d=f*(2/c-1),g=d*d,y=Math.PI*this.R*(u*(f-g)+Math.sqrt(l*(f-g)*(f-g)-(g+l)*(p-g)))/(g+l);a<0&&(y=-y),r=this.x0+y;var _=l+f;return y=Math.PI*this.R*(d*_-u*Math.sqrt((g+l)*(l+1)-_*_))/(g+l),n=o>=0?this.y0+y:this.y0-y,t.x=r,t.y=n,t},inverse:function(t){var e,r,n,i,o,a,s,u,l,c,h,f;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,o=(n=t.x/h)*n+(i=t.y/h)*i,h=3*(i*i/(u=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+n*n)*s*s/u/u/u-9*a*s/u/u)/27)/(l=(a-s*s/3/u)/u)/(c=2*Math.sqrt(-l/3)),Math.abs(h)>1&&(h=h>=0?1:-1),f=Math.acos(h)/3,r=t.y>=0?(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-s/3/u)*Math.PI,e=Math.abs(n)<1e-10?this.long0:C(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(n*n-i*i)+o*o))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]},te={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var r,n,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,b,w,x,S,E=t.x,O=t.y,M=Math.sin(t.y),P=Math.cos(t.y),T=C(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(t.x=this.x0+this.a*(e-O)*Math.sin(T),t.y=this.y0-this.a*(e-O)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=1e-10?(t.x=this.x0+this.a*(e+O)*Math.sin(T),t.y=this.y0+this.a*(e+O)*Math.cos(T),t):(m=this.sin_p12*M+this.cos_p12*P*Math.cos(T),v=(_=Math.acos(m))/Math.sin(_),t.x=this.x0+this.a*v*P*Math.sin(T),t.y=this.y0+this.a*v*(this.cos_p12*M-this.sin_p12*P*Math.cos(T)),t):(r=Lt(this.es),n=At(this.es),i=kt(this.es),o=Ft(this.es),Math.abs(this.sin_p12-1)<=1e-10?(a=this.a*Rt(r,n,i,o,e),s=this.a*Rt(r,n,i,o,O),t.x=this.x0+(a-s)*Math.sin(T),t.y=this.y0-(a-s)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=1e-10?(a=this.a*Rt(r,n,i,o,e),s=this.a*Rt(r,n,i,o,O),t.x=this.x0+(a+s)*Math.sin(T),t.y=this.y0+(a+s)*Math.cos(T),t):(u=M/P,l=jt(this.a,this.e,this.sin_p12),c=jt(this.a,this.e,M),h=Math.atan((1-this.es)*u+this.es*l*this.sin_p12/(c*P)),b=0===(f=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(h)-this.sin_p12*Math.cos(T)))?Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.abs(Math.abs(f)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(h)-this.sin_p12*Math.cos(h)):Math.asin(Math.sin(T)*Math.cos(h)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),_=l*b*(1-(w=b*b)*(y=(d=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*d)*(1-y)/6+(x=w*b)/8*(g=p*d)*(1-2*y)+(S=x*b)/120*(y*(4-7*y)-3*p*p*(1-7*y))-S*b/48*g),t.x=this.x0+_*Math.sin(f),t.y=this.y0+_*Math.cos(f),t))},inverse:function(t){var r,n,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,b,w,x,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((r=Math.sqrt(t.x*t.x+t.y*t.y))>2*e*this.a)return;return n=r/this.a,i=Math.sin(n),o=Math.cos(n),a=this.long0,Math.abs(r)<=1e-10?s=this.lat0:(s=Ut(o*this.sin_p12+t.y*i*this.cos_p12/r),u=Math.abs(this.lat0)-e,a=Math.abs(u)<=1e-10?this.lat0>=0?C(this.long0+Math.atan2(t.x,-t.y)):C(this.long0-Math.atan2(-t.x,t.y)):C(this.long0+Math.atan2(t.x*i,r*this.cos_p12*o-t.y*this.sin_p12*i))),t.x=a,t.y=s,t}return l=Lt(this.es),c=At(this.es),h=kt(this.es),f=Ft(this.es),Math.abs(this.sin_p12-1)<=1e-10?(p=this.a*Rt(l,c,h,f,e),r=Math.sqrt(t.x*t.x+t.y*t.y),s=Dt((p-r)/this.a,l,c,h,f),a=C(this.long0+Math.atan2(t.x,-1*t.y)),t.x=a,t.y=s,t):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*Rt(l,c,h,f,e),r=Math.sqrt(t.x*t.x+t.y*t.y),s=Dt((r-p)/this.a,l,c,h,f),a=C(this.long0+Math.atan2(t.x,t.y)),t.x=a,t.y=s,t):(r=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),d=jt(this.a,this.e,this.sin_p12),_=Math.cos(y),m=-(v=this.e*this.cos_p12*_)*v/(1-this.es),b=3*this.es*(1-m)*this.sin_p12*this.cos_p12*_/(1-this.es),S=1-m*(x=(w=r/d)-m*(1+m)*Math.pow(w,3)/6-b*(1+3*m)*Math.pow(w,4)/24)*x/2-w*x*x*x/6,g=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*_),a=C(this.long0+Math.asin(Math.sin(y)*Math.sin(x)/Math.cos(g))),s=Math.atan((1-this.es*S*this.sin_p12/Math.sin(g))*Math.tan(g)/(1-this.es)),t.x=a,t.y=s,t)},names:["Azimuthal_Equidistant","aeqd"]},ee={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,i,o,a,s,u=t.x,l=t.y;return n=C(u-this.long0),e=Math.sin(l),r=Math.cos(l),i=Math.cos(n),((o=this.sin_p14*e+this.cos_p14*r*i)>0||Math.abs(o)<=1e-10)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*i)),t.x=a,t.y=s,t},inverse:function(t){var r,n,i,o,a,s,u;return t.x-=this.x0,t.y-=this.y0,r=Math.sqrt(t.x*t.x+t.y*t.y),n=Ut(r/this.a),i=Math.sin(n),o=Math.cos(n),s=this.long0,Math.abs(r)<=1e-10?(u=this.lat0,t.x=s,t.y=u,t):(u=Ut(o*this.sin_p14+t.y*i*this.cos_p14/r),a=Math.abs(this.lat0)-e,Math.abs(a)<=1e-10?(s=this.lat0>=0?C(this.long0+Math.atan2(t.x,-t.y)):C(this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=u,t):(s=C(this.long0+Math.atan2(t.x*i,r*this.cos_p14*o-t.y*this.sin_p14*i)),t.x=s,t.y=u,t))},names:["ortho"]},re=1,ne=2,ie=3,oe=4,ae=5,se=6,ue=1,le=2,ce=3,he=4;function fe(t,r,n,o){var s;return t<1e-10?(o.value=ue,s=0):(s=Math.atan2(r,n),Math.abs(s)<=i?o.value=ue:s>i&&s<=e+i?(o.value=le,s-=e):s>e+i||s<=-(e+i)?(o.value=ce,s=s>=0?s-a:s+a):(o.value=he,s+=e)),s}function pe(t,e){var r=t+e;return r<-a?r+=o:r>+a&&(r-=o),r}var de,ge={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=e-i/2?this.face=ae:this.lat0<=-(e-i/2)?this.face=se:Math.abs(this.long0)<=i?this.face=re:Math.abs(this.long0)<=e+i?this.face=this.long0>0?ne:oe:this.face=ie,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var r,n,o,s,u,l,c={x:0,y:0},h={value:0};if(t.x-=this.long0,r=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===ae)s=e-r,n>=i&&n<=e+i?(h.value=ue,o=n-e):n>e+i||n<=-(e+i)?(h.value=le,o=n>0?n-a:n+a):n>-(e+i)&&n<=-i?(h.value=ce,o=n+e):(h.value=he,o=n);else if(this.face===se)s=e+r,n>=i&&n<=e+i?(h.value=ue,o=-n+e):n<i&&n>=-i?(h.value=le,o=-n):n<-i&&n>=-(e+i)?(h.value=ce,o=-n-e):(h.value=he,o=n>0?-n+a:-n-a);else{var f,p,d,g,y,_;this.face===ne?n=pe(n,+e):this.face===ie?n=pe(n,+a):this.face===oe&&(n=pe(n,-e)),g=Math.sin(r),y=Math.cos(r),_=Math.sin(n),f=y*Math.cos(n),p=y*_,d=g,this.face===re?o=fe(s=Math.acos(f),d,p,h):this.face===ne?o=fe(s=Math.acos(p),d,-f,h):this.face===ie?o=fe(s=Math.acos(-f),d,-p,h):this.face===oe?o=fe(s=Math.acos(-p),d,f,h):(s=o=0,h.value=ue)}return l=Math.atan(12/a*(o+Math.acos(Math.sin(o)*Math.cos(i))-e)),u=Math.sqrt((1-Math.cos(s))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(o))))),h.value===le?l+=e:h.value===ce?l+=a:h.value===he&&(l+=1.5*a),c.x=u*Math.cos(l),c.y=u*Math.sin(l),c.x=c.x*this.a+this.x0,c.y=c.y*this.a+this.y0,t.x=c.x,t.y=c.y,t},inverse:function(t){var r,n,i,o,s,u,l,c,h,f,p,d,g={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),r=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=ue:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=le,r-=e):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=ce,r=r<0?r+a:r-a):(y.value=he,r+=e),h=a/12*Math.tan(r),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),u=Math.atan(s),(l=1-(i=Math.cos(r))*i*(o=Math.tan(n))*o*(1-Math.cos(Math.atan(1/Math.cos(u)))))<-1?l=-1:l>1&&(l=1),this.face===ae)c=Math.acos(l),g.phi=e-c,y.value===ue?g.lam=u+e:y.value===le?g.lam=u<0?u+a:u-a:y.value===ce?g.lam=u-e:g.lam=u;else if(this.face===se)c=Math.acos(l),g.phi=c-e,y.value===ue?g.lam=-u+e:y.value===le?g.lam=-u:y.value===ce?g.lam=-u-e:g.lam=u<0?-u-a:-u+a;else{var _,v,m;h=(_=l)*_,v=(h+=(m=h>=1?0:Math.sqrt(1-h)*Math.sin(u))*m)>=1?0:Math.sqrt(1-h),y.value===le?(h=v,v=-m,m=h):y.value===ce?(v=-v,m=-m):y.value===he&&(h=v,v=m,m=-h),this.face===ne?(h=_,_=-v,v=h):this.face===ie?(_=-_,v=-v):this.face===oe&&(h=_,_=v,v=-h),g.phi=Math.acos(-m)-e,g.lam=Math.atan2(v,_),this.face===ne?g.lam=pe(g.lam,-e):this.face===ie?g.lam=pe(g.lam,-a):this.face===oe&&(g.lam=pe(g.lam,+e))}return 0!==this.es&&(f=g.phi<0?1:0,p=Math.tan(g.phi),d=this.b/Math.sqrt(p*p+this.one_minus_f_squared),g.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),f&&(g.phi=-g.phi)),g.lam+=this.long0,t.x=g.lam,t.y=g.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};return J.defaultDatum="WGS84",J.Proj=B,J.WGS84=new J.Proj("WGS84"),J.Point=ct,J.toPoint=V,J.defs=S,J.transform=Z,J.mgrs=et,J.version="2.4.4",(de=J).Proj.projections.add(gt),de.Proj.projections.add(wt),de.Proj.projections.add(xt),de.Proj.projections.add(Ot),de.Proj.projections.add(Mt),de.Proj.projections.add(Pt),de.Proj.projections.add(Tt),de.Proj.projections.add(Ct),de.Proj.projections.add(It),de.Proj.projections.add(zt),de.Proj.projections.add(Bt),de.Proj.projections.add(Wt),de.Proj.projections.add(Yt),de.Proj.projections.add(Vt),de.Proj.projections.add(Xt),de.Proj.projections.add(Zt),de.Proj.projections.add(qt),de.Proj.projections.add(Kt),de.Proj.projections.add(Ht),de.Proj.projections.add(Jt),de.Proj.projections.add(Qt),de.Proj.projections.add($t),de.Proj.projections.add(te),de.Proj.projections.add(ee),de.Proj.projections.add(ge),J}))},{}],55:[function(t,e,r){var n=t("buffer").Buffer,i=n.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!i(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=a)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function a(t){return t.toString(this.encoding)}function s(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function u(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(t=t.slice(r,t.length),!((n=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var n,i=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),i=(e+=t.toString(this.encoding,0,i)).length-1,(n=e.charCodeAt(i))>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},o.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},o.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},{buffer:6}],56:[function(t,e,r){e.exports=t("./lib/encoding.js")},{"./lib/encoding.js":57}],57:[function(t,e,r){!function(r){"use strict";function n(t,e,r){return e<=t&&t<=r}void 0!==e&&e.exports&&!r["encoding-indexes"]&&t("./encoding-indexes.js");var i=Math.floor;function o(t){if(void 0===t)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function a(t){return 0<=t&&t<=127}var u=a;function l(t){this.tokens=[].slice.call(t),this.tokens.reverse()}function c(t,e){if(t)throw TypeError("Decoder error");return e||65533}function h(t){throw TypeError("The code point "+t+" could not be encoded.")}function f(t){return t=String(t).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(d,t)?d[t]:null}l.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():-1},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.pop());else this.tokens.push(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.shift());else this.tokens.unshift(t)}};var p=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],d={};p.forEach((function(t){t.encodings.forEach((function(t){t.labels.forEach((function(e){d[e]=t}))}))}));var g,y,_={},v={};function m(t,e){return e&&e[t]||null}function b(t,e){var r=e.indexOf(t);return-1===r?null:r}function w(t){if(!("encoding-indexes"in r))throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?");return r["encoding-indexes"][t]}function x(t,e){if(!(this instanceof x))throw TypeError("Called as a function. Did you forget 'new'?");t=void 0!==t?String(t):"utf-8",e=o(e),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var r=f(t);if(null===r||"replacement"===r.name)throw RangeError("Unknown encoding: "+t);if(!v[r.name])throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?");return this._encoding=r,Boolean(e.fatal)&&(this._error_mode="fatal"),Boolean(e.ignoreBOM)&&(this._ignoreBOM=!0),Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase(),this.fatal="fatal"===this._error_mode,this.ignoreBOM=this._ignoreBOM),this}function S(t,e){if(!(this instanceof S))throw TypeError("Called as a function. Did you forget 'new'?");if(e=o(e),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(e.fatal)?"fatal":"replacement",Boolean(e.NONSTANDARD_allowLegacyEncoding)){var n=f(t=void 0!==t?String(t):"utf-8");if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!_[n.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=n}else this._encoding=f("utf-8"),void 0!==t&&"console"in r&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function E(t){var e=t.fatal,r=0,i=0,o=0,a=128,s=191;this.handler=function(t,u){if(-1===u&&0!==o)return o=0,c(e);if(-1===u)return-1;if(0===o){if(n(u,0,127))return u;if(n(u,194,223))o=1,r=31&u;else if(n(u,224,239))224===u&&(a=160),237===u&&(s=159),o=2,r=15&u;else{if(!n(u,240,244))return c(e);240===u&&(a=144),244===u&&(s=143),o=3,r=7&u}return null}if(!n(u,a,s))return r=o=i=0,a=128,s=191,t.prepend(u),c(e);if(a=128,s=191,r=r<<6|63&u,(i+=1)!==o)return null;var l=r;return r=o=i=0,l}}function O(t){t.fatal,this.handler=function(t,e){if(-1===e)return-1;if(u(e))return e;var r,i;n(e,128,2047)?(r=1,i=192):n(e,2048,65535)?(r=2,i=224):n(e,65536,1114111)&&(r=3,i=240);for(var o=[(e>>6*r)+i];r>0;){var a=e>>6*(r-1);o.push(128|63&a),r-=1}return o}}function M(t,e){var r=e.fatal;this.handler=function(e,n){if(-1===n)return-1;if(a(n))return n;var i=t[n-128];return null===i?c(r):i}}function P(t,e){e.fatal,this.handler=function(e,r){if(-1===r)return-1;if(u(r))return r;var n=b(r,t);return null===n&&h(r),n+128}}function T(t){var e=t.fatal,r=0,i=0,o=0;this.handler=function(t,s){if(-1===s&&0===r&&0===i&&0===o)return-1;var u;if(-1!==s||0===r&&0===i&&0===o||(r=0,i=0,o=0,c(e)),0!==o){u=null,n(s,48,57)&&(u=function(t){if(t>39419&&t<189e3||t>1237575)return null;if(7457===t)return 59335;var e,r=0,n=0,i=w("gb18030-ranges");for(e=0;e<i.length;++e){var o=i[e];if(!(o[0]<=t))break;r=o[0],n=o[1]}return n+t-r}(10*(126*(10*(r-129)+i-48)+o-129)+s-48));var l=[i,o,s];return r=0,i=0,o=0,null===u?(t.prepend(l),c(e)):u}if(0!==i)return n(s,129,254)?(o=s,null):(t.prepend([i,s]),r=0,i=0,c(e));if(0!==r){if(n(s,48,57))return i=s,null;var h=r,f=null;r=0;var p=s<127?64:65;return(n(s,64,126)||n(s,128,254))&&(f=190*(h-129)+(s-p)),null===(u=null===f?null:m(f,w("gb18030")))&&a(s)&&t.prepend(s),null===u?c(e):u}return a(s)?s:128===s?8364:n(s,129,254)?(r=s,null):c(e)}}function C(t,e){t.fatal,this.handler=function(t,r){if(-1===r)return-1;if(u(r))return r;if(58853===r)return h(r);if(e&&8364===r)return 128;var n=b(r,w("gb18030"));if(null!==n){var o=n%190;return[i(n/190)+129,o+(o<63?64:65)]}if(e)return h(r);n=function(t){if(59335===t)return 7457;var e,r=0,n=0,i=w("gb18030-ranges");for(e=0;e<i.length;++e){var o=i[e];if(!(o[1]<=t))break;r=o[1],n=o[0]}return n+t-r}(r);var a=i(n/10/126/10),s=i((n-=10*a*126*10)/10/126),l=i((n-=10*s*126)/10);return[a+129,s+48,l+129,n-10*l+48]}}function I(t){var e=t.fatal,r=0;this.handler=function(t,i){if(-1===i&&0!==r)return r=0,c(e);if(-1===i&&0===r)return-1;if(0!==r){var o=r,s=null;r=0;var u=i<127?64:98;switch((n(i,64,126)||n(i,161,254))&&(s=157*(o-129)+(i-u)),s){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}var l=null===s?null:m(s,w("big5"));return null===l&&a(i)&&t.prepend(i),null===l?c(e):l}return a(i)?i:n(i,129,254)?(r=i,null):c(e)}}function R(t){t.fatal,this.handler=function(t,e){if(-1===e)return-1;if(u(e))return e;var r=function(t){var e=y=y||w("big5").map((function(t,e){return e<5024?null:t}));return 9552===t||9566===t||9569===t||9578===t||21313===t||21317===t?e.lastIndexOf(t):b(t,e)}(e);if(null===r)return h(e);var n=i(r/157)+129;if(n<161)return h(e);var o=r%157;return[n,o+(o<63?64:98)]}}function L(t){var e=t.fatal,r=!1,i=0;this.handler=function(t,o){if(-1===o&&0!==i)return i=0,c(e);if(-1===o&&0===i)return-1;if(142===i&&n(o,161,223))return i=0,65216+o;if(143===i&&n(o,161,254))return r=!0,i=o,null;if(0!==i){var s=i;i=0;var u=null;return n(s,161,254)&&n(o,161,254)&&(u=m(94*(s-161)+(o-161),w(r?"jis0212":"jis0208"))),r=!1,n(o,161,254)||t.prepend(o),null===u?c(e):u}return a(o)?o:142===o||143===o||n(o,161,254)?(i=o,null):c(e)}}function A(t){t.fatal,this.handler=function(t,e){if(-1===e)return-1;if(u(e))return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return[142,e-65377+161];8722===e&&(e=65293);var r=b(e,w("jis0208"));return null===r?h(e):[i(r/94)+161,r%94+161]}}function k(t){var e=t.fatal,r=0,i=1,o=2,a=3,s=4,u=5,l=6,h=r,f=r,p=0,d=!1;this.handler=function(t,g){switch(h){default:case r:return 27===g?(h=u,null):n(g,0,127)&&14!==g&&15!==g&&27!==g?(d=!1,g):-1===g?-1:(d=!1,c(e));case i:return 27===g?(h=u,null):92===g?(d=!1,165):126===g?(d=!1,8254):n(g,0,127)&&14!==g&&15!==g&&27!==g&&92!==g&&126!==g?(d=!1,g):-1===g?-1:(d=!1,c(e));case o:return 27===g?(h=u,null):n(g,33,95)?(d=!1,65344+g):-1===g?-1:(d=!1,c(e));case a:return 27===g?(h=u,null):n(g,33,126)?(d=!1,p=g,h=s,null):-1===g?-1:(d=!1,c(e));case s:if(27===g)return h=u,c(e);if(n(g,33,126)){h=a;var y=m(94*(p-33)+g-33,w("jis0208"));return null===y?c(e):y}return-1===g?(h=a,t.prepend(g),c(e)):(h=a,c(e));case u:return 36===g||40===g?(p=g,h=l,null):(t.prepend(g),d=!1,h=f,c(e));case l:var _=p;p=0;var v=null;if(40===_&&66===g&&(v=r),40===_&&74===g&&(v=i),40===_&&73===g&&(v=o),36!==_||64!==g&&66!==g||(v=a),null!==v){h=h=v;var b=d;return d=!0,b?c(e):null}return t.prepend([_,g]),d=!1,h=f,c(e)}}}function F(t){t.fatal;var e=0,r=1,n=2,o=e;this.handler=function(t,a){if(-1===a&&o!==e)return t.prepend(a),o=e,[27,40,66];if(-1===a&&o===e)return-1;if(!(o!==e&&o!==r||14!==a&&15!==a&&27!==a))return h(65533);if(o===e&&u(a))return a;if(o===r&&(u(a)&&92!==a&&126!==a||165==a||8254==a)){if(u(a))return a;if(165===a)return 92;if(8254===a)return 126}if(u(a)&&o!==e)return t.prepend(a),o=e,[27,40,66];if((165===a||8254===a)&&o!==r)return t.prepend(a),o=r,[27,40,74];8722===a&&(a=65293);var s=b(a,w("jis0208"));return null===s?h(a):o!==n?(t.prepend(a),o=n,[27,36,66]):[i(s/94)+33,s%94+33]}}function j(t){var e=t.fatal,r=0;this.handler=function(t,i){if(-1===i&&0!==r)return r=0,c(e);if(-1===i&&0===r)return-1;if(0!==r){var o=r,s=null;r=0;var u=i<127?64:65,l=o<160?129:193;if((n(i,64,126)||n(i,128,252))&&(s=188*(o-l)+i-u),n(s,8836,10715))return 48508+s;var h=null===s?null:m(s,w("jis0208"));return null===h&&a(i)&&t.prepend(i),null===h?c(e):h}return a(i)||128===i?i:n(i,161,223)?65216+i:n(i,129,159)||n(i,224,252)?(r=i,null):c(e)}}function N(t){t.fatal,this.handler=function(t,e){if(-1===e)return-1;if(u(e)||128===e)return e;if(165===e)return 92;if(8254===e)return 126;if(n(e,65377,65439))return e-65377+161;8722===e&&(e=65293);var r=function(t){return(g=g||w("jis0208").map((function(t,e){return n(e,8272,8835)?null:t}))).indexOf(t)}(e);if(null===r)return h(e);var o=i(r/188),a=r%188;return[o+(o<31?129:193),a+(a<63?64:65)]}}function D(t){var e=t.fatal,r=0;this.handler=function(t,i){if(-1===i&&0!==r)return r=0,c(e);if(-1===i&&0===r)return-1;if(0!==r){var o=r,s=null;r=0,n(i,65,254)&&(s=190*(o-129)+(i-65));var u=null===s?null:m(s,w("euc-kr"));return null===s&&a(i)&&t.prepend(i),null===u?c(e):u}return a(i)?i:n(i,129,254)?(r=i,null):c(e)}}function z(t){t.fatal,this.handler=function(t,e){if(-1===e)return-1;if(u(e))return e;var r=b(e,w("euc-kr"));return null===r?h(e):[i(r/190)+129,r%190+65]}}function G(t,e){var r=t>>8,n=255&t;return e?[r,n]:[n,r]}function B(t,e){var r=e.fatal,i=null,o=null;this.handler=function(e,a){if(-1===a&&(null!==i||null!==o))return c(r);if(-1===a&&null===i&&null===o)return-1;if(null===i)return i=a,null;var s;if(s=t?(i<<8)+a:(a<<8)+i,i=null,null!==o){var u=o;return o=null,n(s,56320,57343)?65536+1024*(u-55296)+(s-56320):(e.prepend(G(s,t)),c(r))}return n(s,55296,56319)?(o=s,null):n(s,56320,57343)?c(r):s}}function U(t,e){e.fatal,this.handler=function(e,r){if(-1===r)return-1;if(n(r,0,65535))return G(r,t);var i=G(55296+(r-65536>>10),t),o=G(56320+(r-65536&1023),t);return i.concat(o)}}function W(t){t.fatal,this.handler=function(t,e){return-1===e?-1:a(e)?e:63360+e-128}}function Y(t){t.fatal,this.handler=function(t,e){return-1===e?-1:u(e)?e:n(e,63360,63487)?e-63360+128:h(e)}}Object.defineProperty&&(Object.defineProperty(x.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(x.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(x.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),x.prototype.decode=function(t,e){var r;r="object"===s(t)&&t instanceof ArrayBuffer?new Uint8Array(t):"object"===s(t)&&"buffer"in t&&t.buffer instanceof ArrayBuffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e=o(e),this._do_not_flush||(this._decoder=v[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(e.stream);for(var n,i=new l(r),a=[];;){var u=i.read();if(-1===u)break;if(-1===(n=this._decoder.handler(i,u)))break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._do_not_flush){do{if(-1===(n=this._decoder.handler(i,i.read())))break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}while(!i.endOfStream());this._decoder=null}return function(t){var e,r;return e=["UTF-8","UTF-16LE","UTF-16BE"],r=this._encoding.name,-1===e.indexOf(r)||this._ignoreBOM||this._BOMseen||(t.length>0&&65279===t[0]?(this._BOMseen=!0,t.shift()):t.length>0&&(this._BOMseen=!0)),function(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return e}(t)}.call(this,a)},Object.defineProperty&&Object.defineProperty(S.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),S.prototype.encode=function(t,e){t=void 0===t?"":String(t),e=o(e),this._do_not_flush||(this._encoder=_[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(e.stream);for(var r,n=new l(function(t){for(var e=String(t),r=e.length,n=0,i=[];n<r;){var o=e.charCodeAt(n);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(n===r-1)i.push(65533);else{var a=e.charCodeAt(n+1);if(56320<=a&&a<=57343){var s=1023&o,u=1023&a;i.push(65536+(s<<10)+u),n+=1}else i.push(65533)}n+=1}return i}(t)),i=[];;){var a=n.read();if(-1===a)break;if(-1===(r=this._encoder.handler(n,a)))break;Array.isArray(r)?i.push.apply(i,r):i.push(r)}if(!this._do_not_flush){for(;-1!==(r=this._encoder.handler(n,n.read()));)Array.isArray(r)?i.push.apply(i,r):i.push(r);this._encoder=null}return new Uint8Array(i)},_["UTF-8"]=function(t){return new O(t)},v["UTF-8"]=function(t){return new E(t)},"encoding-indexes"in r&&p.forEach((function(t){"Legacy single-byte encodings"===t.heading&&t.encodings.forEach((function(t){var e=t.name,r=w(e.toLowerCase());v[e]=function(t){return new M(r,t)},_[e]=function(t){return new P(r,t)}}))})),v.GBK=function(t){return new T(t)},_.GBK=function(t){return new C(t,!0)},_.gb18030=function(t){return new C(t)},v.gb18030=function(t){return new T(t)},_.Big5=function(t){return new R(t)},v.Big5=function(t){return new I(t)},_["EUC-JP"]=function(t){return new A(t)},v["EUC-JP"]=function(t){return new L(t)},_["ISO-2022-JP"]=function(t){return new F(t)},v["ISO-2022-JP"]=function(t){return new k(t)},_.Shift_JIS=function(t){return new N(t)},v.Shift_JIS=function(t){return new j(t)},_["EUC-KR"]=function(t){return new z(t)},v["EUC-KR"]=function(t){return new D(t)},_["UTF-16BE"]=function(t){return new U(!0,t)},v["UTF-16BE"]=function(t){return new B(!0,t)},_["UTF-16LE"]=function(t){return new U(!1,t)},v["UTF-16LE"]=function(t){return new B(!1,t)},_["x-user-defined"]=function(t){return new Y(t)},v["x-user-defined"]=function(t){return new W(t)},r.TextEncoder||(r.TextEncoder=S),r.TextDecoder||(r.TextDecoder=x),void 0!==e&&e.exports&&(e.exports={TextEncoder:r.TextEncoder,TextDecoder:r.TextDecoder,EncodingIndexes:r["encoding-indexes"]})}(this||{})},{"./encoding-indexes.js":5}],58:[function(t,e,n){(function(r,n){"use strict";var i=t("proj4");i.default&&(i=i.default);var o=t("./unzip"),a=t("./binaryajax"),s=t("./parseShp"),u=t("parsedbf"),l=t("lie"),c=new(t("lru-cache"))({max:20});function h(t){if(!t)throw new Error("forgot to pass buffer");return n.isBuffer(t)?t:t instanceof r.ArrayBuffer?new n(t):t.buffer instanceof r.ArrayBuffer?1===t.BYTES_PER_ELEMENT?new n(t):new n(t.buffer):void 0}function f(t,e){return"string"==typeof t&&c.has(t)?l.resolve(c.get(t)):f.getShapefile(t,e).then((function(e){return"string"==typeof t&&c.set(t,e),e}))}f.combine=function(t){for(var e={type:"FeatureCollection",features:[]},r=0,n=t[0].length;r<n;)e.features.push({type:"Feature",geometry:t[0][r],properties:t[1][r]}),r++;return e},f.parseZip=function(t,e){var r;t=h(t);var n=o(t),a=[];for(r in e=e||[],n)-1===r.indexOf("__MACOSX")&&("shp"===r.slice(-3).toLowerCase()?(a.push(r.slice(0,-4)),n[r.slice(0,-3)+r.slice(-3).toLowerCase()]=n[r]):"prj"===r.slice(-3).toLowerCase()?n[r.slice(0,-3)+r.slice(-3).toLowerCase()]=i(n[r]):"json"===r.slice(-4).toLowerCase()||e.indexOf(r.split(".").pop())>-1?a.push(r.slice(0,-3)+r.slice(-3).toLowerCase()):"dbf"!==r.slice(-3).toLowerCase()&&"cpg"!==r.slice(-3).toLowerCase()||(n[r.slice(0,-3)+r.slice(-3).toLowerCase()]=n[r]));if(!a.length)throw new Error("no layers founds");var l=a.map((function(t){var r,i,o=t.lastIndexOf(".");return o>-1&&t.slice(o).indexOf("json")>-1?(r=JSON.parse(n[t])).fileName=t.slice(0,o):e.indexOf(t.slice(o+1))>-1?(r=n[t]).fileName=t:(n[t+".dbf"]&&(i=u(n[t+".dbf"],n[t+".cpg"])),(r=f.combine([s(n[t+".shp"],n[t+".prj"]),i])).fileName=t),r}));return 1===l.length?l[0]:l},f.getShapefile=function(t,e){return"string"==typeof t?".zip"===t.slice(-4).toLowerCase()?function(t,e){return a(t).then((function(t){return f.parseZip(t,e)}))}(t,e):l.all([l.all([a(t+".shp"),a(t+".prj")]).then((function(t){return s(t[0],!!t[1]&&i(t[1]))})),l.all([a(t+".dbf"),a(t+".cpg")]).then((function(t){return u(t[0],t[1])}))]).then(f.combine):new l((function(e){e(f.parseZip(t))}))},f.parseShp=function(t,e){return t=h(t),n.isBuffer(e)&&(e=e.toString()),"string"==typeof e?(e=i(e),s(t,e)):s(t)},f.parseDbf=function(t,e){return t=h(t),u(t,e)},e.exports=f}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./binaryajax":1,"./parseShp":2,"./unzip":3,buffer:6,lie:34,"lru-cache":35,parsedbf:53,proj4:54}]},{},[58])(58)},"object"===s(e)&&void 0!==t?t.exports=a():(i=[],void 0===(o="function"==typeof(n=a)?n.apply(e,i):n)||(t.exports=o))}).call(this,r(60))},function(t,e,r){(function(t){var r,n,i,o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window,o=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==a(t)&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=7)}([function(t,e,r){t.exports=function(){"use strict";function t(t,n,i,o,a){!function t(r,n,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=n-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(r,n,Math.max(i,Math.floor(n-u*c/s+h)),Math.min(o,Math.floor(n+(s-u)*c/s+h)),a)}var f=r[n],p=i,d=o;for(e(r,i,n),a(r[o],f)>0&&e(r,i,o);p<d;){for(e(r,p,d),p++,d--;a(r[p],f)<0;)p++;for(;a(r[d],f)>0;)d--}0===a(r[i],f)?e(r,i,d):e(r,++d,o),d<=n&&(i=d+1),n<=d&&(o=d-1)}}(t,n,i||0,o||t.length-1,a||r)}function e(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function r(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function o(t,e){a(t,0,t.children.length,e,t)}function a(t,e,r,n,i){i||(i=d(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o=e;o<r;o++){var a=t.children[o];s(i,t.leaf?n(a):a)}return i}function s(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function l(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function f(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,r,n,i,o){for(var a=[r,n];a.length;)if(!((n=a.pop())-(r=a.pop())<=i)){var s=r+Math.ceil((n-r)/i/2)*i;t(e,s,r,n,o),a.push(r,s,s,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,r=[];if(!p(t,e))return r;for(var n=this.toBBox,i=[];e;){for(var o=0;o<e.children.length;o++){var a=e.children[o],s=e.leaf?n(a):a;p(t,s)&&(e.leaf?r.push(a):f(t,s)?this._all(a,r):i.push(a))}e=i.pop()}return r},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var r=[];e;){for(var n=0;n<e.children.length;n++){var i=e.children[n],o=e.leaf?this.toBBox(i):i;if(p(t,o)){if(e.leaf||f(t,o))return!0;r.push(i)}}e=r.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var n=this.data;this.data=r,r=n}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=d([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var r,n,o,a=this.data,s=this.toBBox(t),u=[],l=[];a||u.length;){if(a||(a=u.pop(),n=u[u.length-1],r=l.pop(),o=!0),a.leaf){var c=i(t,a.children,e);if(-1!==c)return a.children.splice(c,1),u.push(a),this._condense(u),this}o||a.leaf||!f(a,s)?n?(r++,a=n.children[r],o=!1):a=null:(u.push(a),l.push(r),r=0,n=a,a=a.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},n.prototype._build=function(t,e,r,n){var i,a=r-e+1,s=this._maxEntries;if(a<=s)return o(i=d(t.slice(e,r+1)),this.toBBox),i;n||(n=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,n-1))),(i=d([])).leaf=!1,i.height=n;var u=Math.ceil(a/s),l=u*Math.ceil(Math.sqrt(s));g(t,e,r,l,this.compareMinX);for(var c=e;c<=r;c+=l){var h=Math.min(c+l-1,r);g(t,c,h,u,this.compareMinY);for(var f=c;f<=h;f+=u){var p=Math.min(f+u-1,h);i.children.push(this._build(t,f,p,n-1))}}return o(i,this.toBBox),i},n.prototype._chooseSubtree=function(t,e,r,n){for(;n.push(e),!e.leaf&&n.length-1!==r;){for(var i=1/0,o=1/0,a=void 0,s=0;s<e.children.length;s++){var u=e.children[s],l=c(u),h=(f=t,p=u,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);h<o?(o=h,i=l<i?l:i,a=u):h===o&&l<i&&(i=l,a=u)}e=a||e.children[0]}var f,p;return e},n.prototype._insert=function(t,e,r){var n=r?t:this.toBBox(t),i=[],o=this._chooseSubtree(n,this.data,e,i);for(o.children.push(t),s(o,n);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(n,i,e)},n.prototype._split=function(t,e){var r=t[e],n=r.children.length,i=this._minEntries;this._chooseSplitAxis(r,i,n);var a=this._chooseSplitIndex(r,i,n),s=d(r.children.splice(a,r.children.length-a));s.height=r.height,s.leaf=r.leaf,o(r,this.toBBox),o(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},n.prototype._splitRoot=function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,r){for(var n,i,o,s,u,l,h,f=1/0,p=1/0,d=e;d<=r-e;d++){var g=a(t,0,d,this.toBBox),y=a(t,d,r,this.toBBox),_=(i=g,o=y,s=Math.max(i.minX,o.minX),u=Math.max(i.minY,o.minY),l=Math.min(i.maxX,o.maxX),h=Math.min(i.maxY,o.maxY),Math.max(0,l-s)*Math.max(0,h-u)),v=c(g)+c(y);_<f?(f=_,n=d,p=v<p?v:p):_===f&&v<p&&(p=v,n=d)}return n||r-e},n.prototype._chooseSplitAxis=function(t,e,r){var n=t.leaf?this.compareMinX:u,i=t.leaf?this.compareMinY:l;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,i)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,r,n){t.children.sort(n);for(var i=this.toBBox,o=a(t,0,e,i),u=a(t,r-e,r,i),l=h(o)+h(u),c=e;c<r-e;c++){var f=t.children[c];s(o,t.leaf?i(f):f),l+=h(o)}for(var p=r-e-1;p>=e;p--){var d=t.children[p];s(u,t.leaf?i(d):d),l+=h(u)}return l},n.prototype._adjustParentBBoxes=function(t,e,r){for(var n=r;n>=0;n--)s(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,r=void 0;e>=0;e--)0===t[e].children.length?e>0?(r=t[e-1].children).splice(r.indexOf(t[e]),1):this.clear():o(t[e],this.toBBox)},n}()},function(t,e){var r=null,n=null;function i(t,e,r){t.addEventListener(e,(function(t){var i=new MouseEvent(r,t);i.pointerId=1,i.isPrimary=!0,i.pointerType="mouse",i.width=1,i.height=1,i.tiltX=0,i.tiltY=0,"buttons"in t&&0!==t.buttons?i.pressure=.5:i.pressure=0;var o=t.target;null!==n&&(o=n,"mouseup"===e&&(n=null)),o.dispatchEvent(i),i.defaultPrevented&&t.preventDefault()}))}function o(t,e,n){t.addEventListener(e,(function(t){for(var i=t.changedTouches,o=i.length,a=0;a<o;a++){var s=new CustomEvent(n,{bubbles:!0,cancelable:!0});s.ctrlKey=t.ctrlKey,s.shiftKey=t.shiftKey,s.altKey=t.altKey,s.metaKey=t.metaKey;var u=i.item(a);s.clientX=u.clientX,s.clientY=u.clientY,s.screenX=u.screenX,s.screenY=u.screenY,s.pageX=u.pageX,s.pageY=u.pageY;var l=u.target.getBoundingClientRect();s.offsetX=u.clientX-l.left,s.offsetY=u.clientY-l.top,s.pointerId=1+u.identifier,s.button=0,s.buttons=1,s.movementX=0,s.movementY=0,s.region=null,s.relatedTarget=null,s.x=s.clientX,s.y=s.clientY,s.pointerType="touch",s.width=1,s.height=1,s.tiltX=0,s.tiltY=0,s.pressure=1,"touchstart"===e&&null===r&&(r=u.identifier),s.isPrimary=u.identifier===r,"touchend"===e&&s.isPrimary&&(r=null),t.target.dispatchEvent(s),s.defaultPrevented&&t.preventDefault()}}))}"PointerEvent"in window||(Element.prototype.setPointerCapture=Element.prototype.setCapture,Element.prototype.releasePointerCapture=Element.prototype.releaseCapture,"TouchEvent"in window||(i(document,"mousedown","pointerdown"),i(document,"mousemove","pointermove"),i(document,"mouseup","pointerup")),o(document,"touchstart","pointerdown"),o(document,"touchmove","pointermove"),o(document,"touchend","pointerup"))},function(t,e,r){"use strict";t.exports=i;var n=r(4);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var i=r.pos-1;i>=t;i--)r.buf[i+n]=r.buf[i]}function l(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function g(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function _(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function m(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function b(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),i=n>>3,o=this.pos;this.type=7&n,t(i,e,this),this.pos===o&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=b(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,i,o=r.buf;if(n=(112&(i=o[r.pos++]))>>4,i<128)return s(t,n,e);if(n|=(127&(i=o[r.pos++]))<<3,i<128)return s(t,n,e);if(n|=(127&(i=o[r.pos++]))<<10,i<128)return s(t,n,e);if(n|=(127&(i=o[r.pos++]))<<17,i<128)return s(t,n,e);if(n|=(127&(i=o[r.pos++]))<<24,i<128)return s(t,n,e);if(n|=(1&(i=o[r.pos++]))<<31,i<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&o?function(t,e,r){return o.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){for(var n="",i=e;i<r;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>r)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,n+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),n+=String.fromCharCode(l),i+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==i.Bytes)return t.push(this.readVarint(e));var r=a(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==i.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==i.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==i.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==i.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==i.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;this.buf[this.pos++]>127;);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),m(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),m(this.buf,-1&t,this.pos),m(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;if(t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;e.buf[e.pos++]|=r|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,i,o=0;o<e.length;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){n>56319||o+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):i=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&(t[r++]=239,t[r++]=191,t[r++]=189,i=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&u(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&u(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,i.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,_,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e,r){var n=r(5);e.Processor=n},function(t,e){e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*g}},function(t,e,r){var n=r(6).newImageData;function i(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}function r(t,r,n){return e?new ImageData(t,r,n):{data:t,width:r,height:n}}return function(e){var n,i,o=e.buffers,a=e.meta,s=e.imageOps,u=e.width,l=e.height,c=o.length,h=o[0].byteLength;if(s){var f=new Array(c);for(i=0;i<c;++i)f[i]=r(new Uint8ClampedArray(o[i]),u,l);n=t(f,a).data}else{n=new Uint8ClampedArray(h);var p=new Array(c),d=new Array(c);for(i=0;i<c;++i)p[i]=new Uint8ClampedArray(o[i]),d[i]=[0,0,0,0];for(var g=0;g<h;g+=4){for(var y=0;y<c;++y){var _=p[y];d[y][0]=_[g],d[y][1]=_[g+1],d[y][2]=_[g+2],d[y][3]=_[g+3]}var v=t(d,a);n[g]=v[0],n[g+1]=v[1],n[g+2]=v[2],n[g+3]=v[3]}}return n.buffer}}function o(t,e){var r=Object.keys(t.lib||{}).map((function(e){return"var "+e+" = "+t.lib[e].toString()+";"})).concat(["var __minion__ = ("+i.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Blob(r,{type:"text/javascript"}),o=URL.createObjectURL(n),a=new Worker(o);return a.addEventListener("message",e),a}function a(t){var e;this._imageOps=!!t.imageOps;var r=[];if(e=0===t.threads?0:this._imageOps?1:t.threads||1)for(var n=0;n<e;++n)r[n]=o(t,this._onWorkerMessage.bind(this,n));else r[0]=function(t,e){var r=i(t.operation);return{postMessage:function(t){setTimeout((function(){e({data:{buffer:r(t),meta:t.meta}})}),0)}}}(t,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}a.prototype.process=function(t,e,r){this._enqueue({inputs:t,meta:e,callback:r}),this._dispatch()},a.prototype.destroy=function(){for(var t in this)this[t]=null;this._destroyed=!0},a.prototype._enqueue=function(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},a.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var t=this._job=this._queue.shift(),e=t.inputs[0].width,r=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),i=this._workers.length;if(this._running=i,1===i)this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:r},n);else for(var o=t.inputs[0].data.length,a=4*Math.ceil(o/4/i),s=0;s<i;++s){for(var u=s*a,l=[],c=0,h=n.length;c<h;++c)l.push(n[s].slice(u,u+a));this._workers[s].postMessage({buffers:l,meta:t.meta,imageOps:this._imageOps,width:e,height:r},l)}}},a.prototype._onWorkerMessage=function(t,e){this._destroyed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())},a.prototype._resolveJob=function(){var t,e,r=this._job,i=this._workers.length;if(1===i)t=new Uint8ClampedArray(this._dataLookup[0].buffer),e=this._dataLookup[0].meta;else{var o=r.inputs[0].data.length;t=new Uint8ClampedArray(o),e=new Array(o);for(var a=4*Math.ceil(o/4/i),s=0;s<i;++s){var u=this._dataLookup[s].buffer,l=s*a;t.set(new Uint8ClampedArray(u),l),e[s]=this._dataLookup[s].meta}}this._job=null,this._dataLookup={},r.callback(null,n(t,r.inputs[0].width,r.inputs[0].height),e),this._dispatch()},t.exports=a},function(t,e){var r=!0;try{new ImageData(10,10)}catch(t){r=!1}var n=document.createElement("canvas").getContext("2d");e.newImageData=function(t,e,i){if(r)return new ImageData(t,e,i);var o=n.createImageData(e,i);return o.data.set(t),o}},function(t,e,r){"use strict";function n(){return function(){throw new Error("Unimplemented abstract method.")}()}r.r(e);var i=0;function o(t){return t.ol_uid||(t.ol_uid=String(++i))}var s,u=(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),l=function(t){function e(e){var r=this,n="Assertion failed. See https://openlayers.org/en/v"+"6.3.0".split("-")[0]+"/doc/errors/#"+e+" for details.";return(r=t.call(this,n)||this).code=e,r.name="AssertionError",r.message=n,r}return u(e,t),e}(Error),c="add",h="remove",f="propertychange",p="function"==typeof Object.assign?Object.assign:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1,i=arguments.length;n<i;++n){var o=arguments[n];if(null!=o)for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a])}return r};function d(t){for(var e in t)delete t[e]}var g="function"==typeof Object.values?Object.values:function(t){var e=[];for(var r in t)e.push(t[r]);return e};function y(t){var e;for(e in t)return!1;return!e}function _(t,e,r,n,i){if(n&&n!==t&&(r=r.bind(n)),i){var o=r;r=function(){t.removeEventListener(e,r),o.apply(this,arguments)}}var a={target:t,type:e,listener:r};return t.addEventListener(e,r),a}function v(t,e,r,n){return _(t,e,r,n,!0)}function m(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),d(t))}var b=function(){function t(){this.disposed_=!1}return t.prototype.dispose=function(){this.disposed_||(this.disposed_=!0,this.disposeInternal())},t.prototype.disposeInternal=function(){},t}();function w(t,e){return t>e?1:t<e?-1:0}function x(t,e){return t.indexOf(e)>=0}function S(t,e,r){var n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;var i=void 0;if(r>0){for(i=1;i<n;++i)if(t[i]<e)return i-1}else if(r<0){for(i=1;i<n;++i)if(t[i]<=e)return i}else for(i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function E(t,e,r){for(;e<r;){var n=t[e];t[e]=t[r],t[r]=n,++e,--r}}function O(t,e){for(var r=Array.isArray(e)?e:[e],n=r.length,i=0;i<n;i++)t[t.length]=r[i]}function M(t,e){for(var r,n=t.length>>>0,i=0;i<n;i++)if(e(r=t[i],i,t))return r;return null}function P(t,e){var r=t.length;if(r!==e.length)return!1;for(var n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function T(t,e){var r;return t.every((function(n,i){return r=i,!e(n,i,t)}))?-1:r}function C(){return!0}function I(){return!1}function R(){}function L(t){t.stopPropagation()}var A,k,F,j=function(){function t(t){this.propagationStopped,this.type=t,this.target=null}return t.prototype.preventDefault=function(){this.propagationStopped=!0},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t}(),N=(k=function(t,e){return(k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}k(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),D=function(t){function e(e){var r=t.call(this)||this;return r.eventTarget_=e,r.pendingRemovals_={},r.dispatching_={},r.listeners_={},r}return N(e,t),e.prototype.addEventListener=function(t,e){if(t&&e){var r=this.listeners_[t];r||(r=[],this.listeners_[t]=r),-1===r.indexOf(e)&&r.push(e)}},e.prototype.dispatchEvent=function(t){var e="string"==typeof t?new j(t):t,r=e.type;e.target||(e.target=this.eventTarget_||this);var n,i=this.listeners_[r];if(i){r in this.dispatching_||(this.dispatching_[r]=0,this.pendingRemovals_[r]=0),++this.dispatching_[r];for(var o=0,a=i.length;o<a;++o)if(!1===(n="handleEvent"in i[o]?i[o].handleEvent(e):i[o].call(this,e))||e.propagationStopped){n=!1;break}if(--this.dispatching_[r],0===this.dispatching_[r]){var s=this.pendingRemovals_[r];for(delete this.pendingRemovals_[r];s--;)this.removeEventListener(r,R);delete this.dispatching_[r]}return n}},e.prototype.disposeInternal=function(){d(this.listeners_)},e.prototype.getListeners=function(t){return this.listeners_[t]},e.prototype.hasListener=function(t){return t?t in this.listeners_:Object.keys(this.listeners_).length>0},e.prototype.removeEventListener=function(t,e){var r=this.listeners_[t];if(r){var n=r.indexOf(e);-1!==n&&(t in this.pendingRemovals_?(r[n]=R,++this.pendingRemovals_[t]):(r.splice(n,1),0===r.length&&delete this.listeners_[t]))}},e}(b),z="change",G="error",B="contextmenu",U="click",W="drop",Y="keydown",V="keypress",X="load",Z="resize",q="touchmove",K="wheel",H=(A=function(t,e){return(A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}A(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),J=function(t){function e(){var e=t.call(this)||this;return e.revision_=0,e}return H(e,t),e.prototype.changed=function(){++this.revision_,this.dispatchEvent(z)},e.prototype.getRevision=function(){return this.revision_},e.prototype.on=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=_(this,t[i],e);return n}return _(this,t,e)},e.prototype.once=function(t,e){if(Array.isArray(t)){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=v(this,t[i],e);return n}return v(this,t,e)},e.prototype.un=function(t,e){if(Array.isArray(t))for(var r=0,n=t.length;r<n;++r)this.removeEventListener(t[r],e);else this.removeEventListener(t,e)},e}(D),Q=(F=function(t,e){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}F(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),$=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.key=r,i.oldValue=n,i}return Q(e,t),e}(j),tt=function(t){function e(e){var r=t.call(this)||this;return o(r),r.values_={},void 0!==e&&r.setProperties(e),r}return Q(e,t),e.prototype.get=function(t){var e;return this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e},e.prototype.getKeys=function(){return Object.keys(this.values_)},e.prototype.getProperties=function(){return p({},this.values_)},e.prototype.notify=function(t,e){var r;r=rt(t),this.dispatchEvent(new $(r,t,e)),r=f,this.dispatchEvent(new $(r,t,e))},e.prototype.set=function(t,e,r){if(r)this.values_[t]=e;else{var n=this.values_[t];this.values_[t]=e,n!==e&&this.notify(t,n)}},e.prototype.setProperties=function(t,e){for(var r in t)this.set(r,t[r],e)},e.prototype.unset=function(t,e){if(t in this.values_){var r=this.values_[t];delete this.values_[t],e||this.notify(t,r)}},e}(J),et={};function rt(t){return et.hasOwnProperty(t)?et[t]:et[t]="change:"+t}var nt,it=tt,ot=(nt=function(t,e){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}nt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),at=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.element=r,i.index=n,i}return ot(e,t),e}(j),st=function(t){function e(e,r){var n=t.call(this)||this,i=r||{};if(n.unique_=!!i.unique,n.array_=e||[],n.unique_)for(var o=0,a=n.array_.length;o<a;++o)n.assertUnique_(n.array_[o],o);return n.updateLength_(),n}return ot(e,t),e.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},e.prototype.extend=function(t){for(var e=0,r=t.length;e<r;++e)this.push(t[e]);return this},e.prototype.forEach=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)t(e[r],r,e)},e.prototype.getArray=function(){return this.array_},e.prototype.item=function(t){return this.array_[t]},e.prototype.getLength=function(){return this.get("length")},e.prototype.insertAt=function(t,e){this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new at(c,e,t))},e.prototype.pop=function(){return this.removeAt(this.getLength()-1)},e.prototype.push=function(t){this.unique_&&this.assertUnique_(t);var e=this.getLength();return this.insertAt(e,t),this.getLength()},e.prototype.remove=function(t){for(var e=this.array_,r=0,n=e.length;r<n;++r)if(e[r]===t)return this.removeAt(r)},e.prototype.removeAt=function(t){var e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new at(h,e,t)),e},e.prototype.setAt=function(t,e){var r=this.getLength();if(t<r){this.unique_&&this.assertUnique_(e,t);var n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new at(h,n,t)),this.dispatchEvent(new at(c,e,t))}else{for(var i=r;i<t;++i)this.insertAt(i,void 0);this.insertAt(t,e)}},e.prototype.updateLength_=function(){this.set("length",this.array_.length)},e.prototype.assertUnique_=function(t,e){for(var r=0,n=this.array_.length;r<n;++r)if(this.array_[r]===t&&r!==e)throw new l(58)},e}(it);function ut(t,e){if(!t)throw new l(e)}var lt,ct=(lt=function(t,e){return(lt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}lt(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ht=function(t){function e(e){var r=t.call(this)||this;if(r.id_=void 0,r.geometryName_="geometry",r.style_=null,r.styleFunction_=void 0,r.geometryChangeKey_=null,r.addEventListener(rt(r.geometryName_),r.handleGeometryChanged_),e)if("function"==typeof e.getSimplifiedGeometry){var n=e;r.setGeometry(n)}else{var i=e;r.setProperties(i)}return r}return ct(e,t),e.prototype.clone=function(){var t=new e(this.getProperties());t.setGeometryName(this.getGeometryName());var r=this.getGeometry();r&&t.setGeometry(r.clone());var n=this.getStyle();return n&&t.setStyle(n),t},e.prototype.getGeometry=function(){return this.get(this.geometryName_)},e.prototype.getId=function(){return this.id_},e.prototype.getGeometryName=function(){return this.geometryName_},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.handleGeometryChange_=function(){this.changed()},e.prototype.handleGeometryChanged_=function(){this.geometryChangeKey_&&(m(this.geometryChangeKey_),this.geometryChangeKey_=null);var t=this.getGeometry();t&&(this.geometryChangeKey_=_(t,z,this.handleGeometryChange_,this)),this.changed()},e.prototype.setGeometry=function(t){this.set(this.geometryName_,t)},e.prototype.setStyle=function(t){this.style_=t,this.styleFunction_=t?function(t){return"function"==typeof t?t:(Array.isArray(t)?e=t:(ut("function"==typeof t.getZIndex,41),e=[t]),function(){return e});var e}(t):void 0,this.changed()},e.prototype.setId=function(t){this.id_=t,this.changed()},e.prototype.setGeometryName=function(t){this.removeEventListener(rt(this.geometryName_),this.handleGeometryChanged_),this.geometryName_=t,this.addEventListener(rt(this.geometryName_),this.handleGeometryChanged_),this.handleGeometryChanged_()},e}(it),ft="top-left";function pt(t){for(var e=[1/0,1/0,-1/0,-1/0],r=0,n=t.length;r<n;++r)Tt(e,t[r]);return e}function dt(t,e,r){return r?(r[0]=t[0]-e,r[1]=t[1]-e,r[2]=t[2]+e,r[3]=t[3]+e,r):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function gt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function yt(t,e,r){var n,i;return(n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0)*n+(i=r<t[1]?t[1]-r:t[3]<r?r-t[3]:0)*i}function _t(t,e){return mt(t,e[0],e[1])}function vt(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function mt(t,e,r){return t[0]<=e&&e<=t[2]&&t[1]<=r&&r<=t[3]}function bt(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=0;return a<r?u|=16:a>i&&(u|=4),s<n?u|=8:s>o&&(u|=2),0===u&&(u=1),u}function wt(){return[1/0,1/0,-1/0,-1/0]}function xt(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function St(t){return xt(1/0,1/0,-1/0,-1/0,t)}function Et(t,e){var r=t[0],n=t[1];return xt(r,n,r,n,e)}function Ot(t,e,r,n,i){return Ct(St(i),t,e,r,n)}function Mt(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Pt(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Tt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Ct(t,e,r,n,i){for(;r<n;r+=i)It(t,e[r],e[r+1]);return t}function It(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function Rt(t,e){var r;return(r=e(At(t)))||(r=e(kt(t)))||(r=e(Bt(t)))?r:(r=e(Gt(t)))||!1}function Lt(t){var e=0;return Yt(t)||(e=Ut(t)*Dt(t)),e}function At(t){return[t[0],t[1]]}function kt(t){return[t[2],t[1]]}function Ft(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function jt(t,e){var r;return"bottom-left"===e?r=At(t):"bottom-right"===e?r=kt(t):e===ft?r=Gt(t):"top-right"===e?r=Bt(t):ut(!1,13),r}function Nt(t,e,r,n,i){var o=e*n[0]/2,a=e*n[1]/2,s=Math.cos(r),u=Math.sin(r),l=o*s,c=o*u,h=a*s,f=a*u,p=t[0],d=t[1],g=p-l+f,y=p-l-f,_=p+l-f,v=p+l+f,m=d-c-h,b=d-c+h,w=d+c+h,x=d+c-h;return xt(Math.min(g,y,_,v),Math.min(m,b,w,x),Math.max(g,y,_,v),Math.max(m,b,w,x),i)}function Dt(t){return t[3]-t[1]}function zt(t,e,r){var n=r||[1/0,1/0,-1/0,-1/0];return Wt(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):St(n),n}function Gt(t){return[t[0],t[3]]}function Bt(t){return[t[2],t[3]]}function Ut(t){return t[2]-t[0]}function Wt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Yt(t){return t[2]<t[0]||t[3]<t[1]}function Vt(t,e){var r=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=r,t[2]+=r,t[1]-=n,t[3]+=n}function Xt(t,e,r,n){var i=[];if(n>1)for(var o=t[2]-t[0],a=t[3]-t[1],s=0;s<n;++s)i.push(t[0]+o*s/n,t[1],t[2],t[1]+a*s/n,t[2]-o*s/n,t[3],t[0],t[3]-a*s/n);else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);for(var u=[],l=[],c=(s=0,i.length);s<c;s+=2)u.push(i[s]),l.push(i[s+1]);return function(t,e,r){return xt(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),r)}(u,l,r)}function Zt(t,e){var r=e.getExtent(),n=Ft(t);if(e.canWrapX()&&(n[0]<r[0]||n[0]>=r[2])){var i=Ut(r),o=Math.floor((n[0]-r[0])/i)*i;t[0]-=o,t[2]-=o}return t}var qt="XY",Kt="XYZ",Ht="XYM",Jt="XYZM",Qt={POINT:"Point",LINE_STRING:"LineString",LINEAR_RING:"LinearRing",POLYGON:"Polygon",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon",GEOMETRY_COLLECTION:"GeometryCollection",CIRCLE:"Circle"};function $t(t,e,r,n,i,o){for(var a=o||[],s=0,u=e;u<r;u+=n){var l=t[u],c=t[u+1];a[s++]=i[0]*l+i[2]*c+i[4],a[s++]=i[1]*l+i[3]*c+i[5]}return o&&a.length!=s&&(a.length=s),a}function te(t,e,r,n,i,o,a){for(var s=a||[],u=Math.cos(i),l=Math.sin(i),c=o[0],h=o[1],f=0,p=e;p<r;p+=n){var d=t[p]-c,g=t[p+1]-h;s[f++]=c+d*u-g*l,s[f++]=h+d*l+g*u;for(var y=p+2;y<p+n;++y)s[f++]=t[y]}return a&&s.length!=f&&(s.length=f),s}function ee(t,e,r,n,i,o,a){for(var s=a||[],u=0,l=e;l<r;l+=n){s[u++]=t[l]+i,s[u++]=t[l+1]+o;for(var c=l+2;c<l+n;++c)s[u++]=t[c]}return a&&s.length!=u&&(s.length=u),s}function re(t,e,r){return Math.min(Math.max(t,e),r)}var ne="cosh"in Math?Math.cosh:function(t){var e=Math.exp(t);return(e+1/e)/2};function ie(t,e,r,n,i,o){var a=i-r,s=o-n;if(0!==a||0!==s){var u=((t-r)*a+(e-n)*s)/(a*a+s*s);u>1?(r=i,n=o):u>0&&(r+=a*u,n+=s*u)}return oe(t,e,r,n)}function oe(t,e,r,n){var i=r-t,o=n-e;return i*i+o*o}function ae(t){return 180*t/Math.PI}function se(t){return t*Math.PI/180}function ue(t,e){var r=t%e;return r*e<0?r+e:r}function le(t,e,r){return t+r*(e-t)}function ce(t,e,r){var n=r||6371008.8,i=se(t[1]),o=se(e[1]),a=(o-i)/2,s=se(e[0]-t[0])/2,u=Math.sin(a)*Math.sin(a)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))}function he(t,e){for(var r=0,n=0,i=t.length;n<i-1;++n)r+=ce(t[n],t[n+1],e);return r}function fe(t,e){for(var r=0,n=t.length,i=t[n-1][0],o=t[n-1][1],a=0;a<n;a++){var s=t[a][0],u=t[a][1];r+=se(s-i)*(2+Math.sin(se(o))+Math.sin(se(u))),i=s,o=u}return r*e*e/2}function pe(t,e,r,n){var i=n||6371008.8,o=se(t[1]),a=se(t[0]),s=e/i,u=Math.asin(Math.sin(o)*Math.cos(s)+Math.cos(o)*Math.sin(s)*Math.cos(r));return[ae(a+Math.atan2(Math.sin(r)*Math.sin(s)*Math.cos(o),Math.cos(s)-Math.sin(o)*Math.sin(u))),ae(u)]}var de={DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},ge={};ge[de.DEGREES]=2*Math.PI*6370997/360,ge[de.FEET]=.3048,ge[de.METERS]=1,ge[de.USFEET]=1200/3937;var ye,_e,ve=de,me=function(){function t(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return t.prototype.canWrapX=function(){return this.canWrapX_},t.prototype.getCode=function(){return this.code_},t.prototype.getExtent=function(){return this.extent_},t.prototype.getUnits=function(){return this.units_},t.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||ge[this.units_]},t.prototype.getWorldExtent=function(){return this.worldExtent_},t.prototype.getAxisOrientation=function(){return this.axisOrientation_},t.prototype.isGlobal=function(){return this.global_},t.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)},t.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},t.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},t.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)},t.prototype.setWorldExtent=function(t){this.worldExtent_=t},t.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},t.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},t}(),be=(ye=function(t,e){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ye(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),we=6378137*Math.PI,xe=[-we,-we,we,we],Se=[-180,-85,180,85],Ee=function(t){function e(e){return t.call(this,{code:e,units:ve.METERS,extent:xe,global:!0,worldExtent:Se,getPointResolution:function(t,e){return t/ne(e[1]/6378137)}})||this}return be(e,t),e}(me),Oe=[new Ee("EPSG:3857"),new Ee("EPSG:102100"),new Ee("EPSG:102113"),new Ee("EPSG:900913"),new Ee("urn:ogc:def:crs:EPSG:6.18:3:3857"),new Ee("urn:ogc:def:crs:EPSG::3857"),new Ee("http://www.opengis.net/gml/srs/epsg.xml#3857")],Me=(_e=function(t,e){return(_e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_e(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Pe=[-180,-90,180,90],Te=6378137*Math.PI/180,Ce=function(t){function e(e,r){return t.call(this,{code:e,units:ve.DEGREES,extent:Pe,axisOrientation:r,global:!0,metersPerUnit:Te,worldExtent:Pe})||this}return Me(e,t),e}(me),Ie=[new Ce("CRS:84"),new Ce("EPSG:4326","neu"),new Ce("urn:ogc:def:crs:EPSG::4326","neu"),new Ce("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Ce("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ce("urn:ogc:def:crs:OGC:2:84"),new Ce("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ce("urn:x-ogc:def:crs:EPSG:4326","neu")],Re={};function Le(t,e,r){var n=t.getCode(),i=e.getCode();n in Re||(Re[n]={}),Re[n][i]=r}function Ae(t,e){var r;return t in Re&&e in Re[t]&&(r=Re[t][e]),r}var ke={};function Fe(t,e,r){var n;if(void 0!==e){for(var i=0,o=t.length;i<o;++i)e[i]=t[i];n=e}else n=t.slice();return n}function je(t,e,r){if(void 0!==e&&t!==e){for(var n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function Ne(t){!function(t,e){ke[t]=e}(t.getCode(),t),Le(t,t,Fe)}function De(t){return"string"==typeof t?ke[t]||null:t||null}function ze(t,e,r,n){var i,o=(t=De(t)).getPointResolutionFunc();if(o)i=o(e,r),n&&n!==t.getUnits()&&(a=t.getMetersPerUnit())&&(i=i*a/ge[n]);else if(t.getUnits()==ve.DEGREES&&!n||n==ve.DEGREES)i=e;else{var a,s=Ve(t,De("EPSG:4326")),u=[r[0]-e/2,r[1],r[0]+e/2,r[1],r[0],r[1]-e/2,r[0],r[1]+e/2];i=(ce((u=s(u,u,2)).slice(0,2),u.slice(2,4))+ce(u.slice(4,6),u.slice(6,8)))/2,void 0!==(a=n?ge[n]:t.getMetersPerUnit())&&(i/=a)}return i}function Ge(t){!function(t){t.forEach(Ne)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Le(e,t,Fe)}))}))}function Be(t,e){return t?"string"==typeof t?De(t):t:De(e)}function Ue(t){return function(e,r,n){for(var i=e.length,o=void 0!==n?n:2,a=void 0!==r?r:new Array(i),s=0;s<i;s+=o){var u=t([e[s],e[s+1]]);a[s]=u[0],a[s+1]=u[1];for(var l=o-1;l>=2;--l)a[s+l]=e[s+l]}return a}}function We(t,e,r,n){var i=De(t),o=De(e);Le(i,o,Ue(r)),Le(o,i,Ue(n))}function Ye(t,e){if(t===e)return!0;var r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||Ve(t,e)===Fe)&&r}function Ve(t,e){var r=Ae(t.getCode(),e.getCode());return r||(r=je),r}function Xe(t,e){return Ve(De(t),De(e))}function Ze(t,e,r){return Xe(e,r)(t,void 0,t.length)}function qe(t,e,r,n){return Xt(t,Xe(e,r),void 0,n)}var Ke,He,Je,Qe=null;function $e(){return Qe}function tr(t,e){return t}function er(t,e){return t}function rr(t,e){return t}function nr(t,e){return t}Ge(Oe),Ge(Ie),Ke=Oe,He=function(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=we,s=0;s<n;s+=i){o[s]=a*t[s]/180;var u=6378137*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));u>a?u=a:u<-a&&(u=-a),o[s+1]=u}return o},Je=function(t,e,r){var n=t.length,i=r>1?r:2,o=e;void 0===o&&(o=i>2?t.slice():new Array(n));for(var a=0;a<n;a+=i)o[a]=180*t[a]/we,o[a+1]=360*Math.atan(Math.exp(t[a+1]/6378137))/Math.PI-90;return o},Ie.forEach((function(t){Ke.forEach((function(e){Le(t,e,He),Le(e,t,Je)}))}));var ir=new Array(6);function or(t){return sr(t,1,0,0,1,0,0)}function ar(t,e){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=e[0],l=e[1],c=e[2],h=e[3],f=e[4],p=e[5];return t[0]=r*u+i*l,t[1]=n*u+o*l,t[2]=r*c+i*h,t[3]=n*c+o*h,t[4]=r*f+i*p+a,t[5]=n*f+o*p+s,t}function sr(t,e,r,n,i,o,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t}function ur(t,e){var r=e[0],n=e[1];return e[0]=t[0]*r+t[2]*n+t[4],e[1]=t[1]*r+t[3]*n+t[5],e}function lr(t,e,r){return ar(t,sr(ir,e,0,0,r,0,0))}function cr(t,e,r,n,i,o,a,s){var u=Math.sin(o),l=Math.cos(o);return t[0]=n*l,t[1]=i*u,t[2]=-n*u,t[3]=i*l,t[4]=a*n*l-s*n*u+e,t[5]=a*i*u+s*i*l+r,t}function hr(t,e){var r,n=(r=e)[0]*r[3]-r[1]*r[2];ut(0!==n,32);var i=e[0],o=e[1],a=e[2],s=e[3],u=e[4],l=e[5];return t[0]=s/n,t[1]=-o/n,t[2]=-a/n,t[3]=i/n,t[4]=(a*l-s*u)/n,t[5]=-(i*l-o*u)/n,t}function fr(t){return"matrix("+t.join(", ")+")"}var pr,dr,gr=(dr=function(t,e){return(dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}dr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),yr=[1,0,0,1,0,0],_r=function(t){function e(){var e,r,n,i,o,a=t.call(this)||this;return a.extent_=[1/0,1/0,-1/0,-1/0],a.extentRevision_=-1,a.simplifiedGeometryMaxMinSquaredTolerance=0,a.simplifiedGeometryRevision=0,a.simplifyTransformedInternal=(e=function(t,e,r){if(!r)return this.getSimplifiedGeometry(e);var n=this.clone();return n.applyTransform(r),n.getSimplifiedGeometry(e)},o=!1,function(){var t=Array.prototype.slice.call(arguments);return o&&this===i&&P(t,n)||(o=!0,i=this,n=t,r=e.apply(this,arguments)),r}),a}return gr(e,t),e.prototype.simplifyTransformed=function(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)},e.prototype.clone=function(){return n()},e.prototype.closestPointXY=function(t,e,r,i){return n()},e.prototype.containsXY=function(t,e){var r=this.getClosestPoint([t,e]);return r[0]===t&&r[1]===e},e.prototype.getClosestPoint=function(t,e){var r=e||[NaN,NaN];return this.closestPointXY(t[0],t[1],r,1/0),r},e.prototype.intersectsCoordinate=function(t){return this.containsXY(t[0],t[1])},e.prototype.computeExtent=function(t){return n()},e.prototype.getExtent=function(t){return this.extentRevision_!=this.getRevision()&&(this.extent_=this.computeExtent(this.extent_),this.extentRevision_=this.getRevision()),function(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}(this.extent_,t)},e.prototype.rotate=function(t,e){n()},e.prototype.scale=function(t,e,r){n()},e.prototype.simplify=function(t){return this.getSimplifiedGeometry(t*t)},e.prototype.getSimplifiedGeometry=function(t){return n()},e.prototype.getType=function(){return n()},e.prototype.applyTransform=function(t){n()},e.prototype.intersectsExtent=function(t){return n()},e.prototype.translate=function(t,e){n()},e.prototype.transform=function(t,e){var r=De(t),n=r.getUnits()==ve.TILE_PIXELS?function(t,n,i){var o=r.getExtent(),a=r.getWorldExtent(),s=Dt(a)/Dt(o);return cr(yr,a[0],a[3],s,-s,0,0,0),$t(t,0,t.length,i,yr,n),Xe(r,e)(t,n,i)}:Xe(r,e);return this.applyTransform(n),this},e}(it),vr=(pr=function(t,e){return(pr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}pr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function mr(t){var e;return t==qt?e=2:t==Kt||t==Ht?e=3:t==Jt&&(e=4),e}var br=function(t){function e(){var e=t.call(this)||this;return e.layout=qt,e.stride=2,e.flatCoordinates=null,e}return vr(e,t),e.prototype.computeExtent=function(t){return Ot(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinates=function(){return n()},e.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.getFlatCoordinates=function(){return this.flatCoordinates},e.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},e.prototype.getLayout=function(){return this.layout},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)},e.prototype.getSimplifiedGeometryInternal=function(t){return this},e.prototype.getStride=function(){return this.stride},e.prototype.setFlatCoordinates=function(t,e){this.stride=mr(t),this.layout=t,this.flatCoordinates=e},e.prototype.setCoordinates=function(t,e){n()},e.prototype.setLayout=function(t,e,r){var n;if(t)n=mr(t);else{for(var i=0;i<r;++i){if(0===e.length)return this.layout=qt,void(this.stride=2);e=e[0]}t=function(t){var e;return 2==t?e=qt:3==t?e=Kt:4==t&&(e=Jt),e}(n=e.length)}this.layout=t,this.stride=n},e.prototype.applyTransform=function(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},e.prototype.rotate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();te(r,0,r.length,n,t,e,r),this.changed()}},e.prototype.scale=function(t,e,r){var n=e;void 0===n&&(n=t);var i=r;i||(i=Ft(this.getExtent()));var o=this.getFlatCoordinates();if(o){var a=this.getStride();!function(t,e,r,n,i,o,a,s){for(var u=s||[],l=a[0],c=a[1],h=0,f=0;f<r;f+=n){var p=t[f]-l,d=t[f+1]-c;u[h++]=l+i*p,u[h++]=c+o*d;for(var g=f+2;g<f+n;++g)u[h++]=t[g]}s&&u.length!=h&&(u.length=h)}(o,0,o.length,a,t,n,i,o),this.changed()}},e.prototype.translate=function(t,e){var r=this.getFlatCoordinates();if(r){var n=this.getStride();ee(r,0,r.length,n,t,e,r),this.changed()}},e}(_r);function wr(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=a*s-o*u,o=s,a=u}return i/2}function xr(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=wr(t,e,s,n),e=s}return i}function Sr(t,e,r,n,i,o,a){var s,u=t[e],l=t[e+1],c=t[r]-u,h=t[r+1]-l;if(0===c&&0===h)s=e;else{var f=((i-u)*c+(o-l)*h)/(c*c+h*h);if(f>1)s=r;else{if(f>0){for(var p=0;p<n;++p)a[p]=le(t[e+p],t[r+p],f);return void(a.length=n)}s=e}}for(p=0;p<n;++p)a[p]=t[s+p];a.length=n}function Er(t,e,r,n,i){var o=t[e],a=t[e+1];for(e+=n;e<r;e+=n){var s=t[e],u=t[e+1],l=oe(o,a,s,u);l>i&&(i=l),o=s,a=u}return i}function Or(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Er(t,e,s,n,i),e=s}return i}function Mr(t,e,r,n,i,o,a,s,u,l,c){if(e==r)return l;var h,f;if(0===i){if((f=oe(a,s,t[e],t[e+1]))<l){for(h=0;h<n;++h)u[h]=t[e+h];return u.length=n,f}return l}for(var p=c||[NaN,NaN],d=e+n;d<r;)if(Sr(t,d-n,d,n,a,s,p),(f=oe(a,s,p[0],p[1]))<l){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n,d+=n}else d+=n*Math.max((Math.sqrt(f)-Math.sqrt(l))/i|0,1);if(o&&(Sr(t,r-n,e,n,a,s,p),(f=oe(a,s,p[0],p[1]))<l)){for(l=f,h=0;h<n;++h)u[h]=p[h];u.length=n}return l}function Pr(t,e,r,n,i,o,a,s,u,l,c){for(var h=c||[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=Mr(t,e,d,n,i,o,a,s,u,l,h),e=d}return l}function Tr(t,e,r,n){for(var i=0,o=r.length;i<o;++i)t[e++]=r[i];return e}function Cr(t,e,r,n){for(var i=0,o=r.length;i<o;++i)for(var a=r[i],s=0;s<n;++s)t[e++]=a[s];return e}function Ir(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=Cr(t,e,r[s],n);o[a++]=l,e=l}return o.length=a,o}function Rr(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=e;s<r;s+=n)o[a++]=t.slice(s,s+n);return o.length=a,o}function Lr(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=Rr(t,e,l,n,o[a]),e=l}return o.length=a,o}function Ar(t,e,r,n,i){for(var o=void 0!==i?i:[],a=0,s=0,u=r.length;s<u;++s){var l=r[s];o[a++]=Lr(t,e,l,n,o[a]),e=l[l.length-1]}return o.length=a,o}function kr(t,e,r,n,i,o,a){var s=(r-e)/n;if(s<3){for(;e<r;e+=n)o[a++]=t[e],o[a++]=t[e+1];return a}var u=new Array(s);u[0]=1,u[s-1]=1;for(var l=[e,r-n],c=0;l.length>0;){for(var h=l.pop(),f=l.pop(),p=0,d=t[f],g=t[f+1],y=t[h],_=t[h+1],v=f+n;v<h;v+=n){var m=ie(t[v],t[v+1],d,g,y,_);m>p&&(c=v,p=m)}p>i&&(u[(c-e)/n]=1,f+n<c&&l.push(f,c),c+n<h&&l.push(c,h))}for(v=0;v<s;++v)u[v]&&(o[a++]=t[e+v*n],o[a++]=t[e+v*n+1]);return a}function Fr(t,e){return e*Math.round(t/e)}function jr(t,e,r,n,i,o,a){if(e==r)return a;var s,u,l=Fr(t[e],i),c=Fr(t[e+1],i);e+=n,o[a++]=l,o[a++]=c;do{if(s=Fr(t[e],i),u=Fr(t[e+1],i),(e+=n)==r)return o[a++]=s,o[a++]=u,a}while(s==l&&u==c);for(;e<r;){var h=Fr(t[e],i),f=Fr(t[e+1],i);if(e+=n,h!=s||f!=u){var p=s-l,d=u-c,g=h-l,y=f-c;p*y==d*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(d<0&&y<d||d==y||d>0&&y>d)?(s=h,u=f):(o[a++]=s,o[a++]=u,l=s,c=u,s=h,u=f)}}return o[a++]=s,o[a++]=u,a}function Nr(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=jr(t,e,c,n,i,o,a),s.push(a),e=c}return a}var Dr,zr,Gr=(zr=function(t,e){return(zr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}zr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Br=function(t){function e(e,r){var n=t.call(this)||this;return n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return Gr(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<yt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.getArea=function(){return wr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinates=function(){return Rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=kr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,qt)},e.prototype.getType=function(){return Qt.LINEAR_RING},e.prototype.intersectsExtent=function(t){return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(br),Ur=(Dr=function(t,e){return(Dr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Dr(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Wr=function(t){function e(e,r){var n=t.call(this)||this;return n.setCoordinates(e,r),n}return Ur(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=oe(t,e,i[0],i[1]);if(o<n){for(var a=this.stride,s=0;s<a;++s)r[s]=i[s];return r.length=a,o}return n},e.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},e.prototype.computeExtent=function(t){return Et(this.flatCoordinates,t)},e.prototype.getType=function(){return Qt.POINT},e.prototype.intersectsExtent=function(t){return mt(t,this.flatCoordinates[0],this.flatCoordinates[1])},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Tr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(br);function Yr(t,e,r,n,i){return!Rt(i,(function(i){return!Vr(t,e,r,n,i[0],i[1])}))}function Vr(t,e,r,n,i,o){for(var a=0,s=t[r-n],u=t[r-n+1];e<r;e+=n){var l=t[e],c=t[e+1];u<=o?c>o&&(l-s)*(o-u)-(i-s)*(c-u)>0&&a++:c<=o&&(l-s)*(o-u)-(i-s)*(c-u)<0&&a--,s=l,u=c}return 0!==a}function Xr(t,e,r,n,i,o){if(0===r.length)return!1;if(!Vr(t,e,r[0],n,i,o))return!1;for(var a=1,s=r.length;a<s;++a)if(Vr(t,r[a-1],r[a],n,i,o))return!1;return!0}function Zr(t,e,r,n,i,o,a){for(var s,u,l,c,h,f,p,d=i[o+1],g=[],y=0,_=r.length;y<_;++y){var v=r[y];for(c=t[v-n],f=t[v-n+1],s=e;s<v;s+=n)h=t[s],p=t[s+1],(d<=f&&p<=d||f<=d&&d<=p)&&(l=(d-f)/(p-f)*(h-c)+c,g.push(l)),c=h,f=p}var m=NaN,b=-1/0;for(g.sort(w),c=g[0],s=1,u=g.length;s<u;++s){h=g[s];var x=Math.abs(h-c);x>b&&Xr(t,e,r,n,l=(c+h)/2,d)&&(m=l,b=x),c=h}return isNaN(m)&&(m=i[o]),a?(a.push(m,d,b),a):[m,d,b]}function qr(t,e,r,n,i){for(var o=[],a=0,s=r.length;a<s;++a){var u=r[a];o=Zr(t,e,u,n,i,2*a,o),e=u[u.length-1]}return o}function Kr(t,e,r,n,i){for(var o,a=[t[e],t[e+1]],s=[];e+n<r;e+=n){if(s[0]=t[e+n],s[1]=t[e+n+1],o=i(a,s))return o;a[0]=s[0],a[1]=s[1]}return!1}function Hr(t,e,r,n,i){var o=Ct([1/0,1/0,-1/0,-1/0],t,e,r,n);return!!Wt(i,o)&&(!!vt(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]||Kr(t,e,r,n,(function(t,e){return function(t,e,r){var n=!1,i=bt(t,e),o=bt(t,r);if(1===i||1===o)n=!0;else{var a=t[0],s=t[1],u=t[2],l=t[3],c=e[0],h=e[1],f=r[0],p=r[1],d=(p-h)/(f-c),g=void 0,y=void 0;2&o&&!(2&i)&&(n=(g=f-(p-l)/d)>=a&&g<=u),n||!(4&o)||4&i||(n=(y=p-(f-u)*d)>=s&&y<=l),n||!(8&o)||8&i||(n=(g=f-(p-s)/d)>=a&&g<=u),n||!(16&o)||16&i||(n=(y=p-(f-a)*d)>=s&&y<=l)}return n}(i,t,e)})))}function Jr(t,e,r,n,i){if(!function(t,e,r,n,i){return!!(Hr(t,e,r,n,i)||Vr(t,e,r,n,i[0],i[1])||Vr(t,e,r,n,i[0],i[3])||Vr(t,e,r,n,i[2],i[1])||Vr(t,e,r,n,i[2],i[3]))}(t,e,r[0],n,i))return!1;if(1===r.length)return!0;for(var o=1,a=r.length;o<a;++o)if(Yr(t,r[o-1],r[o],n,i)&&!Hr(t,r[o-1],r[o],n,i))return!1;return!0}function Qr(t,e,r,n){for(;e<r-n;){for(var i=0;i<n;++i){var o=t[e+i];t[e+i]=t[r-n+i],t[r-n+i]=o}e+=n,r-=n}}function $r(t,e,r,n){for(var i=0,o=t[r-n],a=t[r-n+1];e<r;e+=n){var s=t[e],u=t[e+1];i+=(s-o)*(u+a),o=s,a=u}return i>0}function tn(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=$r(t,e,u,n);if(0===a){if(o&&l||!o&&!l)return!1}else if(o&&!l||!o&&l)return!1;e=u}return!0}function en(t,e,r,n,i){for(var o=void 0!==i&&i,a=0,s=r.length;a<s;++a){var u=r[a],l=$r(t,e,u,n);(0===a?o&&l||!o&&!l:o&&!l||!o&&l)&&Qr(t,e,u,n),e=u}return e}function rn(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o)e=en(t,e,r[o],n,i);return e}var nn,on=(nn=function(t,e){return(nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}nn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),an=function(t){function e(e,r,n){var i=t.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,void 0!==r&&n?(i.setFlatCoordinates(r,e),i.ends_=n):i.setCoordinates(e,r),i}return on(e,t),e.prototype.appendLinearRing=function(t){this.flatCoordinates?O(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<yt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Or(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,r,n))},e.prototype.containsXY=function(t,e){return Xr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)},e.prototype.getArea=function(){return xr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?en(e=this.getOrientedFlatCoordinates().slice(),0,this.ends_,this.stride,t):e=this.flatCoordinates,Lr(e,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var t=Ft(this.getExtent());this.flatInteriorPoint_=Zr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},e.prototype.getInteriorPoint=function(){return new Wr(this.getFlatInteriorPoint(),Ht)},e.prototype.getLinearRingCount=function(){return this.ends_.length},e.prototype.getLinearRing=function(t){return t<0||this.ends_.length<=t?null:new Br(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLinearRings=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.ends_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o],u=new Br(e.slice(i,s),t);n.push(u),i=s}return n},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;tn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=en(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=Nr(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),r,0,n),new e(r,qt,n)},e.prototype.getType=function(){return Qt.POLYGON},e.prototype.intersectsExtent=function(t){return Jr(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ir(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(br),sn=an;function un(t,e,r,n){for(var i=r||32,o=[],a=0;a<i;++a)O(o,pe(t,e,2*Math.PI*a/i,n));return o.push(o[0],o[1]),new an(o,qt,[o.length])}function ln(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=[e,r,e,i,n,i,n,r,e,r];return new an(o,qt,[o.length])}function cn(t,e,r){for(var n=e||32,i=t.getStride(),o=t.getLayout(),a=t.getCenter(),s=i*(n+1),u=new Array(s),l=0;l<s;l+=i){u[l]=0,u[l+1]=0;for(var c=2;c<i;c++)u[l+c]=a[c]}var h=[u.length],f=new an(u,o,h);return hn(f,a,t.getRadius(),r),f}function hn(t,e,r,n){for(var i=t.getFlatCoordinates(),o=t.getStride(),a=i.length/o-1,s=n||0,u=0;u<=a;++u){var l=u*o,c=s+2*ue(u,a)*Math.PI/a;i[l]=e[0]+r*Math.cos(c),i[l+1]=e[1]+r*Math.sin(c)}t.changed()}var fn,pn,dn,gn,yn,_n,vn=(_n=function(t,e){return(_n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),mn="accuracy",bn="accuracyGeometry",wn="altitude",xn="altitudeAccuracy",Sn="heading",En="position",On="projection",Mn="tracking",Pn="trackingOptions",Tn=function(t){function e(e){var r=t.call(this,G)||this;return r.code=e.code,r.message=e.message,r}return vn(e,t),e}(j),Cn=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.position_=null,r.transform_=je,r.watchId_=void 0,r.addEventListener(rt(On),r.handleProjectionChanged_),r.addEventListener(rt(Mn),r.handleTrackingChanged_),void 0!==n.projection&&r.setProjection(n.projection),void 0!==n.trackingOptions&&r.setTrackingOptions(n.trackingOptions),r.setTracking(void 0!==n.tracking&&n.tracking),r}return vn(e,t),e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=Ve(De("EPSG:4326"),t),this.position_&&this.set(En,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(mn,e.accuracy),this.set(wn,null===e.altitude?void 0:e.altitude),this.set(xn,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Sn,null===e.heading?void 0:se(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var r=this.transform_(this.position_);this.set(En,r),this.set("speed",null===e.speed?void 0:e.speed);var n=un(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(bn,n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new Tn(t))},e.prototype.getAccuracy=function(){return this.get(mn)},e.prototype.getAccuracyGeometry=function(){return this.get(bn)||null},e.prototype.getAltitude=function(){return this.get(wn)},e.prototype.getAltitudeAccuracy=function(){return this.get(xn)},e.prototype.getHeading=function(){return this.get(Sn)},e.prototype.getPosition=function(){return this.get(En)},e.prototype.getProjection=function(){return this.get(On)},e.prototype.getSpeed=function(){return this.get("speed")},e.prototype.getTracking=function(){return this.get(Mn)},e.prototype.getTrackingOptions=function(){return this.get(Pn)},e.prototype.setProjection=function(t){this.set(On,De(t))},e.prototype.setTracking=function(t){this.set(Mn,t)},e.prototype.setTrackingOptions=function(t){this.set(Pn,t)},e}(it),In=function(){function t(t,e,r){this.decay_=t,this.minVelocity_=e,this.delay_=r,this.points_=[],this.angle_=0,this.initialVelocity_=0}return t.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},t.prototype.update=function(t,e){this.points_.push(t,e,Date.now())},t.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;for(var r=e-3;r>0&&this.points_[r+2]>t;)r-=3;var n=this.points_[e+2]-this.points_[r+2];if(n<1e3/60)return!1;var i=this.points_[e]-this.points_[r],o=this.points_[e+1]-this.points_[r+1];return this.angle_=Math.atan2(o,i),this.initialVelocity_=Math.sqrt(i*i+o*o)/n,this.initialVelocity_>this.minVelocity_},t.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},t.prototype.getAngle=function(){return this.angle_},t}(),Rn=(yn=function(t,e){return(yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}yn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ln=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.map=r,i.frameState=void 0!==n?n:null,i}return Rn(e,t),e}(j),An=(gn=function(t,e){return(gn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}gn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),kn=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,o)||this;return a.originalEvent=n,a.pixel_=null,a.coordinate_=null,a.dragging=void 0!==i&&i,a}return An(e,t),Object.defineProperty(e.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(t){this.pixel_=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(t){this.coordinate_=t},enumerable:!0,configurable:!0}),e.prototype.preventDefault=function(){t.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){t.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},e}(Ln),Fn=(r(1),"undefined"!=typeof navigator?navigator.userAgent.toLowerCase():""),jn=-1!==Fn.indexOf("firefox"),Nn=(-1!==Fn.indexOf("safari")&&Fn.indexOf("chrom"),-1!==Fn.indexOf("webkit")&&-1==Fn.indexOf("edge")),Dn=-1!==Fn.indexOf("macintosh"),zn="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,Gn="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Bn="undefined"!=typeof Image&&Image.prototype.decode,Un=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(t){}return t}(),Wn={SINGLECLICK:"singleclick",CLICK:U,DBLCLICK:"dblclick",POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},Yn=(dn=function(t,e){return(dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}dn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Vn=function(t){function e(e,r,n,i,o){var a=t.call(this,e,r,n,i,o)||this;return a.pointerEvent=n,a}return Yn(e,t),e}(kn),Xn="pointermove",Zn="pointerdown",qn="pointerup",Kn=(pn=function(t,e){return(pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}pn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Hn=function(t){function e(e,r){var n=t.call(this,e)||this;n.map_=e,n.clickTimeoutId_,n.dragging_=!1,n.dragListenerKeys_=[],n.moveTolerance_=r?r*zn:zn,n.down_=null;var i=n.map_.getViewport();return n.activePointers_=0,n.trackedTouches_={},n.element_=i,n.pointerdownListenerKey_=_(i,Zn,n.handlePointerDown_,n),n.originalPointerMoveEvent_,n.relayedListenerKey_=_(i,Xn,n.relayEvent_,n),n.boundHandleTouchMove_=n.handleTouchMove_.bind(n),n.element_.addEventListener(q,n.boundHandleTouchMove_,!!Un&&{passive:!1}),n}return Kn(e,t),e.prototype.emulateClick_=function(t){var e=new Vn(Wn.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Vn(Wn.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var e=new Vn(Wn.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}.bind(this),250)},e.prototype.updateActivePointers_=function(t){var e=t;e.type==Wn.POINTERUP||e.type==Wn.POINTERCANCEL?delete this.trackedTouches_[e.pointerId]:e.type==Wn.POINTERDOWN&&(this.trackedTouches_[e.pointerId]=!0),this.activePointers_=Object.keys(this.trackedTouches_).length},e.prototype.handlePointerUp_=function(t){this.updateActivePointers_(t);var e=new Vn(Wn.POINTERUP,this.map_,t);this.dispatchEvent(e),e.propagationStopped||this.dragging_||!this.isMouseActionButton_(t)||this.emulateClick_(this.down_),0===this.activePointers_&&(this.dragListenerKeys_.forEach(m),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},e.prototype.isMouseActionButton_=function(t){return 0===t.button},e.prototype.handlePointerDown_=function(t){this.updateActivePointers_(t);var e=new Vn(Wn.POINTERDOWN,this.map_,t);this.dispatchEvent(e),this.down_=t,0===this.dragListenerKeys_.length&&this.dragListenerKeys_.push(_(document,Wn.POINTERMOVE,this.handlePointerMove_,this),_(document,Wn.POINTERUP,this.handlePointerUp_,this),_(this.element_,Wn.POINTERCANCEL,this.handlePointerUp_,this))},e.prototype.handlePointerMove_=function(t){if(this.isMoving_(t)){this.dragging_=!0;var e=new Vn(Wn.POINTERDRAG,this.map_,t,this.dragging_);this.dispatchEvent(e)}},e.prototype.relayEvent_=function(t){this.originalPointerMoveEvent_=t;var e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Vn(t.type,this.map_,t,e))},e.prototype.handleTouchMove_=function(t){this.originalPointerMoveEvent_&&!this.originalPointerMoveEvent_.defaultPrevented||t.preventDefault()},e.prototype.isMoving_=function(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_},e.prototype.disposeInternal=function(){this.relayedListenerKey_&&(m(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(q,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(m(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(m),this.dragListenerKeys_.length=0,this.element_=null,t.prototype.disposeInternal.call(this)},e}(D),Jn="postrender",Qn="layergroup",$n="size",ti="target",ei="view",ri="postrender",ni="precompose",ii="rendercomplete",oi=function(){function t(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return t.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,d(this.queuedElements_)},t.prototype.dequeue=function(){var t=this.elements_,e=this.priorities_,r=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));var n=this.keyFunction_(r);return delete this.queuedElements_[n],r},t.prototype.enqueue=function(t){ut(!(this.keyFunction_(t)in this.queuedElements_),31);var e=this.priorityFunction_(t);return e!=1/0&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)},t.prototype.getCount=function(){return this.elements_.length},t.prototype.getLeftChildIndex_=function(t){return 2*t+1},t.prototype.getRightChildIndex_=function(t){return 2*t+2},t.prototype.getParentIndex_=function(t){return t-1>>1},t.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},t.prototype.isEmpty=function(){return 0===this.elements_.length},t.prototype.isKeyQueued=function(t){return t in this.queuedElements_},t.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},t.prototype.siftUp_=function(t){for(var e=this.elements_,r=this.priorities_,n=e.length,i=e[t],o=r[t],a=t;t<n>>1;){var s=this.getLeftChildIndex_(t),u=this.getRightChildIndex_(t),l=u<n&&r[u]<r[s]?u:s;e[t]=e[l],r[t]=r[l],t=l}e[t]=i,r[t]=o,this.siftDown_(a,t)},t.prototype.siftDown_=function(t,e){for(var r=this.elements_,n=this.priorities_,i=r[e],o=n[e];e>t;){var a=this.getParentIndex_(e);if(!(n[a]>o))break;r[e]=r[a],n[e]=n[a],e=a}r[e]=i,n[e]=o},t.prototype.reprioritize=function(){var t,e,r,n=this.priorityFunction_,i=this.elements_,o=this.priorities_,a=0,s=i.length;for(e=0;e<s;++e)(r=n(t=i[e]))==1/0?delete this.queuedElements_[this.keyFunction_(t)]:(o[a]=r,i[a++]=t);i.length=a,o.length=a,this.heapify_()},t}(),ai=(fn=function(t,e){return(fn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}fn(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),si=function(t){function e(e,r){var n=t.call(this,(function(t){return e.apply(null,t)}),(function(t){return t[0].getKey()}))||this;return n.boundHandleTileChange_=n.handleTileChange.bind(n),n.tileChangeCallback_=r,n.tilesLoading_=0,n.tilesLoadingKeys_={},n}return ai(e,t),e.prototype.enqueue=function(e){var r=t.prototype.enqueue.call(this,e);return r&&e[0].addEventListener(z,this.boundHandleTileChange_),r},e.prototype.getTilesLoading=function(){return this.tilesLoading_},e.prototype.handleTileChange=function(t){var e=t.target,r=e.getState();if(e.hifi&&2===r||3===r||4===r){e.removeEventListener(z,this.boundHandleTileChange_);var n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}},e.prototype.loadMoreTiles=function(t,e){for(var r,n,i=0;this.tilesLoading_<t&&i<e&&this.getCount()>0;)n=(r=this.dequeue()[0]).getKey(),0!==r.getState()||n in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[n]=!0,++this.tilesLoading_,++i,r.load())},e}(oi);function ui(t,e,r){return function(n,i,o,a){if(n){var s=e?0:o[0]*i,u=e?0:o[1]*i,l=t[0]+s/2,c=t[2]-s/2,h=t[1]+u/2,f=t[3]-u/2;l>c&&(c=l=(c+l)/2),h>f&&(f=h=(f+h)/2);var p=re(n[0],l,c),d=re(n[1],h,f),g=30*i;return a&&r&&(p+=-g*Math.log(1+Math.max(0,l-n[0])/g)+g*Math.log(1+Math.max(0,n[0]-c)/g),d+=-g*Math.log(1+Math.max(0,h-n[1])/g)+g*Math.log(1+Math.max(0,n[1]-f)/g)),[p,d]}}}function li(t){return t}function ci(t,e,r,n){var i=Ut(e)/r[0],o=Dt(e)/r[1];return n?Math.min(t,Math.max(i,o)):Math.min(t,Math.min(i,o))}function hi(t,e,r){var n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,r&&(n=Math.max(n,r),n/=Math.log(1+50*Math.max(0,r/t-1))/50+1),re(n,r/2,2*e)}function fi(t,e,r,n,i){return function(o,a,s,u){if(void 0!==o){var l=n?ci(t,n,s,i):t;return(void 0===r||r)&&u?hi(o,l,e):re(o,e,l)}}}function pi(t){return void 0!==t?0:void 0}function di(t){return void 0!==t?t:void 0}var gi="center",yi="resolution",_i="rotation";function vi(t,e,r){var n=void 0!==r?t.toFixed(r):""+t,i=n.indexOf(".");return(i=-1===i?n.length:i)>e?n:new Array(1+e-i).join("0")+n}function mi(t,e){for(var r=(""+t).split("."),n=(""+e).split("."),i=0;i<Math.max(r.length,n.length);i++){var o=parseInt(r[i]||"0",10),a=parseInt(n[i]||"0",10);if(o>a)return 1;if(a>o)return-1}return 0}function bi(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function wi(t,e){var r,n,i=t[0],o=t[1],a=e[0],s=e[1],u=a[0],l=a[1],c=s[0],h=s[1],f=c-u,p=h-l,d=0===f&&0===p?0:(f*(i-u)+p*(o-l))/(f*f+p*p||0);return d<=0?(r=u,n=l):d>=1?(r=c,n=h):(r=u+d*f,n=l+d*p),[r,n]}function xi(t,e,r){var n=ue(e+180,360)-180,i=Math.abs(3600*n),o=r||0,a=Math.pow(10,o),s=Math.floor(i/3600),u=Math.floor((i-3600*s)/60),l=i-3600*s-60*u;return(l=Math.ceil(l*a)/a)>=60&&(l=0,u+=1),u>=60&&(u=0,s+=1),s+"° "+vi(u,2)+"′ "+vi(l,2,o)+"″"+(0==n?"":" "+t.charAt(n<0?1:0))}function Si(t,e,r){return t?e.replace("{x}",t[0].toFixed(r)).replace("{y}",t[1].toFixed(r)):""}function Ei(t,e){for(var r=!0,n=t.length-1;n>=0;--n)if(t[n]!=e[n]){r=!1;break}return r}function Oi(t,e){var r=Math.cos(e),n=Math.sin(e),i=t[0]*r-t[1]*n,o=t[1]*r+t[0]*n;return t[0]=i,t[1]=o,t}function Mi(t,e){return t[0]*=e,t[1]*=e,t}function Pi(t,e){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function Ti(t,e){return Math.sqrt(Pi(t,e))}function Ci(t,e){return Pi(t,wi(t,e))}function Ii(t,e){return Si(t,"{x}, {y}",e)}function Ri(t,e){var r=e.getExtent();if(e.canWrapX()&&(t[0]<r[0]||t[0]>=r[2])){var n=Ut(r),i=Math.floor((t[0]-r[0])/n);t[0]-=i*n}return t}function Li(t){return Math.pow(t,3)}function Ai(t){return 1-Li(1-t)}function ki(t){return 3*t*t-2*t*t*t}function Fi(t){return t}var ji,Ni=(ji=function(t,e){return(ji=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ji(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Di(t,e){setTimeout((function(){t(e)}),0)}function zi(t){return!(t.sourceCenter&&t.targetCenter&&!Ei(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}var Gi=function(t){function e(e){var r=t.call(this)||this,n=p({},e);return r.hints_=[0,0],r.animations_=[],r.updateAnimationKey_,r.projection_=Be(n.projection,"EPSG:3857"),r.viewportSize_=[100,100],r.targetCenter_=null,r.targetResolution_,r.targetRotation_,r.cancelAnchor_=void 0,n.center&&(n.center=er(n.center,r.projection_)),n.extent&&(n.extent=nr(n.extent,r.projection_)),r.applyOptions_(n),r}return Ni(e,t),e.prototype.applyOptions_=function(t){var e=function(t){var e,r,n,i=void 0!==t.minZoom?t.minZoom:0,o=void 0!==t.maxZoom?t.maxZoom:28,a=void 0!==t.zoomFactor?t.zoomFactor:2,s=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,l=void 0!==t.showFullExtent&&t.showFullExtent,c=Be(t.projection,"EPSG:3857"),h=c.getExtent(),f=t.constrainOnlyCenter,p=t.extent;if(s||p||!c.isGlobal()||(f=!1,p=h),void 0!==t.resolutions){var d=t.resolutions;r=d[i],n=void 0!==d[o]?d[o]:d[d.length-1],e=t.constrainResolution?function(t,e,r,n){return function(i,o,a,s){if(void 0!==i){var u=t[0],l=t[t.length-1],c=r?ci(u,r,a,n):u;if(s)return void 0===e||e?hi(i,c,l):re(i,l,c);var h=Math.min(c,i),f=Math.floor(S(t,h,o));return t[f]>c&&f<t.length-1?t[f+1]:t[f]}}}(d,u,!f&&p,l):fi(r,n,u,!f&&p,l)}else{var g=(h?Math.max(Ut(h),Dt(h)):360*ge[ve.DEGREES]/c.getMetersPerUnit())/256/Math.pow(2,0),y=g/Math.pow(2,28);void 0!==(r=t.maxResolution)?i=0:r=g/Math.pow(a,i),void 0===(n=t.minResolution)&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?r/Math.pow(a,o):g/Math.pow(a,o):y),o=i+Math.floor(Math.log(r/n)/Math.log(a)),n=r/Math.pow(a,o-i),e=t.constrainResolution?function(t,e,r,n,i,o){return function(a,s,u,l){if(void 0!==a){var c=i?ci(e,i,u,o):e,h=void 0!==r?r:0;if(l)return void 0===n||n?hi(a,c,h):re(a,h,c);var f=Math.ceil(Math.log(e/c)/Math.log(t)-1e-9),p=-s*(.5-1e-9)+.5,d=Math.min(c,a),g=Math.floor(Math.log(e/d)/Math.log(t)+p),y=Math.max(f,g);return re(e/Math.pow(t,y),h,c)}}}(a,r,n,u,!f&&p,l):fi(r,n,u,!f&&p,l)}return{constraint:e,maxResolution:r,minResolution:n,minZoom:i,zoomFactor:a}}(t);this.maxResolution_=e.maxResolution,this.minResolution_=e.minResolution,this.zoomFactor_=e.zoomFactor,this.resolutions_=t.resolutions,this.minZoom_=e.minZoom;var r=function(t){if(void 0!==t.extent){var e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ui(t.extent,t.constrainOnlyCenter,e)}var r=Be(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,ui(n,!1,!1)}return li}(t),n=e.constraint,i=function(t){if(void 0===t.enableRotation||t.enableRotation){var e=t.constrainRotation;return void 0===e||!0===e?(i=se(5),function(t,e){return e?t:void 0!==t?Math.abs(t)<=i?0:t:void 0}):!1===e?di:"number"==typeof e?(r=e,n=2*Math.PI/r,function(t,e){return e?t:void 0!==t?t=Math.floor(t/n+.5)*n:void 0}):di}return pi;var r,n,i}(t);this.constraints_={center:r,resolution:n,rotation:i},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom),this.setProperties({}),this.options_=t},e.prototype.getUpdatedOptions_=function(t){var e=p({},this.options_);return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),p({},e,t)},e.prototype.animate=function(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var e=new Array(arguments.length),r=0;r<e.length;++r){var n=arguments[r];n.center&&((n=p({},n)).center=er(n.center,this.getProjection())),n.anchor&&((n=p({},n)).anchor=er(n.anchor,this.getProjection())),e[r]=n}this.animateInternal.apply(this,e)},e.prototype.animateInternal=function(t){var e,r=arguments.length;if(r>1&&"function"==typeof arguments[r-1]&&(e=arguments[r-1],--r),!this.isDef()){var n=arguments[r-1];return n.center&&this.setCenterInternal(n.center),void 0!==n.zoom&&this.setZoom(n.zoom),void 0!==n.rotation&&this.setRotation(n.rotation),void(e&&Di(e,!0))}for(var i=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,s=this.targetRotation_,u=[],l=0;l<r;++l){var c=arguments[l],h={start:i,complete:!1,anchor:c.anchor,duration:void 0!==c.duration?c.duration:1e3,easing:c.easing||ki,callback:e};if(c.center&&(h.sourceCenter=o,h.targetCenter=c.center.slice(),o=h.targetCenter),void 0!==c.zoom?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(c.zoom),a=h.targetResolution):c.resolution&&(h.sourceResolution=a,h.targetResolution=c.resolution,a=h.targetResolution),void 0!==c.rotation){h.sourceRotation=s;var f=ue(c.rotation-s+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=s+f,s=h.targetRotation}zi(h)?h.complete=!0:i+=h.duration,u.push(h)}this.animations_.push(u),this.setHint(0,1),this.updateAnimations_()},e.prototype.getAnimating=function(){return this.hints_[0]>0},e.prototype.getInteracting=function(){return this.hints_[1]>0},e.prototype.cancelAnimations=function(){var t;this.setHint(0,-this.hints_[0]);for(var e=0,r=this.animations_.length;e<r;++e){var n=this.animations_[e];if(n[0].callback&&Di(n[0].callback,!1),!t)for(var i=0,o=n.length;i<o;++i){var a=n[i];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t},e.prototype.updateAnimations_=function(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),this.getAnimating()){for(var t=Date.now(),e=!1,r=this.animations_.length-1;r>=0;--r){for(var n=this.animations_[r],i=!0,o=0,a=n.length;o<a;++o){var s=n[o];if(!s.complete){var u=t-s.start,l=s.duration>0?u/s.duration:1;l>=1?(s.complete=!0,l=1):i=!1;var c=s.easing(l);if(s.sourceCenter){var h=s.sourceCenter[0],f=s.sourceCenter[1],p=h+c*(s.targetCenter[0]-h),d=f+c*(s.targetCenter[1]-f);this.targetCenter_=[p,d]}if(s.sourceResolution&&s.targetResolution){var g=1===c?s.targetResolution:s.sourceResolution+c*(s.targetResolution-s.sourceResolution);if(s.anchor){var y=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(g,0,y,!0);this.targetCenter_=this.calculateCenterZoom(_,s.anchor)}this.targetResolution_=g,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){var v=1===c?ue(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+c*(s.targetRotation-s.sourceRotation);if(s.anchor){var m=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(m,s.anchor)}this.targetRotation_=v}if(this.applyTargetState_(!0),e=!0,!s.complete)break}}if(i){this.animations_[r]=null,this.setHint(0,-1);var b=n[0].callback;b&&Di(b,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},e.prototype.calculateCenterRotate=function(t,e){var r,n=this.getCenterInternal();return void 0!==n&&(Oi(r=[n[0]-e[0],n[1]-e[1]],t-this.getRotation()),bi(r,e)),r},e.prototype.calculateCenterZoom=function(t,e){var r,n=this.getCenterInternal(),i=this.getResolution();return void 0!==n&&void 0!==i&&(r=[e[0]-t*(e[0]-n[0])/i,e[1]-t*(e[1]-n[1])/i]),r},e.prototype.getViewportSize_=function(t){var e=this.viewportSize_;if(t){var r=e[0],n=e[1];return[Math.abs(r*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(r*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e},e.prototype.setViewportSize=function(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.resolveConstraints(0)},e.prototype.getCenter=function(){var t=this.getCenterInternal();return t?tr(t,this.getProjection()):t},e.prototype.getCenterInternal=function(){return this.get(gi)},e.prototype.getConstraints=function(){return this.constraints_},e.prototype.getConstrainResolution=function(){return this.options_.constrainResolution},e.prototype.getHints=function(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()},e.prototype.calculateExtent=function(t){return rr(this.calculateExtentInternal(t),this.getProjection())},e.prototype.calculateExtentInternal=function(t){var e=t||this.getViewportSize_(),r=this.getCenterInternal();ut(r,1);var n=this.getResolution();ut(void 0!==n,2);var i=this.getRotation();return ut(void 0!==i,3),Nt(r,n,i,e)},e.prototype.getMaxResolution=function(){return this.maxResolution_},e.prototype.getMinResolution=function(){return this.minResolution_},e.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},e.prototype.setMaxZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))},e.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},e.prototype.setMinZoom=function(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))},e.prototype.setConstrainResolution=function(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolution=function(){return this.get(yi)},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getResolutionForExtent=function(t,e){return this.getResolutionForExtentInternal(nr(t,this.getProjection()),e)},e.prototype.getResolutionForExtentInternal=function(t,e){var r=e||this.getViewportSize_(),n=Ut(t)/r[0],i=Dt(t)/r[1];return Math.max(n,i)},e.prototype.getResolutionForValueFunction=function(t){var e=t||2,r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/Math.log(e);return function(t){return r/Math.pow(e,t*i)}},e.prototype.getRotation=function(){return this.get(_i)},e.prototype.getValueForResolutionFunction=function(t){var e=Math.log(t||2),r=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(r/n)/e;return function(t){return Math.log(r/t)/e/i}},e.prototype.getState=function(){var t=this.getCenterInternal(),e=this.getProjection(),r=this.getResolution(),n=this.getRotation();return{center:t.slice(0),projection:void 0!==e?e:null,resolution:r,rotation:n,zoom:this.getZoom()}},e.prototype.getZoom=function(){var t,e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t},e.prototype.getZoomForResolution=function(t){var e,r,n=this.minZoom_||0;if(this.resolutions_){var i=S(this.resolutions_,t,1);n=i,e=this.resolutions_[i],r=i==this.resolutions_.length-1?2:e/this.resolutions_[i+1]}else e=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(e/t)/Math.log(r)},e.prototype.getResolutionForZoom=function(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var e=re(Math.floor(t),0,this.resolutions_.length-2),r=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(r,re(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)},e.prototype.fit=function(t,e){var r,n=p({size:this.getViewportSize_()},e||{});if(ut(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))ut(!Yt(t),25),r=ln(i=nr(t,this.getProjection()));else if(t.getType()===Qt.CIRCLE){var i;(r=ln(i=nr(t.getExtent(),this.getProjection()))).rotate(this.getRotation(),Ft(i))}else{var o=$e();r=o?t.clone().transform(o,this.getProjection()):t}this.fitInternal(r,n)},e.prototype.fitInternal=function(t,e){var r=e||{},n=r.size;n||(n=this.getViewportSize_());var i,o=void 0!==r.padding?r.padding:[0,0,0,0],a=void 0!==r.nearest&&r.nearest;i=void 0!==r.minResolution?r.minResolution:void 0!==r.maxZoom?this.getResolutionForZoom(r.maxZoom):0;for(var s=t.getFlatCoordinates(),u=this.getRotation(),l=Math.cos(-u),c=Math.sin(-u),h=1/0,f=1/0,p=-1/0,d=-1/0,g=t.getStride(),y=0,_=s.length;y<_;y+=g){var v=s[y]*l-s[y+1]*c,m=s[y]*c+s[y+1]*l;h=Math.min(h,v),f=Math.min(f,m),p=Math.max(p,v),d=Math.max(d,m)}var b=this.getResolutionForExtentInternal([h,f,p,d],[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]);b=isNaN(b)?i:Math.max(b,i),b=this.getConstrainedResolution(b,a?0:1),c=-c;var w=(h+p)/2,x=(f+d)/2,S=[(w+=(o[1]-o[3])/2*b)*l-(x+=(o[0]-o[2])/2*b)*c,x*l+w*c],E=r.callback?r.callback:R;void 0!==r.duration?this.animateInternal({resolution:b,center:this.getConstrainedCenter(S,b),duration:r.duration,easing:r.easing},E):(this.targetResolution_=b,this.targetCenter_=S,this.applyTargetState_(!1,!0),Di(E,!0))},e.prototype.centerOn=function(t,e,r){this.centerOnInternal(er(t,this.getProjection()),e,r)},e.prototype.centerOnInternal=function(t,e,r){var n=this.getRotation(),i=Math.cos(-n),o=Math.sin(-n),a=t[0]*i-t[1]*o,s=t[1]*i+t[0]*o,u=this.getResolution(),l=(a+=(e[0]/2-r[0])*u)*i-(s+=(r[1]-e[1]/2)*u)*(o=-o),c=s*i+a*o;this.setCenterInternal([l,c])},e.prototype.isDef=function(){return!!this.getCenterInternal()&&void 0!==this.getResolution()},e.prototype.adjustCenter=function(t){var e=tr(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustCenterInternal=function(t){var e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])},e.prototype.adjustResolution=function(t,e){var r=e&&er(e,this.getProjection());this.adjustResolutionInternal(t,r)},e.prototype.adjustResolutionInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(this.targetResolution_*t,0,n,r);e&&(this.targetCenter_=this.calculateCenterZoom(i,e)),this.targetResolution_*=t,this.applyTargetState_()},e.prototype.adjustZoom=function(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)},e.prototype.adjustRotation=function(t,e){e&&(e=er(e,this.getProjection())),this.adjustRotationInternal(t,e)},e.prototype.adjustRotationInternal=function(t,e){var r=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,r);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()},e.prototype.setCenter=function(t){this.setCenterInternal(er(t,this.getProjection()))},e.prototype.setCenterInternal=function(t){this.targetCenter_=t,this.applyTargetState_()},e.prototype.setHint=function(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]},e.prototype.setResolution=function(t){this.targetResolution_=t,this.applyTargetState_()},e.prototype.setRotation=function(t){this.targetRotation_=t,this.applyTargetState_()},e.prototype.setZoom=function(t){this.setResolution(this.getResolutionForZoom(t))},e.prototype.applyTargetState_=function(t,e){var r=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,r),i=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,i,r),a=this.constraints_.center(this.targetCenter_,o,i,r);this.get(_i)!==n&&this.set(_i,n),this.get(yi)!==o&&this.set(yi,o),this.get(gi)&&Ei(this.get(gi),a)||this.set(gi,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0},e.prototype.resolveConstraints=function(t,e,r){var n=void 0!==t?t:200,i=e||0,o=this.constraints_.rotation(this.targetRotation_),a=this.getViewportSize_(o),s=this.constraints_.resolution(this.targetResolution_,i,a),u=this.constraints_.center(this.targetCenter_,s,a);if(0===n&&!this.cancelAnchor_)return this.targetResolution_=s,this.targetRotation_=o,this.targetCenter_=u,void this.applyTargetState_();var l=r||(0===n?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,this.getResolution()===s&&this.getRotation()===o&&this.getCenterInternal()&&Ei(this.getCenterInternal(),u)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:u,resolution:s,duration:n,easing:Ai,anchor:l}))},e.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(1,1)},e.prototype.endInteraction=function(t,e,r){var n=r&&er(r,this.getProjection());this.endInteractionInternal(t,e,n)},e.prototype.endInteractionInternal=function(t,e,r){this.setHint(1,-1),this.resolveConstraints(t,e,r)},e.prototype.getConstrainedCenter=function(t,e){var r=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),r)},e.prototype.getConstrainedZoom=function(t,e){var r=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(r,e))},e.prototype.getConstrainedResolution=function(t,e){var r=e||0,n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,r,n)},e}(it);function Bi(t,e,r){var n=r&&r.length?r.shift():Gn?new OffscreenCanvas(t||300,e||300):document.createElement("canvas");return t&&(n.width=t),e&&(n.height=e),n.getContext("2d")}function Ui(t){var e=t.offsetWidth,r=getComputedStyle(t);return e+(parseInt(r.marginLeft,10)+parseInt(r.marginRight,10))}function Wi(t){var e=t.offsetHeight,r=getComputedStyle(t);return e+(parseInt(r.marginTop,10)+parseInt(r.marginBottom,10))}function Yi(t,e){var r=e.parentNode;r&&r.replaceChild(t,e)}function Vi(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Xi(t){for(;t.lastChild;)t.removeChild(t.lastChild)}var Zi,qi,Ki="opacity",Hi="visible",Ji="zIndex",Qi="maxResolution",$i="minResolution",to="maxZoom",eo="minZoom",ro="source",no=(qi=function(t,e){return(qi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}qi(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),io=function(t){function e(e){var r=t.call(this)||this,n=p({},e);return n[Ki]=void 0!==e.opacity?e.opacity:1,ut("number"==typeof n[Ki],64),n[Hi]=void 0===e.visible||e.visible,n[Ji]=e.zIndex,n[Qi]=void 0!==e.maxResolution?e.maxResolution:1/0,n[$i]=void 0!==e.minResolution?e.minResolution:0,n[eo]=void 0!==e.minZoom?e.minZoom:-1/0,n[to]=void 0!==e.maxZoom?e.maxZoom:1/0,r.className_=void 0!==n.className?e.className:"ol-layer",delete n.className,r.setProperties(n),r.state_=null,r}return no(e,t),e.prototype.getClassName=function(){return this.className_},e.prototype.getLayerState=function(t){var e=this.state_||{layer:this,managed:void 0===t||t},r=this.getZIndex();return e.opacity=re(Math.round(100*this.getOpacity())/100,0,1),e.sourceState=this.getSourceState(),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==r?r:!1===e.managed?1/0:0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e},e.prototype.getLayersArray=function(t){return n()},e.prototype.getLayerStatesArray=function(t){return n()},e.prototype.getExtent=function(){return this.get("extent")},e.prototype.getMaxResolution=function(){return this.get(Qi)},e.prototype.getMinResolution=function(){return this.get($i)},e.prototype.getMinZoom=function(){return this.get(eo)},e.prototype.getMaxZoom=function(){return this.get(to)},e.prototype.getOpacity=function(){return this.get(Ki)},e.prototype.getSourceState=function(){return n()},e.prototype.getVisible=function(){return this.get(Hi)},e.prototype.getZIndex=function(){return this.get(Ji)},e.prototype.setExtent=function(t){this.set("extent",t)},e.prototype.setMaxResolution=function(t){this.set(Qi,t)},e.prototype.setMinResolution=function(t){this.set($i,t)},e.prototype.setMaxZoom=function(t){this.set(to,t)},e.prototype.setMinZoom=function(t){this.set(eo,t)},e.prototype.setOpacity=function(t){ut("number"==typeof t,64),this.set(Ki,t)},e.prototype.setVisible=function(t){this.set(Hi,t)},e.prototype.setZIndex=function(t){this.set(Ji,t)},e.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),t.prototype.disposeInternal.call(this)},e}(it),oo="undefined",ao="loading",so="ready",uo="error",lo=(Zi=function(t,e){return(Zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Zi(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),co="layers",ho=function(t){function e(e){var r=this,n=e||{},i=p({},n);delete i.layers;var o=n.layers;return(r=t.call(this,i)||this).layersListenerKeys_=[],r.listenerKeys_={},r.addEventListener(rt(co),r.handleLayersChanged_),o?Array.isArray(o)?o=new st(o.slice(),{unique:!0}):ut("function"==typeof o.getArray,43):o=new st(void 0,{unique:!0}),r.setLayers(o),r}return lo(e,t),e.prototype.handleLayerChange_=function(){this.changed()},e.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(m),this.layersListenerKeys_.length=0;var t=this.getLayers();for(var e in this.layersListenerKeys_.push(_(t,c,this.handleLayersAdd_,this),_(t,h,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[e].forEach(m);d(this.listenerKeys_);for(var r=t.getArray(),n=0,i=r.length;n<i;n++){var a=r[n];this.listenerKeys_[o(a)]=[_(a,f,this.handleLayerChange_,this),_(a,z,this.handleLayerChange_,this)]}this.changed()},e.prototype.handleLayersAdd_=function(t){var e=t.element;this.listenerKeys_[o(e)]=[_(e,f,this.handleLayerChange_,this),_(e,z,this.handleLayerChange_,this)],this.changed()},e.prototype.handleLayersRemove_=function(t){var e=o(t.element);this.listenerKeys_[e].forEach(m),delete this.listenerKeys_[e],this.changed()},e.prototype.getLayers=function(){return this.get(co)},e.prototype.setLayers=function(t){this.set(co,t)},e.prototype.getLayersArray=function(t){var e=void 0!==t?t:[];return this.getLayers().forEach((function(t){t.getLayersArray(e)})),e},e.prototype.getLayerStatesArray=function(t){var e=void 0!==t?t:[],r=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));for(var n=this.getLayerState(),i=r,o=e.length;i<o;i++){var a=e[i];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=zt(a.extent,n.extent):a.extent=n.extent)}return e},e.prototype.getSourceState=function(){return so},e}(io);function fo(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]+2*e,r[1]=t[1]+2*e,r}function po(t,e,r){return void 0===r&&(r=[0,0]),r[0]=t[0]*e+.5|0,r[1]=t[1]*e+.5|0,r}function go(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}var yo,_o,vo,mo=(yo=function(t,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}yo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),bo=function(t){function e(e){var r=t.call(this)||this,n=function(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var r,n,i,o={},a=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new ho({layers:t.layers});return o[Qn]=a,o[ti]=t.target,o[ei]=void 0!==t.view?t.view:new Gi,void 0!==t.controls&&(Array.isArray(t.controls)?r=new st(t.controls.slice()):(ut("function"==typeof t.controls.getArray,47),r=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?n=new st(t.interactions.slice()):(ut("function"==typeof t.interactions.getArray,48),n=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?i=new st(t.overlays.slice()):(ut("function"==typeof t.overlays.getArray,49),i=t.overlays):i=new st,{controls:r,interactions:n,keyboardEventTarget:e,overlays:i,values:o}}(e);r.boundHandleBrowserEvent_=r.handleBrowserEvent.bind(r),r.maxTilesLoading_=void 0!==e.maxTilesLoading?e.maxTilesLoading:16,r.pixelRatio_=void 0!==e.pixelRatio?e.pixelRatio:zn,r.postRenderTimeoutHandle_,r.animationDelayKey_,r.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(r),r.coordinateToPixelTransform_=[1,0,0,1,0,0],r.pixelToCoordinateTransform_=[1,0,0,1,0,0],r.frameIndex_=0,r.frameState_=null,r.previousExtent_=null,r.viewPropertyListenerKey_=null,r.viewChangeListenerKey_=null,r.layerGroupPropertyListenerKeys_=null,r.viewport_=document.createElement("div"),r.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),r.viewport_.style.position="relative",r.viewport_.style.overflow="hidden",r.viewport_.style.width="100%",r.viewport_.style.height="100%",r.overlayContainer_=document.createElement("div"),r.overlayContainer_.style.position="absolute",r.overlayContainer_.style.zIndex="0",r.overlayContainer_.style.width="100%",r.overlayContainer_.style.height="100%",r.overlayContainer_.className="ol-overlaycontainer",r.viewport_.appendChild(r.overlayContainer_),r.overlayContainerStopEvent_=document.createElement("div"),r.overlayContainerStopEvent_.style.position="absolute",r.overlayContainerStopEvent_.style.zIndex="0",r.overlayContainerStopEvent_.style.width="100%",r.overlayContainerStopEvent_.style.height="100%",r.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",r.viewport_.appendChild(r.overlayContainerStopEvent_),r.mapBrowserEventHandler_=new Hn(r,e.moveTolerance);var i=r.handleMapBrowserEvent.bind(r);for(var o in Wn)r.mapBrowserEventHandler_.addEventListener(Wn[o],i);r.keyboardEventTarget_=n.keyboardEventTarget,r.keyHandlerKeys_=null;var a=r.handleBrowserEvent.bind(r);return r.viewport_.addEventListener(B,a,!1),r.viewport_.addEventListener(K,a,!!Un&&{passive:!1}),r.controls=n.controls||new st,r.interactions=n.interactions||new st,r.overlays_=n.overlays,r.overlayIdIndex_={},r.renderer_=null,r.handleResize_,r.postRenderFunctions_=[],r.tileQueue_=new si(r.getTilePriority.bind(r),r.handleTileChange_.bind(r)),r.addEventListener(rt(Qn),r.handleLayerGroupChanged_),r.addEventListener(rt(ei),r.handleViewChanged_),r.addEventListener(rt($n),r.handleSizeChanged_),r.addEventListener(rt(ti),r.handleTargetChanged_),r.setProperties(n.values),r.controls.forEach(function(t){t.setMap(this)}.bind(r)),r.controls.addEventListener(c,function(t){t.element.setMap(this)}.bind(r)),r.controls.addEventListener(h,function(t){t.element.setMap(null)}.bind(r)),r.interactions.forEach(function(t){t.setMap(this)}.bind(r)),r.interactions.addEventListener(c,function(t){t.element.setMap(this)}.bind(r)),r.interactions.addEventListener(h,function(t){t.element.setMap(null)}.bind(r)),r.overlays_.forEach(r.addOverlayInternal_.bind(r)),r.overlays_.addEventListener(c,function(t){this.addOverlayInternal_(t.element)}.bind(r)),r.overlays_.addEventListener(h,function(t){var e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)}.bind(r)),r}return mo(e,t),e.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},e.prototype.addControl=function(t){this.getControls().push(t)},e.prototype.addInteraction=function(t){this.getInteractions().push(t)},e.prototype.addLayer=function(t){this.getLayerGroup().getLayers().push(t)},e.prototype.addOverlay=function(t){this.getOverlays().push(t)},e.prototype.addOverlayInternal_=function(t){var e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)},e.prototype.disposeInternal=function(){this.mapBrowserEventHandler_.dispose(),this.viewport_.removeEventListener(B,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(K,this.boundHandleBrowserEvent_),void 0!==this.handleResize_&&(removeEventListener(Z,this.handleResize_,!1),this.handleResize_=void 0),this.setTarget(null),t.prototype.disposeInternal.call(this)},e.prototype.forEachFeatureAtPixel=function(t,e,r){if(this.frameState_){var n=this.getCoordinateFromPixelInternal(t),i=void 0!==(r=void 0!==r?r:{}).hitTolerance?r.hitTolerance*this.frameState_.pixelRatio:0,o=void 0!==r.layerFilter?r.layerFilter:C,a=!1!==r.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,i,a,e,null,o,null)}},e.prototype.getFeaturesAtPixel=function(t,e){var r=[];return this.forEachFeatureAtPixel(t,(function(t){r.push(t)}),e),r},e.prototype.forEachLayerAtPixel=function(t,e,r){if(this.frameState_){var n=r||{},i=void 0!==n.hitTolerance?n.hitTolerance*this.frameState_.pixelRatio:0,o=n.layerFilter||C;return this.renderer_.forEachLayerAtPixel(t,this.frameState_,i,e,o)}},e.prototype.hasFeatureAtPixel=function(t,e){if(!this.frameState_)return!1;var r=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:C,i=void 0!==e.hitTolerance?e.hitTolerance*this.frameState_.pixelRatio:0,o=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(r,this.frameState_,i,o,n,null)},e.prototype.getEventCoordinate=function(t){return this.getCoordinateFromPixel(this.getEventPixel(t))},e.prototype.getEventCoordinateInternal=function(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))},e.prototype.getEventPixel=function(t){var e=this.viewport_.getBoundingClientRect(),r="changedTouches"in t?t.changedTouches[0]:t;return[r.clientX-e.left,r.clientY-e.top]},e.prototype.getTarget=function(){return this.get(ti)},e.prototype.getTargetElement=function(){var t=this.getTarget();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},e.prototype.getCoordinateFromPixel=function(t){return tr(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())},e.prototype.getCoordinateFromPixelInternal=function(t){var e=this.frameState_;return e?ur(e.pixelToCoordinateTransform,t.slice()):null},e.prototype.getControls=function(){return this.controls},e.prototype.getOverlays=function(){return this.overlays_},e.prototype.getOverlayById=function(t){var e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getInteractions=function(){return this.interactions},e.prototype.getLayerGroup=function(){return this.get(Qn)},e.prototype.getLayers=function(){return this.getLayerGroup().getLayers()},e.prototype.getLoading=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer.getSource();if(n&&n.loading)return!0}return!1},e.prototype.getPixelFromCoordinate=function(t){var e=er(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)},e.prototype.getPixelFromCoordinateInternal=function(t){var e=this.frameState_;return e?ur(e.coordinateToPixelTransform,t.slice(0,2)):null},e.prototype.getRenderer=function(){return this.renderer_},e.prototype.getSize=function(){return this.get($n)},e.prototype.getView=function(){return this.get(ei)},e.prototype.getViewport=function(){return this.viewport_},e.prototype.getOverlayContainer=function(){return this.overlayContainer_},e.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},e.prototype.getTilePriority=function(t,e,r,n){return function(t,e,r,n,i){if(!t||!(r in t.wantedTiles))return 1/0;if(!t.wantedTiles[r][e.getKey()])return 1/0;var o=t.viewState.center,a=n[0]-o[0],s=n[1]-o[1];return 65536*Math.log(i)+Math.sqrt(a*a+s*s)/i}(this.frameState_,t,e,r,n)},e.prototype.handleBrowserEvent=function(t,e){var r=e||t.type,n=new kn(r,this,t);this.handleMapBrowserEvent(n)},e.prototype.handleMapBrowserEvent=function(t){if(this.frameState_){var e=t.originalEvent.target;if(t.dragging||!this.overlayContainerStopEvent_.contains(e)&&(document.body.contains(e)||this.viewport_.getRootNode&&this.viewport_.getRootNode().contains(e))){t.frameState=this.frameState_;var r=this.getInteractions().getArray();if(!1!==this.dispatchEvent(t))for(var n=r.length-1;n>=0;n--){var i=r[n];if(i.getActive()&&!i.handleEvent(t))break}}}},e.prototype.handlePostRender=function(){var t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){var r=this.maxTilesLoading_,n=r;if(t){var i=t.viewHints;if(i[0]||i[1]){var o=!Bn&&Date.now()-t.time>8;r=o?0:8,n=o?0:2}}e.getTilesLoading()<r&&(e.reprioritize(),e.loadMoreTiles(r,n))}!t||!this.hasListener(ii)||t.animate||this.tileQueue_.getTilesLoading()||this.getLoading()||this.renderer_.dispatchRenderEvent(ii,t);for(var a=this.postRenderFunctions_,s=0,u=a.length;s<u;++s)a[s](this,t);a.length=0},e.prototype.handleSizeChanged_=function(){this.getView()&&this.getView().resolveConstraints(0),this.render()},e.prototype.handleTargetChanged_=function(){var t;if(this.getTarget()&&(t=this.getTargetElement()),this.keyHandlerKeys_){for(var e=0,r=this.keyHandlerKeys_.length;e<r;++e)m(this.keyHandlerKeys_[e]);this.keyHandlerKeys_=null}if(t){t.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer());var n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.keyHandlerKeys_=[_(n,Y,this.handleBrowserEvent,this),_(n,V,this.handleBrowserEvent,this)],this.handleResize_||(this.handleResize_=this.updateSize.bind(this),window.addEventListener(Z,this.handleResize_,!1))}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0),Vi(this.viewport_),void 0!==this.handleResize_&&(removeEventListener(Z,this.handleResize_,!1),this.handleResize_=void 0);this.updateSize()},e.prototype.handleTileChange_=function(){this.render()},e.prototype.handleViewPropertyChanged_=function(){this.render()},e.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(m(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(m(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=_(t,f,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=_(t,z,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()},e.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(m),this.layerGroupPropertyListenerKeys_=null);var t=this.getLayerGroup();t&&(this.layerGroupPropertyListenerKeys_=[_(t,f,this.render,this),_(t,z,this.render,this)]),this.render()},e.prototype.isRendered=function(){return!!this.frameState_},e.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},e.prototype.redrawText=function(){for(var t=this.getLayerGroup().getLayerStatesArray(),e=0,r=t.length;e<r;++e){var n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}},e.prototype.render=function(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},e.prototype.removeControl=function(t){return this.getControls().remove(t)},e.prototype.removeInteraction=function(t){return this.getInteractions().remove(t)},e.prototype.removeLayer=function(t){return this.getLayerGroup().getLayers().remove(t)},e.prototype.removeOverlay=function(t){return this.getOverlays().remove(t)},e.prototype.renderFrame_=function(t){var e=this.getSize(),r=this.getView(),n=this.frameState_,i=null;if(void 0!==e&&function(t){return t[0]>0&&t[1]>0}(e)&&r&&r.isDef()){var o=r.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=r.getState();i={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterItems:n?n.declutterItems:[],extent:Nt(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{}}}this.frameState_=i,this.renderer_.renderFrame(i),i&&(i.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,i.postRenderFunctions),n&&(!this.previousExtent_||!Yt(this.previousExtent_)&&!Mt(i.extent,this.previousExtent_))&&(this.dispatchEvent(new Ln("movestart",this,n)),this.previousExtent_=St(this.previousExtent_)),this.previousExtent_&&!i.viewHints[0]&&!i.viewHints[1]&&!Mt(i.extent,this.previousExtent_)&&(this.dispatchEvent(new Ln("moveend",this,i)),gt(i.extent,this.previousExtent_))),this.dispatchEvent(new Ln(Jn,this,i)),this.postRenderTimeoutHandle_=setTimeout(this.handlePostRender.bind(this),0)},e.prototype.setLayerGroup=function(t){this.set(Qn,t)},e.prototype.setSize=function(t){this.set($n,t)},e.prototype.setTarget=function(t){this.set(ti,t)},e.prototype.setView=function(t){this.set(ei,t)},e.prototype.updateSize=function(){var t=this.getTargetElement();if(t){var e=getComputedStyle(t);this.setSize([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.setSize(void 0);this.updateViewportSize_()},e.prototype.updateViewportSize_=function(){var t=this.getView();if(t){var e=void 0,r=getComputedStyle(this.viewport_);r.width&&r.height&&(e=[parseInt(r.width,10),parseInt(r.height,10)]),t.setViewportSize(e)}},e}(it),wo=(vo=function(t,e){return(vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}vo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),xo=function(t){function e(e){var r=t.call(this)||this;return r.element=e.element?e.element:null,r.target_=null,r.map_=null,r.listenerKeys=[],r.render_=e.render?e.render:R,e.target&&r.setTarget(e.target),r}return wo(e,t),e.prototype.disposeInternal=function(){Vi(this.element),t.prototype.disposeInternal.call(this)},e.prototype.getMap=function(){return this.map_},e.prototype.setMap=function(t){this.map_&&Vi(this.element);for(var e=0,r=this.listenerKeys.length;e<r;++e)m(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,this.map_&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==R&&this.listenerKeys.push(_(t,Jn,this.render,this)),t.render())},e.prototype.render=function(t){this.render_.call(this,t)},e.prototype.setTarget=function(t){this.target_="string"==typeof t?document.getElementById(t):t},e}(it),So=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),Eo=["style","variant","weight","size","lineHeight","family"],Oo=function(t){var e=t.match(So);if(!e)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,i=Eo.length;n<i;++n){var o=e[n+1];void 0!==o&&(r[Eo[n]]=o)}return r.families=r.family.split(/,\s?/),r},Mo=(_o=function(t,e){return(_o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Po(t,e){if(!t.visible)return!1;var r=e.resolution;if(r<t.minResolution||r>=t.maxResolution)return!1;var n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var To,Co=function(t){function e(e){var r=this,n=p({},e);delete n.source,(r=t.call(this,n)||this).mapPrecomposeKey_=null,r.mapRenderKey_=null,r.sourceChangeKey_=null,r.renderer_=null,e.render&&(r.render=e.render),e.map&&r.setMap(e.map),r.addEventListener(rt(ro),r.handleSourcePropertyChange_);var i=e.source?e.source:null;return r.setSource(i),r}return Mo(e,t),e.prototype.getLayersArray=function(t){var e=t||[];return e.push(this),e},e.prototype.getLayerStatesArray=function(t){var e=t||[];return e.push(this.getLayerState()),e},e.prototype.getSource=function(){return this.get(ro)||null},e.prototype.getSourceState=function(){var t=this.getSource();return t?t.getState():oo},e.prototype.handleSourceChange_=function(){this.changed()},e.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(m(this.sourceChangeKey_),this.sourceChangeKey_=null);var t=this.getSource();t&&(this.sourceChangeKey_=_(t,z,this.handleSourceChange_,this)),this.changed()},e.prototype.getFeatures=function(t){return this.renderer_.getFeatures(t)},e.prototype.render=function(t,e){var r=this.getRenderer();if(r.prepareFrame(t))return r.renderFrame(t,e)},e.prototype.setMap=function(t){this.mapPrecomposeKey_&&(m(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(m(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=_(t,ni,(function(t){var e=t.frameState.layerStatesArray,r=this.getLayerState(!1);ut(!e.some((function(t){return t.layer===r.layer})),67),e.push(r)}),this),this.mapRenderKey_=_(this,z,t.render,t),this.changed())},e.prototype.setSource=function(t){this.set(ro,t)},e.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},e.prototype.hasRenderer=function(){return!!this.renderer_},e.prototype.createRenderer=function(){return null},e.prototype.disposeInternal=function(){this.setSource(null),t.prototype.disposeInternal.call(this)},e}(io),Io=(To=function(t,e){return(To=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}To(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Ro(t){this.updateElement_(t.frameState)}var Lo,Ao=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||Ro,target:n.target})||this).ulElement_=document.createElement("ul"),r.collapsed_=void 0===n.collapsed||n.collapsed,r.overrideCollapsible_=void 0!==n.collapsible,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1);var i=void 0!==n.className?n.className:"ol-attribution",o=void 0!==n.tipLabel?n.tipLabel:"Attributions",a=void 0!==n.collapseLabel?n.collapseLabel:"»";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"i";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(U,r.handleClick_.bind(r),!1);var c=i+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" ol-collapsed":"")+(r.collapsible_?"":" ol-uncollapsible"),h=r.element;return h.className=c,h.appendChild(r.ulElement_),h.appendChild(l),r.renderedAttributions_=[],r.renderedVisible_=!0,r}return Io(e,t),e.prototype.collectSourceAttributions_=function(t){for(var e={},r=[],n=t.layerStatesArray,i=0,o=n.length;i<o;++i){var a=n[i];if(Po(a,t.viewState)){var s=a.layer.getSource();if(s){var u=s.getAttributions();if(u){var l=u(t);if(l)if(this.overrideCollapsible_||!1!==s.getAttributionsCollapsible()||this.setCollapsible(!1),Array.isArray(l))for(var c=0,h=l.length;c<h;++c)l[c]in e||(r.push(l[c]),e[l[c]]=!0);else l in e||(r.push(l),e[l]=!0)}}}}return r},e.prototype.updateElement_=function(t){if(t){var e=this.collectSourceAttributions_(t),r=e.length>0;if(this.renderedVisible_!=r&&(this.element.style.display=r?"":"none",this.renderedVisible_=r),!P(e,this.renderedAttributions_)){Xi(this.ulElement_);for(var n=0,i=e.length;n<i;++n){var o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Yi(this.collapseLabel_,this.label_):Yi(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e}(xo),ko=(Lo=function(t,e){return(Lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Lo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Fo(t){var e=t.frameState;if(e){var r=e.viewState.rotation;if(r!=this.rotation_){var n="rotate("+r+"rad)";if(this.autoHide_){var i=this.element.classList.contains("ol-hidden");i||0!==r?i&&0!==r&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.label_.style.transform=n}this.rotation_=r}}var jo,No=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),render:n.render||Fo,target:n.target})||this;var i=void 0!==n.className?n.className:"ol-rotate",o=void 0!==n.label?n.label:"⇧";r.label_=null,"string"==typeof o?(r.label_=document.createElement("span"),r.label_.className="ol-compass",r.label_.textContent=o):(r.label_=o,r.label_.classList.add("ol-compass"));var a=n.tipLabel?n.tipLabel:"Reset rotation",s=document.createElement("button");s.className=i+"-reset",s.setAttribute("type","button"),s.title=a,s.appendChild(r.label_),s.addEventListener(U,r.handleClick_.bind(r),!1);var u=i+" ol-unselectable ol-control",l=r.element;return l.className=u,l.appendChild(s),r.callResetNorth_=n.resetNorth?n.resetNorth:void 0,r.duration_=void 0!==n.duration?n.duration:250,r.autoHide_=void 0===n.autoHide||n.autoHide,r.rotation_=void 0,r.autoHide_&&r.element.classList.add("ol-hidden"),r}return ko(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()},e.prototype.resetNorth_=function(){var t=this.getMap().getView();if(t){var e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:Ai}):t.setRotation(0))}},e}(xo),Do=(jo=function(t,e){return(jo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}jo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),zo=function(t){function e(e){var r=this,n=e||{};r=t.call(this,{element:document.createElement("div"),target:n.target})||this;var i=void 0!==n.className?n.className:"ol-zoom",o=void 0!==n.delta?n.delta:1,a=void 0!==n.zoomInLabel?n.zoomInLabel:"+",s=void 0!==n.zoomOutLabel?n.zoomOutLabel:"−",u=void 0!==n.zoomInTipLabel?n.zoomInTipLabel:"Zoom in",l=void 0!==n.zoomOutTipLabel?n.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i+"-in",c.setAttribute("type","button"),c.title=u,c.appendChild("string"==typeof a?document.createTextNode(a):a),c.addEventListener(U,r.handleClick_.bind(r,o),!1);var h=document.createElement("button");h.className=i+"-out",h.setAttribute("type","button"),h.title=l,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(U,r.handleClick_.bind(r,-o),!1);var f=i+" ol-unselectable ol-control",p=r.element;return p.className=f,p.appendChild(c),p.appendChild(h),r.duration_=void 0!==n.duration?n.duration:250,r}return Do(e,t),e.prototype.handleClick_=function(t,e){e.preventDefault(),this.zoomByDelta_(t)},e.prototype.zoomByDelta_=function(t){var e=this.getMap().getView();if(e){var r=e.getZoom();if(void 0!==r){var n=e.getConstrainedZoom(r+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:Ai})):e.setZoom(n)}}},e}(xo);function Go(t){var e=t||{},r=new st;return(void 0===e.zoom||e.zoom)&&r.push(new zo(e.zoomOptions)),(void 0===e.rotate||e.rotate)&&r.push(new No(e.rotateOptions)),(void 0===e.attribution||e.attribution)&&r.push(new Ao(e.attributionOptions)),r}var Bo,Uo="active",Wo=(Bo=function(t,e){return(Bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Bo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Yo(t,e,r,n){var i=t.getZoom();if(void 0!==i){var o=t.getConstrainedZoom(i+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:r,duration:void 0!==n?n:250,easing:Ai})}}var Vo,Xo=function(t){function e(e){var r=t.call(this)||this;return e.handleEvent&&(r.handleEvent=e.handleEvent),r.map_=null,r.setActive(!0),r}return Wo(e,t),e.prototype.getActive=function(){return this.get(Uo)},e.prototype.getMap=function(){return this.map_},e.prototype.handleEvent=function(t){return!0},e.prototype.setActive=function(t){this.set(Uo,t)},e.prototype.setMap=function(t){this.map_=t},e}(it),Zo=(Vo=function(t,e){return(Vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Vo(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function qo(t){var e=!1;if(t.type==Wn.DBLCLICK){var r=t.originalEvent,n=t.map,i=t.coordinate,o=r.shiftKey?-this.delta_:this.delta_;Yo(n.getView(),o,i,this.duration_),t.preventDefault(),e=!0}return!e}var Ko,Ho=function(t){function e(e){var r=t.call(this,{handleEvent:qo})||this,n=e||{};return r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:250,r}return Zo(e,t),e}(Xo),Jo=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Qo=function(t){var e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},$o=function(t){return t.target.getTargetElement()===document.activeElement},ta=C,ea=function(t){var e=t.originalEvent;return 0==e.button&&!(Nn&&Dn&&e.ctrlKey)},ra=I,na=function(t){return t.type==Wn.SINGLECLICK},ia=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},oa=function(t){var e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},aa=function(t){var e=t.originalEvent.target.tagName;return"INPUT"!==e&&"SELECT"!==e&&"TEXTAREA"!==e},sa=function(t){var e=t.pointerEvent;return ut(void 0!==e,56),"mouse"==e.pointerType},ua=function(t){var e=t.pointerEvent;return ut(void 0!==e,56),e.isPrimary&&0===e.button},la=(Ko=function(t,e){return(Ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ko(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function ca(t){for(var e=t.length,r=0,n=0,i=0;i<e;i++)r+=t[i].clientX,n+=t[i].clientY;return[r/e,n/e]}var ha,fa=function(t){function e(e){var r=this,n=e||{};return r=t.call(this,n)||this,n.handleDownEvent&&(r.handleDownEvent=n.handleDownEvent),n.handleDragEvent&&(r.handleDragEvent=n.handleDragEvent),n.handleMoveEvent&&(r.handleMoveEvent=n.handleMoveEvent),n.handleUpEvent&&(r.handleUpEvent=n.handleUpEvent),n.stopDown&&(r.stopDown=n.stopDown),r.handlingDownUpSequence=!1,r.trackedPointers_={},r.targetPointers=[],r}return la(e,t),e.prototype.getPointerCount=function(){return this.targetPointers.length},e.prototype.handleDownEvent=function(t){return!1},e.prototype.handleDragEvent=function(t){},e.prototype.handleEvent=function(t){if(!t.pointerEvent)return!0;var e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Wn.POINTERDRAG)this.handleDragEvent(t);else if(t.type==Wn.POINTERUP){var r=this.handleUpEvent(t);this.handlingDownUpSequence=r&&this.targetPointers.length>0}}else if(t.type==Wn.POINTERDOWN){var n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Wn.POINTERMOVE&&this.handleMoveEvent(t);return!e},e.prototype.handleMoveEvent=function(t){},e.prototype.handleUpEvent=function(t){return!1},e.prototype.stopDown=function(t){return t},e.prototype.updateTrackedPointers_=function(t){if(function(t){var e=t.type;return e===Wn.POINTERDOWN||e===Wn.POINTERDRAG||e===Wn.POINTERUP}(t)){var e=t.pointerEvent,r=e.pointerId.toString();t.type==Wn.POINTERUP?delete this.trackedPointers_[r]:(t.type==Wn.POINTERDOWN||r in this.trackedPointers_)&&(this.trackedPointers_[r]=e),this.targetPointers=g(this.trackedPointers_)}},e}(Xo),pa=(ha=function(t,e){return(ha=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ha(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function da(t){return ia(t)&&ua(t)}var ga,ya,_a,va,ma=function(t){function e(e){var r=t.call(this,{stopDown:I})||this,n=e||{};return r.kinetic_=n.kinetic,r.lastCentroid=null,r.lastPointersCount_,r.panning_=!1,r.condition_=n.condition?n.condition:da,r.noKinetic_=!1,r}return pa(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=$o(t)),e&&this.condition_(t)},e.prototype.handleDragEvent=function(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var e=this.targetPointers,r=ca(e);if(e.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){var n=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],i=t.map.getView();Mi(n,i.getResolution()),Oi(n,i.getRotation()),i.adjustCenterInternal(n)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=e.length,t.originalEvent.preventDefault()},e.prototype.handleUpEvent=function(t){var e=t.map,r=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var n=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),o=r.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),s=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(i),a[1]-n*Math.sin(i)]);r.animateInternal({center:r.getConstrainedCenter(s),duration:500,easing:Ai})}return this.panning_&&(this.panning_=!1,r.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>0&&this.conditionInternal_(t)){var e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1},e}(fa),ba=(va=function(t,e){return(va=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}va(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),wa=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{stopDown:I})||this).condition_=n.condition?n.condition:Qo,r.lastAngle_=void 0,r.duration_=void 0!==n.duration?n.duration:250,r}return ba(e,t),e.prototype.handleDragEvent=function(t){if(sa(t)){var e=t.map,r=e.getView();if(r.getConstraints().rotation!==pi){var n=e.getSize(),i=t.pixel,o=Math.atan2(n[1]/2-i[1],i[0]-n[0]/2);if(void 0!==this.lastAngle_){var a=o-this.lastAngle_;r.adjustRotationInternal(-a)}this.lastAngle_=o}}},e.prototype.handleUpEvent=function(t){return!sa(t)||(t.map.getView().endInteraction(this.duration_),!1)},e.prototype.handleDownEvent=function(t){return!!sa(t)&&!(!ea(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0)},e}(fa),xa=(_a=function(t,e){return(_a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_a(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Sa=function(t){function e(e){var r=t.call(this)||this;return r.geometry_=null,r.element_=document.createElement("div"),r.element_.style.position="absolute",r.element_.className="ol-box "+e,r.map_=null,r.startPixel_=null,r.endPixel_=null,r}return xa(e,t),e.prototype.disposeInternal=function(){this.setMap(null)},e.prototype.render_=function(){var t=this.startPixel_,e=this.endPixel_,r=this.element_.style;r.left=Math.min(t[0],e[0])+"px",r.top=Math.min(t[1],e[1])+"px",r.width=Math.abs(e[0]-t[0])+"px",r.height=Math.abs(e[1]-t[1])+"px"},e.prototype.setMap=function(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},e.prototype.setPixels=function(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()},e.prototype.createOrUpdateGeometry=function(){var t=this.startPixel_,e=this.endPixel_,r=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new sn([r])},e.prototype.getGeometry=function(){return this.geometry_},e}(b),Ea=(ya=function(t,e){return(ya=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ya(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Oa=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.coordinate=r,i.mapBrowserEvent=n,i}return Ea(e,t),e}(j),Ma=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.box_=new Sa(n.className||"ol-dragbox"),r.minArea_=void 0!==n.minArea?n.minArea:64,r.onBoxEnd_=n.onBoxEnd?n.onBoxEnd:R,r.startPixel_=null,r.condition_=n.condition?n.condition:ea,r.boxEndCondition_=n.boxEndCondition?n.boxEndCondition:r.defaultBoxEndCondition,r}return Ea(e,t),e.prototype.defaultBoxEndCondition=function(t,e,r){var n=r[0]-e[0],i=r[1]-e[1];return n*n+i*i>=this.minArea_},e.prototype.getGeometry=function(){return this.box_.getGeometry()},e.prototype.handleDragEvent=function(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Oa("boxdrag",t.coordinate,t))},e.prototype.handleUpEvent=function(t){return this.box_.setMap(null),this.boxEndCondition_(t,this.startPixel_,t.pixel)&&(this.onBoxEnd_(t),this.dispatchEvent(new Oa("boxend",t.coordinate,t))),!1},e.prototype.handleDownEvent=function(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Oa("boxstart",t.coordinate,t)),!0)},e}(fa),Pa=(ga=function(t,e){return(ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ga(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Ta(){var t,e=this.getMap(),r=e.getView(),n=e.getSize(),i=this.getGeometry().getExtent();if(this.out_){var o=r.calculateExtentInternal(n),a=(t=[e.getPixelFromCoordinateInternal(At(i)),e.getPixelFromCoordinateInternal(Bt(i))],function(t,e){for(var r=0,n=e.length;r<n;++r)Tt(t,e[r]);return t}(St(void 0),t));Vt(o,1/r.getResolutionForExtentInternal(a,n)),i=o}var s=r.getConstrainedResolution(r.getResolutionForExtentInternal(i,n)),u=r.getConstrainedCenter(Ft(i),s);r.animateInternal({resolution:s,center:u,duration:this.duration_,easing:Ai})}var Ca,Ia=function(t){function e(e){var r=this,n=e||{},i=n.condition?n.condition:oa;return(r=t.call(this,{condition:i,className:n.className||"ol-dragzoom",minArea:n.minArea,onBoxEnd:Ta})||this).duration_=void 0!==n.duration?n.duration:200,r.out_=void 0!==n.out&&n.out,r}return Pa(e,t),e}(Ma),Ra=(Ca=function(t,e){return(Ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ca(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function La(t){var e=!1;if(t.type==Y){var r=t.originalEvent.keyCode;if(this.condition_(t)&&(40==r||37==r||39==r||38==r)){var n=t.map.getView(),i=n.getResolution()*this.pixelDelta_,o=0,a=0;40==r?a=-i:37==r?o=-i:39==r?o=i:a=i;var s=[o,a];Oi(s,n.getRotation()),function(t,e,r){var n=t.getCenterInternal();if(n){var i=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==r?r:250,easing:Fi,center:t.getConstrainedCenter(i)})}}(n,s,this.duration_),t.preventDefault(),e=!0}}return!e}var Aa,ka=function(t){function e(e){var r=t.call(this,{handleEvent:La})||this,n=e||{};return r.defaultCondition_=function(t){return ia(t)&&aa(t)},r.condition_=void 0!==n.condition?n.condition:r.defaultCondition_,r.duration_=void 0!==n.duration?n.duration:100,r.pixelDelta_=void 0!==n.pixelDelta?n.pixelDelta:128,r}return Ra(e,t),e}(Xo),Fa=(Aa=function(t,e){return(Aa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Aa(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function ja(t){var e=!1;if(t.type==Y||t.type==V){var r=t.originalEvent.charCode;if(this.condition_(t)&&(r=="+".charCodeAt(0)||r=="-".charCodeAt(0))){var n=t.map,i=r=="+".charCodeAt(0)?this.delta_:-this.delta_;Yo(n.getView(),i,void 0,this.duration_),t.preventDefault(),e=!0}}return!e}var Na,Da,za,Ga=function(t){function e(e){var r=t.call(this,{handleEvent:ja})||this,n=e||{};return r.condition_=n.condition?n.condition:aa,r.delta_=n.delta?n.delta:1,r.duration_=void 0!==n.duration?n.duration:100,r}return Fa(e,t),e}(Xo),Ba=(za=function(t,e){return(za=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}za(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ua="trackpad",Wa=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).totalDelta_=0,r.lastDelta_=0,r.maxDelta_=void 0!==n.maxDelta?n.maxDelta:1,r.duration_=void 0!==n.duration?n.duration:250,r.timeout_=void 0!==n.timeout?n.timeout:80,r.useAnchor_=void 0===n.useAnchor||n.useAnchor,r.condition_=n.condition?n.condition:ta,r.lastAnchor_=null,r.startTime_=void 0,r.timeoutId_,r.mode_=void 0,r.trackpadEventGap_=400,r.trackpadTimeoutId_,r.deltaPerZoom_=300,r}return Ba(e,t),e.prototype.conditionInternal_=function(t){var e=!0;return t.map.getTargetElement().hasAttribute("tabindex")&&(e=$o(t)),e&&this.condition_(t)},e.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},e.prototype.handleEvent=function(t){if(!this.conditionInternal_(t))return!0;if(t.type!==K)return!0;t.preventDefault();var e,r=t.map,n=t.originalEvent;if(this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==K&&(e=n.deltaY,jn&&n.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(e/=zn),n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(e*=40)),0===e)return!1;this.lastDelta_=e;var i=Date.now();void 0===this.startTime_&&(this.startTime_=i),(!this.mode_||i-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(e)<4?Ua:"wheel");var o=r.getView();if(this.mode_===Ua&&!o.getConstrainResolution())return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-e/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=i,!1;this.totalDelta_+=e;var a=Math.max(this.timeout_-(i-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,r),a),!1},e.prototype.handleWheelZoom_=function(t){var e=t.getView();e.getAnimating()&&e.cancelAnimations();var r=-re(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;e.getConstrainResolution()&&(r=r?r>0?1:-1:0),Yo(e,r,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},e.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},e}(Xo),Ya=(Da=function(t,e){return(Da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Da(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Va=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=I),(r=t.call(this,i)||this).anchor_=null,r.lastAngle_=void 0,r.rotating_=!1,r.rotationDelta_=0,r.threshold_=void 0!==n.threshold?n.threshold:.3,r.duration_=void 0!==n.duration?n.duration:250,r}return Ya(e,t),e.prototype.handleDragEvent=function(t){var e=0,r=this.targetPointers[0],n=this.targetPointers[1],i=Math.atan2(n.clientY-r.clientY,n.clientX-r.clientX);if(void 0!==this.lastAngle_){var o=i-this.lastAngle_;this.rotationDelta_+=o,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=o}this.lastAngle_=i;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==pi){var u=a.getViewport().getBoundingClientRect(),l=ca(this.targetPointers);l[0]-=u.left,l[1]-=u.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(e,this.anchor_))}},e.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2&&(t.map.getView().endInteraction(this.duration_),1))},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(fa),Xa=(Na=function(t,e){return(Na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Na(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Za=function(t){function e(e){var r=this,n=e||{},i=n;return i.stopDown||(i.stopDown=I),(r=t.call(this,i)||this).anchor_=null,r.duration_=void 0!==n.duration?n.duration:400,r.lastDistance_=void 0,r.lastScaleDelta_=1,r}return Xa(e,t),e.prototype.handleDragEvent=function(t){var e=1,r=this.targetPointers[0],n=this.targetPointers[1],i=r.clientX-n.clientX,o=r.clientY-n.clientY,a=Math.sqrt(i*i+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;var s=t.map,u=s.getView();1!=e&&(this.lastScaleDelta_=e);var l=s.getViewport().getBoundingClientRect(),c=ca(this.targetPointers);c[0]-=l.left,c[1]-=l.top,this.anchor_=s.getCoordinateFromPixelInternal(c),s.render(),u.adjustResolutionInternal(e,this.anchor_)},e.prototype.handleUpEvent=function(t){if(this.targetPointers.length<2){var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),!1}return!0},e.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1},e}(fa);function qa(t){var e=t||{},r=new st,n=new In(-.005,.05,100);return(void 0===e.altShiftDragRotate||e.altShiftDragRotate)&&r.push(new wa),(void 0===e.doubleClickZoom||e.doubleClickZoom)&&r.push(new Ho({delta:e.zoomDelta,duration:e.zoomDuration})),(void 0===e.dragPan||e.dragPan)&&r.push(new ma({condition:e.onFocusOnly?$o:void 0,kinetic:n})),(void 0===e.pinchRotate||e.pinchRotate)&&r.push(new Va),(void 0===e.pinchZoom||e.pinchZoom)&&r.push(new Za({duration:e.zoomDuration})),(void 0===e.keyboard||e.keyboard)&&(r.push(new ka),r.push(new Ga({delta:e.zoomDelta,duration:e.zoomDuration}))),(void 0===e.mouseWheelZoom||e.mouseWheelZoom)&&r.push(new Wa({condition:e.onFocusOnly?$o:void 0,duration:e.zoomDuration})),(void 0===e.shiftDragZoom||e.shiftDragZoom)&&r.push(new Ia({duration:e.zoomDuration})),r}var Ka,Ha=(Ka=function(t,e){return(Ka=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ka(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ja=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.inversePixelTransform=r,o.frameState=n,o.context=i,o}return Ha(e,t),e}(j),Qa=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,$a=/^([a-z]*)$|^hsla?\(.*\)$/i;function ts(t){return"string"==typeof t?t:as(t)}var es,rs,ns=(es={},rs=0,function(t){var e;if(es.hasOwnProperty(t))e=es[t];else{if(rs>=1024){var r=0;for(var n in es)0==(3&r++)&&(delete es[n],--rs)}e=function(t){var e,r,n,i,o;if($a.exec(t)&&(t=function(t){var e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);var r=getComputedStyle(e).color;return document.body.removeChild(e),r}return""}(t)),Qa.exec(t)){var a,s=t.length-1;a=s<=4?1:2;var u=4===s||8===s;e=parseInt(t.substr(1+0*a,a),16),r=parseInt(t.substr(1+1*a,a),16),n=parseInt(t.substr(1+2*a,a),16),i=u?parseInt(t.substr(1+3*a,a),16):255,1==a&&(e=(e<<4)+e,r=(r<<4)+r,n=(n<<4)+n,u&&(i=(i<<4)+i)),o=[e,r,n,i/255]}else 0==t.indexOf("rgba(")?os(o=t.slice(5,-1).split(",").map(Number)):0==t.indexOf("rgb(")?((o=t.slice(4,-1).split(",").map(Number)).push(1),os(o)):ut(!1,14);return o}(t),es[t]=e,++rs}return e});function is(t){return Array.isArray(t)?t:ns(t)}function os(t){return t[0]=re(t[0]+.5|0,0,255),t[1]=re(t[1]+.5|0,0,255),t[2]=re(t[2]+.5|0,0,255),t[3]=re(t[3],0,1),t}function as(t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var r=t[1];r!=(0|r)&&(r=r+.5|0);var n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+r+","+n+","+(void 0===t[3]?1:t[3])+")"}function ss(t,e,r){return e+":"+t+":"+(r?ts(r):"null")}var us=new(function(){function t(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return t.prototype.clear=function(){this.cache_={},this.cacheSize_=0},t.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},t.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var e in this.cache_){var r=this.cache_[e];0!=(3&t++)||r.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}},t.prototype.get=function(t,e,r){var n=ss(t,e,r);return n in this.cache_?this.cache_[n]:null},t.prototype.set=function(t,e,r,n){var i=ss(t,e,r);this.cache_[i]=n,++this.cacheSize_},t.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},t}());function ls(t){return Array.isArray(t)?as(t):t}var cs=function(){function t(){}return t.prototype.drawCustom=function(t,e,r){},t.prototype.drawGeometry=function(t){},t.prototype.setStyle=function(t){},t.prototype.drawCircle=function(t,e){},t.prototype.drawFeature=function(t,e){},t.prototype.drawGeometryCollection=function(t,e){},t.prototype.drawLineString=function(t,e){},t.prototype.drawMultiLineString=function(t,e){},t.prototype.drawMultiPoint=function(t,e){},t.prototype.drawMultiPolygon=function(t,e){},t.prototype.drawPoint=function(t,e){},t.prototype.drawPolygon=function(t,e){},t.prototype.drawText=function(t,e){},t.prototype.setFillStrokeStyle=function(t,e){},t.prototype.setImageStyle=function(t,e){},t.prototype.setTextStyle=function(t,e){},t}(),hs=[],fs=[0,0,0,0],ps=new it,ds=new D;ds.setSize=function(){console.warn("labelCache is deprecated.")};var gs,ys,_s,vs=null,ms={},bs=function(){var t,e,r=["monospace","serif"],n=r.length,i="wmytzilWMYTZIL@#/&?$%10";function o(t,o,a){for(var s=!0,u=0;u<n;++u){var l=r[u];if(e=Ss(t+" "+o+" 32px "+l,i),a!=l){var c=Ss(t+" "+o+" 32px "+a+","+l,i);s=s&&c!=e}}return!!s}function a(){for(var e=!0,r=ps.getKeys(),n=0,i=r.length;n<i;++n){var a=r[n];ps.get(a)<100&&(o.apply(this,a.split("\n"))?(d(ms),vs=null,gs=void 0,ps.set(a,100)):(ps.set(a,ps.get(a)+1,!0),e=!1))}e&&(clearInterval(t),t=void 0)}return function(e){var r=Oo(e);if(r)for(var n=r.families,i=0,s=n.length;i<s;++i){var u=n[i],l=r.style+"\n"+r.weight+"\n"+u;void 0===ps.get(l)&&(ps.set(l,100,!0),o(r.style,r.weight,u)||(ps.set(l,0,!0),void 0===t&&(t=setInterval(a,32))))}}}(),ws=(_s=ms,function(t){var e=_s[t];if(null==e)if(Gn){var r=Oo(t),n=xs(t,"Žg"),i=isNaN(Number(r.lineHeight))?1.2:Number(r.lineHeight);ms[t]=i*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else ys||((ys=document.createElement("div")).innerHTML="M",ys.style.margin="0 !important",ys.style.padding="0 !important",ys.style.position="absolute !important",ys.style.left="-99999px !important"),ys.style.font=t,document.body.appendChild(ys),e=ys.offsetHeight,_s[t]=e,document.body.removeChild(ys);return e});function xs(t,e){return vs||(vs=Bi(1,1)),t!=gs&&(vs.font=t,gs=vs.font),vs.measureText(e)}function Ss(t,e){return xs(t,e).width}function Es(t,e,r){if(e in r)return r[e];var n=Ss(t,e);return r[e]=n,n}function Os(t,e,r,n){0!==e&&(t.translate(r,n),t.rotate(e),t.translate(-r,-n))}function Ms(t,e,r,n,i,o,a,s,u,l,c){t.save(),1!==r&&(t.globalAlpha*=r),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(u,l),t.scale(c,c),function(t,e){for(var r=t.contextInstructions,n=0,i=r.length;n<i;n+=2)Array.isArray(r[n+1])?e[r[n]].apply(e,r[n+1]):e[r[n]]=r[n+1]}(n,t)):t.drawImage(n,i,o,a,s,u,l,a*c,s*c),t.restore()}var Ps=null;function Ts(t){return Gn?fr(t):(Ps||(Ps=Bi(1,1).canvas),Ps.style.transform=fr(t),Ps.style.transform)}var Cs,Is=(Cs=function(t,e){return(Cs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Cs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Rs=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this)||this;return u.context_=e,u.pixelRatio_=r,u.extent_=n,u.transform_=i,u.viewRotation_=o,u.squaredTolerance_=a,u.userTransform_=s,u.contextFillState_=null,u.contextStrokeState_=null,u.contextTextState_=null,u.fillState_=null,u.strokeState_=null,u.image_=null,u.imageAnchorX_=0,u.imageAnchorY_=0,u.imageHeight_=0,u.imageOpacity_=0,u.imageOriginX_=0,u.imageOriginY_=0,u.imageRotateWithView_=!1,u.imageRotation_=0,u.imageScale_=0,u.imageWidth_=0,u.text_="",u.textOffsetX_=0,u.textOffsetY_=0,u.textRotateWithView_=!1,u.textRotation_=0,u.textScale_=0,u.textFillState_=null,u.textStrokeState_=null,u.textState_=null,u.pixelCoordinates_=[],u.tmpLocalTransform_=[1,0,0,1,0,0],u}return Is(e,t),e.prototype.drawImages_=function(t,e,r,n){if(this.image_){var i=$t(t,e,r,2,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,s=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=s*this.imageOpacity_);var u=this.imageRotation_;this.imageRotateWithView_&&(u+=this.viewRotation_);for(var l=0,c=i.length;l<c;l+=2){var h=i[l]-this.imageAnchorX_,f=i[l+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_){var p=h+this.imageAnchorX_,d=f+this.imageAnchorY_;cr(a,p,d,this.imageScale_,this.imageScale_,u,-p,-d),o.setTransform.apply(o,a)}o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}0===u&&1==this.imageScale_||o.setTransform(1,0,0,1,0,0),1!=this.imageOpacity_&&(o.globalAlpha=s)}},e.prototype.drawText_=function(t,e,r,n){if(this.textState_&&""!==this.text_){this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);var i=$t(t,e,r,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.textRotation_;for(this.textRotateWithView_&&(a+=this.viewRotation_);e<r;e+=n){var s=i[e]+this.textOffsetX_,u=i[e+1]+this.textOffsetY_;if(0!==a||1!=this.textScale_){var l=cr(this.tmpLocalTransform_,s,u,this.textScale_,this.textScale_,a,-s,-u);o.setTransform.apply(o,l)}this.textStrokeState_&&o.strokeText(this.text_,s,u),this.textFillState_&&o.fillText(this.text_,s,u)}0===a&&1==this.textScale_||o.setTransform(1,0,0,1,0,0)}},e.prototype.moveToLineTo_=function(t,e,r,n,i){var o=this.context_,a=$t(t,e,r,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);var s=a.length;i&&(s-=2);for(var u=2;u<s;u+=2)o.lineTo(a[u],a[u+1]);return i&&o.closePath(),r},e.prototype.drawRings_=function(t,e,r,n){for(var i=0,o=r.length;i<o;++i)e=this.moveToLineTo_(t,e,r[i],n,!0);return e},e.prototype.drawCircle=function(t){if(Wt(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=function(t,e,r){var n=t.getFlatCoordinates();if(n){var i=t.getStride();return $t(n,0,n.length,i,e,r)}return null}(t,this.transform_,this.pixelCoordinates_),r=e[2]-e[0],n=e[3]-e[1],i=Math.sqrt(r*r+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],i,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}},e.prototype.setStyle=function(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())},e.prototype.setTransform=function(t){this.transform_=t},e.prototype.drawGeometry=function(t){switch(t.getType()){case Qt.POINT:this.drawPoint(t);break;case Qt.LINE_STRING:this.drawLineString(t);break;case Qt.POLYGON:this.drawPolygon(t);break;case Qt.MULTI_POINT:this.drawMultiPoint(t);break;case Qt.MULTI_LINE_STRING:this.drawMultiLineString(t);break;case Qt.MULTI_POLYGON:this.drawMultiPolygon(t);break;case Qt.GEOMETRY_COLLECTION:this.drawGeometryCollection(t);break;case Qt.CIRCLE:this.drawCircle(t)}},e.prototype.drawFeature=function(t,e){var r=e.getGeometryFunction()(t);r&&Wt(this.extent_,r.getExtent())&&(this.setStyle(e),this.drawGeometry(r))},e.prototype.drawGeometryCollection=function(t){for(var e=t.getGeometriesArray(),r=0,n=e.length;r<n;++r)this.drawGeometry(e[r])},e.prototype.drawPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawMultiPoint=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getFlatCoordinates(),r=t.getStride();this.image_&&this.drawImages_(e,0,e.length,r),""!==this.text_&&this.drawText_(e,0,e.length,r)},e.prototype.drawLineString=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Wt(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(r,0,r.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){var n=t.getFlatMidpoint();this.drawText_(n,0,2,2)}}},e.prototype.drawMultiLineString=function(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));var e=t.getExtent();if(Wt(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);var r=this.context_,n=t.getFlatCoordinates(),i=0,o=t.getEnds(),a=t.getStride();r.beginPath();for(var s=0,u=o.length;s<u;++s)i=this.moveToLineTo_(n,i,o[s],a,!1);r.stroke()}if(""!==this.text_){var l=t.getFlatMidpoints();this.drawText_(l,0,l.length,2)}}},e.prototype.drawPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Wt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var r=t.getFlatInteriorPoint();this.drawText_(r,0,2,2)}}},e.prototype.drawMultiPolygon=function(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),Wt(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);var e=this.context_,r=t.getOrientedFlatCoordinates(),n=0,i=t.getEndss(),o=t.getStride();e.beginPath();for(var a=0,s=i.length;a<s;++a){var u=i[a];n=this.drawRings_(r,n,u,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){var l=t.getFlatInteriorPoints();this.drawText_(l,0,l.length,2)}}},e.prototype.setContextFillState_=function(t){var e=this.context_,r=this.contextFillState_;r?r.fillStyle!=t.fillStyle&&(r.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})},e.prototype.setContextStrokeState_=function(t){var e=this.context_,r=this.contextStrokeState_;r?(r.lineCap!=t.lineCap&&(r.lineCap=t.lineCap,e.lineCap=t.lineCap),e.setLineDash&&(P(r.lineDash,t.lineDash)||e.setLineDash(r.lineDash=t.lineDash),r.lineDashOffset!=t.lineDashOffset&&(r.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset)),r.lineJoin!=t.lineJoin&&(r.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),r.lineWidth!=t.lineWidth&&(r.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),r.miterLimit!=t.miterLimit&&(r.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),r.strokeStyle!=t.strokeStyle&&(r.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})},e.prototype.setContextTextState_=function(t){var e=this.context_,r=this.contextTextState_,n=t.textAlign?t.textAlign:"center";r?(r.font!=t.font&&(r.font=t.font,e.font=t.font),r.textAlign!=n&&(r.textAlign=n,e.textAlign=n),r.textBaseline!=t.textBaseline&&(r.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})},e.prototype.setFillStrokeStyle=function(t,e){if(t){var r=t.getColor();this.fillState_={fillStyle:ls(r||"#000")}}else this.fillState_=null;if(e){var n=e.getColor(),i=e.getLineCap(),o=e.getLineDash(),a=e.getLineDashOffset(),s=e.getLineJoin(),u=e.getWidth(),l=e.getMiterLimit();this.strokeState_={lineCap:void 0!==i?i:"round",lineDash:o||hs,lineDashOffset:a||0,lineJoin:void 0!==s?s:"round",lineWidth:this.pixelRatio_*(void 0!==u?u:1),miterLimit:void 0!==l?l:10,strokeStyle:ls(n||"#000")}}else this.strokeState_=null},e.prototype.setImageStyle=function(t){if(t){var e=t.getAnchor(),r=t.getImage(1),n=t.getOrigin(),i=t.getSize();this.imageAnchorX_=e[0],this.imageAnchorY_=e[1],this.imageHeight_=i[1],this.image_=r,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=n[0],this.imageOriginY_=n[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation(),this.imageScale_=t.getScale()*this.pixelRatio_,this.imageWidth_=i[0]}else this.image_=null},e.prototype.setTextStyle=function(t){if(t){var e=t.getFill();if(e){var r=e.getColor();this.textFillState_={fillStyle:ls(r||"#000")}}else this.textFillState_=null;var n=t.getStroke();if(n){var i=n.getColor(),o=n.getLineCap(),a=n.getLineDash(),s=n.getLineDashOffset(),u=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==o?o:"round",lineDash:a||hs,lineDashOffset:s||0,lineJoin:void 0!==u?u:"round",lineWidth:void 0!==l?l:1,miterLimit:void 0!==c?c:10,strokeStyle:ls(i||"#000")}}else this.textStrokeState_=null;var h=t.getFont(),f=t.getOffsetX(),p=t.getOffsetY(),d=t.getRotateWithView(),g=t.getRotation(),y=t.getScale(),_=t.getText(),v=t.getTextAlign(),m=t.getTextBaseline();this.textState_={font:void 0!==h?h:"10px sans-serif",textAlign:void 0!==v?v:"center",textBaseline:void 0!==m?m:"middle"},this.text_=void 0!==_?_:"",this.textOffsetX_=void 0!==f?this.pixelRatio_*f:0,this.textOffsetY_=void 0!==p?this.pixelRatio_*p:0,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0!==g?g:0,this.textScale_=this.pixelRatio_*(void 0!==y?y:1)}else this.text_=""},e}(cs),Ls="Circle",As="Default",ks="Image",Fs="LineString",js="Polygon",Ns="Text",Ds={Point:function(t,e,r,n){var i=r.getImage();if(i){if(2!=i.getImageState())return;var o=t.getBuilder(r.getZIndex(),ks);o.setImageStyle(i,t.addDeclutter(!1)),o.drawPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Ns);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},LineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Fs);o.setFillStrokeStyle(null,i),o.drawLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Ns);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},Polygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),js);a.setFillStrokeStyle(i,o),a.drawPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Ns);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},MultiPoint:function(t,e,r,n){var i=r.getImage();if(i){if(2!=i.getImageState())return;var o=t.getBuilder(r.getZIndex(),ks);o.setImageStyle(i,t.addDeclutter(!1)),o.drawMultiPoint(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Ns);s.setTextStyle(a,t.addDeclutter(!!i)),s.drawText(e,n)}},MultiLineString:function(t,e,r,n){var i=r.getStroke();if(i){var o=t.getBuilder(r.getZIndex(),Fs);o.setFillStrokeStyle(null,i),o.drawMultiLineString(e,n)}var a=r.getText();if(a){var s=t.getBuilder(r.getZIndex(),Ns);s.setTextStyle(a,t.addDeclutter(!1)),s.drawText(e,n)}},MultiPolygon:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(o||i){var a=t.getBuilder(r.getZIndex(),js);a.setFillStrokeStyle(i,o),a.drawMultiPolygon(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Ns);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}},GeometryCollection:function(t,e,r,n){var i,o,a=e.getGeometriesArray();for(i=0,o=a.length;i<o;++i)(0,Ds[a[i].getType()])(t,a[i],r,n)},Circle:function(t,e,r,n){var i=r.getFill(),o=r.getStroke();if(i||o){var a=t.getBuilder(r.getZIndex(),Ls);a.setFillStrokeStyle(i,o),a.drawCircle(e,n)}var s=r.getText();if(s){var u=t.getBuilder(r.getZIndex(),Ns);u.setTextStyle(s,t.addDeclutter(!1)),u.drawText(e,n)}}};function zs(t,e){return parseInt(o(t),10)-parseInt(o(e),10)}function Gs(t,e){var r=Bs(t,e);return r*r}function Bs(t,e){return.5*t/e}function Us(t,e,r,n,i,o){var a=!1,s=r.getImage();if(s){var u=s.getImageState();2==u||3==u?s.unlistenImageChange(i):(0==u&&s.load(),u=s.getImageState(),s.listenImageChange(i),a=!0)}return function(t,e,r,n,i){var o=r.getGeometryFunction()(e);if(o){var a=o.simplifyTransformed(n,i);r.getRenderer()?function t(e,r,n,i){if(r.getType()!=Qt.GEOMETRY_COLLECTION)e.getBuilder(n.getZIndex(),As).drawCustom(r,i,n.getRenderer());else for(var o=r.getGeometries(),a=0,s=o.length;a<s;++a)t(e,o[a],n,i)}(t,a,r,e):(0,Ds[a.getType()])(t,a,r,e)}}(t,e,r,n,o),a}function Ws(t){var e,r=t.frameState,n=ar(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),i=Gs(r.viewState.resolution,r.pixelRatio),o=$e();return o&&(e=Ve(o,r.viewState.projection)),new Rs(t.context,r.pixelRatio,r.extent,n,r.viewState.rotation,i,e)}function Ys(t,e){e&&e.clear();for(var r=t.declutterItems,n=r.length-1;n>=0;--n)for(var i=r[n],o=i.items,a=0,s=o.length;a<s;a+=3)e=o[a].renderDeclutter(o[a+1],o[a+2],i.opacity,e);return r.length=0,e}var Vs,Xs=(Vs=function(t,e){return(Vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Vs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Zs(t,e){us.expire()}var qs,Ks,Hs,Js=function(t){function e(e){var r=t.call(this)||this;return r.map_=e,r.declutterTree_=null,r}return Xs(e,t),e.prototype.dispatchRenderEvent=function(t,e){n()},e.prototype.calculateMatrices2D=function(t){var e=t.viewState,r=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;cr(r,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),hr(n,r)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o,a,s){var u,l=e.viewState;function c(t,e,r){return i.call(o,e,t?r:null)}var h=l.projection,f=Ri(t.slice(),h),p=[[0,0]];if(h.canWrapX()&&n){var d=Ut(h.getExtent());p.push([-d,0],[d,0])}var g,y=e.layerStatesArray,_=y.length;this.declutterTree_&&(g=this.declutterTree_.all().map((function(t){return t.value})));for(var v=[],m=0;m<p.length;m++)for(var b=_-1;b>=0;--b){var w=y[b],x=w.layer;if(x.hasRenderer()&&Po(w,l)&&a.call(s,x)){var S=x.getRenderer(),E=x.getSource();if(S&&E){var O=E.getWrapX()?f:t,M=c.bind(null,w.managed);v[0]=O[0]+p[m][0],v[1]=O[1]+p[m][1],u=S.forEachFeatureAtCoordinate(v,e,r,M,g)}if(u)return u}}},e.prototype.forEachLayerAtPixel=function(t,e,r,i,o){return n()},e.prototype.hasFeatureAtCoordinate=function(t,e,r,n,i,o){return void 0!==this.forEachFeatureAtCoordinate(t,e,r,n,C,this,i,o)},e.prototype.getMap=function(){return this.map_},e.prototype.renderFrame=function(t){this.declutterTree_=Ys(t,this.declutterTree_)},e.prototype.scheduleExpireIconCache=function(t){us.canExpireCache()&&t.postRenderFunctions.push(Zs)},e}(b),Qs=(Hs=function(t,e){return(Hs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Hs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),$s=function(t){function e(e){var r=t.call(this,e)||this;r.fontChangeListenerKey_=_(ps,f,e.redrawText.bind(e)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className="ol-unselectable ol-layers";var i=e.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return Qs(e,t),e.prototype.dispatchRenderEvent=function(t,e){var r=this.getMap();if(r.hasListener(t)){var n=new Ja(t,void 0,e);r.dispatchEvent(n)}},e.prototype.disposeInternal=function(){m(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),t.prototype.disposeInternal.call(this)},e.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(ni,e);var r=e.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=e.viewState;this.children_.length=0;for(var i=null,o=0,a=r.length;o<a;++o){var s=r[o];if(e.layerIndex=o,Po(s,n)&&(s.sourceState==so||s.sourceState==oo)){var u=s.layer.render(e,i);u&&u!==i&&(this.children_.push(u),i=u)}}t.prototype.renderFrame.call(this,e),function(t,e){for(var r=t.childNodes,n=0;;++n){var i=r[n],o=e[n];if(!i&&!o)break;i!==o&&(i?o?t.insertBefore(o,i):(t.removeChild(i),--n):t.appendChild(o))}}(this.element_,this.children_),this.dispatchRenderEvent("postcompose",e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},e.prototype.forEachLayerAtPixel=function(t,e,r,n,i){for(var o=e.viewState,a=e.layerStatesArray,s=a.length-1;s>=0;--s){var u=a[s],l=u.layer;if(l.hasRenderer()&&Po(u,o)&&i(l)){var c=l.getRenderer().getDataAtPixel(t,e,r);if(c){var h=n(l,c);if(h)return h}}}},e}(Js),tu=(Ks=function(t,e){return(Ks=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ks(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),eu=function(t){function e(e){return(e=p({},e)).controls||(e.controls=Go()),e.interactions||(e.interactions=qa()),t.call(this,e)||this}return tu(e,t),e.prototype.createRenderer=function(){return new $s(this)},e}(bo),ru="bottom-center",nu="bottom-right",iu="center-center",ou="center-right",au=(qs=function(t,e){return(qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}qs(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),su="element",uu="offset",lu="position",cu="positioning",hu=function(t){function e(e){var r=t.call(this)||this;r.options=e,r.id=e.id,r.insertFirst=void 0===e.insertFirst||e.insertFirst,r.stopEvent=void 0===e.stopEvent||e.stopEvent,r.element=document.createElement("div"),r.element.className=void 0!==e.className?e.className:"ol-overlay-container ol-selectable",r.element.style.position="absolute";var n=e.autoPan;return n&&"object"!=a(n)&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),r.autoPan=n||!1,r.rendered={transform_:"",visible:!0},r.mapPostrenderListenerKey=null,r.addEventListener(rt(su),r.handleElementChanged),r.addEventListener(rt("map"),r.handleMapChanged),r.addEventListener(rt(uu),r.handleOffsetChanged),r.addEventListener(rt(lu),r.handlePositionChanged),r.addEventListener(rt(cu),r.handlePositioningChanged),void 0!==e.element&&r.setElement(e.element),r.setOffset(void 0!==e.offset?e.offset:[0,0]),r.setPositioning(void 0!==e.positioning?e.positioning:"top-left"),void 0!==e.position&&r.setPosition(e.position),r}return au(e,t),e.prototype.getElement=function(){return this.get(su)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get("map")},e.prototype.getOffset=function(){return this.get(uu)},e.prototype.getPosition=function(){return this.get(lu)},e.prototype.getPositioning=function(){return this.get(cu)},e.prototype.handleElementChanged=function(){Xi(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Vi(this.element),m(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=_(t,Jn,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(su,t)},e.prototype.setMap=function(t){this.set("map",t)},e.prototype.setOffset=function(t){this.set(uu,t)},e.prototype.setPosition=function(t){this.set(lu,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(lu)){var r=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),i=this.getRect(n,[Ui(n),Wi(n)]),o=void 0===t.margin?20:t.margin;if(!vt(r,i)){var a=i[0]-r[0],s=r[2]-i[2],u=i[1]-r[1],l=r[3]-i[3],c=[0,0];if(a<0?c[0]=a-o:s<0&&(c[0]=Math.abs(s)+o),u<0?c[1]=u-o:l<0&&(c[1]=Math.abs(l)+o),0!==c[0]||0!==c[1]){var h=e.getView().getCenterInternal(),f=e.getPixelFromCoordinateInternal(h),p=[f[0]+c[0],f[1]+c[1]],d=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(p),duration:d.duration,easing:d.easing})}}}},e.prototype.getRect=function(t,e){var r=t.getBoundingClientRect(),n=r.left+window.pageXOffset,i=r.top+window.pageYOffset;return[n,i,n+e[0],i+e[1]]},e.prototype.setPositioning=function(t){this.set(cu,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var r=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(r,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var r=this.element.style,n=this.getOffset(),i=this.getPositioning();this.setVisible(!0);var o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",s="0%",u="0%";i==nu||i==ou||"top-right"==i?s="-100%":i!=ru&&i!=iu&&"top-center"!=i||(s="-50%"),"bottom-left"==i||i==ru||i==nu?u="-100%":"center-left"!=i&&i!=iu&&i!=ou||(u="-50%");var l="translate("+s+", "+u+") translate("+o+", "+a+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,r.transform=l,r.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(it),fu="arraybuffer",pu=!1;function du(t,e,r,n){return function(i,o,a){var s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(i,o,a):t,!0),e.getType()==fu&&(s.responseType="arraybuffer"),s.withCredentials=pu,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){var o=e.getType(),u=void 0;"json"==o||"text"==o?u=s.responseText:"xml"==o?(u=s.responseXML)||(u=(new DOMParser).parseFromString(s.responseText,"application/xml")):o==fu&&(u=s.response),u?r.call(this,e.readFeatures(u,{extent:i,featureProjection:a}),e.readProjection(u)):n.call(this)}else n.call(this)}.bind(this),s.onerror=function(){n.call(this)}.bind(this),s.send()}}function gu(t,e){return du(t,e,(function(t,e){"function"==typeof this.addFeatures&&this.addFeatures(t)}),R)}function yu(t,e){return[[-1/0,-1/0,1/0,1/0]]}var _u=function(){function t(t,e,r,n){this.minX=t,this.maxX=e,this.minY=r,this.maxY=n}return t.prototype.contains=function(t){return this.containsXY(t[1],t[2])},t.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},t.prototype.containsXY=function(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY},t.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},t.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},t.prototype.getHeight=function(){return this.maxY-this.minY+1},t.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},t.prototype.getWidth=function(){return this.maxX-this.minX+1},t.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},t}();function vu(t,e,r,n,i){return void 0!==i?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new _u(t,e,r,n)}var mu=_u;function bu(t,e,r,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}function wu(t,e,r){return t+"/"+e+"/"+r}function xu(t){return wu(t[0],t[1],t[2])}function Su(t){return t.split("/").map(Number)}function Eu(t){return(t[1]<<t[0])+t[2]}var Ou=[0,0,0],Mu=function(){function t(t){var e,r,n;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,ut((e=this.resolutions_,r=function(t,e){return e-t}||w,e.every((function(t,n){if(0===n)return!0;var i=r(e[n-1],t);return!(i>0||0===i)}))),17),!t.origins)for(var i=0,o=this.resolutions_.length-1;i<o;++i)if(n){if(this.resolutions_[i]/this.resolutions_[i+1]!==n){n=void 0;break}}else n=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,ut(this.origins_.length==this.resolutions_.length,20));var a=t.extent;void 0===a||this.origin_||this.origins_||(this.origin_=Gt(a)),ut(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,ut(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:256,ut(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==a?a:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){return new mu(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))}),this):a&&this.calculateTileRanges_(a)}return t.prototype.forEachTileCoord=function(t,e,r){for(var n=this.getTileRangeForExtentAndZ(t,e),i=n.minX,o=n.maxX;i<=o;++i)for(var a=n.minY,s=n.maxY;a<=s;++a)r([e,i,a])},t.prototype.forEachTileCoordParentTileRange=function(t,e,r,n){var i,o,a=null,s=t[0]-1;for(2===this.zoomFactor_?(i=t[1],o=t[2]):a=this.getTileCoordExtent(t,n);s>=this.minZoom;){if(e(s,2===this.zoomFactor_?vu(i=Math.floor(i/2),i,o=Math.floor(o/2),o,r):this.getTileRangeForExtentAndZ(a,s,r)))return!0;--s}return!1},t.prototype.getExtent=function(){return this.extent_},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.getMinZoom=function(){return this.minZoom},t.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},t.prototype.getResolution=function(t){return this.resolutions_[t]},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getTileCoordChildTileRange=function(t,e,r){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){var n=2*t[1],i=2*t[2];return vu(n,n+1,i,i+1,e)}var o=this.getTileCoordExtent(t,r);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null},t.prototype.getTileRangeExtent=function(t,e,r){var n=this.getOrigin(t),i=this.getResolution(t),o=go(this.getTileSize(t),this.tmpSize_),a=n[0]+e.minX*o[0]*i,s=n[0]+(e.maxX+1)*o[0]*i;return xt(a,n[1]+e.minY*o[1]*i,s,n[1]+(e.maxY+1)*o[1]*i,r)},t.prototype.getTileRangeForExtentAndZ=function(t,e,r){var n=Ou;this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,n);var i=n[1],o=n[2];return this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,n),vu(i,n[1],o,n[2],r)},t.prototype.getTileCoordCenter=function(t){var e=this.getOrigin(t[0]),r=this.getResolution(t[0]),n=go(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*r,e[1]-(t[2]+.5)*n[1]*r]},t.prototype.getTileCoordExtent=function(t,e){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=go(this.getTileSize(t[0]),this.tmpSize_),o=r[0]+t[1]*i[0]*n,a=r[1]-(t[2]+1)*i[1]*n;return xt(o,a,o+i[0]*n,a+i[1]*n,e)},t.prototype.getTileCoordForCoordAndResolution=function(t,e,r){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordForXYAndResolution_=function(t,e,r,n,i){var o=this.getZForResolution(r),a=r/this.getResolution(o),s=this.getOrigin(o),u=go(this.getTileSize(o),this.tmpSize_),l=n?.5:0,c=n?.5:0,h=Math.floor((t-s[0])/r+l),f=Math.floor((s[1]-e)/r+c),p=a*h/u[0],d=a*f/u[1];return n?(p=Math.ceil(p)-1,d=Math.ceil(d)-1):(p=Math.floor(p),d=Math.floor(d)),bu(o,p,d,i)},t.prototype.getTileCoordForXYAndZ_=function(t,e,r,n,i){var o=this.getOrigin(r),a=this.getResolution(r),s=go(this.getTileSize(r),this.tmpSize_),u=n?.5:0,l=n?.5:0,c=Math.floor((t-o[0])/a+u),h=Math.floor((o[1]-e)/a+l),f=c/s[0],p=h/s[1];return n?(f=Math.ceil(f)-1,p=Math.ceil(p)-1):(f=Math.floor(f),p=Math.floor(p)),bu(r,f,p,i)},t.prototype.getTileCoordForCoordAndZ=function(t,e,r){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,r)},t.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},t.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},t.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:null},t.prototype.getZForResolution=function(t,e){return re(S(this.resolutions_,t,e||0),this.minZoom,this.maxZoom)},t.prototype.calculateTileRanges_=function(t){for(var e=this.resolutions_.length,r=new Array(e),n=this.minZoom;n<e;++n)r[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=r},t}();function Pu(t){var e=t.getDefaultTileGrid();return e||(e=Iu(t),t.setDefaultTileGrid(e)),e}function Tu(t){var e=t||{},r=e.extent||De("EPSG:3857").getExtent(),n={extent:r,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:Cu(r,e.maxZoom,e.tileSize,e.maxResolution)};return new Mu(n)}function Cu(t,e,r,n){for(var i=void 0!==e?e:42,o=Dt(t),a=Ut(t),s=go(void 0!==r?r:256),u=n>0?n:Math.max(a/s[0],o/s[1]),l=i+1,c=new Array(l),h=0;h<l;++h)c[h]=u/Math.pow(2,h);return c}function Iu(t,e,r,n){return function(t,e,r,n){var i=void 0!==n?n:ft,o=Cu(t,e,r);return new Mu({extent:t,origin:jt(t,i),resolutions:o,tileSize:r})}(Ru(t),e,r,n)}function Ru(t){var e=(t=De(t)).getExtent();if(!e){var r=180*ge[ve.DEGREES]/t.getMetersPerUnit();e=xt(-r,-r,r,r)}return e}var Lu,Au=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function ku(t,e){for(var r=Au.length,n=0;n<r;++n)try{var i=t.getContext(Au[n],e);if(i)return i}catch(t){}return null}var Fu="http://www.w3.org/2001/XMLSchema-instance";function ju(t,e){return nl().createElementNS(t,e)}function Nu(t,e){return function t(e,r,n){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)r?n.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(e.nodeValue);else{var i=void 0;for(i=e.firstChild;i;i=i.nextSibling)t(i,r,n)}return n}(t,e,[]).join("")}function Du(t){return"documentElement"in t}function zu(t){return(new DOMParser).parseFromString(t,"application/xml")}function Gu(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&O(n[n.length-1],i)}}function Bu(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&n[n.length-1].push(i)}}function Uu(t,e){return function(r,n){var i=t.call(void 0!==e?e:this,r,n);void 0!==i&&(n[n.length-1]=i)}}function Wu(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);if(void 0!==o){var a=i[i.length-1],s=void 0!==e?e:n.localName,u=void 0;s in a?u=a[s]:(u=[],a[s]=u),u.push(o)}}}function Yu(t,e,r){return function(n,i){var o=t.call(void 0!==r?r:this,n,i);void 0!==o&&(i[i.length-1][void 0!==e?e:n.localName]=o)}}function Vu(t,e){return function(r,n,i){t.call(void 0!==e?e:this,r,n,i),i[i.length-1].node.appendChild(r)}}function Xu(t,e){var r,n;return function(e,i,o){if(void 0===r){r={};var a={};a[e.localName]=t,r[e.namespaceURI]=a,n=Zu(e.localName)}$u(r,n,i,o)}}function Zu(t,e){var r=t;return function(t,n,i){var o=n[n.length-1].node,a=r;return void 0===a&&(a=i),ju(void 0!==e?e:o.namespaceURI,a)}}var qu=Zu();function Ku(t,e){for(var r=e.length,n=new Array(r),i=0;i<r;++i)n[i]=t[e[i]];return n}function Hu(t,e,r){var n,i,o=void 0!==r?r:{};for(n=0,i=t.length;n<i;++n)o[t[n]]=e;return o}function Ju(t,e,r,n){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling){var o=t[i.namespaceURI];if(void 0!==o){var a=o[i.localName];void 0!==a&&a.call(n,i,r)}}}function Qu(t,e,r,n,i){return n.push(t),Ju(e,r,n,i),n.pop()}function $u(t,e,r,n,i,o){for(var a,s,u=(void 0!==i?i:r).length,l=0;l<u;++l)void 0!==(a=r[l])&&void 0!==(s=e.call(void 0!==o?o:this,a,n,void 0!==i?i[l]:void 0))&&t[s.namespaceURI][s.localName].call(o,s,a,n)}function tl(t,e,r,n,i,o,a){return i.push(t),$u(e,r,n,i,o,a),i.pop()}var el=void 0,rl=void 0;function nl(){return void 0===rl&&"undefined"!=typeof document&&(rl=document.implementation.createDocument("","",null)),rl}function il(t){switch(t){case 34962:return Float32Array;case 34963:return Uint32Array;default:return Float32Array}}var ol=function(){function t(t,e){this.array=null,this.type=t,ut(34962===t||34963===t,62),this.usage=void 0!==e?e:35044}return t.prototype.ofSize=function(t){this.array=new(il(this.type))(t)},t.prototype.fromArray=function(t){this.array=il(this.type).from(t)},t.prototype.fromArrayBuffer=function(t){this.array=new(il(this.type))(t)},t.prototype.getType=function(){return this.type},t.prototype.getArray=function(){return this.array},t.prototype.getUsage=function(){return this.usage},t.prototype.getSize=function(){return this.array?this.array.length:0},t}(),al="webglcontextlost",sl="webglcontextrestored";function ul(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}var ll,cl=function(){function t(t){this.gl_=t.webGlContext;var e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();var r=e.createShader(e.VERTEX_SHADER);e.shaderSource(r,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(r);var n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,r),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(r){this.uniforms_.push({value:t.uniforms[r],location:e.getUniformLocation(this.renderTargetProgram_,r)})}.bind(this))}return t.prototype.getGL=function(){return this.gl_},t.prototype.init=function(t){var e=this.getGL(),r=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,r[0],r[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==r[0]||this.renderTargetTextureSize_[1]!==r[1]){this.renderTargetTextureSize_=r;var n=e.RGBA,i=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,n,r[0],r[1],0,i,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}},t.prototype.apply=function(t,e){var r=this.getGL(),n=t.size;r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,n[0],n[1]),r.uniform1i(this.renderTargetTextureLocation_,0),this.applyUniforms(t),r.drawArrays(r.TRIANGLES,0,6)},t.prototype.getFrameBuffer=function(){return this.frameBuffer_},t.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=1;this.uniforms_.forEach((function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),e instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,e.width,e.height,0,r.UNSIGNED_BYTE,new Uint8Array(e.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e),r.uniform1i(i.location,n++);else if(Array.isArray(e))switch(e.length){case 2:return void r.uniform2f(i.location,e[0],e[1]);case 3:return void r.uniform3f(i.location,e[0],e[1],e[2]);case 4:return void r.uniform4f(i.location,e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(i.location,e)}))},t}(),hl=(ll=function(t,e){return(ll=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ll(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),fl={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};function pl(t){for(var e=0,r=0;r<t.length;r++){var n=t[r];e+=n.size*dl(n.type)}return e}function dl(t){switch(t){case fl.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case fl.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case fl.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case fl.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var gl,yl=function(t){function e(e){var r=t.call(this)||this,n=e||{};r.boundHandleWebGLContextLost_=r.handleWebGLContextLost.bind(r),r.boundHandleWebGLContextRestored_=r.handleWebGLContextRestored.bind(r),r.canvas_=document.createElement("canvas"),r.canvas_.style.position="absolute",r.canvas_.style.left="0",r.gl_=ku(r.canvas_);var i=r.getGL();if(r.bufferCache_={},r.currentProgram_=null,ut(x(function(){if(!Lu){var t=ku(document.createElement("canvas"));t&&(Lu=t.getSupportedExtensions())}return Lu}(),"OES_element_index_uint"),63),i.getExtension("OES_element_index_uint"),r.canvas_.addEventListener(al,r.boundHandleWebGLContextLost_),r.canvas_.addEventListener(sl,r.boundHandleWebGLContextRestored_),r.offsetRotateMatrix_=[1,0,0,1,0,0],r.offsetScaleMatrix_=[1,0,0,1,0,0],r.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r.uniformLocations_={},r.attribLocations_={},r.uniforms_=[],n.uniforms)for(var o in n.uniforms)r.uniforms_.push({name:o,value:n.uniforms[o]});return r.postProcessPasses_=n.postProcesses?n.postProcesses.map((function(t){return new cl({webGlContext:i,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})})):[new cl({webGlContext:i})],r.shaderCompileErrors_=null,r.startTime_=Date.now(),r}return hl(e,t),e.prototype.bindBuffer=function(t){var e=this.getGL(),r=o(t),n=this.bufferCache_[r];n||(n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[r]=n),e.bindBuffer(t.getType(),n.webGlBuffer)},e.prototype.flushBufferData=function(t){var e=this.getGL();this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())},e.prototype.deleteBuffer=function(t){var e=this.getGL(),r=o(t),n=this.bufferCache_[r];e.isContextLost()||e.deleteBuffer(n.buffer),delete this.bufferCache_[r]},e.prototype.disposeInternal=function(){this.canvas_.removeEventListener(al,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(sl,this.boundHandleWebGLContextRestored_)},e.prototype.prepareDraw=function(t){var e=this.getGL(),r=this.getCanvas(),n=t.size,i=t.pixelRatio;r.width=n[0]*i,r.height=n[1]*i,r.style.width=n[0]+"px",r.style.height=n[1]+"px",e.useProgram(this.currentProgram_);for(var o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);e.bindTexture(e.TEXTURE_2D,null),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.prepareDrawToRenderTarget=function(t,e,r){var n=this.getGL(),i=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,i[0],i[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,r?n.ZERO:n.ONE_MINUS_SRC_ALPHA),n.useProgram(this.currentProgram_),this.applyFrameState(t),this.applyUniforms(t)},e.prototype.drawElements=function(t,e){var r=this.getGL(),n=r.UNSIGNED_INT,i=e-t,o=4*t;r.drawElements(r.TRIANGLES,i,n,o)},e.prototype.finalizeDraw=function(t){for(var e=0;e<this.postProcessPasses_.length;e++)this.postProcessPasses_[e].apply(t,this.postProcessPasses_[e+1]||null)},e.prototype.getCanvas=function(){return this.canvas_},e.prototype.getGL=function(){return this.gl_},e.prototype.applyFrameState=function(t){var e=t.size,r=t.viewState.rotation,n=or(this.offsetScaleMatrix_);lr(n,2/e[0],2/e[1]);var i,o,a,s,u=or(this.offsetRotateMatrix_);0!==r&&(i=u,o=-r,a=Math.cos(o),s=Math.sin(o),ar(i,sr(ir,a,s,-s,a,0,0))),this.setUniformMatrixValue("u_offsetScaleMatrix",ul(this.tmpMat4_,n)),this.setUniformMatrixValue("u_offsetRotateMatrix",ul(this.tmpMat4_,u)),this.setUniformFloatValue("u_time",.001*(Date.now()-this.startTime_)),this.setUniformFloatValue("u_zoom",t.viewState.zoom),this.setUniformFloatValue("u_resolution",t.viewState.resolution)},e.prototype.applyUniforms=function(t){var e,r=this.getGL(),n=0;this.uniforms_.forEach(function(i){if((e="function"==typeof i.value?i.value(t):i.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)i.texture||(i.prevValue=void 0,i.texture=r.createTexture()),r.activeTexture(r["TEXTURE"+n]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(!(e instanceof HTMLImageElement)||e.complete)&&i.prevValue!==e&&(i.prevValue=e,r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e)),r.uniform1i(this.getUniformLocation(i.name),n++);else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(i.name,ul(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:return void r.uniform2f(this.getUniformLocation(i.name),e[0],e[1]);case 3:return void r.uniform3f(this.getUniformLocation(i.name),e[0],e[1],e[2]);case 4:return void r.uniform4f(this.getUniformLocation(i.name),e[0],e[1],e[2],e[3]);default:return}else"number"==typeof e&&r.uniform1f(this.getUniformLocation(i.name),e)}.bind(this))},e.prototype.useProgram=function(t){return t!=this.currentProgram_&&(this.getGL().useProgram(t),this.currentProgram_=t,this.uniformLocations_={},this.attribLocations_={},!0)},e.prototype.compileShader=function(t,e){var r=this.getGL(),n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n},e.prototype.getProgram=function(t,e){var r=this.getGL(),n=this.compileShader(t,r.FRAGMENT_SHADER),i=this.compileShader(e,r.VERTEX_SHADER);this.shaderCompileErrors_=null,r.getShaderInfoLog(n)&&(this.shaderCompileErrors_="Fragment shader compilation failed:\n"+r.getShaderInfoLog(n)),r.getShaderInfoLog(i)&&(this.shaderCompileErrors_=(this.shaderCompileErrors_||"")+"Vertex shader compilation failed:\n"+r.getShaderInfoLog(i));var o=r.createProgram();return r.attachShader(o,n),r.attachShader(o,i),r.linkProgram(o),o},e.prototype.getShaderCompileErrors=function(){return this.shaderCompileErrors_},e.prototype.getUniformLocation=function(t){return void 0===this.uniformLocations_[t]&&(this.uniformLocations_[t]=this.getGL().getUniformLocation(this.currentProgram_,t)),this.uniformLocations_[t]},e.prototype.getAttributeLocation=function(t){return void 0===this.attribLocations_[t]&&(this.attribLocations_[t]=this.getGL().getAttribLocation(this.currentProgram_,t)),this.attribLocations_[t]},e.prototype.makeProjectionTransform=function(t,e){var r=t.size,n=t.viewState.rotation,i=t.viewState.resolution,o=t.viewState.center;return or(e),cr(e,0,0,2/(i*r[0]),2/(i*r[1]),-n,-o[0],-o[1]),e},e.prototype.setUniformFloatValue=function(t,e){this.getGL().uniform1f(this.getUniformLocation(t),e)},e.prototype.setUniformMatrixValue=function(t,e){this.getGL().uniformMatrix4fv(this.getUniformLocation(t),!1,e)},e.prototype.enableAttributeArray_=function(t,e,r,n,i){var o=this.getAttributeLocation(t);o<0||(this.getGL().enableVertexAttribArray(o),this.getGL().vertexAttribPointer(o,e,r,!1,n,i))},e.prototype.enableAttributes=function(t){for(var e=pl(t),r=0,n=0;n<t.length;n++){var i=t[n];this.enableAttributeArray_(i.name,i.size,i.type||5126,e,r),r+=i.size*dl(i.type)}},e.prototype.handleWebGLContextLost=function(){d(this.bufferCache_),this.currentProgram_=null},e.prototype.handleWebGLContextRestored=function(){},e.prototype.createTexture=function(t,e,r){var n=this.getGL(),i=r||n.createTexture(),o=n.RGBA,a=n.RGBA,s=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,o,a,s,e):n.texImage2D(n.TEXTURE_2D,0,o,t[0],t[1],0,a,s,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i},e}(b),_l=new Uint8Array(4),vl=function(){function t(t,e){this.helper_=t;var r=t.getGL();this.texture_=r.createTexture(),this.framebuffer_=r.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}return t.prototype.setSize=function(t){P(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())},t.prototype.getSize=function(){return this.size_},t.prototype.clearCachedData=function(){this.dataCacheDirty_=!0},t.prototype.readAll=function(){if(this.dataCacheDirty_){var t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_},t.prototype.readPixel=function(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return _l[0]=0,_l[1]=0,_l[2]=0,_l[3]=0,_l;this.readAll();var r=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return _l[0]=this.data_[4*r],_l[1]=this.data_[4*r+1],_l[2]=this.data_[4*r+2],_l[3]=this.data_[4*r+3],_l},t.prototype.getTexture=function(){return this.texture_},t.prototype.getFramebuffer=function(){return this.framebuffer_},t.prototype.updateSize_=function(){var t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)},t}(),ml=(gl=function(t,e){return(gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}gl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),bl=function(t){function e(e){var r=t.call(this,{extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes})||this;return r.matrixIds_=e.matrixIds,r}return ml(e,t),e.prototype.getMatrixId=function(t){return this.matrixIds_[t]},e.prototype.getMatrixIds=function(){return this.matrixIds_},e}(Mu),wl=bl;function xl(t,e,r){var n=[],i=[],o=[],a=[],s=[],u=void 0!==r?r:[],l=t.SupportedCRS,c=De(l.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||De(l),h=c.getMetersPerUnit(),f="ne"==c.getAxisOrientation().substr(0,2);return t.TileMatrix.sort((function(t,e){return e.ScaleDenominator-t.ScaleDenominator})),t.TileMatrix.forEach((function(e){if(!(u.length>0)||M(u,(function(r){return e.Identifier==r.TileMatrix||-1===e.Identifier.indexOf(":")&&t.Identifier+":"+e.Identifier===r.TileMatrix}))){i.push(e.Identifier);var r=28e-5*e.ScaleDenominator/h,l=e.TileWidth,c=e.TileHeight;f?o.push([e.TopLeftCorner[1],e.TopLeftCorner[0]]):o.push(e.TopLeftCorner),n.push(r),a.push(l==c?l:[l,c]),s.push([e.MatrixWidth,e.MatrixHeight])}})),new bl({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}var Sl,El,Ol,Ml,Pl=function(){function t(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.displacement_=t.displacement}return t.prototype.clone=function(){return new t({opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()})},t.prototype.getOpacity=function(){return this.opacity_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getDisplacement=function(){return this.displacement_},t.prototype.getAnchor=function(){return n()},t.prototype.getImage=function(t){return n()},t.prototype.getHitDetectionImage=function(t){return n()},t.prototype.getImageState=function(){return n()},t.prototype.getImageSize=function(){return n()},t.prototype.getHitDetectionImageSize=function(){return n()},t.prototype.getOrigin=function(){return n()},t.prototype.getSize=function(){return n()},t.prototype.setOpacity=function(t){this.opacity_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.listenImageChange=function(t){n()},t.prototype.load=function(){n()},t.prototype.unlistenImageChange=function(t){n()},t}(),Tl=(Ml=function(t,e){return(Ml=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ml(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Cl=function(t){function e(e){var r=this,n=void 0!==e.rotateWithView&&e.rotateWithView;return(r=t.call(this,{opacity:1,rotateWithView:n,rotation:void 0!==e.rotation?e.rotation:0,scale:1,displacement:void 0!==e.displacement?e.displacement:[0,0]})||this).canvas_=null,r.hitDetectionCanvas_=null,r.fill_=void 0!==e.fill?e.fill:null,r.origin_=[0,0],r.points_=e.points,r.radius_=void 0!==e.radius?e.radius:e.radius1,r.radius2_=e.radius2,r.angle_=void 0!==e.angle?e.angle:0,r.stroke_=void 0!==e.stroke?e.stroke:null,r.anchor_=null,r.size_=null,r.imageSize_=null,r.hitDetectionImageSize_=null,r.render(),r}return Tl(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.getAnchor=function(){return this.anchor_},e.prototype.getAngle=function(){return this.angle_},e.prototype.getFill=function(){return this.fill_},e.prototype.getHitDetectionImage=function(t){return this.hitDetectionCanvas_},e.prototype.getImage=function(t){return this.canvas_},e.prototype.getImageSize=function(){return this.imageSize_},e.prototype.getHitDetectionImageSize=function(){return this.hitDetectionImageSize_},e.prototype.getImageState=function(){return 2},e.prototype.getOrigin=function(){return this.origin_},e.prototype.getPoints=function(){return this.points_},e.prototype.getRadius=function(){return this.radius_},e.prototype.getRadius2=function(){return this.radius2_},e.prototype.getSize=function(){return this.size_},e.prototype.getStroke=function(){return this.stroke_},e.prototype.listenImageChange=function(t){},e.prototype.load=function(){},e.prototype.unlistenImageChange=function(t){},e.prototype.render=function(){var t,e="round",r="round",n=0,i=null,o=0,a=0;this.stroke_&&(null===(t=this.stroke_.getColor())&&(t="#000"),t=ls(t),void 0===(a=this.stroke_.getWidth())&&(a=1),i=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset(),void 0===(r=this.stroke_.getLineJoin())&&(r="round"),void 0===(e=this.stroke_.getLineCap())&&(e="round"),void 0===(n=this.stroke_.getMiterLimit())&&(n=10));var s=2*(this.radius_+a)+1,u={strokeStyle:t,strokeWidth:a,size:s,lineCap:e,lineDash:i,lineDashOffset:o,lineJoin:r,miterLimit:n},l=Bi(s,s);this.canvas_=l.canvas;var c=s=this.canvas_.width,h=this.getDisplacement();this.draw_(u,l,0,0),this.createHitDetectionCanvas_(u),this.anchor_=[s/2-h[0],s/2+h[1]],this.size_=[s,s],this.imageSize_=[c,c]},e.prototype.draw_=function(t,e,r,n){var i,o,a;e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var s=this.points_;if(s===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var u=void 0!==this.radius2_?this.radius2_:this.radius_;for(u!==this.radius_&&(s*=2),i=0;i<=s;i++)o=2*i*Math.PI/s-Math.PI/2+this.angle_,a=i%2==0?this.radius_:u,e.lineTo(t.size/2+a*Math.cos(o),t.size/2+a*Math.sin(o))}if(this.fill_){var l=this.fill_.getColor();null===l&&(l="#000"),e.fillStyle=ls(l),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,e.setLineDash&&t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},e.prototype.createHitDetectionCanvas_=function(t){if(this.hitDetectionImageSize_=[t.size,t.size],this.hitDetectionCanvas_=this.canvas_,this.fill_){var e=this.fill_.getColor(),r=0;if("string"==typeof e&&(e=is(e)),null===e?r=1:Array.isArray(e)&&(r=4===e.length?e[3]:1),0===r){var n=Bi(t.size,t.size);this.hitDetectionCanvas_=n.canvas,this.drawHitDetectionCanvas_(t,n,0,0)}}},e.prototype.drawHitDetectionCanvas_=function(t,e,r,n){e.setTransform(1,0,0,1,0,0),e.translate(r,n),e.beginPath();var i=this.points_;if(i===1/0)e.arc(t.size/2,t.size/2,this.radius_,0,2*Math.PI,!0);else{var o=void 0!==this.radius2_?this.radius2_:this.radius_;o!==this.radius_&&(i*=2);var a=void 0,s=void 0,u=void 0;for(a=0;a<=i;a++)u=2*a*Math.PI/i-Math.PI/2+this.angle_,s=a%2==0?this.radius_:o,e.lineTo(t.size/2+s*Math.cos(u),t.size/2+s*Math.sin(u))}e.fillStyle="#000",e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.stroke()),e.closePath()},e}(Pl),Il=(Ol=function(t,e){return(Ol=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ol(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Rl=function(t){function e(e){var r=e||{};return t.call(this,{points:1/0,fill:r.fill,radius:r.radius,stroke:r.stroke,displacement:void 0!==r.displacement?r.displacement:[0,0]})||this}return Il(e,t),e.prototype.clone=function(){var t=new e({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),displacement:this.getDisplacement().slice()});return t.setOpacity(this.getOpacity()),t.setScale(this.getScale()),t},e.prototype.setRadius=function(t){this.radius_=t,this.render()},e}(Cl),Ll=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})},t.prototype.getColor=function(){return this.color_},t.prototype.setColor=function(t){this.color_=t},t}(),Al="fraction",kl="pixels",Fl=(El=function(t,e){return(El=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}El(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),jl=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.extent=e,o.pixelRatio_=n,o.resolution=r,o.state=i,o}return Fl(e,t),e.prototype.changed=function(){this.dispatchEvent(z)},e.prototype.getExtent=function(){return this.extent},e.prototype.getImage=function(){return n()},e.prototype.getPixelRatio=function(){return this.pixelRatio_},e.prototype.getResolution=function(){return this.resolution},e.prototype.getState=function(){return this.state},e.prototype.load=function(){n()},e}(D),Nl=(Sl=function(t,e){return(Sl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Sl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Dl(t,e,r){var n=t;if(n.src&&Bn){var i=n.decode(),o=!0;return i.then((function(){o&&e()})).catch((function(t){o&&("EncodingError"===t.name&&"Invalid image type."===t.message?e():r())})),function(){o=!1}}var a=[v(n,X,e),v(n,G,r)];return function(){a.forEach(m)}}var zl,Gl,Bl=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,n,0)||this;return s.src_=i,s.image_=new Image,null!==o&&(s.image_.crossOrigin=o),s.unlisten_=null,s.state=0,s.imageLoadFunction_=a,s}return Nl(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.handleImageError_=function(){this.state=3,this.unlistenImage_(),this.changed()},e.prototype.handleImageLoad_=function(){void 0===this.resolution&&(this.resolution=Dt(this.extent)/this.image_.height),this.state=2,this.unlistenImage_(),this.changed()},e.prototype.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=Dl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.setImage=function(t){this.image_=t},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(jl),Ul=(zl=function(t,e){return(zl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}zl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Wl=function(t){function e(e,r,n,i,o,a){var s=t.call(this)||this;return s.hitDetectionImage_=null,s.image_=e||new Image,null!==i&&(s.image_.crossOrigin=i),s.canvas_=a?document.createElement("canvas"):null,s.color_=a,s.unlisten_=null,s.imageState_=o,s.size_=n,s.src_=r,s.tainted_,s}return Ul(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&2===this.imageState_){t||(t=Bi(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(t){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent(z)},e.prototype.handleImageError_=function(){this.imageState_=3,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=2,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],r=this.size_[1],n=Bi(e,r);n.fillRect(0,0,e,r),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(0==this.imageState_){this.imageState_=1;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=Dl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext("2d");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation="multiply",t.fillStyle="rgb("+e[0]+","+e[1]+","+e[2]+")",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation="destination-in",void t.drawImage(this.image_,0,0)}for(var r=t.getImageData(0,0,this.image_.width,this.image_.height),n=r.data,i=this.color_[0]/255,o=this.color_[1]/255,a=this.color_[2]/255,s=0,u=n.length;s<u;s+=4)n[s]*=i,n[s+1]*=o,n[s+2]*=a;t.putImageData(r,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(D),Yl="bottom-left",Vl="bottom-right",Xl="top-left",Zl="top-right",ql=(Gl=function(t,e){return(Gl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Gl(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Kl=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.opacity?n.opacity:1,a=void 0!==n.rotation?n.rotation:0,s=void 0!==n.scale?n.scale:1,u=void 0!==n.rotateWithView&&n.rotateWithView;(r=t.call(this,{opacity:i,rotation:a,scale:s,displacement:void 0!==n.displacement?n.displacement:[0,0],rotateWithView:u})||this).anchor_=void 0!==n.anchor?n.anchor:[.5,.5],r.normalizedAnchor_=null,r.anchorOrigin_=void 0!==n.anchorOrigin?n.anchorOrigin:Xl,r.anchorXUnits_=void 0!==n.anchorXUnits?n.anchorXUnits:Al,r.anchorYUnits_=void 0!==n.anchorYUnits?n.anchorYUnits:Al,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null;var l=void 0!==n.img?n.img:null,c=void 0!==n.imgSize?n.imgSize:null,h=n.src;ut(!(void 0!==h&&l),4),ut(!l||l&&c,5),void 0!==h&&0!==h.length||!l||(h=l.src||o(l)),ut(void 0!==h&&h.length>0,6);var f=void 0!==n.src?0:2;return r.color_=void 0!==n.color?is(n.color):null,r.iconImage_=function(t,e,r,n,i,o){var a=us.get(e,n,o);return a||(a=new Wl(t,e,r,n,i,o),us.set(e,n,o,a)),a}(l,h,c,r.crossOrigin_,f,r.color_),r.offset_=void 0!==n.offset?n.offset:[0,0],r.offsetOrigin_=void 0!==n.offsetOrigin?n.offsetOrigin:Xl,r.origin_=null,r.size_=void 0!==n.size?n.size:null,r}return ql(e,t),e.prototype.clone=function(){return new e({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:this.getScale(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})},e.prototype.getAnchor=function(){if(this.normalizedAnchor_)return this.normalizedAnchor_;var t=this.anchor_,e=this.getSize();if(this.anchorXUnits_==Al||this.anchorYUnits_==Al){if(!e)return null;t=this.anchor_.slice(),this.anchorXUnits_==Al&&(t[0]*=e[0]),this.anchorYUnits_==Al&&(t[1]*=e[1])}if(this.anchorOrigin_!=Xl){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),this.anchorOrigin_!=Zl&&this.anchorOrigin_!=Vl||(t[0]=-t[0]+e[0]),this.anchorOrigin_!=Yl&&this.anchorOrigin_!=Vl||(t[1]=-t[1]+e[1])}return this.normalizedAnchor_=t,this.normalizedAnchor_},e.prototype.setAnchor=function(t){this.anchor_=t,this.normalizedAnchor_=null},e.prototype.getColor=function(){return this.color_},e.prototype.getImage=function(t){return this.iconImage_.getImage(t)},e.prototype.getImageSize=function(){return this.iconImage_.getSize()},e.prototype.getHitDetectionImageSize=function(){return this.getImageSize()},e.prototype.getImageState=function(){return this.iconImage_.getImageState()},e.prototype.getHitDetectionImage=function(t){return this.iconImage_.getHitDetectionImage(t)},e.prototype.getOrigin=function(){if(this.origin_)return this.origin_;var t=this.offset_,e=this.getDisplacement();if(this.offsetOrigin_!=Xl){var r=this.getSize(),n=this.iconImage_.getSize();if(!r||!n)return null;t=t.slice(),this.offsetOrigin_!=Zl&&this.offsetOrigin_!=Vl||(t[0]=n[0]-r[0]-t[0]),this.offsetOrigin_!=Yl&&this.offsetOrigin_!=Vl||(t[1]=n[1]-r[1]-t[1])}return t[0]+=e[0],t[1]+=e[1],this.origin_=t,this.origin_},e.prototype.getSrc=function(){return this.iconImage_.getSrc()},e.prototype.getSize=function(){return this.size_?this.size_:this.iconImage_.getSize()},e.prototype.listenImageChange=function(t){this.iconImage_.addEventListener(z,t)},e.prototype.load=function(){this.iconImage_.load()},e.prototype.unlistenImageChange=function(t){this.iconImage_.removeEventListener(z,t)},e}(Pl),Hl=function(){function t(t){var e=t||{};this.color_=void 0!==e.color?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=void 0!==e.lineDash?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}return t.prototype.clone=function(){var e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})},t.prototype.getColor=function(){return this.color_},t.prototype.getLineCap=function(){return this.lineCap_},t.prototype.getLineDash=function(){return this.lineDash_},t.prototype.getLineDashOffset=function(){return this.lineDashOffset_},t.prototype.getLineJoin=function(){return this.lineJoin_},t.prototype.getMiterLimit=function(){return this.miterLimit_},t.prototype.getWidth=function(){return this.width_},t.prototype.setColor=function(t){this.color_=t},t.prototype.setLineCap=function(t){this.lineCap_=t},t.prototype.setLineDash=function(t){this.lineDash_=t},t.prototype.setLineDashOffset=function(t){this.lineDashOffset_=t},t.prototype.setLineJoin=function(t){this.lineJoin_=t},t.prototype.setMiterLimit=function(t){this.miterLimit_=t},t.prototype.setWidth=function(t){this.width_=t},t}(),Jl=function(){function t(t){var e=t||{};this.geometry_=null,this.geometryFunction_=ec,void 0!==e.geometry&&this.setGeometry(e.geometry),this.fill_=void 0!==e.fill?e.fill:null,this.image_=void 0!==e.image?e.image:null,this.renderer_=void 0!==e.renderer?e.renderer:null,this.stroke_=void 0!==e.stroke?e.stroke:null,this.text_=void 0!==e.text?e.text:null,this.zIndex_=e.zIndex}return t.prototype.clone=function(){var e=this.getGeometry();return e&&"object"==a(e)&&(e=e.clone()),new t({geometry:e,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.setRenderer=function(t){this.renderer_=t},t.prototype.getGeometry=function(){return this.geometry_},t.prototype.getGeometryFunction=function(){return this.geometryFunction_},t.prototype.getFill=function(){return this.fill_},t.prototype.setFill=function(t){this.fill_=t},t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(t){this.image_=t},t.prototype.getStroke=function(){return this.stroke_},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.getText=function(){return this.text_},t.prototype.setText=function(t){this.text_=t},t.prototype.getZIndex=function(){return this.zIndex_},t.prototype.setGeometry=function(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=ec,this.geometry_=t},t.prototype.setZIndex=function(t){this.zIndex_=t},t}(),Ql=null;function $l(t,e){if(!Ql){var r=new Ll({color:"rgba(255,255,255,0.4)"}),n=new Hl({color:"#3399CC",width:1.25});Ql=[new Jl({image:new Rl({fill:r,stroke:n,radius:5}),fill:r,stroke:n})]}return Ql}function tc(){var t={},e=[255,255,255,1],r=[0,153,255,1];return t[Qt.POLYGON]=[new Jl({fill:new Ll({color:[255,255,255,.5]})})],t[Qt.MULTI_POLYGON]=t[Qt.POLYGON],t[Qt.LINE_STRING]=[new Jl({stroke:new Hl({color:e,width:5})}),new Jl({stroke:new Hl({color:r,width:3})})],t[Qt.MULTI_LINE_STRING]=t[Qt.LINE_STRING],t[Qt.CIRCLE]=t[Qt.POLYGON].concat(t[Qt.LINE_STRING]),t[Qt.POINT]=[new Jl({image:new Rl({radius:6,fill:new Ll({color:r}),stroke:new Hl({color:e,width:1.5})}),zIndex:1/0})],t[Qt.MULTI_POINT]=t[Qt.POINT],t[Qt.GEOMETRY_COLLECTION]=t[Qt.POLYGON].concat(t[Qt.LINE_STRING],t[Qt.POINT]),t}function ec(t){return t.getGeometry()}var rc=Jl,nc=function(){function t(t){var e=t||{};this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.text_=e.text,this.textAlign_=e.textAlign,this.textBaseline_=e.textBaseline,this.fill_=void 0!==e.fill?e.fill:new Ll({color:"#333"}),this.maxAngle_=void 0!==e.maxAngle?e.maxAngle:Math.PI/4,this.placement_=void 0!==e.placement?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=void 0!==e.stroke?e.stroke:null,this.offsetX_=void 0!==e.offsetX?e.offsetX:0,this.offsetY_=void 0!==e.offsetY?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=void 0===e.padding?null:e.padding}return t.prototype.clone=function(){return new t({font:this.getFont(),placement:this.getPlacement(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:this.getScale(),text:this.getText(),textAlign:this.getTextAlign(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()})},t.prototype.getOverflow=function(){return this.overflow_},t.prototype.getFont=function(){return this.font_},t.prototype.getMaxAngle=function(){return this.maxAngle_},t.prototype.getPlacement=function(){return this.placement_},t.prototype.getOffsetX=function(){return this.offsetX_},t.prototype.getOffsetY=function(){return this.offsetY_},t.prototype.getFill=function(){return this.fill_},t.prototype.getRotateWithView=function(){return this.rotateWithView_},t.prototype.getRotation=function(){return this.rotation_},t.prototype.getScale=function(){return this.scale_},t.prototype.getStroke=function(){return this.stroke_},t.prototype.getText=function(){return this.text_},t.prototype.getTextAlign=function(){return this.textAlign_},t.prototype.getTextBaseline=function(){return this.textBaseline_},t.prototype.getBackgroundFill=function(){return this.backgroundFill_},t.prototype.getBackgroundStroke=function(){return this.backgroundStroke_},t.prototype.getPadding=function(){return this.padding_},t.prototype.setOverflow=function(t){this.overflow_=t},t.prototype.setFont=function(t){this.font_=t},t.prototype.setMaxAngle=function(t){this.maxAngle_=t},t.prototype.setOffsetX=function(t){this.offsetX_=t},t.prototype.setOffsetY=function(t){this.offsetY_=t},t.prototype.setPlacement=function(t){this.placement_=t},t.prototype.setRotateWithView=function(t){this.rotateWithView_=t},t.prototype.setFill=function(t){this.fill_=t},t.prototype.setRotation=function(t){this.rotation_=t},t.prototype.setScale=function(t){this.scale_=t},t.prototype.setStroke=function(t){this.stroke_=t},t.prototype.setText=function(t){this.text_=t},t.prototype.setTextAlign=function(t){this.textAlign_=t},t.prototype.setTextBaseline=function(t){this.textBaseline_=t},t.prototype.setBackgroundFill=function(t){this.backgroundFill_=t},t.prototype.setBackgroundStroke=function(t){this.backgroundStroke_=t},t.prototype.setPadding=function(t){this.padding_=t},t}();function ic(t,e){var r=/\{z\}/g,n=/\{x\}/g,i=/\{y\}/g,o=/\{-y\}/g;return function(a,s,u){return a?t.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(i,a[2].toString()).replace(o,(function(){var t=a[0],r=e.getFullTileRange(t);return ut(r,55),(r.getHeight()-a[2]-1).toString()})):void 0}}function oc(t,e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=ic(t[i],e);return ac(n)}function ac(t){return 1===t.length?t[0]:function(e,r,n){if(e){var i=ue(Eu(e),t.length);return t[i](e,r,n)}}}function sc(t,e,r){}function uc(t){var e=[],r=/\{([a-z])-([a-z])\}/.exec(t);if(r){var n=r[1].charCodeAt(0),i=r[2].charCodeAt(0),o=void 0;for(o=n;o<=i;++o)e.push(t.replace(r[0],String.fromCharCode(o)));return e}if(r=/\{(\d+)-(\d+)\}/.exec(t)){for(var a=parseInt(r[2],10),s=parseInt(r[1],10);s<=a;s++)e.push(t.replace(r[0],s.toString()));return e}return e.push(t),e}function lc(t,e,r,n){var i=document.createElement("script"),a="olc_"+o(e);function s(){delete window[a],i.parentNode.removeChild(i)}i.async=!0,i.src=t+(-1==t.indexOf("?")?"?":"&")+(n||"callback")+"="+a;var u=setTimeout((function(){s(),r&&r()}),1e4);window[a]=function(t){clearTimeout(u),s(),e(t)},document.getElementsByTagName("head")[0].appendChild(i)}var cc,hc,fc,pc=(hc=function(t,e){return(hc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}hc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),dc=function(t){function e(e,r,n){var i=t.call(this)||this,o=n||{};return i.tileCoord=e,i.state=r,i.interimTile=null,i.hifi=!0,i.key="",i.transition_=void 0===o.transition?250:o.transition,i.transitionStarts_={},i}return pc(e,t),e.prototype.changed=function(){this.dispatchEvent(z)},e.prototype.release=function(){},e.prototype.getKey=function(){return this.key+"/"+this.tileCoord},e.prototype.getInterimTile=function(){if(!this.interimTile)return this;var t=this.interimTile;do{if(2==t.getState())return this.transition_=0,t;t=t.interimTile}while(t);return this},e.prototype.refreshInterimChain=function(){if(this.interimTile){var t=this.interimTile,e=this;do{if(2==t.getState()){t.interimTile=null;break}1==t.getState()?e=t:0==t.getState()?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}},e.prototype.getTileCoord=function(){return this.tileCoord},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t){if(3!==this.state&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()},e.prototype.load=function(){n()},e.prototype.getAlpha=function(t,e){if(!this.transition_)return 1;var r=this.transitionStarts_[t];if(r){if(-1===r)return 1}else r=e,this.transitionStarts_[t]=r;var n=e-r+1e3/60;return n>=this.transition_?1:Li(n/this.transition_)},e.prototype.inTransition=function(t){return!!this.transition_&&-1!==this.transitionStarts_[t]},e.prototype.endTransition=function(t){this.transition_&&(this.transitionStarts_[t]=-1)},e}(D),gc=(cc=function(t,e){return(cc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}cc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),yc=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.crossOrigin_=i,s.src_=n,s.image_=new Image,null!==i&&(s.image_.crossOrigin=i),s.unlisten_=null,s.tileLoadFunction_=o,s}return gc(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.getKey=function(){return this.src_},e.prototype.handleImageError_=function(){var t;this.state=3,this.unlistenImage_(),this.image_=((t=Bi(1,1)).fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=2:this.state=4,this.unlistenImage_(),this.changed()},e.prototype.load=function(){3==this.state&&(this.state=0,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),0==this.state&&(this.state=1,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Dl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(dc),_c=function(){function t(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return t.prototype.canExpireCache=function(){return this.getCount()>this.highWaterMark},t.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},t.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},t.prototype.forEach=function(t){for(var e=this.oldest_;e;)t(e.value_,e.key_,this),e=e.newer},t.prototype.get=function(t,e){var r=this.entries_[t];return ut(void 0!==r,15),r===this.newest_||(r===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(r.newer.older=r.older,r.older.newer=r.newer),r.newer=null,r.older=this.newest_,this.newest_.newer=r,this.newest_=r),r.value_},t.prototype.remove=function(t){var e=this.entries_[t];return ut(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_},t.prototype.getCount=function(){return this.count_},t.prototype.getKeys=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.key_;return e},t.prototype.getValues=function(){var t,e=new Array(this.count_),r=0;for(t=this.newest_;t;t=t.older)e[r++]=t.value_;return e},t.prototype.peekLast=function(){return this.oldest_.value_},t.prototype.peekLastKey=function(){return this.oldest_.key_},t.prototype.peekFirstKey=function(){return this.newest_.key_},t.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},t.prototype.replace=function(t,e){this.get(t),this.entries_[t].value_=e},t.prototype.set=function(t,e){ut(!(t in this.entries_),16);var r={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=r:this.oldest_=r,this.newest_=r,this.entries_[t]=r,++this.count_},t.prototype.setSize=function(t){this.highWaterMark=t},t}(),vc=(fc=function(t,e){return(fc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}fc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vc(e,t),e.prototype.expireCache=function(t){for(;this.canExpireCache()&&!(this.peekLast().getKey()in t);)this.pop().release()},e.prototype.pruneExceptNewestZ=function(){if(0!==this.getCount()){var t=Su(this.peekFirstKey())[0];this.forEach(function(e){e.tileCoord[0]!==t&&(this.remove(xu(e.tileCoord)),e.release())}.bind(this))}},e}(_c);function bc(t,e,r,n){var i=Ze(r,e,t),o=ze(e,n,r),a=e.getMetersPerUnit();void 0!==a&&(o*=a);var s=t.getMetersPerUnit();void 0!==s&&(o/=s);var u=t.getExtent();if(!u||_t(u,i)){var l=ze(t,o,i)/o;isFinite(l)&&l>0&&(o/=l)}return o}function wc(t,e,r,n){var i=r-t,o=n-e,a=Math.sqrt(i*i+o*o);return[Math.round(r+i/a),Math.round(n+o/a)]}function xc(t,e,r,n,i,o,a,s,u,l,c){var h=Bi(Math.round(r*t),Math.round(r*e));if(0===u.length)return h.canvas;h.scale(r,r);var f=[1/0,1/0,-1/0,-1/0];u.forEach((function(t,e,r){Pt(f,t.extent)}));var p=Ut(f),d=Dt(f),g=Bi(Math.round(r*p/n),Math.round(r*d/n)),y=r/n;u.forEach((function(t,e,r){var n=t.extent[0]-f[0],i=-(t.extent[3]-f[3]),o=Ut(t.extent),a=Dt(t.extent);g.drawImage(t.image,l,l,t.image.width-2*l,t.image.height-2*l,n*y,i*y,o*y,a*y)}));var _=Gt(a);return s.getTriangles().forEach((function(t,e,i){var a=t.source,s=t.target,u=a[0][0],l=a[0][1],c=a[1][0],p=a[1][1],d=a[2][0],y=a[2][1],v=(s[0][0]-_[0])/o,m=-(s[0][1]-_[1])/o,b=(s[1][0]-_[0])/o,w=-(s[1][1]-_[1])/o,x=(s[2][0]-_[0])/o,S=-(s[2][1]-_[1])/o,E=u,O=l;u=0,l=0;var M=function(t){for(var e=t.length,r=0;r<e;r++){for(var n=r,i=Math.abs(t[r][r]),o=r+1;o<e;o++){var a=Math.abs(t[o][r]);a>i&&(i=a,n=o)}if(0===i)return null;var s=t[n];t[n]=t[r],t[r]=s;for(var u=r+1;u<e;u++)for(var l=-t[u][r]/t[r][r],c=r;c<e+1;c++)r==c?t[u][c]=0:t[u][c]+=l*t[r][c]}for(var h=new Array(e),f=e-1;f>=0;f--){h[f]=t[f][e]/t[f][f];for(var p=f-1;p>=0;p--)t[p][e]-=t[p][f]*h[f]}return h}([[c-=E,p-=O,0,0,b-v],[d-=E,y-=O,0,0,x-v],[0,0,c,p,w-m],[0,0,d,y,S-m]]);if(M){h.save(),h.beginPath();var P=(v+b+x)/3,T=(m+w+S)/3,C=wc(P,T,v,m),I=wc(P,T,b,w),R=wc(P,T,x,S);h.moveTo(I[0],I[1]),h.lineTo(C[0],C[1]),h.lineTo(R[0],R[1]),h.clip(),h.transform(M[0],M[2],M[1],M[3],v,m),h.translate(f[0]-E,f[3]-O),h.scale(n/r,-n/r),h.drawImage(g.canvas,0,0),h.restore()}})),c&&(h.save(),h.strokeStyle="black",h.lineWidth=1,s.getTriangles().forEach((function(t,e,r){var n=t.target,i=(n[0][0]-_[0])/o,a=-(n[0][1]-_[1])/o,s=(n[1][0]-_[0])/o,u=-(n[1][1]-_[1])/o,l=(n[2][0]-_[0])/o,c=-(n[2][1]-_[1])/o;h.beginPath(),h.moveTo(s,u),h.lineTo(i,a),h.lineTo(l,c),h.closePath(),h.stroke()})),h.restore()),h.canvas}var Sc,Ec,Oc=function(){function t(t,e,r,n,i,o){this.sourceProj_=t,this.targetProj_=e;var a={},s=Xe(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){var e=t[0]+"/"+t[1];return a[e]||(a[e]=s(t)),a[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&Ut(n)==Ut(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Ut(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Ut(this.targetProj_.getExtent()):null;var u=Gt(r),l=Bt(r),c=kt(r),h=At(r),f=this.transformInv_(u),p=this.transformInv_(l),d=this.transformInv_(c),g=this.transformInv_(h),y=10+(o?Math.max(0,Math.ceil(Math.log2(Lt(r)/(o*o*256*256)))):0);if(this.addQuad_(u,l,c,h,f,p,d,g,y),this.wrapsXInSource_){var _=1/0;this.triangles_.forEach((function(t,e,r){_=Math.min(_,t.source[0][0],t.source[1][0],t.source[2][0])})),this.triangles_.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-_>this.sourceWorldWidth_/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-_>this.sourceWorldWidth_/2&&(e[0][0]-=this.sourceWorldWidth_),e[1][0]-_>this.sourceWorldWidth_/2&&(e[1][0]-=this.sourceWorldWidth_),e[2][0]-_>this.sourceWorldWidth_/2&&(e[2][0]-=this.sourceWorldWidth_);var r=Math.min(e[0][0],e[1][0],e[2][0]);Math.max(e[0][0],e[1][0],e[2][0])-r<this.sourceWorldWidth_/2&&(t.source=e)}}.bind(this))}a={}}return t.prototype.addTriangle_=function(t,e,r,n,i,o){this.triangles_.push({source:[n,i,o],target:[t,e,r]})},t.prototype.addQuad_=function(t,e,r,n,i,o,a,s,u){var l=pt([i,o,a,s]),c=this.sourceWorldWidth_?Ut(l)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&c>.5&&c<1,p=!1;if(u>0&&(this.targetProj_.isGlobal()&&this.targetWorldWidth_&&(p=Ut(pt([t,e,r,n]))/this.targetWorldWidth_>.25||p),!f&&this.sourceProj_.isGlobal()&&c&&(p=c>.25||p)),p||!this.maxSourceExtent_||Wt(l,this.maxSourceExtent_)){if(!(p||isFinite(i[0])&&isFinite(i[1])&&isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(s[0])&&isFinite(s[1]))){if(!(u>0))return;p=!0}if(u>0){if(!p){var d=[(t[0]+r[0])/2,(t[1]+r[1])/2],g=this.transformInv_(d),y=void 0;y=f?(ue(i[0],h)+ue(a[0],h))/2-ue(g[0],h):(i[0]+a[0])/2-g[0];var _=(i[1]+a[1])/2-g[1];p=y*y+_*_>this.errorThresholdSquared_}if(p){if(Math.abs(t[0]-r[0])<=Math.abs(t[1]-r[1])){var v=[(e[0]+r[0])/2,(e[1]+r[1])/2],m=this.transformInv_(v),b=[(n[0]+t[0])/2,(n[1]+t[1])/2],w=this.transformInv_(b);this.addQuad_(t,e,v,b,i,o,m,w,u-1),this.addQuad_(b,v,r,n,w,m,a,s,u-1)}else{var x=[(t[0]+e[0])/2,(t[1]+e[1])/2],S=this.transformInv_(x),E=[(r[0]+n[0])/2,(r[1]+n[1])/2],O=this.transformInv_(E);this.addQuad_(t,x,E,n,i,S,O,s,u-1),this.addQuad_(x,e,r,E,S,o,a,O,u-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}this.addTriangle_(t,r,n,i,a,s),this.addTriangle_(t,e,r,i,o,a)}},t.prototype.calculateSourceExtent=function(){var t=[1/0,1/0,-1/0,-1/0];return this.triangles_.forEach((function(e,r,n){var i=e.source;Tt(t,i[0]),Tt(t,i[1]),Tt(t,i[2])})),t},t.prototype.getTriangles=function(){return this.triangles_},t}(),Mc=(Ec=function(t,e){return(Ec=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ec(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Pc=function(t){function e(e,r,n,i,o,a,s,u,l,c,h){var f=t.call(this,o,0)||this;f.renderEdges_=void 0!==h&&h,f.pixelRatio_=s,f.gutter_=u,f.canvas_=null,f.sourceTileGrid_=r,f.targetTileGrid_=i,f.wrappedTileCoord_=a||o,f.sourceTiles_=[],f.sourcesListenerKeys_=null,f.sourceZ_=0;var p=i.getTileCoordExtent(f.wrappedTileCoord_),d=f.targetTileGrid_.getExtent(),g=f.sourceTileGrid_.getExtent(),y=d?zt(p,d):p;if(0===Lt(y))return f.state=4,f;var _=e.getExtent();_&&(g=g?zt(g,_):_);var v=i.getResolution(f.wrappedTileCoord_[0]),m=bc(e,n,Ft(y),v);if(!isFinite(m)||m<=0)return f.state=4,f;var b=void 0!==c?c:.5;if(f.triangulation_=new Oc(e,n,y,g,m*b,v),0===f.triangulation_.getTriangles().length)return f.state=4,f;f.sourceZ_=r.getZForResolution(m);var w=f.triangulation_.calculateSourceExtent();if(g&&(e.canWrapX()?(w[1]=re(w[1],g[1],g[3]),w[3]=re(w[3],g[1],g[3])):w=zt(w,g)),Lt(w)){for(var x=r.getTileRangeForExtentAndZ(w,f.sourceZ_),S=x.minX;S<=x.maxX;S++)for(var E=x.minY;E<=x.maxY;E++){var O=l(f.sourceZ_,S,E,s);O&&f.sourceTiles_.push(O)}0===f.sourceTiles_.length&&(f.state=4)}else f.state=4;return f}return Mc(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,n){e&&2==e.getState()&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=3;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),n="number"==typeof r?r:r[0],i="number"==typeof r?r:r[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=xc(n,i,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,s,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=2}this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,n){var i=e.getState();if(0==i||1==i){t++;var o=_(e,z,(function(r){var n=e.getState();2!=n&&3!=n&&4!=n||(m(o),0==--t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(o)}}.bind(this)),this.sourceTiles_.forEach((function(t,e,r){0==t.getState()&&t.load()})),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(m),this.sourcesListenerKeys_=null},e}(dc),Tc=(Sc=function(t,e){return(Sc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Sc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Cc(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var Ic,Rc,Lc,Ac=function(t){function e(e){var r=t.call(this)||this;return r.projection_=De(e.projection),r.attributions_=Cc(e.attributions),r.attributionsCollapsible_=void 0===e.attributionsCollapsible||e.attributionsCollapsible,r.loading=!1,r.state_=void 0!==e.state?e.state:so,r.wrapX_=void 0!==e.wrapX&&e.wrapX,r}return Tc(e,t),e.prototype.getAttributions=function(){return this.attributions_},e.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},e.prototype.getProjection=function(){return this.projection_},e.prototype.getResolutions=function(){return n()},e.prototype.getState=function(){return this.state_},e.prototype.getWrapX=function(){return this.wrapX_},e.prototype.refresh=function(){this.changed()},e.prototype.setAttributions=function(t){this.attributions_=Cc(t),this.changed()},e.prototype.setState=function(t){this.state_=t,this.changed()},e}(it),kc=(Lc=function(t,e){return(Lc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Lc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Fc=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX})||this;r.opaque_=void 0!==e.opaque&&e.opaque,r.tilePixelRatio_=void 0!==e.tilePixelRatio?e.tilePixelRatio:1,r.tileGrid=void 0!==e.tileGrid?e.tileGrid:null;var n=[256,256],i=e.tileGrid;i&&go(i.getTileSize(i.getMinZoom()),n);var o="undefined"!=typeof screen,a=o?screen.availWidth||screen.width:1920,s=o?screen.availHeight||screen.height:1080,u=4*Math.ceil(a/n[0])*Math.ceil(s/n[1]);return r.tileCache=new mc(Math.max(u,e.cacheSize||0)),r.tmpSize=[0,0],r.key_=e.key||"",r.tileOptions={transition:e.transition},r.zDirection=e.zDirection?e.zDirection:0,r}return kc(e,t),e.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);r&&r.expireCache(e)},e.prototype.forEachLoadedTile=function(t,e,r,n){var i=this.getTileCacheForProjection(t);if(!i)return!1;for(var o,a,s,u=!0,l=r.minX;l<=r.maxX;++l)for(var c=r.minY;c<=r.maxY;++c)a=wu(e,l,c),s=!1,i.containsKey(a)&&(s=2===(o=i.get(a)).getState())&&(s=!1!==n(o)),s||(u=!1);return u},e.prototype.getGutterForProjection=function(t){return 0},e.prototype.getKey=function(){return this.key_},e.prototype.setKey=function(t){this.key_!==t&&(this.key_=t,this.changed())},e.prototype.getOpaque=function(t){return this.opaque_},e.prototype.getResolutions=function(){return this.tileGrid.getResolutions()},e.prototype.getTile=function(t,e,r,i,o){return n()},e.prototype.getTileGrid=function(){return this.tileGrid},e.prototype.getTileGridForProjection=function(t){return this.tileGrid?this.tileGrid:Pu(t)},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();return e&&!Ye(e,t)?null:this.tileCache},e.prototype.getTilePixelRatio=function(t){return this.tilePixelRatio_},e.prototype.getTilePixelSize=function(t,e,r){var n=this.getTileGridForProjection(r),i=this.getTilePixelRatio(e),o=go(n.getTileSize(t),this.tmpSize);return 1==i?o:po(o,i,this.tmpSize)},e.prototype.getTileCoordForTileUrlFunction=function(t,e){var r=void 0!==e?e:this.getProjection(),n=this.getTileGridForProjection(r);return this.getWrapX()&&r.isGlobal()&&(t=function(t,e,r){var n=e[0],i=t.getTileCoordCenter(e),o=Ru(r);if(_t(o,i))return e;var a=Ut(o),s=Math.ceil((o[0]-i[0])/a);return i[0]+=a*s,t.getTileCoordForCoordAndZ(i,n)}(n,t,r)),function(t,e){var r=t[0],n=t[1],i=t[2];if(e.getMinZoom()>r||r>e.getMaxZoom())return!1;var o,a=e.getExtent();return!(o=a?e.getTileRangeForExtentAndZ(a,r):e.getFullTileRange(r))||o.containsXY(n,i)}(t,n)?t:null},e.prototype.clear=function(){this.tileCache.clear()},e.prototype.refresh=function(){this.clear(),t.prototype.refresh.call(this)},e.prototype.useTile=function(t,e,r,n){},e}(Ac),jc=function(t){function e(e,r){var n=t.call(this,e)||this;return n.tile=r,n}return kc(e,t),e}(j),Nc=Fc,Dc=(Rc=function(t,e){return(Rc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Rc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),zc=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.generateTileUrlFunction_=!e.tileUrlFunction,r.tileLoadFunction=e.tileLoadFunction,r.tileUrlFunction=e.tileUrlFunction?e.tileUrlFunction.bind(r):sc,r.urls=null,e.urls?r.setUrls(e.urls):e.url&&r.setUrl(e.url),r.tileLoadingKeys_={},r}return Dc(e,t),e.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},e.prototype.getTileUrlFunction=function(){return this.tileUrlFunction},e.prototype.getUrls=function(){return this.urls},e.prototype.handleTileChange=function(t){var e,r=t.target,n=o(r),i=r.getState();1==i?(this.tileLoadingKeys_[n]=!0,e="tileloadstart"):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=3==i?"tileloaderror":2==i?"tileloadend":void 0),null!=e&&this.dispatchEvent(new jc(e,r))},e.prototype.setTileLoadFunction=function(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()},e.prototype.setTileUrlFunction=function(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()},e.prototype.setUrl=function(t){var e=uc(t);this.urls=e,this.setUrls(e)},e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(oc(t,this.tileGrid),e):this.setKey(e)},e.prototype.useTile=function(t,e,r){var n=wu(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Nc),Gc=(Ic=function(t,e){return(Ic=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ic(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Bc(t,e){t.getImage().src=e}var Uc,Wc,Yc,Vc,Xc,Zc,qc,Kc=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Bc,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection})||this;return r.crossOrigin=void 0!==e.crossOrigin?e.crossOrigin:null,r.tileClass=void 0!==e.tileClass?e.tileClass:yc,r.tileCacheForProjection={},r.tileGridForProjection={},r.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,r.renderReprojectionEdges_=!1,r}return Gc(e,t),e.prototype.canExpireCache=function(){if(this.tileCache.canExpireCache())return!0;for(var t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1},e.prototype.expireCache=function(t,e){var r=this.getTileCacheForProjection(t);for(var n in this.tileCache.expireCache(this.tileCache==r?e:{}),this.tileCacheForProjection){var i=this.tileCacheForProjection[n];i.expireCache(i==r?e:{})}},e.prototype.getGutterForProjection=function(t){return this.getProjection()&&t&&!Ye(this.getProjection(),t)?0:this.getGutter()},e.prototype.getGutter=function(){return 0},e.prototype.getOpaque=function(e){return!(this.getProjection()&&e&&!Ye(this.getProjection(),e))&&t.prototype.getOpaque.call(this,e)},e.prototype.getTileGridForProjection=function(t){var e=this.getProjection();if(!this.tileGrid||e&&!Ye(e,t)){var r=o(t);return r in this.tileGridForProjection||(this.tileGridForProjection[r]=Pu(t)),this.tileGridForProjection[r]}return this.tileGrid},e.prototype.getTileCacheForProjection=function(t){var e=this.getProjection();if(!e||Ye(e,t))return this.tileCache;var r=o(t);return r in this.tileCacheForProjection||(this.tileCacheForProjection[r]=new mc(this.tileCache.highWaterMark)),this.tileCacheForProjection[r]},e.prototype.createTile_=function(t,e,r,n,i,o){var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=s?this.tileUrlFunction(s,n,i):void 0,l=new this.tileClass(a,void 0!==u?0:4,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return l.key=o,l.addEventListener(z,this.handleTileChange.bind(this)),l},e.prototype.getTile=function(t,e,r,n,i){var o=this.getProjection();if(o&&i&&!Ye(o,i)){var a=this.getTileCacheForProjection(i),s=[t,e,r],u=void 0,l=xu(s);a.containsKey(l)&&(u=a.get(l));var c=this.getKey();if(u&&u.key==c)return u;var h=this.getTileGridForProjection(o),f=this.getTileGridForProjection(i),p=this.getTileCoordForTileUrlFunction(s,i),d=new Pc(o,h,i,f,s,p,this.getTilePixelRatio(n),this.getGutter(),function(t,e,r,n){return this.getTileInternal(t,e,r,n,o)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_);return d.key=c,u?(d.interimTile=u,d.refreshInterimChain(),a.replace(l,d)):a.set(l,d),d}return this.getTileInternal(t,e,r,n,o||i)},e.prototype.getTileInternal=function(t,e,r,n,i){var o=null,a=wu(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)){if((o=this.tileCache.get(a)).key!=s){var u=o;o=this.createTile_(t,e,r,n,i,s),0==u.getState()?o.interimTile=u.interimTile:o.interimTile=u,o.refreshInterimChain(),this.tileCache.replace(a,o)}}else o=this.createTile_(t,e,r,n,i,s),this.tileCache.set(a,o);return o},e.prototype.setRenderReprojectionEdges=function(t){if(this.renderReprojectionEdges_!=t){for(var e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}},e.prototype.setTileGridForProjection=function(t,e){var r=De(t);if(r){var n=o(r);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}},e}(zc),Hc=(Uc=function(t,e){return(Uc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Uc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Jc=function(t){function e(e){var r=this,n=void 0!==e.hidpi&&e.hidpi;return(r=t.call(this,{cacheSize:e.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:De("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ao,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:n?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this).hidpi_=n,r.culture_=void 0!==e.culture?e.culture:"en-us",r.maxZoom_=void 0!==e.maxZoom?e.maxZoom:-1,r.apiKey_=e.key,r.imagerySet_=e.imagerySet,lc("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+r.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+r.apiKey_+"&c="+r.culture_,r.handleImageryMetadataResponse.bind(r),void 0,"jsonp"),r}return Hc(e,t),e.prototype.getApiKey=function(){return this.apiKey_},e.prototype.getImagerySet=function(){return this.imagerySet_},e.prototype.handleImageryMetadataResponse=function(t){if(200==t.statusCode&&"OK"==t.statusDescription&&"ValidCredentials"==t.authenticationResultCode&&1==t.resourceSets.length&&1==t.resourceSets[0].resources.length){var e=t.resourceSets[0].resources[0],r=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=Ru(this.getProjection()),i=this.hidpi_?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/i:[e.imageWidth/i,e.imageHeight/i],a=Tu({extent:n,minZoom:e.zoomMin,maxZoom:r,tileSize:o});this.tileGrid=a;var s=this.culture_,u=this.hidpi_;if(this.tileUrlFunction=ac(e.imageUrlSubdomains.map((function(t){var r=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",s);return function(t,e,i){if(t){bu(t[0],t[1],t[2],r);var o=n;return u&&(o+="&dpi=d1&device=mobile"),o.replace("{quadkey}",function(t){var e,r,n=t[0],i=new Array(n),o=1<<n-1;for(e=0;e<n;++e)r=48,t[1]&o&&(r+=1),t[2]&o&&(r+=2),i[e]=String.fromCharCode(r),o>>=1;return i.join("")}(r))}}}))),e.imageryProviders){var l=Ve(De("EPSG:4326"),this.getProjection());this.setAttributions(function(t){var r=[],n=t.viewState,i=this.getTileGrid(),o=i.getZForResolution(n.resolution,this.zDirection),a=i.getTileCoordForCoordAndZ(n.center,o)[0];return e.imageryProviders.map((function(e){for(var n=!1,i=e.coverageAreas,o=0,s=i.length;o<s;++o){var u=i[o];if(a>=u.zoomMin&&a<=u.zoomMax){var c=u.bbox;if(Wt(Xt([c[1],c[0],c[3],c[2]],l),t.extent)){n=!0;break}}}n&&r.push(e.attribution)})),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r}.bind(this))}this.setState(so)}else this.setState(uo)},e}(Kc),Qc=(qc=function(t,e){return(qc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}qc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),$c=function(t){function e(e){var r=e||{},n=void 0!==r.projection?r.projection:"EPSG:3857",i=void 0!==r.tileGrid?r.tileGrid:Tu({extent:Ru(n),maxResolution:r.maxResolution,maxZoom:r.maxZoom,minZoom:r.minZoom,tileSize:r.tileSize});return t.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,opaque:r.opaque,projection:n,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:r.tileLoadFunction,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this}return Qc(e,t),e}(Kc),th=(Zc=function(t,e){return(Zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Zc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),eh=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,maxZoom:void 0!==e.maxZoom?e.maxZoom:18,minZoom:e.minZoom,projection:e.projection,wrapX:e.wrapX})||this;return r.account_=e.account,r.mapId_=e.map||"",r.config_=e.config||{},r.templateCache_={},r.initializeMap_(),r}return th(e,t),e.prototype.getConfig=function(){return this.config_},e.prototype.updateConfig=function(t){p(this.config_,t),this.initializeMap_()},e.prototype.setConfig=function(t){this.config_=t||{},this.initializeMap_()},e.prototype.initializeMap_=function(){var t=JSON.stringify(this.config_);if(this.templateCache_[t])this.applyTemplate_(this.templateCache_[t]);else{var e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);var r=new XMLHttpRequest;r.addEventListener("load",this.handleInitResponse_.bind(this,t)),r.addEventListener("error",this.handleInitError_.bind(this)),r.open("POST",e),r.setRequestHeader("Content-type","application/json"),r.send(JSON.stringify(this.config_))}},e.prototype.handleInitResponse_=function(t,e){var r=e.target;if(!r.status||r.status>=200&&r.status<300){var n=void 0;try{n=JSON.parse(r.responseText)}catch(t){return void this.setState(uo)}this.applyTemplate_(n),this.templateCache_[t]=n,this.setState(so)}else this.setState(uo)},e.prototype.handleInitError_=function(t){this.setState(uo)},e.prototype.applyTemplate_=function(t){var e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)},e}($c),rh="addfeature",nh="changefeature",ih="removefeature",oh=r(0),ah=r.n(oh),sh=function(){function t(t){this.rbush_=new ah.a(t),this.items_={}}return t.prototype.insert=function(t,e){var r={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(r),this.items_[o(e)]=r},t.prototype.load=function(t,e){for(var r=new Array(e.length),n=0,i=e.length;n<i;n++){var a=t[n],s=e[n],u={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:s};r[n]=u,this.items_[o(s)]=u}this.rbush_.load(r)},t.prototype.remove=function(t){var e=o(t),r=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(r)},t.prototype.update=function(t,e){var r=this.items_[o(e)];Mt([r.minX,r.minY,r.maxX,r.maxY],t)||(this.remove(e),this.insert(t,e))},t.prototype.getAll=function(){return this.rbush_.all().map((function(t){return t.value}))},t.prototype.getInExtent=function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))},t.prototype.forEach=function(t){return this.forEach_(this.getAll(),t)},t.prototype.forEachInExtent=function(t,e){return this.forEach_(this.getInExtent(t),e)},t.prototype.forEach_=function(t,e){for(var r,n=0,i=t.length;n<i;n++)if(r=e(t[n]))return r;return r},t.prototype.isEmpty=function(){return y(this.items_)},t.prototype.clear=function(){this.rbush_.clear(),this.items_={}},t.prototype.getExtent=function(t){var e=this.rbush_.toJSON();return xt(e.minX,e.minY,e.maxX,e.maxY,t)},t.prototype.concat=function(t){for(var e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]},t}(),uh=(Xc=function(t,e){return(Xc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Xc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),lh=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return uh(e,t),e}(j),ch=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{attributions:n.attributions,projection:void 0,state:so,wrapX:void 0===n.wrapX||n.wrapX})||this).loader_=R,r.format_=n.format,r.overlaps_=void 0===n.overlaps||n.overlaps,r.url_=n.url,void 0!==n.loader?r.loader_=n.loader:void 0!==r.url_&&(ut(r.format_,7),r.loader_=gu(r.url_,r.format_)),r.strategy_=void 0!==n.strategy?n.strategy:yu;var i,o,a=void 0===n.useSpatialIndex||n.useSpatialIndex;return r.featuresRtree_=a?new sh:null,r.loadedExtentsRtree_=new sh,r.nullGeometryFeatures_={},r.idIndex_={},r.uidIndex_={},r.featureChangeKeys_={},r.featuresCollection_=null,Array.isArray(n.features)?o=n.features:n.features&&(o=(i=n.features).getArray()),a||void 0!==i||(i=new st(o)),void 0!==o&&r.addFeaturesInternal(o),void 0!==i&&r.bindFeaturesCollection_(i),r}return uh(e,t),e.prototype.addFeature=function(t){this.addFeatureInternal(t),this.changed()},e.prototype.addFeatureInternal=function(t){var e=o(t);if(this.addToIndex_(e,t)){this.setupChangeEvents_(e,t);var r=t.getGeometry();if(r){var n=r.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new lh(rh,t))}else this.featuresCollection_&&this.featuresCollection_.remove(t)},e.prototype.setupChangeEvents_=function(t,e){this.featureChangeKeys_[t]=[_(e,z,this.handleFeatureChange_,this),_(e,f,this.handleFeatureChange_,this)]},e.prototype.addToIndex_=function(t,e){var r=!0,n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?r=!1:this.idIndex_[n.toString()]=e),r&&(ut(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),r},e.prototype.addFeatures=function(t){this.addFeaturesInternal(t),this.changed()},e.prototype.addFeaturesInternal=function(t){for(var e=[],r=[],n=[],i=0,a=t.length;i<a;i++){var s=o(l=t[i]);this.addToIndex_(s,l)&&r.push(l)}i=0;for(var u=r.length;i<u;i++){var l;s=o(l=r[i]),this.setupChangeEvents_(s,l);var c=l.getGeometry();if(c){var h=c.getExtent();e.push(h),n.push(l)}else this.nullGeometryFeatures_[s]=l}this.featuresRtree_&&this.featuresRtree_.load(e,n),i=0;for(var f=r.length;i<f;i++)this.dispatchEvent(new lh(rh,r[i]))},e.prototype.bindFeaturesCollection_=function(t){var e=!1;this.addEventListener(rh,(function(r){e||(e=!0,t.push(r.feature),e=!1)})),this.addEventListener(ih,(function(r){e||(e=!0,t.remove(r.feature),e=!1)})),t.addEventListener(c,function(t){e||(e=!0,this.addFeature(t.element),e=!1)}.bind(this)),t.addEventListener(h,function(t){e||(e=!0,this.removeFeature(t.element),e=!1)}.bind(this)),this.featuresCollection_=t},e.prototype.clear=function(t){if(t){for(var e in this.featureChangeKeys_)this.featureChangeKeys_[e].forEach(m);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(var r in this.featuresRtree_.forEach(this.removeFeatureInternal.bind(this)),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};var n=new lh("clear");this.dispatchEvent(n),this.changed()},e.prototype.forEachFeature=function(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)},e.prototype.forEachFeatureAtCoordinateDirect=function(t,e){var r=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(r,(function(r){return r.getGeometry().intersectsCoordinate(t)?e(r):void 0}))},e.prototype.forEachFeatureInExtent=function(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)},e.prototype.forEachFeatureIntersectingExtent=function(t,e){return this.forEachFeatureInExtent(t,(function(r){if(r.getGeometry().intersectsExtent(t)){var n=e(r);if(n)return n}}))},e.prototype.getFeaturesCollection=function(){return this.featuresCollection_},e.prototype.getFeatures=function(){var t;return this.featuresCollection_?t=this.featuresCollection_.getArray():this.featuresRtree_&&(t=this.featuresRtree_.getAll(),y(this.nullGeometryFeatures_)||O(t,g(this.nullGeometryFeatures_))),t},e.prototype.getFeaturesAtCoordinate=function(t){var e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e},e.prototype.getFeaturesInExtent=function(t){return this.featuresRtree_?this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray():[]},e.prototype.getClosestFeatureToCoordinate=function(t,e){var r=t[0],n=t[1],i=null,o=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0],u=e||C;return this.featuresRtree_.forEachInExtent(s,(function(t){if(u(t)){var e=t.getGeometry(),l=a;if((a=e.closestPointXY(r,n,o,a))<l){i=t;var c=Math.sqrt(a);s[0]=r-c,s[1]=n-c,s[2]=r+c,s[3]=n+c}}})),i},e.prototype.getExtent=function(t){return this.featuresRtree_.getExtent(t)},e.prototype.getFeatureById=function(t){var e=this.idIndex_[t.toString()];return void 0!==e?e:null},e.prototype.getFeatureByUid=function(t){var e=this.uidIndex_[t];return void 0!==e?e:null},e.prototype.getFormat=function(){return this.format_},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.getUrl=function(){return this.url_},e.prototype.handleFeatureChange_=function(t){var e=t.target,r=o(e),n=e.getGeometry();if(n){var i=n.getExtent();r in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[r],this.featuresRtree_&&this.featuresRtree_.insert(i,e)):this.featuresRtree_&&this.featuresRtree_.update(i,e)}else r in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[r]=e);var a=e.getId();if(void 0!==a){var s=a.toString();this.idIndex_[s]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[s]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[r]=e;this.changed(),this.dispatchEvent(new lh(nh,e))},e.prototype.hasFeature=function(t){var e=t.getId();return void 0!==e?e in this.idIndex_:o(t)in this.uidIndex_},e.prototype.isEmpty=function(){return this.featuresRtree_.isEmpty()&&y(this.nullGeometryFeatures_)},e.prototype.loadFeatures=function(t,e,r){var n=this.loadedExtentsRtree_,i=this.strategy_(t,e);this.loading=!1;for(var o=function(t,o){var s=i[t];n.forEachInExtent(s,(function(t){return vt(t.extent,s)}))||(a.loader_.call(a,s,e,r),n.insert(s,{extent:s.slice()}),a.loading=a.loader_!==R)},a=this,s=0,u=i.length;s<u;++s)o(s)},e.prototype.refresh=function(){this.clear(!0),this.loadedExtentsRtree_.clear(),t.prototype.refresh.call(this)},e.prototype.removeLoadedExtent=function(t){var e,r=this.loadedExtentsRtree_;r.forEachInExtent(t,(function(r){if(Mt(r.extent,t))return e=r,!0})),e&&r.remove(e)},e.prototype.removeFeature=function(t){var e=o(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t),this.changed()},e.prototype.removeFeatureInternal=function(t){var e=o(t);this.featureChangeKeys_[e].forEach(m),delete this.featureChangeKeys_[e];var r=t.getId();void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new lh(ih,t))},e.prototype.removeFromIdIndex_=function(t){var e=!1;for(var r in this.idIndex_)if(this.idIndex_[r]===t){delete this.idIndex_[r],e=!0;break}return e},e.prototype.setLoader=function(t){this.loader_=t},e.prototype.setUrl=function(t){ut(this.format_,7),this.setLoader(gu(t,this.format_))},e}(Ac),hh=(Vc=function(t,e){return(Vc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Vc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),fh=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,wrapX:e.wrapX})||this;return r.resolution=void 0,r.distance=void 0!==e.distance?e.distance:20,r.features=[],r.geometryFunction=e.geometryFunction||function(t){var e=t.getGeometry();return ut(e.getType()==Qt.POINT,10),e},r.boundRefresh_=r.refresh.bind(r),r.setSource(e.source||null),r}return hh(e,t),e.prototype.clear=function(e){this.features.length=0,t.prototype.clear.call(this,e)},e.prototype.getDistance=function(){return this.distance},e.prototype.getSource=function(){return this.source},e.prototype.loadFeatures=function(t,e,r){this.source.loadFeatures(t,e,r),e!==this.resolution&&(this.clear(),this.resolution=e,this.cluster(),this.addFeatures(this.features))},e.prototype.setDistance=function(t){this.distance=t,this.refresh()},e.prototype.setSource=function(t){this.source&&this.source.removeEventListener(z,this.boundRefresh_),this.source=t,t&&t.addEventListener(z,this.boundRefresh_),this.refresh()},e.prototype.refresh=function(){this.clear(),this.cluster(),this.addFeatures(this.features)},e.prototype.cluster=function(){if(void 0!==this.resolution&&this.source)for(var t=[1/0,1/0,-1/0,-1/0],e=this.distance*this.resolution,r=this.source.getFeatures(),n={},i=0,a=r.length;i<a;i++){var s=r[i];if(!(o(s)in n)){var u=this.geometryFunction(s);if(u){Et(u.getCoordinates(),t),dt(t,e,t);var l=this.source.getFeaturesInExtent(t);l=l.filter((function(t){var e=o(t);return!(e in n)&&(n[e]=!0,!0)})),this.features.push(this.createCluster(l))}}}},e.prototype.createCluster=function(t){for(var e=[0,0],r=t.length-1;r>=0;--r){var n=this.geometryFunction(t[r]);n?bi(e,n.getCoordinates()):t.splice(r,1)}Mi(e,1/t.length);var i=new ht(new Wr(e));return i.set("features",t),i},e}(ch),ph=(Yc=function(t,e){return(Yc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Yc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),dh="default",gh=function(t){function e(e,r,n,i,o,a,s){var u=t.call(this,r,n,i,o,a,s)||this;return u.zoomifyImage_=null,u.tileSize_=e,u}return ph(e,t),e.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var e=t.prototype.getImage.call(this);if(2==this.state){var r=this.tileSize_;if(e.width==r[0]&&e.height==r[1])return this.zoomifyImage_=e,e;var n=Bi(r[0],r[1]);return n.drawImage(e,0,0),this.zoomifyImage_=n.canvas,n.canvas}return e},e}(yc),yh=function(t){function e(e){var r=this,n=e,i=n.size,o=void 0!==n.tierSizeCalculation?n.tierSizeCalculation:dh,a=n.tilePixelRatio||1,s=i[0],u=i[1],l=[],c=n.tileSize||256,h=c*a;switch(o){case dh:for(;s>h||u>h;)l.push([Math.ceil(s/h),Math.ceil(u/h)]),h+=h;break;case"truncated":for(var f=s,p=u;f>h||p>h;)l.push([Math.ceil(f/h),Math.ceil(p/h)]),f>>=1,p>>=1;break;default:ut(!1,53)}l.push([1,1]),l.reverse();for(var d=[a],g=[0],y=1,_=l.length;y<_;y++)d.push(a<<y),g.push(l[y-1][0]*l[y-1][1]+g[y-1]);d.reverse();var v=new Mu({tileSize:c,extent:n.extent||[0,-u,s,0],resolutions:d}),m=n.url;m&&-1==m.indexOf("{TileGroup}")&&-1==m.indexOf("{tileIndex}")&&(m+="{TileGroup}/{z}-{x}-{y}.jpg");var b=uc(m),w=c*a,x=ac(b.map((function(t){return function(e,r,n){if(e){var i=e[0],o=e[1],a=e[2],s=o+a*l[i][0],u={z:i,x:o,y:a,tileIndex:s,TileGroup:"TileGroup"+((s+g[i])/w|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return u[e]}))}}}))),S=gh.bind(null,go(c*a));(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,tilePixelRatio:a,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:S,tileGrid:v,tileUrlFunction:x,transition:n.transition})||this).zDirection=n.zDirection;var E=x(v.getTileCoordForCoordAndResolution(Ft(v.getExtent()),d[d.length-1]),1,null),O=new Image;return O.addEventListener("error",function(){w=c,this.changed()}.bind(r)),O.src=E,r}return ph(e,t),e}(Kc),_h=(Wc=function(t,e){return(Wc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Wc(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function vh(t){return t.toLocaleString("en",{maximumFractionDigits:10})}var mh,bh,wh=function(t){function e(e){var r=this,n=e||{},i=n.url||"";i+=i.lastIndexOf("/")===i.length-1||""===i?"":"/";var o=n.version||Versions.VERSION2,a=n.sizes||[],s=n.size;ut(null!=s&&Array.isArray(s)&&2==s.length&&!isNaN(s[0])&&s[0]>0&&!isNaN(s[1])&&s[1]>0,60);var u,l,c,h=s[0],f=s[1],p=n.tileSize,d=n.tilePixelRatio||1,g=n.format||"jpg",y=n.quality||(n.version==Versions.VERSION1?"native":"default"),_=n.resolutions||[],v=n.supports||[],m=n.extent||[0,-f,h,0],b=null!=a&&Array.isArray(a)&&a.length>0,w=void 0!==p&&("number"==typeof p&&Number.isInteger(p)&&p>0||Array.isArray(p)&&p.length>0),x=null!=v&&Array.isArray(v)&&(v.includes("regionByPx")||v.includes("regionByPct"))&&(v.includes("sizeByWh")||v.includes("sizeByH")||v.includes("sizeByW")||v.includes("sizeByPct"));if(_.sort((function(t,e){return e-t})),w||x)if(null!=p&&("number"==typeof p&&Number.isInteger(p)&&p>0?(u=p,l=p):Array.isArray(p)&&p.length>0&&((1==p.length||null==p[1]&&Number.isInteger(p[0]))&&(u=p[0],l=p[0]),2==p.length&&(Number.isInteger(p[0])&&Number.isInteger(p[1])?(u=p[0],l=p[1]):null==p[0]&&Number.isInteger(p[1])&&(u=p[1],l=p[1])))),void 0!==u&&void 0!==l||(u=256,l=256),0==_.length)for(var S=c=Math.max(Math.ceil(Math.log(h/u)/Math.LN2),Math.ceil(Math.log(f/l)/Math.LN2));S>=0;S--)_.push(Math.pow(2,S));else{var E=Math.max.apply(Math,_);c=Math.round(Math.log(E)/Math.LN2)}else if(u=h,l=f,_=[],b){a.sort((function(t,e){return t[0]-e[0]})),c=-1;var O=[];for(S=0;S<a.length;S++){var M=h/a[S][0];_.length>0&&_[_.length-1]==M?O.push(S):(_.push(M),c++)}if(O.length>0)for(S=0;S<O.length;S++)a.splice(O[S]-S,1)}else _.push(1),a.push([h,f]),c=0;var P=new Mu({tileSize:[u,l],extent:m,origin:Gt(m),resolutions:_}),T=gh.bind(null,go(p||256).map((function(t){return t*d})));return(r=t.call(this,{attributions:n.attributions,attributionsCollapsible:n.attributionsCollapsible,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,state:n.state,tileClass:T,tileGrid:P,tilePixelRatio:n.tilePixelRatio,tileUrlFunction:function(t,e,r){var n,s,p=t[0];if(!(p>c)){var d=t[1],m=t[2],S=_[p];if(!(void 0===d||void 0===m||void 0===S||d<0||Math.ceil(h/S/u)<=d||m<0||Math.ceil(f/S/l)<=m)){if(x||w){var E=d*u*S,O=m*l*S,M=u*S,P=l*S,T=u,C=l;E+M>h&&(M=h-E),O+P>f&&(P=f-O),E+u*S>h&&(T=Math.floor((h-E+S-1)/S)),O+l*S>f&&(C=Math.floor((f-O+S-1)/S)),0==E&&M==h&&0==O&&P==f?n="full":!x||v.includes("regionByPx")?n=E+","+O+","+M+","+P:v.includes("regionByPct")&&(n="pct:"+vh(E/h*100)+","+vh(O/f*100)+","+vh(M/h*100)+","+vh(P/f*100)),o!=Versions.VERSION3||x&&!v.includes("sizeByWh")?!x||v.includes("sizeByW")?s=T+",":v.includes("sizeByH")?s=","+C:v.includes("sizeByWh")?s=T+","+C:v.includes("sizeByPct")&&(s="pct:"+vh(100/S)):s=T+","+C}else if(n="full",b){var I=a[p][0],R=a[p][1];s=o==Versions.VERSION3?I==h&&R==f?"max":I+","+R:I==h?"full":I+","}else s=o==Versions.VERSION3?"max":"full";return i+n+"/"+s+"/0/"+y+"."+g}}},transition:n.transition})||this).zDirection=n.zDirection,r}return _h(e,t),e}(Kc),xh=(bh=function(t,e){return(bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}bh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Sh=function(t){function e(e,r,n,i,o,a){var s=this,u=e.getExtent(),l=r.getExtent(),c=l?zt(n,l):n,h=bc(e,r,Ft(c),i),f=new Oc(e,r,c,u,.5*h,i),p=a(f.calculateSourceExtent(),h,o),d=p?0:4,g=p?p.getPixelRatio():1;return(s=t.call(this,n,i,g,d)||this).targetProj_=r,s.maxSourceExtent_=u,s.triangulation_=f,s.targetResolution_=i,s.targetExtent_=n,s.sourceImage_=p,s.sourcePixelRatio_=g,s.canvas_=null,s.sourceListenerKey_=null,s}return xh(e,t),e.prototype.disposeInternal=function(){1==this.state&&this.unlistenSource_(),t.prototype.disposeInternal.call(this)},e.prototype.getImage=function(){return this.canvas_},e.prototype.getProjection=function(){return this.targetProj_},e.prototype.reproject_=function(){var t=this.sourceImage_.getState();if(2==t){var e=Ut(this.targetExtent_)/this.targetResolution_,r=Dt(this.targetExtent_)/this.targetResolution_;this.canvas_=xc(e,r,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0)}this.state=t,this.changed()},e.prototype.load=function(){if(0==this.state){this.state=1,this.changed();var t=this.sourceImage_.getState();2==t||3==t?this.reproject_():(this.sourceListenerKey_=_(this.sourceImage_,z,(function(t){var e=this.sourceImage_.getState();2!=e&&3!=e||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}},e.prototype.unlistenSource_=function(){m(this.sourceListenerKey_),this.sourceListenerKey_=null},e}(jl),Eh=(mh=function(t,e){return(mh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}mh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Oh=function(t){function e(e,r){var n=t.call(this,e)||this;return n.image=r,n}return Eh(e,t),e}(j);function Mh(t,e){t.getImage().src=e}var Ph=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,projection:e.projection,state:e.state})||this;return r.resolutions_=void 0!==e.resolutions?e.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return Eh(e,t),e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.findNearestResolution=function(t){if(this.resolutions_){var e=S(this.resolutions_,t,0);t=this.resolutions_[e]}return t},e.prototype.getImage=function(t,e,r,n){var i=this.getProjection();if(i&&n&&!Ye(i,n)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&Ye(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&Mt(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Sh(i,n,t,e,r,function(t,e,r){return this.getImageInternal(t,e,r,i)}.bind(this)),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return i&&(n=i),this.getImageInternal(t,e,r,n)},e.prototype.getImageInternal=function(t,e,r,i){return n()},e.prototype.handleImageChange=function(t){var e=t.target;switch(e.getState()){case 1:this.loading=!0,this.dispatchEvent(new Oh("imageloadstart",e));break;case 2:this.loading=!1,this.dispatchEvent(new Oh("imageloadend",e));break;case 3:this.loading=!1,this.dispatchEvent(new Oh("imageloaderror",e))}},e}(Ac);function Th(t,e){var r=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&r.push(t+"="+encodeURIComponent(e[t]))}));var n=r.join("&");return(t=-1===(t=t.replace(/[?&]$/,"")).indexOf("?")?t+"?":t+"&")+n}var Ch,Ih,Rh,Lh,Ah,kh,Fh,jh,Nh,Dh,zh,Gh,Bh,Uh,Wh=(Lh=function(t,e){return(Lh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Lh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Yh=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.hidpi_=void 0===n.hidpi||n.hidpi,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Mh,r.params_=n.params||{},r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return Wh(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&vt(i.getExtent(),t))return i;var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};p(o,this.params_);var a=((t=t.slice())[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.ratio_){var u=this.ratio_*Ut(t)/2,l=this.ratio_*Dt(t)/2;t[0]=a-u,t[1]=s-l,t[2]=a+u,t[3]=s+l}var c=e/r,h=Math.ceil(Ut(t)/c),f=Math.ceil(Dt(t)/c);t[0]=a-c*h/2,t[2]=a+c*h/2,t[1]=s-c*f/2,t[3]=s+c*f/2,this.imageSize_[0]=h,this.imageSize_[1]=f;var d=this.getRequestUrl_(t,this.imageSize_,r,n,o);return this.image_=new Bl(t,e,r,d,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(z,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){var o=n.getCode().split(":").pop();i.SIZE=e[0]+","+e[1],i.BBOX=t.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(90*r);var a=this.url_,s=a.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return s==a&&ut(!1,50),Th(s,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){p(this.params_,t),this.image_=null,this.changed()},e}(Ph),Vh=(Rh=function(t,e){return(Rh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Rh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Xh=function(t){function e(e,r,n,i,o){var a=this,s=void 0!==o?0:2;return(a=t.call(this,e,r,n,s)||this).loader_=void 0!==o?o:null,a.canvas_=i,a.error_=null,a}return Vh(e,t),e.prototype.getError=function(){return this.error_},e.prototype.handleLoad_=function(t){t?(this.error_=t,this.state=3):this.state=2,this.changed()},e.prototype.load=function(){0==this.state&&(this.state=1,this.changed(),this.loader_(this.handleLoad_.bind(this)))},e.prototype.getImage=function(){return this.canvas_},e}(jl),Zh=(Ih=function(t,e){return(Ih=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ih(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),qh=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions,state:n.state})||this).canvasFunction_=n.canvasFunction,r.canvas_=null,r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return Zh(e,t),e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e);var i=this.canvas_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&vt(i.getExtent(),t))return i;Vt(t=t.slice(),this.ratio_);var o=[Ut(t)/e*r,Dt(t)/e*r],a=this.canvasFunction_.call(this,t,e,r,o,n);return a&&(i=new Xh(t,e,r,a)),this.canvas_=i,this.renderedRevision_=this.getRevision(),i},e}(Ph),Kh=(Ch=function(t,e){return(Ch=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ch(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Hh=function(t){function e(e){var r=t.call(this,{projection:e.projection,resolutions:e.resolutions})||this;return r.crossOrigin_=void 0!==e.crossOrigin?e.crossOrigin:null,r.displayDpi_=void 0!==e.displayDpi?e.displayDpi:96,r.params_=e.params||{},r.url_=e.url,r.imageLoadFunction_=void 0!==e.imageLoadFunction?e.imageLoadFunction:Mh,r.hidpi_=void 0===e.hidpi||e.hidpi,r.metersPerUnit_=void 0!==e.metersPerUnit?e.metersPerUnit:1,r.ratio_=void 0!==e.ratio?e.ratio:1,r.useOverlay_=void 0!==e.useOverlay&&e.useOverlay,r.image_=null,r.renderedRevision_=0,r}return Kh(e,t),e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){e=this.findNearestResolution(e),r=this.hidpi_?r:1;var i=this.image_;if(i&&this.renderedRevision_==this.getRevision()&&i.getResolution()==e&&i.getPixelRatio()==r&&vt(i.getExtent(),t))return i;1!=this.ratio_&&Vt(t=t.slice(),this.ratio_);var o=[Ut(t)/e*r,Dt(t)/e*r];if(void 0!==this.url_){var a=this.getUrl(this.url_,this.params_,t,o,n);(i=new Bl(t,e,r,a,this.crossOrigin_,this.imageLoadFunction_)).addEventListener(z,this.handleImageChange.bind(this))}else i=null;return this.image_=i,this.renderedRevision_=this.getRevision(),i},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.updateParams=function(t){p(this.params_,t),this.changed()},e.prototype.getUrl=function(t,e,r,n,i){var o=function(t,e,r,n){var i=Ut(t),o=Dt(t),a=e[0],s=e[1],u=.0254/n;return s*i>a*o?i*r/(a*u):o*r/(s*u)}(r,n,this.metersPerUnit_,this.displayDpi_),a=Ft(r),s={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return p(s,e),Th(t,s)},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e}(Ph),Jh=(Uh=function(t,e){return(Uh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Uh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Qh=function(t){function e(e){var r=this,n=void 0!==e.crossOrigin?e.crossOrigin:null,i=void 0!==e.imageLoadFunction?e.imageLoadFunction:Mh;return(r=t.call(this,{attributions:e.attributions,projection:De(e.projection)})||this).url_=e.url,r.imageExtent_=e.imageExtent,r.image_=new Bl(r.imageExtent_,void 0,1,r.url_,n,i),r.imageSize_=e.imageSize?e.imageSize:null,r.image_.addEventListener(z,r.handleImageChange.bind(r)),r}return Jh(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,r,n){return Wt(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(2==this.image_.getState()){var r=this.image_.getExtent(),n=this.image_.getImage(),i=void 0,o=void 0;this.imageSize_?(i=this.imageSize_[0],o=this.imageSize_[1]):(i=n.width,o=n.height);var a=Dt(r)/o,s=Math.ceil(Ut(r)/a);if(s!=i){var u=Bi(s,o),l=u.canvas;u.drawImage(n,0,0,i,o,0,0,l.width,l.height),this.image_.setImage(l)}}t.prototype.handleImageChange.call(this,e)},e}(Ph),$h="carmentaserver",tf="geoserver",ef="mapserver",rf=(Bh=function(t,e){return(Bh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Bh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),nf=[101,101],of=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,projection:n.projection,resolutions:n.resolutions})||this).crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:null,r.url_=n.url,r.imageLoadFunction_=void 0!==n.imageLoadFunction?n.imageLoadFunction:Mh,r.params_=n.params||{},r.v13_=!0,r.updateV13_(),r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.image_=null,r.imageSize_=[0,0],r.renderedRevision_=0,r.ratio_=void 0!==n.ratio?n.ratio:1.5,r}return rf(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){if(void 0!==this.url_){var i=De(r),o=this.getProjection();o&&o!==i&&(e=bc(o,i,t,e),t=Ze(t,i,o));var a=Nt(t,e,0,nf),s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};p(s,this.params_,n);var u=Math.floor((t[0]-a[0])/e),l=Math.floor((a[3]-t[1])/e);return s[this.v13_?"I":"X"]=u,s[this.v13_?"J":"Y"]=l,this.getRequestUrl_(a,nf,1,o||i,s)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.url_){var r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return p(r,e),Th(this.url_,r)}},e.prototype.getParams=function(){return this.params_},e.prototype.getImageInternal=function(t,e,r,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==r||this.hidpi_&&void 0!==this.serverType_||(r=1);var i=e/r,o=Ft(t),a=Nt(o,i,0,[Math.ceil(Ut(t)/i),Math.ceil(Dt(t)/i)]),s=Nt(o,i,0,[Math.ceil(this.ratio_*Ut(t)/i),Math.ceil(this.ratio_*Dt(t)/i)]),u=this.image_;if(u&&this.renderedRevision_==this.getRevision()&&u.getResolution()==e&&u.getPixelRatio()==r&&vt(u.getExtent(),a))return u;var l={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};p(l,this.params_),this.imageSize_[0]=Math.round(Ut(s)/i),this.imageSize_[1]=Math.round(Dt(s)/i);var c=this.getRequestUrl_(s,this.imageSize_,r,n,l);return this.image_=new Bl(s,e,r,c,this.crossOrigin_,this.imageLoadFunction_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(z,this.handleImageChange.bind(this)),this.image_},e.prototype.getImageLoadFunction=function(){return this.imageLoadFunction_},e.prototype.getRequestUrl_=function(t,e,r,n,i){if(ut(void 0!==this.url_,9),i[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(i.STYLES=""),1!=r)switch(this.serverType_){case tf:var o=90*r+.5|0;"FORMAT_OPTIONS"in i?i.FORMAT_OPTIONS+=";dpi:"+o:i.FORMAT_OPTIONS="dpi:"+o;break;case ef:i.MAP_RESOLUTION=90*r;break;case $h:case"qgis":i.DPI=90*r;break;default:ut(!1,8)}i.WIDTH=e[0],i.HEIGHT=e[1];var a,s=n.getAxisOrientation();return a=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,i.BBOX=a.join(","),Th(this.url_,i)},e.prototype.getUrl=function(){return this.url_},e.prototype.setImageLoadFunction=function(t){this.image_=null,this.imageLoadFunction_=t,this.changed()},e.prototype.setUrl=function(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())},e.prototype.updateParams=function(t){p(this.params_,t),this.updateV13_(),this.image_=null,this.changed()},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=mi(t,"1.3")>=0},e}(Ph),af=(Gh=function(t,e){return(Gh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Gh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),sf='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.',uf=function(t){function e(e){var r,n=e||{};r=void 0!==n.attributions?n.attributions:[sf];var i=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",o=void 0!==n.url?n.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png";return t.call(this,{attributions:r,cacheSize:n.cacheSize,crossOrigin:i,opaque:void 0===n.opaque||n.opaque,maxZoom:void 0!==n.maxZoom?n.maxZoom:19,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileLoadFunction:n.tileLoadFunction,url:o,wrapX:n.wrapX,attributionsCollapsible:!1})||this}return af(e,t),e}($c),lf=r(3),cf=(zh=function(t,e){return(zh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}zh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),hf=function(t){function e(e){var r=e||{};return t.call(this,r)||this}return cf(e,t),e}(Co),ff=(Dh=function(t,e){return(Dh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Dh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),pf=function(t){function e(e){var r=t.call(this)||this;return r.boundHandleImageChange_=r.handleImageChange_.bind(r),r.layer_=e,r}return ff(e,t),e.prototype.getFeatures=function(t){return n()},e.prototype.prepareFrame=function(t){return n()},e.prototype.renderFrame=function(t,e){return n()},e.prototype.loadedTileCallback=function(t,e,r){t[e]||(t[e]={}),t[e][r.tileCoord.toString()]=r},e.prototype.createLoadedTileFinder=function(t,e,r){return function(n,i){var o=this.loadedTileCallback.bind(this,r,n);return t.forEachLoadedTile(e,n,i,o)}.bind(this)},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){},e.prototype.getDataAtPixel=function(t,e,r){return n()},e.prototype.getLayer=function(){return this.layer_},e.prototype.handleFontsChanged=function(){},e.prototype.handleImageChange_=function(t){2===t.target.getState()&&this.renderIfReadyAndVisible()},e.prototype.loadImage=function(t){var e=t.getState();return 2!=e&&3!=e&&t.addEventListener(z,this.boundHandleImageChange_),0==e&&(t.load(),e=t.getState()),2==e},e.prototype.renderIfReadyAndVisible=function(){var t=this.getLayer();t.getVisible()&&t.getSourceState()==so&&t.changed()},e}(J),df=(Nh=function(t,e){return(Nh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Nh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),gf=function(t){function e(e){var r=t.call(this,e)||this;return r.container=null,r.renderedResolution,r.tempTransform_=[1,0,0,1,0,0],r.pixelTransform=[1,0,0,1,0,0],r.inversePixelTransform=[1,0,0,1,0,0],r.context=null,r.containerReused=!1,r}return df(e,t),e.prototype.useContainer=function(t,e,r){var n,i,o=this.getLayer().getClassName();if(t&&""===t.style.opacity&&t.className===o&&(s=t.firstElementChild)instanceof HTMLCanvasElement&&(i=s.getContext("2d")),i&&i.canvas.style.transform===e?(this.container=t,this.context=i,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){(n=document.createElement("div")).className=o;var a=n.style;a.position="absolute",a.width="100%",a.height="100%";var s=(i=Bi()).canvas;n.appendChild(s),(a=s.style).position="absolute",a.left="0",a.transformOrigin="top left",this.container=n,this.context=i}},e.prototype.clip=function(t,e,r){var n=e.pixelRatio,i=e.size[0]*n/2,o=e.size[1]*n/2,a=e.viewState.rotation,s=Gt(r),u=Bt(r),l=kt(r),c=At(r);ur(e.coordinateToPixelTransform,s),ur(e.coordinateToPixelTransform,u),ur(e.coordinateToPixelTransform,l),ur(e.coordinateToPixelTransform,c),t.save(),Os(t,-a,i,o),t.beginPath(),t.moveTo(s[0]*n,s[1]*n),t.lineTo(u[0]*n,u[1]*n),t.lineTo(l[0]*n,l[1]*n),t.lineTo(c[0]*n,c[1]*n),t.clip(),Os(t,a,i,o)},e.prototype.clipUnrotated=function(t,e,r){var n=Gt(r),i=Bt(r),o=kt(r),a=At(r);ur(e.coordinateToPixelTransform,n),ur(e.coordinateToPixelTransform,i),ur(e.coordinateToPixelTransform,o),ur(e.coordinateToPixelTransform,a);var s=this.inversePixelTransform;ur(s,n),ur(s,i),ur(s,o),ur(s,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()},e.prototype.dispatchRenderEvent_=function(t,e,r){var n=this.getLayer();if(n.hasListener(t)){var i=new Ja(t,this.inversePixelTransform,r,e);n.dispatchEvent(i)}},e.prototype.preRender=function(t,e){this.dispatchRenderEvent_("prerender",t,e)},e.prototype.postRender=function(t,e){this.dispatchRenderEvent_(ri,t,e)},e.prototype.getRenderTransform=function(t,e,r,n,i,o,a){var s=i/2,u=o/2,l=n/e,c=-l,h=-t[0]+a,f=-t[1];return cr(this.tempTransform_,s,u,l,c,-r,h,f)},e.prototype.getDataAtPixel=function(t,e,r){var n,i=ur(this.inversePixelTransform,t.slice()),o=this.context;try{n=o.getImageData(Math.round(i[0]),Math.round(i[1]),1,1).data}catch(t){return"SecurityError"===t.name?new Uint8Array:n}return 0===n[3]?null:n},e}(pf),yf=(jh=function(t,e){return(jh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}jh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_f=function(t){function e(e){var r=t.call(this,e)||this;return r.image_=null,r}return yf(e,t),e.prototype.getImage=function(){return this.image_?this.image_.getImage():null},e.prototype.prepareFrame=function(t){var e=t.layerStatesArray[t.layerIndex],r=t.pixelRatio,n=t.viewState,i=n.resolution,o=this.getLayer().getSource(),a=t.viewHints,s=t.extent;if(void 0!==e.extent&&(s=zt(s,nr(e.extent,n.projection))),!a[0]&&!a[1]&&!Yt(s))if(o){var u=n.projection,l=o.getImage(s,i,r,u);l&&this.loadImage(l)&&(this.image_=l)}else this.image_=null;return!!this.image_},e.prototype.renderFrame=function(t,e){var r=this.image_,n=r.getExtent(),i=r.getResolution(),o=r.getPixelRatio(),a=t.layerStatesArray[t.layerIndex],s=t.pixelRatio,u=t.viewState,l=u.center,c=u.resolution,h=t.size,f=s*i/(c*o),p=Math.round(h[0]*s),d=Math.round(h[1]*s),g=u.rotation;if(g){var y=Math.round(Math.sqrt(p*p+d*d));p=y,d=y}cr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,g,-p/2,-d/2),hr(this.inversePixelTransform,this.pixelTransform);var _=Ts(this.pixelTransform);this.useContainer(e,_,a.opacity);var v=this.context,m=v.canvas;m.width!=p||m.height!=d?(m.width=p,m.height=d):this.containerReused||v.clearRect(0,0,p,d);var b=!1;if(a.extent){var w=nr(a.extent,u.projection);(b=!vt(w,t.extent)&&Wt(w,t.extent))&&this.clipUnrotated(v,t,w)}var x=r.getImage(),S=cr(this.tempTransform_,p/2,d/2,f,f,0,o*(n[0]-l[0])/i,o*(l[1]-n[3])/i);this.renderedResolution=i*s/o;var E=S[4],O=S[5],M=x.width*S[0],P=x.height*S[3];if(this.preRender(v,t),M>=.5&&P>=.5){var T=a.opacity,C=void 0;1!==T&&(C=this.context.globalAlpha,this.context.globalAlpha=T),this.context.drawImage(x,0,0,+x.width,+x.height,Math.round(E),Math.round(O),Math.round(M),Math.round(P)),1!==T&&(this.context.globalAlpha=C)}return this.postRender(v,t),b&&v.restore(),_!==m.style.transform&&(m.style.transform=_),this.container},e}(gf),vf=(Fh=function(t,e){return(Fh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Fh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),mf=function(t){function e(e){return t.call(this,e)||this}return vf(e,t),e.prototype.createRenderer=function(){return new _f(this)},e}(hf),bf="preload",wf="useInterimTilesOnError",xf=(kh=function(t,e){return(kh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}kh(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Sf=function(t){function e(e){var r=this,n=e||{},i=p({},n);return delete i.preload,delete i.useInterimTilesOnError,(r=t.call(this,i)||this).setPreload(void 0!==n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return xf(e,t),e.prototype.getPreload=function(){return this.get(bf)},e.prototype.setPreload=function(t){this.set(bf,t)},e.prototype.getUseInterimTilesOnError=function(){return this.get(wf)},e.prototype.setUseInterimTilesOnError=function(t){this.set(wf,t)},e}(Co),Ef=(Ah=function(t,e){return(Ah=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ah(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Of=function(t){function e(e){var r=t.call(this,e)||this;return r.extentChanged=!0,r.renderedExtent_=null,r.renderedPixelRatio,r.renderedProjection=null,r.renderedRevision,r.renderedTiles=[],r.newTiles_=!1,r.tmpExtent=[1/0,1/0,-1/0,-1/0],r.tmpTileRange_=new mu(0,0,0,0),r}return Ef(e,t),e.prototype.isDrawableTile=function(t){var e=this.getLayer(),r=t.getState(),n=e.getUseInterimTilesOnError();return 2==r||4==r||3==r&&!n},e.prototype.getTile=function(t,e,r,n){var i=n.pixelRatio,o=n.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,r,i,o);return 3==s.getState()&&(a.getUseInterimTilesOnError()?a.getPreload()>0&&(this.newTiles_=!0):s.setState(2)),this.isDrawableTile(s)||(s=s.getInterimTile()),s},e.prototype.loadedTileCallback=function(e,r,n){return!!this.isDrawableTile(n)&&t.prototype.loadedTileCallback.call(this,e,r,n)},e.prototype.prepareFrame=function(t){return!!this.getLayer().getSource()},e.prototype.renderFrame=function(t,e){var r=t.layerStatesArray[t.layerIndex],n=t.viewState,i=n.projection,a=n.resolution,s=n.center,u=n.rotation,l=t.pixelRatio,c=this.getLayer(),h=c.getSource(),f=h.getRevision(),p=h.getTileGridForProjection(i),d=p.getZForResolution(a,h.zDirection),g=p.getResolution(d),y=t.extent,_=r.extent&&nr(r.extent);_&&(y=zt(y,nr(r.extent)));var v=h.getTilePixelRatio(l),m=Math.round(t.size[0]*v),b=Math.round(t.size[1]*v);if(u){var x=Math.round(Math.sqrt(m*m+b*b));m=x,b=x}var S=g*m/2/v,E=g*b/2/v,O=[s[0]-S,s[1]-E,s[0]+S,s[1]+E],M=p.getTileRangeForExtentAndZ(y,d),P={};P[d]={};var T=this.createLoadedTileFinder(h,i,P),C=this.tmpExtent,I=this.tmpTileRange_;this.newTiles_=!1;for(var R=M.minX;R<=M.maxX;++R)for(var L=M.minY;L<=M.maxY;++L){var A=this.getTile(d,R,L,t);if(this.isDrawableTile(A)){var k=o(this);if(2==A.getState()){P[d][A.tileCoord.toString()]=A;var F=A.inTransition(k);this.newTiles_||!F&&-1!==this.renderedTiles.indexOf(A)||(this.newTiles_=!0)}if(1===A.getAlpha(k,t.time))continue}var j=p.getTileCoordChildTileRange(A.tileCoord,I,C),N=!1;j&&(N=T(d+1,j)),N||p.forEachTileCoordParentTileRange(A.tileCoord,T,I,C)}var D=g/a;cr(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/v,1/v,u,-m/2,-b/2);var z=Ts(this.pixelTransform);this.useContainer(e,z,r.opacity);var G=this.context,B=G.canvas;hr(this.inversePixelTransform,this.pixelTransform),cr(this.tempTransform_,m/2,b/2,D,D,0,-m/2,-b/2),B.width!=m||B.height!=b?(B.width=m,B.height=b):this.containerReused||G.clearRect(0,0,m,b),_&&this.clipUnrotated(G,t,_),this.preRender(G,t),this.renderedTiles.length=0;var U,W,Y,V=Object.keys(P).map(Number);V.sort(w),1!==r.opacity||this.containerReused&&!h.getOpaque(t.viewState.projection)?(U=[],W=[]):V=V.reverse();for(var X=V.length-1;X>=0;--X){var Z=V[X],q=h.getTilePixelSize(Z,l,i),K=p.getResolution(Z)/g,H=q[0]*K*D,J=q[1]*K*D,Q=p.getTileCoordForCoordAndZ(Gt(O),Z),$=p.getTileCoordExtent(Q),tt=ur(this.tempTransform_,[v*($[0]-O[0])/g,v*(O[3]-$[3])/g]),et=v*h.getGutterForProjection(i),rt=P[Z];for(var nt in rt){var it=(A=rt[nt]).tileCoord,ot=tt[0]-(Q[1]-it[1])*H,at=Math.round(ot+H),st=tt[1]-(Q[2]-it[2])*J,ut=Math.round(st+J),lt=at-(R=Math.round(ot)),ct=ut-(L=Math.round(st)),ht=d===Z;if(!(F=ht&&1!==A.getAlpha(o(this),t.time)))if(U){G.save(),Y=[R,L,R+lt,L,R+lt,L+ct,R,L+ct];for(var ft=0,pt=U.length;ft<pt;++ft)if(d!==Z&&Z<W[ft]){var dt=U[ft];G.beginPath(),G.moveTo(Y[0],Y[1]),G.lineTo(Y[2],Y[3]),G.lineTo(Y[4],Y[5]),G.lineTo(Y[6],Y[7]),G.moveTo(dt[6],dt[7]),G.lineTo(dt[4],dt[5]),G.lineTo(dt[2],dt[3]),G.lineTo(dt[0],dt[1]),G.clip()}U.push(Y),W.push(Z)}else G.clearRect(R,L,lt,ct);this.drawTileImage(A,t,R,L,lt,ct,et,ht,r.opacity),U&&!F&&G.restore(),this.renderedTiles.push(A),this.updateUsedTiles(t.usedTiles,h,A)}}return this.renderedRevision=f,this.renderedResolution=g,this.extentChanged=!this.renderedExtent_||!Mt(this.renderedExtent_,O),this.renderedExtent_=O,this.renderedPixelRatio=l,this.renderedProjection=i,this.manageTilePyramid(t,h,p,l,i,y,d,c.getPreload()),this.scheduleExpireCache(t,h),this.postRender(G,t),r.extent&&G.restore(),z!==B.style.transform&&(B.style.transform=z),this.container},e.prototype.drawTileImage=function(t,e,r,n,i,a,s,u,l){var c=this.getTileImage(t);if(c){var h=o(this),f=u?t.getAlpha(h,e.time):1,p=l*f,d=p!==this.context.globalAlpha;d&&(this.context.save(),this.context.globalAlpha=p),this.context.drawImage(c,s,s,c.width-2*s,c.height-2*s,r,n,i,a),d&&this.context.restore(),1!==f?e.animate=!0:u&&t.endTransition(h)}},e.prototype.getImage=function(){var t=this.context;return t?t.canvas:null},e.prototype.getTileImage=function(t){return t.getImage()},e.prototype.scheduleExpireCache=function(t,e){if(e.canExpireCache()){var r=function(t,e,r){var n=o(t);n in r.usedTiles&&t.expireCache(r.viewState.projection,r.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(r)}},e.prototype.updateUsedTiles=function(t,e,r){var n=o(e);n in t||(t[n]={}),t[n][r.getKey()]=!0},e.prototype.manageTilePyramid=function(t,e,r,n,i,a,s,u,l){var c=o(e);c in t.wantedTiles||(t.wantedTiles[c]={});var h,f,p,d,g,y,_=t.wantedTiles[c],v=t.tileQueue;for(y=r.getMinZoom();y<=s;++y)for(f=r.getTileRangeForExtentAndZ(a,y,f),p=r.getResolution(y),d=f.minX;d<=f.maxX;++d)for(g=f.minY;g<=f.maxY;++g)s-y<=u?(0==(h=e.getTile(y,d,g,n,i)).getState()&&(_[h.getKey()]=!0,v.isKeyQueued(h.getKey())||v.enqueue([h,c,r.getTileCoordCenter(h.tileCoord),p])),void 0!==l&&l(h)):e.useTile(y,d,g,i)},e}(gf);Of.prototype.getLayer;var Mf,Pf,Tf=Of,Cf=(Pf=function(t,e){return(Pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Pf(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),If=function(t){function e(e){return t.call(this,e)||this}return Cf(e,t),e.prototype.createRenderer=function(){return new Tf(this)},e}(Sf),Rf=(Mf=function(t,e){return(Mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Mf(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Lf=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.extent=r.extent,i.resolution=r.viewState.resolution/r.pixelRatio,i.data=n,i}return Rf(e,t),e}(j),Af=function(t){function e(e){var r=t.call(this,{projection:null})||this;r.worker_=null,r.operationType_=void 0!==e.operationType?e.operationType:"pixel",r.threads_=void 0!==e.threads?e.threads:1,r.layers_=function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=jf(t[n]);return r}(e.sources);for(var n,i=r.changed.bind(r),o=0,a=r.layers_.length;o<a;++o)r.layers_[o].addEventListener(z,i);return r.tileQueue_=new si((function(){return 1}),r.changed.bind(r)),r.requestedFrameState_,r.renderedImageCanvas_=null,r.renderedRevision_,r.frameState_={animate:!1,coordinateToPixelTransform:[1,0,0,1,0,0],extent:null,index:0,layerIndex:0,layerStatesArray:(n=r.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:[1,0,0,1,0,0],postRenderFunctions:[],size:[0,0],tileQueue:r.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},declutterItems:[]},r.setAttributions((function(t){for(var r=[],n=0,i=e.sources.length;n<i;++n){var o=e.sources[n],a=(o instanceof Ac?o:o.getSource()).getAttributions();if("function"==typeof a){var s=a(t);r.push.apply(r,s)}}return 0!==r.length?r:null})),void 0!==e.operation&&r.setOperation(e.operation,e.lib),r}return Rf(e,t),e.prototype.setOperation=function(t,e){this.worker_=new lf.Processor({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()},e.prototype.updateFrameState_=function(t,e,r){var n=p({},this.frameState_);n.viewState=p({},n.viewState);var i=Ft(t);n.extent=t.slice(),n.size[0]=Math.round(Ut(t)/e),n.size[1]=Math.round(Dt(t)/e),n.time=1/0;var o=n.viewState;return o.center=i,o.projection=r,o.resolution=e,n},e.prototype.allSourcesReady_=function(){for(var t=!0,e=0,r=this.layers_.length;e<r;++e)if(this.layers_[e].getSource().getState()!==so){t=!1;break}return t},e.prototype.getImage=function(t,e,r,n){if(!this.allSourcesReady_())return null;var i=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=i,this.renderedImageCanvas_){var o=this.renderedImageCanvas_.getResolution(),a=this.renderedImageCanvas_.getExtent();e===o&&Mt(t,a)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),i.tileQueue.loadMoreTiles(16,16),i.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_},e.prototype.processSources_=function(){for(var t=this.requestedFrameState_,e=this.layers_.length,r=new Array(e),n=0;n<e;++n){t.layerIndex=n;var i=Ff(this.layers_[n],t);if(!i)return;r[n]=i}var o={};this.dispatchEvent(new Lf("beforeoperations",t,o)),this.worker_.process(r,o,this.onWorkerComplete_.bind(this,t))},e.prototype.onWorkerComplete_=function(t,e,r,n){if(!e&&r){var i,o=t.extent,a=t.viewState.resolution;a===this.requestedFrameState_.viewState.resolution&&Mt(o,this.requestedFrameState_.extent)&&(this.renderedImageCanvas_?i=this.renderedImageCanvas_.getImage().getContext("2d"):(i=Bi(Math.round(Ut(o)/a),Math.round(Dt(o)/a)),this.renderedImageCanvas_=new Xh(o,a,1,i.canvas)),i.putImageData(r,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new Lf("afteroperations",t,n)))}},e.prototype.getImageInternal=function(){return null},e}(Ph),kf=null;function Ff(t,e){var r=t.getRenderer();if(!r)throw new Error("Unsupported layer type: "+t);if(!r.prepareFrame(e))return null;var n,i=e.size[0],o=e.size[1],a=r.renderFrame(e,null);if(a&&(n=a.firstElementChild),!(n instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+n);if(n.width===i&&n.height===o)return n.getContext("2d").getImageData(0,0,i,o);if(kf){var s=kf.canvas;s.width!==i||s.height!==o?kf=Bi(i,o):kf.clearRect(0,0,i,o)}else kf=Bi(i,o);return kf.drawImage(n,0,0,i,o),kf.getImageData(0,0,i,o)}function jf(t){var e;return t instanceof Ac?t instanceof Nc?e=new If({source:t}):t instanceof Ph&&(e=new mf({source:t})):e=t,e}var Nf,Df,zf=Af,Gf=(Df=function(t,e){return(Df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Df(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Bf=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',sf],Uf={terrain:{extension:"jpg",opaque:!0},"terrain-background":{extension:"jpg",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},Wf={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}},Yf=function(t){function e(e){var r=e.layer.indexOf("-"),n=-1==r?e.layer:e.layer.slice(0,r),i=Wf[n],o=Uf[e.layer],a=void 0!==e.url?e.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+e.layer+"/{z}/{x}/{y}."+o.extension;return t.call(this,{attributions:Bf,cacheSize:e.cacheSize,crossOrigin:"anonymous",maxZoom:null!=e.maxZoom?e.maxZoom:i.maxZoom,minZoom:null!=e.minZoom?e.minZoom:i.minZoom,opaque:o.opaque,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:a,wrapX:e.wrapX})||this}return Gf(e,t),e}($c),Vf=(Nf=function(t,e){return(Nf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Nf(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Xf(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var i=n.getTileCoordExtent(t,this.tmpExtent_),o=go(n.getTileSize(t[0]),this.tmpSize);1!=e&&(o=po(o,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return p(a,this.params_),this.getRequestUrl_(t,o,i,e,r,a)}}var Zf,qf,Kf,Hf=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:Xf,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).params_=n.params||{},r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.setKey(r.getKeyForParams_()),r}return Vf(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){var s=i.getCode().split(":").pop();return o.SIZE=e[0]+","+e[1],o.BBOX=r.join(","),o.BBOXSR=s,o.IMAGESR=s,o.DPI=Math.round(o.DPI?o.DPI*n:90*n),Th((1==a.length?a[0]:a[ue(Eu(t),a.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){p(this.params_,t),this.setKey(this.getKeyForParams_())},e}(Kc),Jf=(Kf=function(t,e){return(Kf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Kf(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Qf=function(t){function e(e,r,n){var i=t.call(this,e,2)||this;return i.tileSize_=r,i.text_=n,i.canvas_=null,i}return Jf(e,t),e.prototype.getImage=function(){if(this.canvas_)return this.canvas_;var t=this.tileSize_,e=Bi(t[0],t[1]);return e.strokeStyle="grey",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="grey",e.strokeStyle="white",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.lineWidth=4,e.strokeText(this.text_,t[0]/2,t[1]/2,t[0]),e.fillText(this.text_,t[0]/2,t[1]/2,t[0]),this.canvas_=e.canvas,e.canvas},e.prototype.load=function(){},e}(dc),$f=function(t){function e(e){var r=e||{};return t.call(this,{opaque:!1,projection:r.projection,tileGrid:r.tileGrid,wrapX:void 0===r.wrapX||r.wrapX,zDirection:r.zDirection})||this}return Jf(e,t),e.prototype.getTile=function(t,e,r){var n=wu(t,e,r);if(this.tileCache.containsKey(n))return this.tileCache.get(n);var i,o=go(this.tileGrid.getTileSize(t)),a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a);i=s?"z:"+s[0]+" x:"+s[1]+" y:"+s[2]:"none";var u=new Qf(a,o,i);return this.tileCache.set(n,u),u},e}($c),tp=(qf=function(t,e){return(qf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}qf(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ep=function(t){function e(e){var r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:De("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:ao,tileLoadFunction:e.tileLoadFunction,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition})||this;if(r.tileJSON_=null,r.tileSize_=e.tileSize,e.url)if(e.jsonp)lc(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):ut(!1,51);return r}return tp(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTileJSON=function(){return this.tileJSON_},e.prototype.handleTileJSONResponse=function(t){var e,r=De("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Ve(r,n);e=Xt(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=Tu({extent:Ru(n),maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=s,this.tileUrlFunction=oc(t.tiles,s),void 0!==t.attribution&&!this.getAttributions()){var u=void 0!==e?e:r.getExtent();this.setAttributions((function(e){return Wt(u,e.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState(so)},e.prototype.handleTileJSONError=function(){this.setState(uo)},e}(Kc),rp=(Zf=function(t,e){return(Zf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Zf(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function np(t,e,r){var n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(r)),!(n.getResolutions().length<=t[0])){1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);var i=n.getResolution(t[0]),o=n.getTileCoordExtent(t,this.tmpExtent_),a=go(n.getTileSize(t[0]),this.tmpSize),s=this.gutter_;0!==s&&(a=fo(a,s,this.tmpSize),o=dt(o,i*s,o)),1!=e&&(a=po(a,e,this.tmpSize));var u={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return p(u,this.params_),this.getRequestUrl_(t,a,o,e,r,u)}}var ip,op,ap,sp,up=function(t){function e(e){var r=this,n=e||{},i=n.params||{},o=!("TRANSPARENT"in i)||i.TRANSPARENT;return(r=t.call(this,{attributions:n.attributions,cacheSize:n.cacheSize,crossOrigin:n.crossOrigin,opaque:!o,projection:n.projection,reprojectionErrorThreshold:n.reprojectionErrorThreshold,tileClass:n.tileClass,tileGrid:n.tileGrid,tileLoadFunction:n.tileLoadFunction,tileUrlFunction:np,url:n.url,urls:n.urls,wrapX:void 0===n.wrapX||n.wrapX,transition:n.transition})||this).gutter_=void 0!==n.gutter?n.gutter:0,r.params_=i,r.v13_=!0,r.serverType_=n.serverType,r.hidpi_=void 0===n.hidpi||n.hidpi,r.tmpExtent_=[1/0,1/0,-1/0,-1/0],r.updateV13_(),r.setKey(r.getKeyForParams_()),r}return rp(e,t),e.prototype.getFeatureInfoUrl=function(t,e,r,n){var i=De(r),o=this.getProjection(),a=this.getTileGrid();a||(a=this.getTileGridForProjection(i));var s=a.getZForResolution(e,this.zDirection),u=a.getTileCoordForCoordAndZ(t,s);if(!(a.getResolutions().length<=u[0])){var l=a.getResolution(u[0]),c=a.getTileCoordExtent(u,this.tmpExtent_),h=go(a.getTileSize(u[0]),this.tmpSize),f=this.gutter_;0!==f&&(h=fo(h,f,this.tmpSize),c=dt(c,l*f,c)),o&&o!==i&&(l=bc(o,i,t,l),c=qe(c,i,o),t=Ze(t,i,o));var d={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};p(d,this.params_,n);var g=Math.floor((t[0]-c[0])/l),y=Math.floor((c[3]-t[1])/l);return d[this.v13_?"I":"X"]=g,d[this.v13_?"J":"Y"]=y,this.getRequestUrl_(u,h,c,1,o||i,d)}},e.prototype.getLegendUrl=function(t,e){if(void 0!==this.urls[0]){var r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){var n=this.params_.LAYERS;if(Array.isArray(n)&&1!==n.length)return;r.LAYER=n}if(void 0!==t){var i=this.getProjection()?this.getProjection().getMetersPerUnit():1;r.SCALE=t*i*39.37*(25.4/.28)}return p(r,e),Th(this.urls[0],r)}},e.prototype.getGutter=function(){return this.gutter_},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,n,i,o){var a=this.urls;if(a){if(o.WIDTH=e[0],o.HEIGHT=e[1],o[this.v13_?"CRS":"SRS"]=i.getCode(),"STYLES"in this.params_||(o.STYLES=""),1!=n)switch(this.serverType_){case tf:var s=90*n+.5|0;"FORMAT_OPTIONS"in o?o.FORMAT_OPTIONS+=";dpi:"+s:o.FORMAT_OPTIONS="dpi:"+s;break;case ef:o.MAP_RESOLUTION=90*n;break;case $h:case"qgis":o.DPI=90*n;break;default:ut(!1,52)}var u=i.getAxisOrientation(),l=r;if(this.v13_&&"ne"==u.substr(0,2)){var c=void 0;c=r[0],l[0]=r[1],l[1]=c,c=r[2],l[2]=r[3],l[3]=c}return o.BBOX=l.join(","),Th(1==a.length?a[0]:a[ue(Eu(t),a.length)],o)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_&&void 0!==this.serverType_?t:1},e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.updateParams=function(t){p(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())},e.prototype.updateV13_=function(){var t=this.params_.VERSION||"1.3.0";this.v13_=mi(t,"1.3")>=0},e}(Kc),lp=(sp=function(t,e){return(sp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}sp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),cp=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r)||this;return s.src_=n,s.extent_=i,s.preemptive_=o,s.grid_=null,s.keys_=null,s.data_=null,s.jsonp_=a,s}return lp(e,t),e.prototype.getImage=function(){return null},e.prototype.getData=function(t){if(!this.grid_||!this.keys_)return null;var e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),r=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-r)*this.grid_.length)];if("string"!=typeof n)return null;var i=n.charCodeAt(Math.floor(e*n.length));i>=93&&i--,i>=35&&i--;var o=null;if((i-=32)in this.keys_){var a=this.keys_[i];o=this.data_&&a in this.data_?this.data_[a]:a}return o},e.prototype.forDataAtCoordinate=function(t,e,r){4==this.state&&!0===r?(this.state=0,v(this,z,(function(r){e(this.getData(t))}),this),this.loadInternal_()):!0===r?setTimeout(function(){e(this.getData(t))}.bind(this),0):e(this.getData(t))},e.prototype.getKey=function(){return this.src_},e.prototype.handleError_=function(){this.state=3,this.changed()},e.prototype.handleLoad_=function(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=2,this.changed()},e.prototype.loadInternal_=function(){if(0==this.state)if(this.state=1,this.jsonp_)lc(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{var t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}},e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleError_()}this.handleLoad_(r)}else this.handleError_()},e.prototype.onXHRError_=function(t){this.handleError_()},e.prototype.load=function(){this.preemptive_?this.loadInternal_():this.setState(4)},e}(dc),hp=function(t){function e(e){var r=t.call(this,{projection:De("EPSG:3857"),state:ao})||this;if(r.preemptive_=void 0===e.preemptive||e.preemptive,r.tileUrlFunction_=sc,r.template_=void 0,r.jsonp_=e.jsonp||!1,e.url)if(r.jsonp_)lc(e.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",e.url),n.send()}else e.tileJSON?r.handleTileJSONResponse(e.tileJSON):ut(!1,51);return r}return lp(e,t),e.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var r=void 0;try{r=JSON.parse(e.responseText)}catch(t){return void this.handleTileJSONError()}this.handleTileJSONResponse(r)}else this.handleTileJSONError()},e.prototype.onXHRError_=function(t){this.handleTileJSONError()},e.prototype.getTemplate=function(){return this.template_},e.prototype.forDataAtCoordinateAndResolution=function(t,e,r,n){if(this.tileGrid){var i=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,i);this.getTile(o[0],o[1],o[2],1,this.getProjection()).forDataAtCoordinate(t,r,n)}else!0===n?setTimeout((function(){r(null)}),0):r(null)},e.prototype.handleTileJSONError=function(){this.setState(uo)},e.prototype.handleTileJSONResponse=function(t){var e,r=De("EPSG:4326"),n=this.getProjection();if(void 0!==t.bounds){var i=Ve(r,n);e=Xt(t.bounds,i)}var o=t.minzoom||0,a=t.maxzoom||22,s=Tu({extent:Ru(n),maxZoom:a,minZoom:o});this.tileGrid=s,this.template_=t.template;var u=t.grids;if(u){if(this.tileUrlFunction_=oc(u,s),void 0!==t.attribution){var l=void 0!==e?e:r.getExtent();this.setAttributions((function(e){return Wt(l,e.extent)?[t.attribution]:null}))}this.setState(so)}else this.setState(uo)},e.prototype.getTile=function(t,e,r,n,i){var o=wu(t,e,r);if(this.tileCache.containsKey(o))return this.tileCache.get(o);var a=[t,e,r],s=this.getTileCoordForTileUrlFunction(a,i),u=this.tileUrlFunction_(s,n,i),l=new cp(a,void 0!==u?0:4,void 0!==u?u:"",this.tileGrid.getTileCoordExtent(a),this.preemptive_,this.jsonp_);return this.tileCache.set(o,l),l},e.prototype.useTile=function(t,e,r){var n=wu(t,e,r);this.tileCache.containsKey(n)&&this.tileCache.get(n)},e}(Nc),fp=(ap=function(t,e){return(ap=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ap(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),pp=[],dp=function(t){function e(e,r,n,i){var o=t.call(this,e,r,{transition:0})||this;return o.context_={},o.executorGroups={},o.loadingSourceTiles=0,o.errorSourceTileKeys={},o.hitDetectionImageData={},o.replayState_={},o.sourceTiles=null,o.wantedResolution,o.getSourceTiles=i.bind(void 0,o),o.sourceZ=-1,o.hifi=!1,o.wrappedTileCoord=n,o}return fp(e,t),e.prototype.getContext=function(t){var e=o(t);return e in this.context_||(this.context_[e]=Bi(1,1,pp)),this.context_[e]},e.prototype.hasContext=function(t){return o(t)in this.context_},e.prototype.getImage=function(t){return this.hasContext(t)?this.getContext(t).canvas:null},e.prototype.getReplayState=function(t){var e=o(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedZ:-1,renderedTileZ:-1}),this.replayState_[e]},e.prototype.load=function(){this.getSourceTiles()},e.prototype.release=function(){for(var e in this.context_)pp.push(this.context_[e].canvas);t.prototype.release.call(this)},e}(dc),gp=(op=function(t,e){return(op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}op(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),yp=function(t){function e(e,r,n,i,o,a){var s=t.call(this,e,r,a)||this;return s.extent=null,s.format_=i,s.features_=null,s.loader_,s.projection=null,s.resolution,s.tileLoadFunction_=o,s.url_=n,s}return gp(e,t),e.prototype.getFormat=function(){return this.format_},e.prototype.getFeatures=function(){return this.features_},e.prototype.getKey=function(){return this.url_},e.prototype.load=function(){0==this.state&&(this.setState(1),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))},e.prototype.onLoad=function(t,e){this.setFeatures(t)},e.prototype.onError=function(){this.setState(3)},e.prototype.setFeatures=function(t){this.features_=t,this.setState(2)},e.prototype.setLoader=function(t){this.loader_=t},e}(dc),_p=(ip=function(t,e){return(ip=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ip(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),vp=function(t){function e(e){var r=this,n=e.projection||"EPSG:3857",i=e.extent||Ru(n),o=e.tileGrid||Tu({extent:i,maxResolution:e.maxResolution,maxZoom:void 0!==e.maxZoom?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});return(r=t.call(this,{attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,opaque:!1,projection:n,state:e.state,tileGrid:o,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:mp,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:void 0===e.zDirection?1:e.zDirection})||this).format_=e.format?e.format:null,r.loadingTiles_={},r.sourceTileCache=new mc(r.tileCache.highWaterMark),r.overlaps_=null==e.overlaps||e.overlaps,r.tileClass=e.tileClass?e.tileClass:yp,r.tileGrids_={},r}return _p(e,t),e.prototype.getFeaturesInExtent=function(t){var e=[],r=this.tileCache;if(0===r.getCount())return e;var n=Su(r.peekFirstKey())[0],i=this.tileGrid;return r.forEach((function(r){if(r.tileCoord[0]===n&&2===r.getState())for(var o=r.getSourceTiles(),a=0,s=o.length;a<s;++a){var u=o[a],l=u.tileCoord;if(Wt(t,i.getTileCoordExtent(l))){var c=u.getFeatures();if(c)for(var h=0,f=c.length;h<f;++h){var p=c[h],d=p.getGeometry();Wt(t,d.getExtent())&&e.push(p)}}}})),e},e.prototype.getOverlaps=function(){return this.overlaps_},e.prototype.clear=function(){this.tileCache.clear(),this.sourceTileCache.clear()},e.prototype.expireCache=function(e,r){t.prototype.expireCache.call(this,e,r),this.sourceTileCache.expireCache({})},e.prototype.getSourceTiles=function(t,e,r){var n=r.wrappedTileCoord,i=this.getTileGridForProjection(e),o=i.getTileCoordExtent(n),a=n[0],s=i.getResolution(a);dt(o,-s,o);var u=this.tileGrid,l=u.getExtent();l&&zt(o,l,o);var c,h,f,p=u.getZForResolution(s,1),d=u.getMinZoom(),g=r.sourceTiles;if(g&&g.length>0&&g[0].tileCoord[0]===p)c=g,h=!0,f=p;else{c=[],f=p+1;do{--f,h=!0,u.forEachTileCoord(o,f,function(n){var i,o=this.tileUrlFunction(n,t,e);if(void 0!==o)if(this.sourceTileCache.containsKey(o)){var a=(i=this.sourceTileCache.get(o)).getState();if(2===a||3===a||4===a)return void c.push(i)}else f===p&&((i=new this.tileClass(n,0,o,this.format_,this.tileLoadFunction)).extent=u.getTileCoordExtent(n),i.projection=e,i.resolution=u.getResolution(n[0]),this.sourceTileCache.set(o,i),i.addEventListener(z,this.handleTileChange.bind(this)),i.load());h=h&&i&&2===i.getState(),i&&4!==i.getState()&&0===r.getState()&&(r.loadingSourceTiles++,i.addEventListener(z,(function t(){var e=i.getState(),n=i.getKey();if(2===e||3===e){2===e?(i.removeEventListener(z,t),r.loadingSourceTiles--,delete r.errorSourceTileKeys[n]):3===e&&(r.errorSourceTileKeys[n]=!0);var o=Object.keys(r.errorSourceTileKeys).length;r.loadingSourceTiles-o==0&&(r.hifi=0===o,r.sourceZ=p,r.setState(2))}})))}.bind(this)),h||(c.length=0)}while(!h&&f>d)}return 0===r.getState()&&r.setState(1),h&&(r.hifi=p===f,r.sourceZ=f,r.getState()<2?r.setState(2):g&&P(c,g)||(r.sourceTiles=c)),c},e.prototype.getTile=function(t,e,r,n,i){var o,a=wu(t,e,r),s=this.getKey();if(this.tileCache.containsKey(a)&&(o=this.tileCache.get(a)).key===s)return o;var u=[t,e,r],l=this.getTileCoordForTileUrlFunction(u,i),c=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(i);if(l&&c){var f=h.getTileCoordExtent(l);dt(f,-h.getResolution(t),f),Wt(c,f)||(l=null)}var p=!0;if(null!==l){var d=this.tileGrid,g=h.getResolution(t),y=d.getZForResolution(g,1),_=h.getTileCoordExtent(l);dt(_,-g,_),d.forEachTileCoord(_,y,function(t){p=p&&!this.tileUrlFunction(t,n,i)}.bind(this))}var v=new dp(u,p?4:0,l,this.getSourceTiles.bind(this,n,i));return v.key=s,o?(v.interimTile=o,v.refreshInterimChain(),this.tileCache.replace(a,v)):this.tileCache.set(a,v),v},e.prototype.getTileGridForProjection=function(t){var e=t.getCode(),r=this.tileGrids_[e];if(!r){var n=this.tileGrid;r=Iu(t,void 0,n?n.getTileSize(n.getMinZoom()):void 0),this.tileGrids_[e]=r}return r},e.prototype.getTilePixelRatio=function(t){return t},e.prototype.getTilePixelSize=function(t,e,r){var n=go(this.getTileGridForProjection(r).getTileSize(t),this.tmpSize);return[Math.round(n[0]*e),Math.round(n[1]*e)]},e}(zc);function mp(t,e){var r=du(e,t.getFormat(),t.onLoad.bind(t),t.onError.bind(t));t.setLoader(r)}var bp,wp="KVP",xp=(bp=function(t,e){return(bp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}bp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Sp=function(t){function e(e){var r=this,n=void 0!==e.requestEncoding?e.requestEncoding:wp,i=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=uc(e.url)),(r=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:sc,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:"1.0.0",r.format_=void 0!==e.format?e.format:"image/jpeg",r.dimensions_=void 0!==e.dimensions?e.dimensions:{},r.layer_=e.layer,r.matrixSet_=e.matrixSet,r.style_=e.style,r.requestEncoding_=n,r.setKey(r.getKeyForDimensions_()),o&&o.length>0&&(r.tileUrlFunction=ac(o.map(Ep.bind(r)))),r}return xp(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join("\n");this.setTileUrlFunction(ac(t.map(Ep.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var r in this.dimensions_)e[t++]=r+"-"+this.dimensions_[r];return e.join("/")},e.prototype.updateDimensions=function(t){p(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}(Kc);function Ep(t){var e=this.requestEncoding_,r={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==wp&&p(r,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t=e==wp?Th(t,r):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}));var n=this.tileGrid,i=this.dimensions_;return function(r,o,a){if(r){var s={TileMatrix:n.getMatrixId(r[0]),TileCol:r[1],TileRow:r[2]};p(s,i);var u=t;return e==wp?Th(u,s):u.replace(/\{(\w+?)\}/g,(function(t,e){return s[e]}))}}}var Op,Mp,Pp,Tp,Cp,Ip,Rp,Lp=(Op=function(t,e){return(Op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Op(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ap="GENERATE_BUFFERS",kp=function(t){function e(e,r){var n=t.call(this,e)||this,i=r||{};return n.helper=new yl({postProcesses:i.postProcesses,uniforms:i.uniforms}),n}return Lp(e,t),e.prototype.disposeInternal=function(){this.helper.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getShaderCompileErrors=function(){return this.helper.getShaderCompileErrors()},e}(pf),Fp=new Blob(['var e="function"==typeof Object.assign?Object.assign:function(e,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1,o=arguments.length;r<o;++r){var i=arguments[r];if(null!=i)for(var f in i)i.hasOwnProperty(f)&&(t[f]=i[f])}return t},n="GENERATE_BUFFERS",t=[],r={vertexPosition:0,indexPosition:0};function o(e,n,t,r,o){e[n+0]=t,e[n+1]=r,e[n+2]=o}function i(e,n,i,f,s,u){var a=3+s,l=e[n+0],v=e[n+1],c=t;c.length=s;for(var g=0;g<c.length;g++)c[g]=e[n+2+g];var b=u?u.vertexPosition:0,h=u?u.indexPosition:0,d=b/a;return o(i,b,l,v,0),c.length&&i.set(c,b+3),o(i,b+=a,l,v,1),c.length&&i.set(c,b+3),o(i,b+=a,l,v,2),c.length&&i.set(c,b+3),o(i,b+=a,l,v,3),c.length&&i.set(c,b+3),b+=a,f[h++]=d,f[h++]=d+1,f[h++]=d+3,f[h++]=d+1,f[h++]=d+2,f[h++]=d+3,r.vertexPosition=b,r.indexPosition=h,r}var f=self;f.onmessage=function(t){var r=t.data;if(r.type===n){for(var o=r.customAttributesCount,s=2+o,u=new Float32Array(r.renderInstructions),a=u.length/s,l=4*a*(o+3),v=new Uint32Array(6*a),c=new Float32Array(l),g=null,b=0;b<u.length;b+=s)g=i(u,b,c,v,o,g);var h=e({vertexBuffer:c.buffer,indexBuffer:v.buffer,renderInstructions:u.buffer},r);f.postMessage(h,[c.buffer,v.buffer,u.buffer])}};'],{type:"application/javascript"}),jp=URL.createObjectURL(Fp),Np=(Rp=function(t,e){return(Rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Rp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Dp="renderOrder",zp=function(t){function e(e){var r=this,n=e||{},i=p({},n);return delete i.style,delete i.renderBuffer,delete i.updateWhileAnimating,delete i.updateWhileInteracting,(r=t.call(this,i)||this).declutter_=void 0!==n.declutter&&n.declutter,r.renderBuffer_=void 0!==n.renderBuffer?n.renderBuffer:100,r.style_=null,r.styleFunction_=void 0,r.setStyle(n.style),r.updateWhileAnimating_=void 0!==n.updateWhileAnimating&&n.updateWhileAnimating,r.updateWhileInteracting_=void 0!==n.updateWhileInteracting&&n.updateWhileInteracting,r}return Np(e,t),e.prototype.getDeclutter=function(){return this.declutter_},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderBuffer=function(){return this.renderBuffer_},e.prototype.getRenderOrder=function(){return this.get(Dp)},e.prototype.getStyle=function(){return this.style_},e.prototype.getStyleFunction=function(){return this.styleFunction_},e.prototype.getUpdateWhileAnimating=function(){return this.updateWhileAnimating_},e.prototype.getUpdateWhileInteracting=function(){return this.updateWhileInteracting_},e.prototype.setRenderOrder=function(t){this.set(Dp,t)},e.prototype.setStyle=function(t){this.style_=void 0!==t?t:$l,this.styleFunction_=null===t?void 0:function(t){var e,r;return"function"==typeof t?e=t:(Array.isArray(t)?r=t:(ut("function"==typeof t.getZIndex,41),r=[t]),e=function(){return r}),e}(this.style_),this.changed()},e}(Co),Gp=(Ip=function(t,e){return(Ip=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ip(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Bp=function(t){function e(e,r){var n=this,i=r.uniforms||{},a=[1,0,0,1,0,0];i.u_projectionMatrix=a,(n=t.call(this,e,{uniforms:i,postProcesses:r.postProcesses})||this).sourceRevision_=-1,n.verticesBuffer_=new ol(34962,35048),n.hitVerticesBuffer_=new ol(34962,35048),n.indicesBuffer_=new ol(34963,35048),n.program_=n.helper.getProgram(r.fragmentShader,r.vertexShader),n.hitDetectionEnabled_=!(!r.hitFragmentShader||!r.hitVertexShader),n.hitProgram_=n.hitDetectionEnabled_&&n.helper.getProgram(r.hitFragmentShader,r.hitVertexShader);var s=r.attributes?r.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:fl.FLOAT}})):[];n.attributes=[{name:"a_position",size:2,type:fl.FLOAT},{name:"a_index",size:1,type:fl.FLOAT}].concat(s),n.hitDetectionAttributes=[{name:"a_position",size:2,type:fl.FLOAT},{name:"a_index",size:1,type:fl.FLOAT},{name:"a_hitColor",size:4,type:fl.FLOAT},{name:"a_featureUid",size:1,type:fl.FLOAT}].concat(s),n.customAttributes=r.attributes?r.attributes:[],n.previousExtent_=[1/0,1/0,-1/0,-1/0],n.currentTransform_=a,n.renderTransform_=[1,0,0,1,0,0],n.invertRenderTransform_=[1,0,0,1,0,0],n.renderInstructions_=new Float32Array(0),n.hitRenderInstructions_=new Float32Array(0),n.hitRenderTarget_=n.hitDetectionEnabled_&&new vl(n.helper),n.worker_=new Worker(jp),n.worker_.addEventListener("message",function(t){var e=t.data;if(e.type===Ap){var r=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=r,hr(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):this.renderInstructions_=new Float32Array(t.data.renderInstructions),this.getLayer().changed()}}.bind(n)),n.featureCache_={},n.featureCount_=0;var u=n.getLayer().getSource();return n.sourceListenKeys_=[_(u,rh,n.handleSourceFeatureAdded_,n),_(u,nh,n.handleSourceFeatureChanged_,n),_(u,ih,n.handleSourceFeatureDelete_,n),_(u,"clear",n.handleSourceFeatureClear_,n)],u.forEachFeature(function(t){this.featureCache_[o(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}.bind(n)),n}return Gp(e,t),e.prototype.handleSourceFeatureAdded_=function(t){var e=t.feature;this.featureCache_[o(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++},e.prototype.handleSourceFeatureChanged_=function(t){var e=t.feature;this.featureCache_[o(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}},e.prototype.handleSourceFeatureDelete_=function(t){var e=t.feature;delete this.featureCache_[o(e)],this.featureCount_--},e.prototype.handleSourceFeatureClear_=function(){this.featureCache_={},this.featureCount_=0},e.prototype.renderFrame=function(t){var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e),this.helper.finalizeDraw(t);var r=this.helper.getCanvas(),n=t.layerStatesArray[t.layerIndex].opacity;return n!==parseFloat(r.style.opacity)&&(r.style.opacity=n),this.hitDetectionEnabled_&&(this.renderHitDetection(t),this.hitRenderTarget_.clearCachedData()),r},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource(),n=t.viewState,i=!t.viewHints[0]&&!t.viewHints[1],o=!Mt(this.previousExtent_,t.extent),a=this.sourceRevision_<r.getRevision();if(a&&(this.sourceRevision_=r.getRevision()),i&&(o||a)){var s=n.projection,u=n.resolution,l=e instanceof zp?e.getRenderBuffer():0,c=dt(t.extent,l*u);r.loadFeatures(c,u,s),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.makeProjectionTransform(t,this.currentTransform_),ar(this.currentTransform_,this.invertRenderTransform_),this.helper.useProgram(this.program_),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0},e.prototype.rebuildBuffers_=function(t){var e=[1,0,0,1,0,0];this.helper.makeProjectionTransform(t,e);var r,n,i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){var o=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===o||(this.hitRenderInstructions_=new Float32Array(o))}var a,s,u,l=[],c=[],h=0,f=0;for(var p in this.featureCache_)if((n=(r=this.featureCache_[p]).geometry)&&n.getType()===Qt.POINT){l[0]=n.getFlatCoordinates()[0],l[1]=n.getFlatCoordinates()[1],ur(e,l),s=f+6,u=void 0,(u=c||[])[0]=Math.floor(s/256/256/256)/255,u[1]=Math.floor(s/256/256)%256/255,u[2]=Math.floor(s/256)%256/255,u[3]=s%256/255,a=u,this.renderInstructions_[h++]=l[0],this.renderInstructions_[h++]=l[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=l[0],this.hitRenderInstructions_[f++]=l[1],this.hitRenderInstructions_[f++]=a[0],this.hitRenderInstructions_[f++]=a[1],this.hitRenderInstructions_[f++]=a[2],this.hitRenderInstructions_[f++]=a[3],this.hitRenderInstructions_[f++]=Number(p));for(var d=void 0,g=0;g<this.customAttributes.length;g++)d=this.customAttributes[g].callback(r.feature,r.properties),this.renderInstructions_[h++]=d,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[f++]=d)}var y={type:Ap,renderInstructions:this.renderInstructions_.buffer,customAttributesCount:this.customAttributes.length};if(y.projectionTransform=e,this.worker_.postMessage(y,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){var _={type:Ap,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesCount:5+this.customAttributes.length};_.projectionTransform=e,_.hitDetection=!0,this.worker_.postMessage(_,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(ut(this.hitDetectionEnabled_,66),this.hitRenderInstructions_){var o=ur(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),s=function(t){var e=0;return e+=Math.round(256*t[0]*256*256*255),e+=Math.round(256*t[1]*256*255),(e+=Math.round(256*t[2]*255))+Math.round(255*t[3])}([a[0]/255,a[1]/255,a[2]/255,a[3]/255]),u=this.hitRenderInstructions_[s],l=Math.floor(u).toString(),c=this.getLayer().getSource().getFeatureByUid(l);return c?n(c,this.getLayer()):void 0}},e.prototype.renderHitDetection=function(t){if(this.hitVerticesBuffer_.getSize()){this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);var e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}},e.prototype.disposeInternal=function(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){m(t)})),this.sourceListenKeys_=null,t.prototype.disposeInternal.call(this)},e}(kp),Up={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Wp=[Up.FILL],Yp=[Up.STROKE],Vp=[Up.BEGIN_PATH],Xp=[Up.CLOSE_PATH],Zp=Up,qp=(Cp=function(t,e){return(Cp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Cp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Kp=function(t){function e(e,r,n,i){var o=t.call(this)||this;return o.tolerance=e,o.maxExtent=r,o.pixelRatio=i,o.maxLineWidth=0,o.resolution=n,o.beginGeometryInstruction1_=null,o.beginGeometryInstruction2_=null,o.bufferedMaxExtent_=null,o.instructions=[],o.coordinates=[],o.tmpCoordinate_=[],o.hitDetectionInstructions=[],o.state={},o}return qp(e,t),e.prototype.applyPixelRatio=function(t){var e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))},e.prototype.appendFlatCoordinates=function(t,e,r,n,i,o){var a=this.coordinates.length,s=this.getBufferedMaxExtent();o&&(e+=n);var u,l,c,h=t[e],f=t[e+1],p=this.tmpCoordinate_,d=!0;for(u=e+n;u<r;u+=n)p[0]=t[u],p[1]=t[u+1],(c=bt(s,p))!==l?(d&&(this.coordinates[a++]=h,this.coordinates[a++]=f),this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):1===c?(this.coordinates[a++]=p[0],this.coordinates[a++]=p[1],d=!1):d=!0,h=p[0],f=p[1],l=c;return(i&&d||u===e+n)&&(this.coordinates[a++]=h,this.coordinates[a++]=f),a},e.prototype.drawCustomCoordinates_=function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=this.appendFlatCoordinates(t,e,s,n,!1,!1);i.push(u),e=s}return e},e.prototype.drawCustom=function(t,e,r){this.beginGeometry(t,e);var n,i,o,a,s,u=t.getType(),l=t.getStride(),c=this.coordinates.length;if(u==Qt.MULTI_POLYGON){n=(t=t).getOrientedFlatCoordinates(),a=[];var h=t.getEndss();s=0;for(var f=0,p=h.length;f<p;++f){var d=[];s=this.drawCustomCoordinates_(n,s,h[f],l,d),a.push(d)}this.instructions.push([Zp.CUSTOM,c,a,t,r,Ar])}else u==Qt.POLYGON||u==Qt.MULTI_LINE_STRING?(o=[],n=u==Qt.POLYGON?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),s=this.drawCustomCoordinates_(n,0,t.getEnds(),l,o),this.instructions.push([Zp.CUSTOM,c,o,t,r,Lr])):u==Qt.LINE_STRING||u==Qt.MULTI_POINT?(n=t.getFlatCoordinates(),i=this.appendFlatCoordinates(n,0,n.length,l,!1,!1),this.instructions.push([Zp.CUSTOM,c,i,t,r,Rr])):u==Qt.POINT&&(n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),i=this.coordinates.length,this.instructions.push([Zp.CUSTOM,c,i,t,r]));this.endGeometry(e)},e.prototype.beginGeometry=function(t,e){var r=t.getExtent();this.beginGeometryInstruction1_=[Zp.BEGIN_GEOMETRY,e,0,r],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Zp.BEGIN_GEOMETRY,e,0,r],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)},e.prototype.finish=function(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}},e.prototype.reverseHitDetectionInstructions=function(){var t,e=this.hitDetectionInstructions;e.reverse();var r,n,i=e.length,o=-1;for(t=0;t<i;++t)(n=(r=e[t])[0])==Zp.END_GEOMETRY?o=t:n==Zp.BEGIN_GEOMETRY&&(r[2]=t,E(this.hitDetectionInstructions,o,t),o=-1)},e.prototype.setFillStrokeStyle=function(t,e){var r=this.state;if(t){var n=t.getColor();r.fillStyle=ls(n||"#000")}else r.fillStyle=void 0;if(e){var i=e.getColor();r.strokeStyle=ls(i||"#000");var o=e.getLineCap();r.lineCap=void 0!==o?o:"round";var a=e.getLineDash();r.lineDash=a?a.slice():hs;var s=e.getLineDashOffset();r.lineDashOffset=s||0;var u=e.getLineJoin();r.lineJoin=void 0!==u?u:"round";var l=e.getWidth();r.lineWidth=void 0!==l?l:1;var c=e.getMiterLimit();r.miterLimit=void 0!==c?c:10,r.lineWidth>this.maxLineWidth&&(this.maxLineWidth=r.lineWidth,this.bufferedMaxExtent_=null)}else r.strokeStyle=void 0,r.lineCap=void 0,r.lineDash=null,r.lineDashOffset=void 0,r.lineJoin=void 0,r.lineWidth=void 0,r.miterLimit=void 0},e.prototype.createFill=function(t){var e=t.fillStyle,r=[Zp.SET_FILL_STYLE,e];return"string"!=typeof e&&r.push(!0),r},e.prototype.applyStroke=function(t){this.instructions.push(this.createStroke(t))},e.prototype.createStroke=function(t){return[Zp.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]},e.prototype.updateFillStyle=function(t,e){var r=t.fillStyle;"string"==typeof r&&t.currentFillStyle==r||(void 0!==r&&this.instructions.push(e.call(this,t)),t.currentFillStyle=r)},e.prototype.updateStrokeStyle=function(t,e){var r=t.strokeStyle,n=t.lineCap,i=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,u=t.miterLimit;(t.currentStrokeStyle!=r||t.currentLineCap!=n||i!=t.currentLineDash&&!P(t.currentLineDash,i)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=s||t.currentMiterLimit!=u)&&(void 0!==r&&e.call(this,t),t.currentStrokeStyle=r,t.currentLineCap=n,t.currentLineDash=i,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=u)},e.prototype.endGeometry=function(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;var e=[Zp.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)},e.prototype.getBufferedMaxExtent=function(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=gt(this.maxExtent),this.maxLineWidth>0)){var t=this.resolution*(this.maxLineWidth+1)/2;dt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_},e}(cs),Hp=(Tp=function(t,e){return(Tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Tp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Jp=function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_=null,o.hitDetectionImage_=null,o.image_=null,o.anchorX_=void 0,o.anchorY_=void 0,o.height_=void 0,o.opacity_=void 0,o.originX_=void 0,o.originY_=void 0,o.rotateWithView_=void 0,o.rotation_=void 0,o.scale_=void 0,o.width_=void 0,o}return Hp(e,t),e.prototype.drawCoordinates_=function(t,e,r,n){return this.appendFlatCoordinates(t,e,r,n,!1,!1)},e.prototype.drawPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([Zp.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Zp.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.drawMultiPoint=function(t,e){if(this.image_){this.beginGeometry(t,e);var r=t.getFlatCoordinates(),n=t.getStride(),i=this.coordinates.length,o=this.drawCoordinates_(r,0,r.length,n);this.instructions.push([Zp.DRAW_IMAGE,i,o,this.image_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_*this.pixelRatio,this.width_]),this.hitDetectionInstructions.push([Zp.DRAW_IMAGE,i,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.declutterGroups_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_]),this.endGeometry(e)}},e.prototype.finish=function(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,t.prototype.finish.call(this)},e.prototype.setImageStyle=function(t,e){var r=t.getAnchor(),n=t.getSize(),i=t.getHitDetectionImage(1),o=t.getImage(1),a=t.getOrigin();this.anchorX_=r[0],this.anchorY_=r[1],this.declutterGroups_=e,this.hitDetectionImage_=i,this.image_=o,this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=a[0],this.originY_=a[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScale(),this.width_=n[0]},e}(Kp),Qp=(Pp=function(t,e){return(Pp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Pp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),$p=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return Qp(e,t),e.prototype.drawFlatCoordinates_=function(t,e,r,n){var i=this.coordinates.length,o=this.appendFlatCoordinates(t,e,r,n,!1,!1),a=[Zp.MOVE_TO_LINE_TO,i,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),r},e.prototype.drawLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Zp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],Vp);var o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Yp),this.endGeometry(e)}},e.prototype.drawMultiLineString=function(t,e){var r=this.state,n=r.strokeStyle,i=r.lineWidth;if(void 0!==n&&void 0!==i){this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([Zp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset],Vp);for(var o=t.getEnds(),a=t.getFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinates_(a,u,o[l],s);this.hitDetectionInstructions.push(Yp),this.endGeometry(e)}},e.prototype.finish=function(){var e=this.state;return null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Yp),this.reverseHitDetectionInstructions(),this.state=null,t.prototype.finish.call(this)},e.prototype.applyStroke=function(e){null!=e.lastStroke&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Yp),e.lastStroke=this.coordinates.length),e.lastStroke=0,t.prototype.applyStroke.call(this,e),this.instructions.push(Vp)},e}(Kp),td=(Mp=function(t,e){return(Mp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Mp(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ed=function(t){function e(e,r,n,i){return t.call(this,e,r,n,i)||this}return td(e,t),e.prototype.drawFlatCoordinatess_=function(t,e,r,n){var i=this.state,o=void 0!==i.fillStyle,a=void 0!==i.strokeStyle,s=r.length;this.instructions.push(Vp),this.hitDetectionInstructions.push(Vp);for(var u=0;u<s;++u){var l=r[u],c=this.coordinates.length,h=this.appendFlatCoordinates(t,e,l,n,!0,!a),f=[Zp.MOVE_TO_LINE_TO,c,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(Xp),this.hitDetectionInstructions.push(Xp)),e=l}return o&&(this.instructions.push(Wp),this.hitDetectionInstructions.push(Wp)),a&&(this.instructions.push(Yp),this.hitDetectionInstructions.push(Yp)),e},e.prototype.drawCircle=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Zp.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Zp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getFlatCoordinates(),a=t.getStride(),s=this.coordinates.length;this.appendFlatCoordinates(o,0,o.length,a,!1,!1);var u=[Zp.CIRCLE,s];this.instructions.push(Vp,u),this.hitDetectionInstructions.push(Vp,u),void 0!==r.fillStyle&&(this.instructions.push(Wp),this.hitDetectionInstructions.push(Wp)),void 0!==r.strokeStyle&&(this.instructions.push(Yp),this.hitDetectionInstructions.push(Yp)),this.endGeometry(e)}},e.prototype.drawPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Zp.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Zp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);var o=t.getEnds(),a=t.getOrientedFlatCoordinates(),s=t.getStride();this.drawFlatCoordinatess_(a,0,o,s),this.endGeometry(e)}},e.prototype.drawMultiPolygon=function(t,e){var r=this.state,n=r.fillStyle,i=r.strokeStyle;if(void 0!==n||void 0!==i){this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==r.fillStyle&&this.hitDetectionInstructions.push([Zp.SET_FILL_STYLE,"#000"]),void 0!==r.strokeStyle&&this.hitDetectionInstructions.push([Zp.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,r.lineDash,r.lineDashOffset]);for(var o=t.getEndss(),a=t.getOrientedFlatCoordinates(),s=t.getStride(),u=0,l=0,c=o.length;l<c;++l)u=this.drawFlatCoordinatess_(a,u,o[l],s);this.endGeometry(e)}},e.prototype.finish=function(){this.reverseHitDetectionInstructions(),this.state=null;var e=this.tolerance;if(0!==e)for(var r=this.coordinates,n=0,i=r.length;n<i;++n)r[n]=Fr(r[n],e);return t.prototype.finish.call(this)},e.prototype.setFillStrokeStyles_=function(){var t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)},e}(Kp);function rd(t,e,r,n,i){var o,a,s,u,l,c,h,f,p,d=r,g=r,y=0,_=0,v=r;for(o=r;o<n;o+=i){var m=e[o],b=e[o+1];void 0!==u&&(f=m-u,p=b-l,s=Math.sqrt(f*f+p*p),void 0!==c&&(_+=a,Math.acos((c*f+h*p)/(a*s))>t&&(_>y&&(y=_,d=v,g=o),_=0,v=o-i)),a=s,c=f,h=p),u=m,l=b}return(_+=s)>y?[v,o]:[d,g]}var nd,id=(nd=function(t,e){return(nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}nd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),od={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},ad={Circle:ed,Default:Kp,Image:Jp,LineString:$p,Polygon:ed,Text:function(t){function e(e,r,n,i){var o=t.call(this,e,r,n,i)||this;return o.declutterGroups_,o.labels_=null,o.text_="",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_="",o.fillKey_="",o.strokeKey_="",o}return id(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var r=this.textFillState_,n=this.textStrokeState_,i=this.textState_;if(""!==this.text_&&i&&(r||n)){var o,a,s=this.coordinates.length,u=t.getType(),l=null,c=2,h=2;if("line"===i.placement){if(!Wt(this.getBufferedMaxExtent(),t.getExtent()))return;var f=void 0;if(l=t.getFlatCoordinates(),h=t.getStride(),u==Qt.LINE_STRING)f=[l.length];else if(u==Qt.MULTI_LINE_STRING)f=t.getEnds();else if(u==Qt.POLYGON)f=t.getEnds().slice(0,1);else if(u==Qt.MULTI_POLYGON){var p=t.getEndss();for(f=[],o=0,a=p.length;o<a;++o)f.push(p[o][0])}this.beginGeometry(t,e);for(var d=i.textAlign,g=0,y=void 0,_=0,v=f.length;_<v;++_){if(null==d){var m=rd(i.maxAngle,l,g,f[_],h);g=m[0],y=m[1]}else y=f[_];for(o=g;o<y;o+=h)this.coordinates.push(l[o],l[o+1]);c=this.coordinates.length,g=f[_];var b=this.declutterGroups_?0===_?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(s,c,b),s=c}this.endGeometry(e)}else{var w=null;switch(i.overflow||(w=[]),u){case Qt.POINT:case Qt.MULTI_POINT:c=(l=t.getFlatCoordinates()).length;break;case Qt.LINE_STRING:l=t.getFlatMidpoint();break;case Qt.CIRCLE:l=t.getCenter();break;case Qt.MULTI_LINE_STRING:c=(l=t.getFlatMidpoints()).length;break;case Qt.POLYGON:l=t.getFlatInteriorPoint(),i.overflow||w.push(l[2]/this.resolution),h=3;break;case Qt.MULTI_POLYGON:var x=t.getFlatInteriorPoints();for(l=[],o=0,a=x.length;o<a;o+=3)i.overflow||w.push(x[o+2]/this.resolution),l.push(x[o],x[o+1]);if(0==(c=l.length))return}c=this.appendFlatCoordinates(l,0,c,h,!1,!1),this.saveTextStates_(),(i.backgroundFill||i.backgroundStroke)&&(this.setFillStrokeStyle(i.backgroundFill,i.backgroundStroke),i.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),i.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var S=this.pixelRatio;this.instructions.push([Zp.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,i.padding==fs?fs:i.padding.map((function(t){return t*S})),!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.hitDetectionInstructions.push([Zp.DRAW_IMAGE,s,c,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,i.padding,!!i.backgroundFill,!!i.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,w]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,r=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var i=this.textKey_;i in this.textStates||(this.textStates[i]={font:e.font,textAlign:e.textAlign||"center",textBaseline:e.textBaseline||"middle",scale:e.scale});var o=this.fillKey_;r&&(o in this.fillStates||(this.fillStates[o]={fillStyle:r.fillStyle}))},e.prototype.drawChars_=function(t,e,r){var n=this.textStrokeState_,i=this.textState_,o=this.strokeKey_,a=this.textKey_,s=this.fillKey_;this.saveTextStates_();var u=this.pixelRatio,l=od[i.textBaseline],c=this.textOffsetY_*u,h=this.text_,f=i.scale,p=n?n.lineWidth*f/2:0;this.instructions.push([Zp.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,u,c,o,p*u,h,a,1]),this.hitDetectionInstructions.push([Zp.DRAW_CHARS,t,e,l,r,i.overflow,s,i.maxAngle,1,c,o,p,h,a,1/u])},e.prototype.setTextStyle=function(t,e){var r,n,i;if(t){this.declutterGroups_=e;var a=t.getFill();a?((n=this.textFillState_)||(n={},this.textFillState_=n),n.fillStyle=ls(a.getColor()||"#000")):(n=null,this.textFillState_=n);var s=t.getStroke();if(s){(i=this.textStrokeState_)||(i={},this.textStrokeState_=i);var u=s.getLineDash(),l=s.getLineDashOffset(),c=s.getWidth(),h=s.getMiterLimit();i.lineCap=s.getLineCap()||"round",i.lineDash=u?u.slice():hs,i.lineDashOffset=void 0===l?0:l,i.lineJoin=s.getLineJoin()||"round",i.lineWidth=void 0===c?1:c,i.miterLimit=void 0===h?10:h,i.strokeStyle=ls(s.getColor()||"#000")}else i=null,this.textStrokeState_=i;r=this.textState_;var f=t.getFont()||"10px sans-serif";bs(f);var p=t.getScale();r.overflow=t.getOverflow(),r.font=f,r.maxAngle=t.getMaxAngle(),r.placement=t.getPlacement(),r.textAlign=t.getTextAlign(),r.textBaseline=t.getTextBaseline()||"middle",r.backgroundFill=t.getBackgroundFill(),r.backgroundStroke=t.getBackgroundStroke(),r.padding=t.getPadding()||fs,r.scale=void 0===p?1:p;var d=t.getOffsetX(),g=t.getOffsetY(),y=t.getRotateWithView(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===d?0:d,this.textOffsetY_=void 0===g?0:g,this.textRotateWithView_=void 0!==y&&y,this.textRotation_=void 0===_?0:_,this.strokeKey_=i?("string"==typeof i.strokeStyle?i.strokeStyle:o(i.strokeStyle))+i.lineCap+i.lineDashOffset+"|"+i.lineWidth+i.lineJoin+i.miterLimit+"["+i.lineDash.join()+"]":"",this.textKey_=r.font+r.scale+(r.textAlign||"?")+(r.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+o(n.fillStyle):""}else this.text_=""},e}(Kp)},sd=function(){function t(t,e,r,n,i){this.declutter_=i,this.declutterGroups_=null,this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=r,this.buildersByZIndex_={}}return t.prototype.addDeclutter=function(t){var e=null;return this.declutter_&&(t?(e=this.declutterGroups_)[0][4]++:(e=[[1/0,1/0,-1/0,-1/0]],this.declutterGroups_=e,e[0].push(1))),e},t.prototype.finish=function(){var t={};for(var e in this.buildersByZIndex_){t[e]=t[e]||{};var r=this.buildersByZIndex_[e];for(var n in r){var i=r[n].finish();t[e][n]=i}}return t},t.prototype.getBuilder=function(t,e){var r=void 0!==t?t.toString():"0",n=this.buildersByZIndex_[r];void 0===n&&(n={},this.buildersByZIndex_[r]=n);var i=n[e];return void 0===i&&(i=new(0,ad[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=i),i},t}();function ud(t,e,r,n){for(var i=t[e],o=t[e+1],a=0,s=e+n;s<r;s+=n){var u=t[s],l=t[s+1];a+=Math.sqrt((u-i)*(u-i)+(l-o)*(l-o)),i=u,o=l}return a}function ld(t,e,r,n,i,o,a,s,u,l,c){for(var h,f,p=[],d=t[e]>t[r-n],g=i.length,y=t[e],_=t[e+1],v=t[e+=n],m=t[e+1],b=0,w=Math.sqrt(Math.pow(v-y,2)+Math.pow(m-_,2)),x=!1,S=0;S<g;++S){for(var E=i[h=d?g-S-1:S],O=s*u(l,E,c),M=o+O/2;e<r-n&&b+w<M;)y=v,_=m,v=t[e+=n],m=t[e+1],b+=w,w=Math.sqrt(Math.pow(v-y,2)+Math.pow(m-_,2));var P=M-b,T=Math.atan2(m-_,v-y);if(d&&(T+=T>0?-Math.PI:Math.PI),void 0!==f){var C=T-f;if(x=x||0!==C,C+=C>Math.PI?-2*Math.PI:C<-Math.PI?2*Math.PI:0,Math.abs(C)>a)return null}f=T;var I=P/w,R=le(y,v,I),L=le(_,m,I);p[h]=[R,L,O/2,T,E],o+=O}return x?p:[[p[0][0],p[0][1],p[0][2],p[0][3],i]]}var cd=[1/0,1/0,-1/0,-1/0],hd=[1,0,0,1,0,0],fd=[],pd=[],dd=[],gd=[],yd=function(){function t(t,e,r,n){this.overlaps=r,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=[1,0,0,1,0,0],this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,e,r,n){var i=t+e+r+n;if(this.labels_[i])return this.labels_[i];var o=n?this.strokeStates[n]:null,a=r?this.fillStates[r]:null,s=this.textStates[e],u=this.pixelRatio,l=s.scale*u,c=od[s.textAlign||"center"],h=n&&o.lineWidth?o.lineWidth:0,f=t.split("\n"),p=f.length,d=[],g=function(t,e,r){for(var n=e.length,i=0,o=0;o<n;++o){var a=Ss(t,e[o]);i=Math.max(i,a),r.push(a)}return i}(s.font,f,d),y=ws(s.font),_=y*p,v=g+h,m=[],b={width:Math.ceil((v+2)*l),height:Math.ceil((_+h)*l),contextInstructions:m};1!=l&&m.push("scale",[l,l]),m.push("font",s.font),n&&(m.push("strokeStyle",o.strokeStyle),m.push("lineWidth",h),m.push("lineCap",o.lineCap),m.push("lineJoin",o.lineJoin),m.push("miterLimit",o.miterLimit),(Gn?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(m.push("setLineDash",[o.lineDash]),m.push("lineDashOffset",o.lineDashOffset))),r&&m.push("fillStyle",a.fillStyle),m.push("textBaseline","middle"),m.push("textAlign","center");var w,x=.5-c,S=c*v+x*h;if(n)for(w=0;w<p;++w)m.push("strokeText",[f[w],S+x*d[w],.5*(h+y)+w*y]);if(r)for(w=0;w<p;++w)m.push("fillText",[f[w],S+x*d[w],.5*(h+y)+w*y]);return this.labels_[i]=b,b},t.prototype.replayTextBackground_=function(t,e,r,n,i,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,e),o&&(this.alignFill_=o[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())},t.prototype.replayImageOrLabel_=function(t,e,r,n,i,o,a,s,u,l,c,h,f,p,d,g,y,_){var v=y||_;e-=i*=f,r-=o*=f;var m=d+l>n.width?n.width-l:d,b=s+c>n.height?n.height-c:s,w=g[3]+m*f+g[1],x=g[0]+b*f+g[2],S=e-g[3],E=r-g[0];(v||0!==h)&&(fd[0]=S,gd[0]=S,fd[1]=E,pd[1]=E,pd[0]=S+w,dd[0]=pd[0],dd[1]=E+x,gd[1]=dd[1]);var O=null;if(0!==h){var M=e+i,P=r+o;O=cr(hd,M,P,1,1,h,-M,-P),ur(hd,fd),ur(hd,pd),ur(hd,dd),ur(hd,gd),xt(Math.min(fd[0],pd[0],dd[0],gd[0]),Math.min(fd[1],pd[1],dd[1],gd[1]),Math.max(fd[0],pd[0],dd[0],gd[0]),Math.max(fd[1],pd[1],dd[1],gd[1]),cd)}else xt(S,E,S+w,E+x,cd);var T=t.canvas,C=_?_[2]*f/2:0,I=cd[0]-C<=T.width&&cd[2]+C>=0&&cd[1]-C<=T.height&&cd[3]+C>=0;if(p&&(e=Math.round(e),r=Math.round(r)),a){if(!I&&1==a[4])return;Pt(a,cd);var R=I?[t,O?O.slice(0):null,u,n,l,c,m,b,e,r,f]:null;R&&(v&&R.push(y,_,fd.slice(0),pd.slice(0),dd.slice(0),gd.slice(0)),a.push(R))}else I&&(v&&this.replayTextBackground_(t,fd,pd,dd,gd,y,_),Ms(t,O,u,n,l,c,m,b,e,r,f))},t.prototype.fill_=function(t){if(this.alignFill_){var e=ur(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;t.save(),t.translate(e[0]%r,e[1]%r),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.setLineDash&&(t.lineDashOffset=e[7],t.setLineDash(e[6]))},t.prototype.renderDeclutter=function(t,e,r,n){if(t&&t.length>5){var i=t[4];if(1==i||i==t.length-5){var o={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};if(n||(n=new ah.a(9)),!n.collides(o)){n.insert(o);for(var a=5,s=t.length;a<s;++a){var u=t[a],l=u[0],c=l.globalAlpha;c!==r&&(l.globalAlpha=r),u.length>11&&this.replayTextBackground_(u[0],u[13],u[14],u[15],u[16],u[11],u[12]),Ms.apply(void 0,u),c!==r&&(l.globalAlpha=c)}}t.length=5,St(t)}}return n},t.prototype.drawLabelWithPointPlacement_=function(t,e,r,n){var i=this.textStates[e],o=this.createLabel(t,e,n,r),a=this.strokeStates[r],s=this.pixelRatio,u=od[i.textAlign||"center"],l=od[i.textBaseline||"middle"],c=a&&a.lineWidth?a.lineWidth:0;return{label:o,anchorX:u*(o.width/s-2*i.scale)+2*(.5-u)*c,anchorY:l*o.height/s+2*(.5-l)*c}},t.prototype.execute_=function(t,e,r,n,i,o){var a,s,u;this.declutterItems.length=0,this.pixelCoordinates_&&P(e,this.renderedTransform_)?a=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),a=$t(this.coordinates,0,this.coordinates.length,2,e,this.pixelCoordinates_),u=e,(s=this.renderedTransform_)[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[4]=u[4],s[5]=u[5]);for(var l,c,h,f,p,d,g,y,_,v,m,b,w,x,S,E,O,M=0,T=r.length,C=0,I=0,R=0,L=null,A=null,k=this.coordinateCache_,F=this.viewRotation_,j=Math.round(1e12*Math.atan2(-e[1],e[0]))/1e12,N={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:F},D=this.instructions!=r||this.overlaps?0:200;M<T;){var z=r[M];switch(z[0]){case Zp.BEGIN_GEOMETRY:(S=z[1]).getGeometry()?void 0===o||Wt(o,z[3])?++M:M=z[2]+1:M=z[2];break;case Zp.BEGIN_PATH:I>D&&(this.fill_(t),I=0),R>D&&(t.stroke(),R=0),I||R||(t.beginPath(),f=NaN,p=NaN),++M;break;case Zp.CIRCLE:var G=a[C=z[1]],B=a[C+1],U=a[C+2]-G,W=a[C+3]-B,Y=Math.sqrt(U*U+W*W);t.moveTo(G+Y,B),t.arc(G,B,Y,0,2*Math.PI,!0),++M;break;case Zp.CLOSE_PATH:t.closePath(),++M;break;case Zp.CUSTOM:C=z[1],l=z[2];var V=z[3],X=z[4],Z=6==z.length?z[5]:void 0;N.geometry=V,N.feature=S,M in k||(k[M]=[]);var q=k[M];Z?Z(a,C,l,2,q):(q[0]=a[C],q[1]=a[C+1],q.length=2),X(q,N),++M;break;case Zp.DRAW_IMAGE:C=z[1],l=z[2],v=z[3],c=z[4],h=z[5],_=i?null:z[6];var K=z[7],H=z[8],J=z[9],Q=z[10],$=z[11],tt=z[12],et=z[13],rt=z[14];if(!v&&z.length>=19){m=z[18],b=z[19],w=z[20],x=z[21];var nt=this.drawLabelWithPointPlacement_(m,b,w,x);v=nt.label,z[3]=v;var it=z[22];c=(nt.anchorX-it)*this.pixelRatio,z[4]=c;var ot=z[23];h=(nt.anchorY-ot)*this.pixelRatio,z[5]=h,K=v.height,z[7]=K,rt=v.width,z[14]=rt}var at=void 0;z.length>24&&(at=z[24]);var st=void 0,ut=void 0,lt=void 0;z.length>16?(st=z[15],ut=z[16],lt=z[17]):(st=fs,ut=!1,lt=!1),$&&j?tt+=F:$||j||(tt-=F);for(var ct=0,ht=0;C<l;C+=2)if(!(at&&at[ct++]<rt/this.pixelRatio)){if(_){var ft=Math.floor(ht);_.length<ft+1&&((y=[1/0,1/0,-1/0,-1/0]).push(_[0][4]),_.push(y)),y=_[ft]}this.replayImageOrLabel_(t,a[C],a[C+1],v,c,h,y,K,H,J,Q,tt,et,n,rt,st,ut?L:null,lt?A:null),y&&(ht===Math.floor(ht)&&this.declutterItems.push(this,y,S),ht+=1/y[4])}++M;break;case Zp.DRAW_CHARS:var pt=z[1],dt=z[2],gt=z[3];y=i?null:z[4];var yt=z[5];x=z[6];var _t=z[7],vt=z[8],mt=z[9];w=z[10];var bt=z[11];m=z[12],b=z[13];var wt=z[14],xt=this.textStates[b],St=xt.font,Et=xt.scale*vt,Ot=void 0;St in this.widths_?Ot=this.widths_[St]:(Ot={},this.widths_[St]=Ot);var Mt=ud(a,pt,dt,2),Pt=Et*Es(St,m,Ot);if(yt||Pt<=Mt){var Tt=this.textStates[b].textAlign,Ct=ld(a,pt,dt,2,m,(Mt-Pt)*od[Tt],_t,Et,Es,St,Ot);if(Ct){var It=void 0,Rt=void 0,Lt=void 0,At=void 0,kt=void 0;if(w)for(It=0,Rt=Ct.length;It<Rt;++It)Lt=(kt=Ct[It])[4],At=this.createLabel(Lt,b,"",w),c=kt[2]+bt,h=gt*At.height+2*(.5-gt)*bt-mt,this.replayImageOrLabel_(t,kt[0],kt[1],At,c,h,y,At.height,1,0,0,kt[3],wt,!1,At.width,fs,null,null);if(x)for(It=0,Rt=Ct.length;It<Rt;++It)Lt=(kt=Ct[It])[4],At=this.createLabel(Lt,b,x,""),c=kt[2],h=gt*At.height-mt,this.replayImageOrLabel_(t,kt[0],kt[1],At,c,h,y,At.height,1,0,0,kt[3],wt,!1,At.width,fs,null,null)}}this.declutterItems.push(this,y,S),++M;break;case Zp.END_GEOMETRY:if(void 0!==i){var Ft=i(S=z[1]);if(Ft)return Ft}++M;break;case Zp.FILL:D?I++:this.fill_(t),++M;break;case Zp.MOVE_TO_LINE_TO:for(C=z[1],l=z[2],E=a[C],g=(O=a[C+1])+.5|0,(d=E+.5|0)===f&&g===p||(t.moveTo(E,O),f=d,p=g),C+=2;C<l;C+=2)d=(E=a[C])+.5|0,g=(O=a[C+1])+.5|0,C!=l-2&&d===f&&g===p||(t.lineTo(E,O),f=d,p=g);++M;break;case Zp.SET_FILL_STYLE:L=z,this.alignFill_=z[2],I&&(this.fill_(t),I=0,R&&(t.stroke(),R=0)),t.fillStyle=z[1],++M;break;case Zp.SET_STROKE_STYLE:A=z,R&&(t.stroke(),R=0),this.setStrokeStyle_(t,z),++M;break;case Zp.STROKE:D?R++:t.stroke(),++M;break;default:++M}}I&&this.fill_(t),R&&t.stroke()},t.prototype.execute=function(t,e,r,n){this.viewRotation_=r,this.execute_(t,e,this.instructions,n,void 0,void 0)},t.prototype.executeHitDetection=function(t,e,r,n,i){return this.viewRotation_=r,this.execute_(t,e,this.hitDetectionInstructions,!0,n,i)},t}(),_d=[js,Ls,Fs,ks,Ns,As],vd=function(){function t(t,e,r,n,i,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=r,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=[1,0,0,1,0,0],this.createExecutors_(i)}return t.prototype.clip=function(t,e){var r=this.getClipCoords(e);t.beginPath(),t.moveTo(r[0],r[1]),t.lineTo(r[2],r[3]),t.lineTo(r[4],r[5]),t.lineTo(r[6],r[7]),t.clip()},t.prototype.createExecutors_=function(t){for(var e in t){var r=this.executorsByZIndex_[e];void 0===r&&(r={},this.executorsByZIndex_[e]=r);var n=t[e];for(var i in n){var o=n[i];r[i]=new yd(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}},t.prototype.hasExecutors=function(t){for(var e in this.executorsByZIndex_)for(var r=this.executorsByZIndex_[e],n=0,i=t.length;n<i;++n)if(t[n]in r)return!0;return!1},t.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i,o){var a=2*(n=Math.round(n))+1,s=cr(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-r,-t[0],-t[1]);this.hitDetectionContext_||(this.hitDetectionContext_=Bi(a,a));var u,l=this.hitDetectionContext_;l.canvas.width!==a||l.canvas.height!==a?(l.canvas.width=a,l.canvas.height=a):l.clearRect(0,0,a,a),void 0!==this.renderBuffer_&&(Tt(u=[1/0,1/0,-1/0,-1/0],t),dt(u,e*(this.renderBuffer_+n),u));var c,h=function(t){if(void 0!==md[t])return md[t];for(var e=2*t+1,r=new Array(e),n=0;n<e;n++)r[n]=new Array(e);for(var i=t,o=0,a=0;i>=o;)bd(r,t+i,t+o),bd(r,t+o,t+i),bd(r,t-o,t+i),bd(r,t-i,t+o),bd(r,t-i,t-o),bd(r,t-o,t-i),bd(r,t+o,t-i),bd(r,t+i,t-o),2*((a+=1+2*++o)-i)+1>0&&(a+=1-2*(i-=1));return md[t]=r,r}(n);function f(t){for(var e=l.getImageData(0,0,a,a).data,r=0;r<a;r++)for(var n=0;n<a;n++)if(h[r][n]&&e[4*(n*a+r)+3]>0){var s=void 0;return(!o||c!=ks&&c!=Ns||-1!==o.indexOf(t))&&(s=i(t)),s||void l.clearRect(0,0,a,a)}}var p,d,g,y,_,v=Object.keys(this.executorsByZIndex_).map(Number);for(v.sort(w),p=v.length-1;p>=0;--p){var m=v[p].toString();for(g=this.executorsByZIndex_[m],d=_d.length-1;d>=0;--d)if(void 0!==(y=g[c=_d[d]])&&(_=y.executeHitDetection(l,s,r,f,u)))return _}},t.prototype.getClipCoords=function(t){var e=this.maxExtent_;if(!e)return null;var r=e[0],n=e[1],i=e[2],o=e[3],a=[r,n,r,o,i,o,i,n];return $t(a,0,8,2,t,a),a},t.prototype.isEmpty=function(){return y(this.executorsByZIndex_)},t.prototype.execute=function(t,e,r,n,i,o){var a=Object.keys(this.executorsByZIndex_).map(Number);a.sort(w),this.maxExtent_&&(t.save(),this.clip(t,e));var s,u,l,c,h,f,p=i||_d;for(s=0,u=a.length;s<u;++s){var d=a[s].toString();for(h=this.executorsByZIndex_[d],l=0,c=p.length;l<c;++l){var g=p[l];if(void 0!==(f=h[g]))if(!o||g!=ks&&g!=Ns)f.execute(t,e,r,n);else{var y=o[d];y?y.push(f,e.slice(0)):o[d]=[f,e.slice(0)]}}}this.maxExtent_&&t.restore()},t}(),md={0:[[!0]]};function bd(t,e,r){var n,i=Math.floor(t.length/2);if(e>=i)for(n=i;n<e;n++)t[n][r]=!0;else if(e<i)for(n=e+1;n<i;n++)t[n][r]=!0}function wd(t,e,r,n,i,o){for(var a=Object.keys(t).map(Number).sort(w),s=0,u=a.length;s<u;++s)for(var l=t[a[s].toString()],c=void 0,h=0,f=l.length;h<f;){var p=l[h++];p!==c&&(c=p,o.push({items:p.declutterItems,opacity:n}));var d=l[h++];p.execute(e,d,r,i)}}var xd=vd;function Sd(t,e,r,n,i,o,a){var s=Bi(t[0]/2,t[1]/2);s.imageSmoothingEnabled=!1;for(var u=s.canvas,l=new Rs(s,.5,i,null,a),c=r.length,h=Math.floor(16777215/c),f={},p=1;p<=c;++p){var d=r[p-1],g=d.getStyleFunction()||n;if(n){var y=g(d,o);if(y){Array.isArray(y)||(y=[y]);for(var _="#"+("000000"+(p*h).toString(16)).slice(-6),v=0,m=y.length;v<m;++v){var b=y[v],x=b.clone(),S=x.getFill();S&&S.setColor(_);var E=x.getStroke();E&&E.setColor(_),x.setText(void 0);var O=b.getImage();if(O){var M=O.getImageSize();if(!M)continue;var P=document.createElement("canvas");P.width=M[0],P.height=M[1];var T=P.getContext("2d",{alpha:!1});T.fillStyle=_;var C=T.canvas;T.fillRect(0,0,C.width,C.height),Bi(M?M[0]:C.width,M?M[1]:C.height).drawImage(C,0,0),x.setImage(new Kl({img:C,imgSize:M,anchor:O.getAnchor(),anchorXUnits:kl,anchorYUnits:kl,offset:O.getOrigin(),size:O.getSize(),opacity:O.getOpacity(),scale:O.getScale(),rotation:O.getRotation(),rotateWithView:O.getRotateWithView()}))}var I=Number(x.getZIndex());(k=f[I])||(k={},f[I]=k,k[Qt.POLYGON]=[],k[Qt.CIRCLE]=[],k[Qt.LINE_STRING]=[],k[Qt.POINT]=[]);var R=x.getGeometryFunction()(d);R&&Wt(i,R.getExtent())&&k[R.getType().replace("Multi","")].push(R,x)}}}}for(var L=Object.keys(f).map(Number).sort(w),A=(p=0,L.length);p<A;++p){var k=f[L[p]];for(var F in k){var j=k[F];for(v=0,m=j.length;v<m;v+=2){l.setStyle(j[v+1]);for(var N=0,D=e.length;N<D;++N)l.setTransform(e[N]),l.drawGeometry(j[v])}}}return document.body.appendChild(s.canvas),s.getImageData(0,0,u.width,u.height)}function Ed(t,e,r){var n=[];if(r){var i=4*(Math.round(t[0]/2)+Math.round(t[1]/2)*r.width),o=r.data[i],a=r.data[i+1],s=r.data[i+2]+256*(a+256*o),u=Math.floor(16777215/e.length);s&&s%u==0&&n.push(e[s/u-1])}return n}var Od,Md,Pd,Td,Cd=(Pd=function(t,e){return(Pd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Pd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Id=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.animatingOrInteracting_,r.dirty_=!1,r.hitDetectionImageData_=null,r.renderedFeatures_=null,r.renderedRevision_=-1,r.renderedResolution_=NaN,r.renderedExtent_=[1/0,1/0,-1/0,-1/0],r.renderedRotation_,r.renderedCenter_=null,r.renderedProjection_=null,r.renderedRenderOrder_=null,r.replayGroup_=null,r.replayGroupChanged=!0,r}return Cd(e,t),e.prototype.useContainer=function(e,r,n){n<1&&(e=null),t.prototype.useContainer.call(this,e,r,n)},e.prototype.renderFrame=function(t,e){var r=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];!function(t,e,r){sr(t,e,0,0,r,0,0)}(this.pixelTransform,1/r,1/r),hr(this.inversePixelTransform,this.pixelTransform);var i=fr(this.pixelTransform);this.useContainer(e,i,n.opacity);var o=this.context,a=o.canvas,s=this.replayGroup_;if(!s||s.isEmpty())return!this.containerReused&&a.width>0&&(a.width=0),this.container;var u=Math.round(t.size[0]*r),l=Math.round(t.size[1]*r);a.width!=u||a.height!=l?(a.width=u,a.height=l,a.style.transform!==i&&(a.style.transform=i)):this.containerReused||o.clearRect(0,0,u,l),this.preRender(o,t);var c=t.extent,h=t.viewState,f=h.center,p=h.resolution,d=h.projection,g=h.rotation,y=d.getExtent(),_=this.getLayer().getSource(),v=!1;if(n.extent){var m=nr(n.extent);(v=!vt(m,t.extent)&&Wt(m,t.extent))&&this.clip(o,t,m)}var b=t.viewHints,w=!(b[0]||b[1]),x=this.getRenderTransform(f,p,g,r,u,l,0),S=this.getLayer().getDeclutter()?{}:null;if(s.execute(o,x,g,w,void 0,S),_.getWrapX()&&d.canWrapX()&&!vt(y,c)){for(var E=c[0],O=Ut(y),M=0,P=void 0;E<y[0];){P=O*--M;var T=this.getRenderTransform(f,p,g,r,u,l,P);s.execute(o,T,g,w,void 0,S),E+=O}for(M=0,E=c[2];E>y[2];){P=O*++M;var C=this.getRenderTransform(f,p,g,r,u,l,P);s.execute(o,C,g,w,void 0,S),E-=O}}if(S){var I=t.viewHints;wd(S,o,g,1,!(I[0]||I[1]),t.declutterItems)}v&&o.restore(),this.postRender(o,t);var R=n.opacity,L=this.container;return R!==parseFloat(L.style.opacity)&&(L.style.opacity=1===R?"":R),this.container},e.prototype.getFeatures=function(t){return new Promise(function(e,r){if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){var n=[this.context.canvas.width,this.context.canvas.height];ur(this.pixelTransform,n);var i=this.renderedCenter_,o=this.renderedResolution_,a=this.renderedRotation_,s=this.renderedProjection_,u=this.renderedExtent_,l=this.getLayer(),c=[],h=n[0]/2,f=n[1]/2;c.push(this.getRenderTransform(i,o,a,.5,h,f,0).slice());var p=l.getSource(),d=s.getExtent();if(p.getWrapX()&&s.canWrapX()&&!vt(d,u)){for(var g=u[0],y=Ut(d),_=0,v=void 0;g<d[0];)v=y*--_,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),g+=y;for(_=0,g=u[2];g>d[2];)v=y*++_,c.push(this.getRenderTransform(i,o,a,.5,h,f,v).slice()),g-=y}this.hitDetectionImageData_=Sd(n,c,this.renderedFeatures_,l.getStyleFunction(),u,o,a)}e(Ed(t,this.renderedFeatures_,this.hitDetectionImageData_))}.bind(this))},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){if(this.replayGroup_){var a=e.viewState.resolution,s=e.viewState.rotation,u=this.getLayer(),l={};return this.replayGroup_.forEachFeatureAtCoordinate(t,a,s,r,(function(t){var e=o(t);if(!(e in l))return l[e]=!0,n(t,u)}),u.getDeclutter()?i:null)}},e.prototype.handleFontsChanged=function(){var t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.prepareFrame=function(t){var e=this.getLayer(),r=e.getSource();if(!r)return!1;var n=t.viewHints[0],i=t.viewHints[1],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(!this.dirty_&&!o&&n||!a&&i)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;var s=t.extent,u=t.viewState,l=u.projection,c=u.resolution,h=t.pixelRatio,f=e.getRevision(),p=e.getRenderBuffer(),d=e.getRenderOrder();void 0===d&&(d=zs);var g=u.center.slice(),y=dt(s,p*c),_=[y.slice()],v=l.getExtent();if(r.getWrapX()&&l.canWrapX()&&!vt(v,t.extent)){var m=Ut(v),b=Math.max(Ut(y)/2,m);y[0]=v[0]-b,y[2]=v[2]+b,Ri(g,l);var w=Zt(_[0],l);w[0]<v[0]&&w[2]<v[2]?_.push([w[0]+m,w[1],w[2]+m,w[3]]):w[0]>v[0]&&w[2]>v[2]&&_.push([w[0]-m,w[1],w[2]-m,w[3]])}if(!this.dirty_&&this.renderedResolution_==c&&this.renderedRevision_==f&&this.renderedRenderOrder_==d&&vt(this.renderedExtent_,y))return this.replayGroupChanged=!1,!0;this.replayGroup_=null,this.dirty_=!1;var x,S=new sd(Bs(c,h),y,c,h,e.getDeclutter()),E=$e();if(E){for(var O=0,M=_.length;O<M;++O)r.loadFeatures(rr(_[O]),c,E);x=Ve(E,l)}else for(O=0,M=_.length;O<M;++O)r.loadFeatures(_[O],c,l);var P=Gs(c,h),T=function(t){var r,n=t.getStyleFunction()||e.getStyleFunction();if(n&&(r=n(t,c)),r){var i=this.renderFeature(t,P,r,S,x);this.dirty_=this.dirty_||i}}.bind(this),C=rr(y),I=r.getFeaturesInExtent(C);for(d&&I.sort(d),O=0,M=I.length;O<M;++O)T(I[O]);this.renderedFeatures_=I;var R=S.finish(),L=new xd(y,c,h,r.getOverlaps(),R,e.getRenderBuffer());return this.renderedResolution_=c,this.renderedRevision_=f,this.renderedRenderOrder_=d,this.renderedExtent_=y,this.renderedRotation_=u.rotation,this.renderedCenter_=g,this.renderedProjection_=l,this.replayGroup_=L,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0},e.prototype.renderFeature=function(t,e,r,n,i){if(!r)return!1;var o=!1;if(Array.isArray(r))for(var a=0,s=r.length;a<s;++a)o=Us(n,t,r[a],e,this.boundHandleStyleImageChange_,i)||o;else o=Us(n,t,r,e,this.boundHandleStyleImageChange_,i);return o},e}(gf),Rd=(Md=function(t,e){return(Md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Md(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ld=function(t){function e(e){var r=t.call(this,e)||this;return r.vectorRenderer_=new Id(e),r.layerImageRatio_=e.getImageRatio(),r.coordinateToVectorPixelTransform_=[1,0,0,1,0,0],r.renderedPixelToCoordinateTransform_=null,r}return Rd(e,t),e.prototype.disposeInternal=function(){this.vectorRenderer_.dispose(),t.prototype.disposeInternal.call(this)},e.prototype.getFeatures=function(t){if(this.vectorRenderer_){var e=ur(this.coordinateToVectorPixelTransform_,ur(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}return new Promise((function(t,e){t([])}))},e.prototype.handleFontsChanged=function(){this.vectorRenderer_.handleFontsChanged()},e.prototype.prepareFrame=function(t){var e=t.pixelRatio,r=t.viewState,n=r.resolution,i=t.viewHints,o=this.vectorRenderer_,a=t.extent;1!==this.layerImageRatio_&&Vt(a=a.slice(0),this.layerImageRatio_);var s=Ut(a)/n,u=Dt(a)/n;if(!i[0]&&!i[1]&&!Yt(a)){o.useContainer(null,null,1);var l=o.context,c=p({},t,{declutterItems:[],extent:a,size:[s,u],viewState:p({},t.viewState,{rotation:0})}),h=new Xh(a,n,e,l.canvas,(function(t){o.prepareFrame(c)&&o.replayGroupChanged&&(o.renderFrame(c,null),Ys(c,null),t())}));h.addEventListener(z,function(){2===h.getState()&&(this.image_=h)}.bind(this)),h.load()}if(this.image_){var f=this.image_,d=f.getResolution()*e/f.getPixelRatio();this.renderedResolution=d,this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.coordinateToVectorPixelTransform_=cr(this.coordinateToVectorPixelTransform_,s/2,u/2,1/d,-1/d,0,-r.center[0],-r.center[1])}return!!this.image_},e.prototype.preRender=function(){},e.prototype.postRender=function(){},e.prototype.forEachFeatureAtCoordinate=function(e,r,n,i,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(e,r,n,i,o):t.prototype.forEachFeatureAtCoordinate.call(this,e,r,n,i,o)},e}(_f),Ad="vector",kd=(Od=function(t,e){return(Od=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Od(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Fd={image:[js,Ls,Fs,ks,Ns],hybrid:[js,Fs],vector:[]},jd={image:[As],hybrid:[ks,Ns,As],vector:[js,Ls,Fs,ks,Ns,As]},Nd=function(t){function e(e){var r=t.call(this,e)||this;return r.boundHandleStyleImageChange_=r.handleStyleImageChange_.bind(r),r.dirty_=!1,r.renderedLayerRevision_,r.renderedPixelToCoordinateTransform_=null,r.renderedRotation_,r.renderTileImageQueue_={},r.tileListenerKeys_={},r.tmpTransform_=[1,0,0,1,0,0],r}return kd(e,t),e.prototype.prepareTile=function(t,e,r,n){var i,a=o(t),s=t.getState();return(2===s&&t.hifi||3===s)&&a in this.tileListenerKeys_&&(m(this.tileListenerKeys_[a]),delete this.tileListenerKeys_[a]),2!==s&&3!==s||(this.updateExecutorGroup_(t,e,r),this.tileImageNeedsRender_(t,e,r)&&(i=!0,n&&(this.renderTileImageQueue_[a]=t))),i},e.prototype.getTile=function(e,r,n,i){var a=i.pixelRatio,s=i.viewState,u=s.resolution,l=s.projection,c=this.getLayer(),h=c.getSource().getTile(e,r,n,a,l);if(h.getState()<2){h.wantedResolution=u;var f=o(h);if(!(f in this.tileListenerKeys_)){var p=_(h,z,this.prepareTile.bind(this,h,a,l,!0));this.tileListenerKeys_[f]=p}}else{var d=i.viewHints;!(!d[0]&&!d[1])&&h.wantedResolution||(h.wantedResolution=u),this.prepareTile(h,a,l,!1)&&c.getRenderMode()!==Ad&&this.renderTileImage_(h,i)}return t.prototype.getTile.call(this,e,r,n,i)},e.prototype.isDrawableTile=function(e){var r=this.getLayer();return t.prototype.isDrawableTile.call(this,e)&&r.getRenderMode()===Ad||e.hasContext(r)},e.prototype.getTileImage=function(t){return t.getImage(this.getLayer())},e.prototype.prepareFrame=function(e){var r=this.getLayer().getRevision();return this.renderedLayerRevision_!=r&&(this.renderedTiles.length=0),this.renderedLayerRevision_=r,t.prototype.prepareFrame.call(this,e)},e.prototype.updateExecutorGroup_=function(t,e,r){var n=this.getLayer(),i=n.getRevision(),a=n.getRenderOrder()||null,s=t.wantedResolution,u=t.getReplayState(n);if(u.dirty||u.renderedResolution!==s||u.renderedRevision!=i||u.renderedRenderOrder!=a||u.renderedZ!==t.sourceZ){var l=n.getSource(),c=l.getTileGrid(),h=l.getTileGridForProjection(r).getTileCoordExtent(t.wrappedTileCoord),f=l.getSourceTiles(e,r,t),p=o(n);delete t.hitDetectionImageData[p],t.executorGroups[p]=[];for(var d=function(r,i){var o=f[r];if(2!=o.getState())return"continue";var d=o.tileCoord,y=c.getTileCoordExtent(d),_=zt(h,y),v=Mt(y,_)?null:dt(_,n.getRenderBuffer()*s,g.tmpExtent);u.dirty=!1;var m=new sd(0,_,s,e,n.getDeclutter()),b=Gs(s,e),w=function(t){var e,r=t.getStyleFunction()||n.getStyleFunction();if(r&&(e=r(t,s)),e){var i=this.renderFeature(t,b,e,m);this.dirty_=this.dirty_||i,u.dirty=u.dirty||i}},x=o.getFeatures();a&&a!==u.renderedRenderOrder&&x.sort(a);for(var S=0,E=x.length;S<E;++S){var O=x[S];v&&!Wt(v,O.getGeometry().getExtent())||w.call(g,O)}var M=m.finish(),P=n.getRenderMode()!==Ad&&n.getDeclutter()&&1===f.length?null:_,T=new xd(P,s,e,l.getOverlaps(),M,n.getRenderBuffer());t.executorGroups[p].push(T)},g=this,y=0,_=f.length;y<_;++y)d(y);u.renderedRevision=i,u.renderedZ=t.sourceZ,u.renderedRenderOrder=a,u.renderedResolution=s}},e.prototype.forEachFeatureAtCoordinate=function(t,e,r,n,i){var a=e.viewState.resolution,s=e.viewState.rotation;r=null==r?0:r;var u,l,c,h=this.getLayer(),f=h.getDeclutter(),p=h.getSource().getTileGridForProjection(e.viewState.projection),d={},g=this.renderedTiles,y=function(){var e=g[l],c=_t(p.getTileCoordExtent(e.wrappedTileCoord),t);if(!f&&!c)return"continue";for(var y=e.executorGroups[o(h)],_=0,v=y.length;_<v;++_){var m=y[_];u=u||m.forEachFeatureAtCoordinate(t,a,s,r,(function(t){if(c||i&&-1!==i.indexOf(t)){var e=t.getId();if(void 0===e&&(e=o(t)),!(e in d))return d[e]=!0,n(t,h)}}),h.getDeclutter()?i:null)}};for(l=0,c=g.length;l<c;++l)y();return u},e.prototype.getFeatures=function(t){return new Promise(function(e,r){for(var n,i=this.getLayer(),a=o(i),s=i.getSource(),u=this.renderedProjection,l=u.getExtent(),c=this.renderedResolution,h=s.getTileGridForProjection(u),f=ur(this.renderedPixelToCoordinateTransform_,t.slice()),p=h.getTileCoordForCoordAndResolution(f,c),d=0,g=this.renderedTiles.length;d<g;++d)if(p.toString()===this.renderedTiles[d].tileCoord.toString()){if(2===(n=this.renderedTiles[d]).getState()&&n.hifi){var y=h.getTileCoordExtent(n.tileCoord);s.getWrapX()&&u.canWrapX()&&!vt(l,y)&&Ri(f,u);break}n=void 0}if(!n||n.loadingSourceTiles>0)e([]);else{var _=Gt(h.getTileCoordExtent(n.wrappedTileCoord)),v=[(f[0]-_[0])/c,(_[1]-f[1])/c],m=n.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]),b=n.hitDetectionImageData[a];if(!b&&!this.animatingOrInteracting_){var w=go(h.getTileSize(h.getZForResolution(c))),x=[w[0]/2,w[1]/2],S=this.renderedRotation_;b=Sd(w,[this.getRenderTransform(h.getTileCoordCenter(n.wrappedTileCoord),c,0,.5,x[0],x[1],0)],m,i.getStyleFunction(),h.getTileCoordExtent(n.wrappedTileCoord),n.getReplayState(i).renderedResolution,S),n.hitDetectionImageData[a]=b}e(Ed(v,m,b))}}.bind(this))},e.prototype.handleFontsChanged=function(){d(this.renderTileImageQueue_);var t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()},e.prototype.handleStyleImageChange_=function(t){this.renderIfReadyAndVisible()},e.prototype.renderFrame=function(e,r){var n=e.viewHints,i=!(n[0]||n[1]);this.renderQueuedTileImages_(i,e),t.prototype.renderFrame.call(this,e,r),this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;var a=this.getLayer(),s=a.getRenderMode();if("image"===s)return this.container;var u=a.getSource(),l=e.usedTiles[o(u)];for(var c in this.renderTileImageQueue_)l&&c in l||delete this.renderTileImageQueue_[c];for(var h=this.context,f=a.getDeclutter()?{}:null,p=jd[s],d=e.pixelRatio,g=e.viewState,y=g.center,_=g.resolution,v=g.rotation,m=e.size,b=Math.round(m[0]*d),w=Math.round(m[1]*d),x=this.renderedTiles,S=u.getTileGridForProjection(e.viewState.projection),E=[],O=[],M=x.length-1;M>=0;--M)for(var P=x[M],T=P.tileCoord,C=S.getTileCoordExtent(P.wrappedTileCoord),I=S.getTileCoordExtent(T,this.tmpExtent)[0]-C[0],R=ar(lr(this.inversePixelTransform.slice(),1/d,1/d),this.getRenderTransform(y,_,v,d,b,w,I)),L=P.executorGroups[o(a)],A=!1,k=0,F=L.length;k<F;++k){var j=L[k];if(j.hasExecutors(p)){var N=P.tileCoord[0],D=void 0;if(!f&&!A){D=j.getClipCoords(R),h.save();for(var z=0,G=E.length;z<G;++z){var B=E[z];N<O[z]&&(h.beginPath(),h.moveTo(D[0],D[1]),h.lineTo(D[2],D[3]),h.lineTo(D[4],D[5]),h.lineTo(D[6],D[7]),h.moveTo(B[6],B[7]),h.lineTo(B[4],B[5]),h.lineTo(B[2],B[3]),h.lineTo(B[0],B[1]),h.clip())}}j.execute(h,R,v,i,p,f),f||A||(h.restore(),E.push(D),O.push(N),A=!0)}}return f&&wd(f,h,v,e.layerStatesArray[e.layerIndex].opacity,i,e.declutterItems),this.container},e.prototype.renderQueuedTileImages_=function(t,e){for(var r in this.renderTileImageQueue_){if(!t&&Date.now()-e.time>8){e.animate=!0;break}var n=this.renderTileImageQueue_[r];delete this.renderTileImageQueue_[r],this.renderTileImage_(n,e)}},e.prototype.renderFeature=function(t,e,r,n){if(!r)return!1;var i=!1;if(Array.isArray(r))for(var o=0,a=r.length;o<a;++o)i=Us(n,t,r[o],e,this.boundHandleStyleImageChange_)||i;else i=Us(n,t,r,e,this.boundHandleStyleImageChange_);return i},e.prototype.tileImageNeedsRender_=function(t,e,r){var n=this.getLayer(),i=t.getReplayState(n),o=n.getRevision(),a=t.sourceZ,s=t.wantedResolution;return i.renderedTileResolution!==s||i.renderedTileRevision!==o||i.renderedTileZ!==a},e.prototype.renderTileImage_=function(t,e){var r=this.getLayer(),n=t.getReplayState(r),i=r.getRevision(),a=t.executorGroups[o(r)];n.renderedTileRevision=i,n.renderedTileZ=t.sourceZ;var s=t.wrappedTileCoord,u=s[0],l=r.getSource(),c=e.pixelRatio,h=e.viewState.projection,f=l.getTileGridForProjection(h),p=f.getResolution(t.tileCoord[0]),d=e.pixelRatio/t.wantedResolution*p,g=f.getResolution(u),y=t.getContext(r);c=Math.max(c,d/c);var _=l.getTilePixelSize(u,c,h);y.canvas.width=_[0],y.canvas.height=_[1];var v=c/d;if(1!==v){var m=or(this.tmpTransform_);lr(m,v,v),y.setTransform.apply(y,m)}var b=f.getTileCoordExtent(s,this.tmpExtent),w=d/g,x=or(this.tmpTransform_);lr(x,w,-w),function(t,e,r){ar(t,sr(ir,1,0,0,1,e,r))}(x,-b[0],-b[3]);for(var S=0,E=a.length;S<E;++S)a[S].execute(y,x,0,!0,Fd[r.getRenderMode()]);n.renderedTileResolution=t.wantedResolution},e}(Tf),Dd=(Td=function(t,e){return(Td=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Td(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),zd=function(t){function e(e){return t.call(this,e)||this}return Dd(e,t),e.prototype.createRenderer=function(){return new Id(this)},e}(zp);function Gd(t,e,r,n,i,o){var a=NaN,s=NaN,u=(r-e)/n;if(1===u)a=t[e],s=t[e+1];else if(2==u)a=(1-i)*t[e]+i*t[e+n],s=(1-i)*t[e+1]+i*t[e+n+1];else if(0!==u){for(var l=t[e],c=t[e+1],h=0,f=[0],p=e+n;p<r;p+=n){var d=t[p],g=t[p+1];h+=Math.sqrt((d-l)*(d-l)+(g-c)*(g-c)),f.push(h),l=d,c=g}var y=i*h,_=function(t,e,r){for(var n,i,o=w,a=0,s=t.length,u=!1;a<s;)(i=+o(t[n=a+(s-a>>1)],e))<0?a=n+1:(s=n,u=!i);return u?a:~a}(f,y);if(_<0){var v=(y-f[-_-2])/(f[-_-1]-f[-_-2]),m=e+(-_-2)*n;a=le(t[m],t[m+n],v),s=le(t[m+1],t[m+n+1],v)}else a=t[e+_*n],s=t[e+_*n+1]}return o?(o[0]=a,o[1]=s,o):[a,s]}function Bd(t,e,r,n,i,o){if(r==e)return null;var a;if(i<t[e+n-1])return o?((a=t.slice(e,e+n))[n-1]=i,a):null;if(t[r-1]<i)return o?((a=t.slice(r-n,r))[n-1]=i,a):null;if(i==t[e+n-1])return t.slice(e,e+n);for(var s=e/n,u=r/n;s<u;){var l=s+u>>1;i<t[(l+1)*n-1]?u=l:s=l+1}var c=t[s*n-1];if(i==c)return t.slice((s-1)*n,(s-1)*n+n);var h=(i-c)/(t[(s+1)*n-1]-c);a=[];for(var f=0;f<n-1;++f)a.push(le(t[(s-1)*n+f],t[s*n+f],h));return a.push(i),a}var Ud,Wd=(Ud=function(t,e){return(Ud=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ud(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Yd=function(t){function e(e,r){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===r||Array.isArray(e[0])?n.setCoordinates(e,r):n.setFlatCoordinates(r,e),n}return Wd(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?O(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){return n<yt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Er(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Mr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.forEachSegment=function(t){return Kr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=Ht&&this.layout!=Jt)return null;var r=void 0!==e&&e;return Bd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r)},e.prototype.getCoordinates=function(){return Rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Gd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e)},e.prototype.getLength=function(){return ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[];return r.length=kr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,r,0),new e(r,qt)},e.prototype.getType=function(){return Qt.LINE_STRING},e.prototype.intersectsExtent=function(t){return Hr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(br);function Vd(t,e,r){for(var n,i,o,a,s,u,l=[],c=t(0),h=t(1),f=e(c),p=e(h),d=[h,c],g=[p,f],y=[1,0],_={},v=1e5;--v>0&&y.length>0;)o=y.pop(),c=d.pop(),f=g.pop(),(u=o.toString())in _||(l.push(f[0],f[1]),_[u]=!0),a=y.pop(),h=d.pop(),p=g.pop(),ie((i=e(n=t(s=(o+a)/2)))[0],i[1],f[0],f[1],p[0],p[1])<r?(l.push(p[0],p[1]),_[u=a.toString()]=!0):(y.push(a,s,s,o),g.push(p,i,i,f),d.push(h,n,n,c));return l}var Xd,Zd,qd,Kd,Hd,Jd=(Zd=function(t,e){return(Zd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Zd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Qd=new Hl({color:"rgba(0,0,0,0.2)"}),$d=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001],tg=function(t){function e(e){var r=this,n=e||{},i=p({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},n);return delete i.maxLines,delete i.strokeStyle,delete i.targetSize,delete i.showLabels,delete i.lonLabelFormatter,delete i.latLabelFormatter,delete i.lonLabelPosition,delete i.latLabelPosition,delete i.lonLabelStyle,delete i.latLabelStyle,delete i.intervals,(r=t.call(this,i)||this).projection_=null,r.maxLat_=1/0,r.maxLon_=1/0,r.minLat_=-1/0,r.minLon_=-1/0,r.maxX_=1/0,r.maxY_=1/0,r.minX_=-1/0,r.minY_=-1/0,r.targetSize_=void 0!==n.targetSize?n.targetSize:100,r.maxLines_=void 0!==n.maxLines?n.maxLines:100,r.meridians_=[],r.parallels_=[],r.strokeStyle_=void 0!==n.strokeStyle?n.strokeStyle:Qd,r.fromLonLatTransform_=void 0,r.toLonLatTransform_=void 0,r.projectionCenterLonLat_=null,r.bottomLeft_=null,r.bottomRight_=null,r.topLeft_=null,r.topRight_=null,r.meridiansLabels_=null,r.parallelsLabels_=null,n.showLabels&&(r.lonLabelFormatter_=null==n.lonLabelFormatter?xi.bind(r,"EW"):n.lonLabelFormatter,r.latLabelFormatter_=null==n.latLabelFormatter?xi.bind(r,"NS"):n.latLabelFormatter,r.lonLabelPosition_=null==n.lonLabelPosition?0:n.lonLabelPosition,r.latLabelPosition_=null==n.latLabelPosition?1:n.latLabelPosition,r.lonLabelStyleBase_=new rc({text:void 0!==n.lonLabelStyle?n.lonLabelStyle.clone():new nc({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Ll({color:"rgba(0,0,0,1)"}),stroke:new Hl({color:"rgba(255,255,255,1)",width:3})})}),r.lonLabelStyle_=function(t){var e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_}.bind(r),r.latLabelStyleBase_=new rc({text:void 0!==n.latLabelStyle?n.latLabelStyle.clone():new nc({font:"12px Calibri,sans-serif",textAlign:"right",fill:new Ll({color:"rgba(0,0,0,1)"}),stroke:new Hl({color:"rgba(255,255,255,1)",width:3})})}),r.latLabelStyle_=function(t){var e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_}.bind(r),r.meridiansLabels_=[],r.parallelsLabels_=[],r.addEventListener(ri,r.drawLabels_.bind(r))),r.intervals_=void 0!==n.intervals?n.intervals:$d,r.setSource(new ch({loader:r.loaderFunction.bind(r),strategy:r.strategyFunction.bind(r),features:new st,overlaps:!1,useSpatialIndex:!1,wrapX:n.wrapX})),r.featurePool_=[],r.lineStyle_=new rc({stroke:r.strokeStyle_}),r.loadedExtent_=null,r.renderedExtent_=null,r.setRenderOrder(null),r}return Jd(e,t),e.prototype.strategyFunction=function(t,e){var r,n,i,o=t.slice();return this.projection_&&this.getSource().getWrapX()&&Zt(o,this.projection_),this.loadedExtent_&&(r=this.loadedExtent_,n=o,i=e,Math.abs(r[0]-n[0])<i&&Math.abs(r[2]-n[2])<i&&Math.abs(r[1]-n[1])<i&&Math.abs(r[3]-n[3])<i?o=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[o]},e.prototype.loaderFunction=function(t,e,r){this.loadedExtent_=t;var n=this.getSource(),i=zt(this.getExtent()||[-1/0,-1/0,1/0,1/0],t);if(!(this.renderedExtent_&&Mt(this.renderedExtent_,i)||(this.renderedExtent_=i,Yt(i)))){var o=Ft(i),a=e*e/4;(!this.projection_||!Ye(this.projection_,r))&&this.updateProjectionInfo_(r),this.createGraticule_(i,o,e,a);var s,u=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(u+=this.meridians_.length),this.parallelsLabels_&&(u+=this.parallels_.length);u>this.featurePool_.length;)s=new ht,this.featurePool_.push(s);var l=n.getFeaturesCollection();l.clear();var c,h,f=0;for(c=0,h=this.meridians_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.meridians_[c]),s.setStyle(this.lineStyle_),l.push(s);for(c=0,h=this.parallels_.length;c<h;++c)(s=this.featurePool_[f++]).setGeometry(this.parallels_[c]),s.setStyle(this.lineStyle_),l.push(s)}},e.prototype.addMeridian_=function(t,e,r,n,i,o){var a=this.getMeridian_(t,e,r,n,o);if(Wt(a.getExtent(),i)){if(this.meridiansLabels_){var s=this.lonLabelFormatter_(t);o in this.meridiansLabels_?this.meridiansLabels_[o].text=s:this.meridiansLabels_[o]={geom:new Wr([]),text:s}}this.meridians_[o++]=a}return o},e.prototype.addParallel_=function(t,e,r,n,i,o){var a=this.getParallel_(t,e,r,n,o);if(Wt(a.getExtent(),i)){if(this.parallelsLabels_){var s=this.latLabelFormatter_(t);o in this.parallelsLabels_?this.parallelsLabels_[o].text=s:this.parallelsLabels_[o]={geom:new Wr([]),text:s}}this.parallels_[o++]=a}return o},e.prototype.drawLabels_=function(t){var e=t.frameState.viewState.rotation,r=t.frameState.extent,n=Ft(r),i=r;if(e){var o=Ut(r),a=Dt(r),s=Math.abs(Math.cos(e)),u=Math.abs(Math.sin(e)),l=(u*a-s*o)/(u*u-s*s),c=(u*o-s*a)/(u*u-s*s);i=[n[0]-l/2,n[1]-c/2,n[0]+l/2,n[1]+c/2]}var h=0,f=0,p=this.latLabelPosition_<.5,d=this.projection_.getExtent(),g=Ut(d);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!vt(d,r)&&(h=Math.floor((r[0]-d[0])/g),f=Math.ceil((r[2]-d[2])/g),p=p!==Math.abs(e)>Math.PI/2);for(var y=Ws(t),_=h;_<=f;++_){var v=this.meridians_.length+this.parallels_.length,m=void 0,b=void 0,w=void 0,x=void 0;if(this.meridiansLabels_)for(b=0,w=this.meridiansLabels_.length;b<w;++b){var S=this.meridians_[b];e||0!==_?((E=S.clone()).translate(_*g,0),E.rotate(-e,n),(x=this.getMeridianPoint_(E,i,b)).rotate(e,n)):x=this.getMeridianPoint_(S,r,b),(m=this.featurePool_[v++]).setGeometry(x),m.set("graticule_label",this.meridiansLabels_[b].text),y.drawFeature(m,this.lonLabelStyle_(m))}if(this.parallelsLabels_&&(_===h&&p||_===f&&!p))for(b=0,w=this.parallels_.length;b<w;++b){var E;S=this.parallels_[b],e||0!==_?((E=S.clone()).translate(_*g,0),E.rotate(-e,n),(x=this.getParallelPoint_(E,i,b)).rotate(e,n)):x=this.getParallelPoint_(S,r,b),(m=this.featurePool_[v++]).setGeometry(x),m.set("graticule_label",this.parallelsLabels_[b].text),y.drawFeature(m,this.latLabelStyle_(m))}}},e.prototype.createGraticule_=function(t,e,r,n){var i=this.getInterval_(r);if(-1==i)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));var o=!1,a=this.projection_.getExtent(),s=Ut(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!vt(a,t)&&(Ut(t)>=s?(t[0]=a[0],t[2]=a[2]):o=!0);var u=[re(e[0],this.minX_,this.maxX_),re(e[1],this.minY_,this.maxY_)],l=this.toLonLatTransform_(u);isNaN(l[1])&&(l[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);var c,h,f,p,d=re(l[0],this.minLon_,this.maxLon_),g=re(l[1],this.minLat_,this.maxLat_),y=this.maxLines_,_=t;o||(_=[re(t[0],this.minX_,this.maxX_),re(t[1],this.minY_,this.maxY_),re(t[2],this.minX_,this.maxX_),re(t[3],this.minY_,this.maxY_)]);var v=Xt(_,this.toLonLatTransform_,void 0,8),m=v[3],b=v[2],w=v[1],x=v[0];if(o||(_t(_,this.bottomLeft_)&&(x=this.minLon_,w=this.minLat_),_t(_,this.bottomRight_)&&(b=this.maxLon_,w=this.minLat_),_t(_,this.topLeft_)&&(x=this.minLon_,m=this.maxLat_),_t(_,this.topRight_)&&(b=this.maxLon_,m=this.maxLat_),m=re(m,g,this.maxLat_),b=re(b,d,this.maxLon_),w=re(w,this.minLat_,g),x=re(x,this.minLon_,d)),p=re(d=Math.floor(d/i)*i,this.minLon_,this.maxLon_),h=this.addMeridian_(p,w,m,n,t,0),c=0,o)for(;(p-=i)>=x&&c++<y;)h=this.addMeridian_(p,w,m,n,t,h);else for(;p!=this.minLon_&&c++<y;)p=Math.max(p-i,this.minLon_),h=this.addMeridian_(p,w,m,n,t,h);if(p=re(d,this.minLon_,this.maxLon_),c=0,o)for(;(p+=i)<=b&&c++<y;)h=this.addMeridian_(p,w,m,n,t,h);else for(;p!=this.maxLon_&&c++<y;)p=Math.min(p+i,this.maxLon_),h=this.addMeridian_(p,w,m,n,t,h);for(this.meridians_.length=h,this.meridiansLabels_&&(this.meridiansLabels_.length=h),f=re(g=Math.floor(g/i)*i,this.minLat_,this.maxLat_),h=this.addParallel_(f,x,b,n,t,0),c=0;f!=this.minLat_&&c++<y;)f=Math.max(f-i,this.minLat_),h=this.addParallel_(f,x,b,n,t,h);for(f=re(g,this.minLat_,this.maxLat_),c=0;f!=this.maxLat_&&c++<y;)f=Math.min(f+i,this.maxLat_),h=this.addParallel_(f,x,b,n,t,h);this.parallels_.length=h,this.parallelsLabels_&&(this.parallelsLabels_.length=h)},e.prototype.getInterval_=function(t){for(var e=this.projectionCenterLonLat_[0],r=this.projectionCenterLonLat_[1],n=-1,i=Math.pow(this.targetSize_*t,2),o=[],a=[],s=0,u=this.intervals_.length;s<u;++s){var l=re(this.intervals_[s]/2,0,90),c=re(r,-90+l,90-l);if(o[0]=e-l,o[1]=c-l,a[0]=e+l,a[1]=c+l,this.fromLonLatTransform_(o,o),this.fromLonLatTransform_(a,a),Math.pow(a[0]-o[0],2)+Math.pow(a[1]-o[1],2)<=i)break;n=this.intervals_[s]}return n},e.prototype.getMeridian_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return Vd((function(n){return[t,e+(r-e)*n]}),Xe(De("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.meridians_[i];return a?(a.setFlatCoordinates(qt,o),a.changed()):(a=new Yd(o,qt),this.meridians_[i]=a),a},e.prototype.getMeridianPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=1,o=n.length-1;n[i]>n[o]&&(i=o,o=1);var a=Math.max(e[1],n[i]),s=Math.min(e[3],n[o]),u=re(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,a,s),l=[n[i-1]+(n[o-1]-n[i-1])*(u-n[i])/(n[o]-n[i]),u],c=this.meridiansLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getMeridians=function(){return this.meridians_},e.prototype.getParallel_=function(t,e,r,n,i){var o=function(t,e,r,n,i){return Vd((function(n){return[e+(r-e)*n,t]}),Xe(De("EPSG:4326"),n),i)}(t,e,r,this.projection_,n),a=this.parallels_[i];return a?(a.setFlatCoordinates(qt,o),a.changed()):a=new Yd(o,qt),a},e.prototype.getParallelPoint_=function(t,e,r){var n=t.getFlatCoordinates(),i=0,o=n.length-2;n[i]>n[o]&&(i=o,o=0);var a=Math.max(e[0],n[i]),s=Math.min(e[2],n[o]),u=re(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,a,s),l=[u,n[i+1]+(n[o+1]-n[i+1])*(u-n[i])/(n[o]-n[i])],c=this.parallelsLabels_[r].geom;return c.setCoordinates(l),c},e.prototype.getParallels=function(){return this.parallels_},e.prototype.updateProjectionInfo_=function(t){var e=De("EPSG:4326"),r=t.getWorldExtent();this.maxLat_=r[3],this.maxLon_=r[2],this.minLat_=r[1],this.minLon_=r[0];var n=Xe(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{var i=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(t,e,r){for(var o=r||2,a=n(t,e,o),s=0,u=a.length;s<u;s+=o)a[s]<i&&(a[s]+=360);return a}}this.fromLonLatTransform_=Xe(e,t);var o=Xt([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=o[0],this.maxX_=o[2],this.minY_=o[1],this.maxY_=o[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_(Ft(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t},e}(zd),eg=(Xd=function(t,e){return(Xd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Xd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),rg="blur",ng="gradient",ig="radius",og=["#00f","#0ff","#0f0","#ff0","#f00"],ag=function(t){function e(e){var r=this,n=e||{},i=p({},n);delete i.gradient,delete i.radius,delete i.blur,delete i.weight,(r=t.call(this,i)||this).gradient_=null,r.addEventListener(rt(ng),r.handleGradientChanged_),r.setGradient(n.gradient?n.gradient:og),r.setBlur(void 0!==n.blur?n.blur:15),r.setRadius(void 0!==n.radius?n.radius:8);var o=n.weight?n.weight:"weight";return r.weightFunction_="string"==typeof o?function(t){return t.get(o)}:o,r.setRenderOrder(null),r}return eg(e,t),e.prototype.getBlur=function(){return this.get(rg)},e.prototype.getGradient=function(){return this.get(ng)},e.prototype.getRadius=function(){return this.get(ig)},e.prototype.handleGradientChanged_=function(){this.gradient_=function(t){for(var e=Bi(1,256),r=e.createLinearGradient(0,0,1,256),n=1/(t.length-1),i=0,o=t.length;i<o;++i)r.addColorStop(i*n,t[i]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())},e.prototype.setBlur=function(t){this.set(rg,t)},e.prototype.setGradient=function(t){this.set(ng,t)},e.prototype.setRadius=function(t){this.set(ig,t)},e.prototype.createRenderer=function(){return new Bp(this,{attributes:[{name:"weight",callback:function(t){var e=this.weightFunction_(t);return void 0!==e?re(e,0,1):1}.bind(this)}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:function(){return 2*(this.get(ig)+this.get(rg))}.bind(this),u_blurSlope:function(){return this.get(ig)/Math.max(1,this.get(rg))}.bind(this)},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},e}(zd),sg=(Hd=function(t,e){return(Hd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Hd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ug=function(t){function e(e){var r=this,n=e||{},i=p({},n);return delete i.imageRatio,(r=t.call(this,i)||this).imageRatio_=void 0!==n.imageRatio?n.imageRatio:1,r}return sg(e,t),e.prototype.getImageRatio=function(){return this.imageRatio_},e.prototype.createRenderer=function(){return new Ld(this)},e}(zp),lg=(Kd=function(t,e){return(Kd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Kd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),cg=function(t){function e(e){var r=this,n=e||{},i=p({},n);delete i.preload,delete i.useInterimTilesOnError,r=t.call(this,i)||this;var o=n.renderMode||"hybrid";return ut(null==o||"image"==o||"hybrid"==o||o==Ad,28),r.renderMode_=o,r.setPreload(n.preload?n.preload:0),r.setUseInterimTilesOnError(void 0===n.useInterimTilesOnError||n.useInterimTilesOnError),r}return lg(e,t),e.prototype.createRenderer=function(){return new Nd(this)},e.prototype.getFeatures=function(e){return t.prototype.getFeatures.call(this,e)},e.prototype.getRenderMode=function(){return this.renderMode_},e.prototype.getPreload=function(){return this.get(bf)},e.prototype.getUseInterimTilesOnError=function(){return this.get(wf)},e.prototype.setPreload=function(t){this.set(bf,t)},e.prototype.setUseInterimTilesOnError=function(t){this.set(wf,t)},e}(zp),hg=(qd=function(t,e){return(qd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}qd(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),fg=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.features=n,o.file=r,o.projection=i,o}return hg(e,t),e}(j);function pg(t){for(var e=t.dataTransfer.files,r=0,n=e.length;r<n;++r){var i=e.item(r),o=new FileReader;o.addEventListener(X,this.handleResult_.bind(this,i)),o.readAsText(i)}}function dg(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}var gg,yg,_g=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,{handleEvent:C})||this).formatConstructors_=n.formatConstructors?n.formatConstructors:[],r.projection_=n.projection?De(n.projection):null,r.dropListenKeys_=null,r.source_=n.source||null,r.target=n.target?n.target:null,r}return hg(e,t),e.prototype.handleResult_=function(t,e){var r=e.target.result,n=this.getMap(),i=this.projection_;i||(i=n.getView().getProjection());for(var o=this.formatConstructors_,a=[],s=0,u=o.length;s<u;++s){var l=new o[s];if((a=this.tryReadFeatures_(l,r,{featureProjection:i}))&&a.length>0)break}this.source_&&(this.source_.clear(),this.source_.addFeatures(a)),this.dispatchEvent(new fg("addfeatures",t,a,i))},e.prototype.registerListeners_=function(){var t=this.getMap();if(t){var e=this.target?this.target:t.getViewport();this.dropListenKeys_=[_(e,W,pg,this),_(e,"dragenter",dg,this),_(e,"dragover",dg,this),_(e,W,dg,this)]}},e.prototype.setActive=function(e){!this.getActive()&&e&&this.registerListeners_(),this.getActive()&&!e&&this.unregisterListeners_(),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.unregisterListeners_(),t.prototype.setMap.call(this,e),this.getActive()&&this.registerListeners_()},e.prototype.tryReadFeatures_=function(t,e,r){try{return t.readFeatures(e,r)}catch(t){return null}},e.prototype.unregisterListeners_=function(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(m),this.dropListenKeys_=null)},e}(Xo),vg=(yg=function(t,e){return(yg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}yg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),mg=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).condition_=n.condition?n.condition:oa,r.lastAngle_=void 0,r.lastMagnitude_=void 0,r.lastScaleDelta_=0,r.duration_=void 0!==n.duration?n.duration:400,r}return vg(e,t),e.prototype.handleDragEvent=function(t){if(sa(t)){var e=t.map,r=e.getSize(),n=t.pixel,i=n[0]-r[0]/2,o=r[1]/2-n[1],a=Math.atan2(o,i),s=Math.sqrt(i*i+o*o),u=e.getView();if(void 0!==this.lastAngle_){var l=this.lastAngle_-a;u.adjustRotationInternal(l)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&u.adjustResolutionInternal(this.lastMagnitude_/s),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/s),this.lastMagnitude_=s}},e.prototype.handleUpEvent=function(t){if(!sa(t))return!0;var e=t.map.getView(),r=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,r),this.lastScaleDelta_=0,!1},e.prototype.handleDownEvent=function(t){return!!sa(t)&&!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0)},e}(fa),bg=(gg=function(t,e){return(gg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}gg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),wg=function(t){function e(e,r,n){var i=t.call(this)||this;if(void 0!==n&&void 0===r)i.setFlatCoordinates(n,e);else{var o=r||0;i.setCenterAndRadius(e,o,n)}return i}return bg(e,t),e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,r,n){var i=this.flatCoordinates,o=t-i[0],a=e-i[1],s=o*o+a*a;if(s<n){if(0===s)for(var u=0;u<this.stride;++u)r[u]=i[u];else{var l=this.getRadius()/Math.sqrt(s);for(r[0]=i[0]+l*o,r[1]=i[1]+l*a,u=2;u<this.stride;++u)r[u]=i[u]}return r.length=this.stride,s}return n},e.prototype.containsXY=function(t,e){var r=this.flatCoordinates,n=t-r[0],i=e-r[1];return n*n+i*i<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,r=e[this.stride]-e[0];return xt(e[0]-r,e[1]-r,e[0]+r,e[1]+r,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return Qt.CIRCLE},e.prototype.intersectsExtent=function(t){if(Wt(t,this.getExtent())){var e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Rt(t,this.intersectsCoordinate.bind(this))}return!1},e.prototype.setCenter=function(t){var e=this.stride,r=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+r;for(var i=1;i<e;++i)n[e+i]=t[i];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,r){this.setLayout(r,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,i=Tr(n,0,t,this.stride);n[i++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[i++]=n[o];n.length=i,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(te(r,0,r.length,n,t,e,r)),this.changed()},e.prototype.translate=function(t,e){var r=this.getCenter(),n=this.getStride();this.setCenter(ee(r,0,r.length,n,t,e,r)),this.changed()},e}(br);wg.prototype.transform;var xg,Sg,Eg=wg,Og=(Sg=function(t,e){return(Sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Sg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Mg=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.ends_=[],i.maxDelta_=-1,i.maxDeltaRevision_=-1,Array.isArray(e[0]))i.setCoordinates(e,r);else if(void 0!==r&&n)i.setFlatCoordinates(r,e),i.ends_=n;else{for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout()),O(s,h.getFlatCoordinates()),u.push(s.length)}i.setFlatCoordinates(o,s),i.ends_=u}return i}return Og(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?O(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice())},e.prototype.closestPointXY=function(t,e,r,n){return n<yt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Or(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Pr(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,r,n))},e.prototype.getCoordinateAtM=function(t,e,r){if(this.layout!=Ht&&this.layout!=Jt||0===this.flatCoordinates.length)return null;var n=void 0!==e&&e,i=void 0!==r&&r;return function(t,e,r,n,i,o,a){if(a)return Bd(t,e,r[r.length-1],n,i,o);var s;if(i<t[n-1])return o?((s=t.slice(0,n))[n-1]=i,s):null;if(t[t.length-1]<i)return o?((s=t.slice(t.length-n))[n-1]=i,s):null;for(var u=0,l=r.length;u<l;++u){var c=r[u];if(e!=c){if(i<t[e+n-1])return null;if(i<=t[c-1])return Bd(t,e,c,n,i,!1);e=c}}return null}(this.flatCoordinates,0,this.ends_,this.stride,t,n,i)},e.prototype.getCoordinates=function(){return Lr(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new Yd(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,r=this.layout,n=[],i=0,o=0,a=e.length;o<a;++o){var s=e[o],u=new Yd(t.slice(i,s),r);n.push(u),i=s}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,r=0,n=this.ends_,i=this.stride,o=0,a=n.length;o<a;++o){var s=n[o];O(t,Gd(e,r,s,i,.5)),r=s}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=function(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u];a=kr(t,e,c,n,i,o,a),s.push(a),e=c}return a}(this.flatCoordinates,0,this.ends_,this.stride,t,r,0,n),new e(r,qt,n)},e.prototype.getType=function(){return Qt.MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){if(Hr(t,e,r[o],n,i))return!0;e=r[o]}return!1}(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var r=Ir(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===r.length?0:r[r.length-1],this.changed()},e}(br),Pg=(xg=function(t,e){return(xg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}xg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Tg=function(t){function e(e,r){var n=t.call(this)||this;return r&&!Array.isArray(e[0])?n.setFlatCoordinates(r,e):n.setCoordinates(e,r),n}return Pg(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?O(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),this.layout)},e.prototype.closestPointXY=function(t,e,r,n){if(n<yt(this.getExtent(),t,e))return n;for(var i=this.flatCoordinates,o=this.stride,a=0,s=i.length;a<s;a+=o){var u=oe(t,e,i[a],i[a+1]);if(u<n){n=u;for(var l=0;l<o;++l)r[l]=i[a+l];r.length=o}}return n},e.prototype.getCoordinates=function(){return Rr(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new Wr(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,r=this.stride,n=[],i=0,o=t.length;i<o;i+=r){var a=new Wr(t.slice(i,i+r),e);n.push(a)}return n},e.prototype.getType=function(){return Qt.MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,r=this.stride,n=0,i=e.length;n<i;n+=r)if(mt(t,e[n],e[n+1]))return!0;return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Cr(this.flatCoordinates,0,t,this.stride),this.changed()},e}(br);function Cg(t,e,r,n){for(var i=[],o=[1/0,1/0,-1/0,-1/0],a=0,s=r.length;a<s;++a){var u=r[a];o=Ot(t,e,u[0],n),i.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=u[u.length-1]}return i}var Ig,Rg,Lg,Ag=(Rg=function(t,e){return(Rg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Rg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),kg=function(t){function e(e,r,n){var i=t.call(this)||this;if(i.endss_=[],i.flatInteriorPointsRevision_=-1,i.flatInteriorPoints_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=i.getLayout(),a=e,s=[],u=[],l=0,c=a.length;l<c;++l){var h=a[l];0===l&&(o=h.getLayout());for(var f=s.length,p=h.getEnds(),d=0,g=p.length;d<g;++d)p[d]+=f;O(s,h.getFlatCoordinates()),u.push(p)}r=o,e=s,n=u}return void 0!==r&&n?(i.setFlatCoordinates(r,e),i.endss_=n):i.setCoordinates(e,r),i}return Ag(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var r=this.flatCoordinates.length;O(this.flatCoordinates,t.getFlatCoordinates());for(var n=0,i=(e=t.getEnds().slice()).length;n<i;++n)e[n]+=r}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,r=new Array(t),n=0;n<t;++n)r[n]=this.endss_[n].slice();return new e(this.flatCoordinates.slice(),this.layout,r)},e.prototype.closestPointXY=function(t,e,r,n){return n<yt(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];i=Or(t,e,s,n,i),e=s[s.length-1]}return i}(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),function(t,e,r,n,i,o,a,s,u,l,c){for(var h=[NaN,NaN],f=0,p=r.length;f<p;++f){var d=r[f];l=Pr(t,e,d,n,i,!0,a,s,u,l,h),e=d[d.length-1]}return l}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,0,t,e,r,n))},e.prototype.containsXY=function(t,e){return function(t,e,r,n,i,o){if(0===r.length)return!1;for(var a=0,s=r.length;a<s;++a){var u=r[a];if(Xr(t,e,u,n,i,o))return!0;e=u[u.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return function(t,e,r,n){for(var i=0,o=0,a=r.length;o<a;++o){var s=r[o];i+=xr(t,e,s,n),e=s[s.length-1]}return i}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?rn(e=this.getOrientedFlatCoordinates().slice(),0,this.endss_,this.stride,t):e=this.flatCoordinates,Ar(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=Cg(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=qr(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new Tg(this.getFlatInteriorPoints().slice(),Ht)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;!function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(!tn(t,e,s,n,void 0))return!1;s.length&&(e=s[s.length-1])}return!0}(t,0,this.endss_,this.stride)?(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=rn(this.orientedFlatCoordinates_,0,this.endss_,this.stride)):this.orientedFlatCoordinates_=t,this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var r=[],n=[];return r.length=function(t,e,r,n,i,o,a,s){for(var u=0,l=r.length;u<l;++u){var c=r[u],h=[];a=Nr(t,e,c,n,i,o,a,h),s.push(h),e=c[c.length-1]}return a}(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),r,0,n),new e(r,qt,n)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var r=this.endss_[t-1];e=r[r.length-1]}var n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new sn(this.flatCoordinates.slice(e,i),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,r=this.endss_,n=[],i=0,o=0,a=r.length;o<a;++o){var s=r[o].slice(),u=s[s.length-1];if(0!==i)for(var l=0,c=s.length;l<c;++l)s[l]-=i;var h=new sn(e.slice(i,u),t,s);n.push(h),i=u}return n},e.prototype.getType=function(){return Qt.MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return function(t,e,r,n,i){for(var o=0,a=r.length;o<a;++o){var s=r[o];if(Jr(t,e,s,n,i))return!0;e=s[s.length-1]}return!1}(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var r=function(t,e,r,n,i){for(var o=i||[],a=0,s=0,u=r.length;s<u;++s){var l=Ir(t,e,r[s],n,o[a]);o[a++]=l,e=l[l.length-1]}return o.length=a,o}(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===r.length)this.flatCoordinates.length=0;else{var n=r[r.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(br),Fg=(Ig=function(t,e){return(Ig=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ig(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),jg="Point",Ng="LineString",Dg="Polygon",zg="drawstart",Gg=function(t){function e(e,r){var n=t.call(this,e)||this;return n.feature=r,n}return Fg(e,t),e}(j),Bg=function(t){function e(e){var r=this,n=e;n.stopDown||(n.stopDown=I),(r=t.call(this,n)||this).shouldHandle_=!1,r.downPx_=null,r.downTimeout_,r.lastDragTime_,r.freehand_=!1,r.source_=e.source?e.source:null,r.features_=e.features?e.features:null,r.snapTolerance_=e.snapTolerance?e.snapTolerance:12,r.type_=e.type,r.mode_=function(t){var e;return t===Qt.POINT||t===Qt.MULTI_POINT?e=jg:t===Qt.LINE_STRING||t===Qt.MULTI_LINE_STRING?e=Ng:t===Qt.POLYGON||t===Qt.MULTI_POLYGON?e=Dg:t===Qt.CIRCLE&&(e="Circle"),e}(r.type_),r.stopClick_=!!e.stopClick,r.minPoints_=e.minPoints?e.minPoints:r.mode_===Dg?3:2,r.maxPoints_=e.maxPoints?e.maxPoints:1/0,r.finishCondition_=e.finishCondition?e.finishCondition:C;var i,o=e.geometryFunction;if(!o)if(r.type_===Qt.CIRCLE)o=function(t,e,r){var n=e||new Eg([NaN,NaN]),i=er(t[0]),o=Pi(i,er(t[1]));n.setCenterAndRadius(i,Math.sqrt(o));var a=$e();return a&&n.transform(r,a),n};else{var a,s=r.mode_;s===jg?a=Wr:s===Ng?a=Yd:s===Dg&&(a=sn),o=function(t,e,r){var n=e;return n?s===Dg?t[0].length?n.setCoordinates([t[0].concat([t[0][0]])]):n.setCoordinates([]):n.setCoordinates(t):n=new a(t),n}}return r.geometryFunction_=o,r.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,r.finishCoordinate_=null,r.sketchFeature_=null,r.sketchPoint_=null,r.sketchCoords_=null,r.sketchLine_=null,r.sketchLineCoords_=null,r.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,r.overlay_=new zd({source:new ch({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(i=tc(),function(t,e){return i[t.getGeometry().getType()]}),updateWhileInteracting:!0}),r.geometryName_=e.geometryName,r.condition_=e.condition?e.condition:ia,r.freehandCondition_,e.freehand?r.freehandCondition_=ta:r.freehandCondition_=e.freehandCondition?e.freehandCondition:oa,r.addEventListener(rt(Uo),r.updateState_),r}return Fg(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===B&&e.preventDefault(),this.freehand_=this.mode_!==jg&&this.freehandCondition_(e);var r=e.type===Wn.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===Wn.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,r=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===Wn.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===Wn.POINTERDOWN?n=!1:r?(n=e.type===Wn.POINTERMOVE)&&this.freehand_?n=this.handlePointerMove_(e):("mouse"==e.pointerEvent.pointerType||e.type===Wn.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===Wn.DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new Vn(Wn.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var r="Circle"===this.mode_;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||r?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate):(this.startDrawing_(t),this.mode_===jg&&this.finishDrawing()),e=!1):this.freehand_&&this.abortDrawing(),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,r=t.pixel,n=e[0]-r[0],i=e[1]-r[1],o=n*n+i*i;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var r=!1,n=[this.finishCoordinate_];if(this.mode_===Ng)r=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===Dg){var i=this.sketchCoords_;r=i[0].length>this.minPoints_,n=[i[0][0],i[0][i[0].length-2]]}if(r)for(var o=t.map,a=0,s=n.length;a<s;a++){var u=n[a],l=o.getPixelFromCoordinate(u),c=t.pixel,h=c[0]-l[0],f=c[1]-l[1],p=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(h*h+f*f)<=p){this.finishCoordinate_=u;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new ht(new Wr(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate,r=t.map.getView().getProjection();this.finishCoordinate_=e,this.mode_===jg?this.sketchCoords_=e.slice():this.mode_===Dg?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new ht(new Yd(this.sketchLineCoords_)));var n=this.geometryFunction_(this.sketchCoords_,void 0,r);this.sketchFeature_=new ht,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new Gg(zg,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,r,n,i=t.coordinate,o=this.sketchFeature_.getGeometry(),a=t.map.getView().getProjection();if(this.mode_===jg?r=this.sketchCoords_:this.mode_===Dg?(r=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(i=this.finishCoordinate_.slice())):r=(e=this.sketchCoords_)[e.length-1],r[0]=i[0],r[1]=i[1],this.geometryFunction_(this.sketchCoords_,o,a),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(i),o.getType()==Qt.POLYGON&&this.mode_!==Dg){this.sketchLine_||(this.sketchLine_=new ht);var s=o.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(s.getLayout(),s.getFlatCoordinates()),n.changed()):(n=new Yd(s.getFlatCoordinates(),s.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,r,n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();this.mode_===Ng?(this.finishCoordinate_=t.slice(),(r=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),this.geometryFunction_(r,n,i)):this.mode_===Dg&&((r=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?r.pop():e=!0),r.push(t.slice()),e&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===Ng?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e,r),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===Dg&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,r)),0===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,r=t.getGeometry(),n=this.getMap().getView().getProjection();this.mode_===Ng?(e.pop(),this.geometryFunction_(e,r,n)):this.mode_===Dg&&(e[0].pop(),this.geometryFunction_(e,r,n),e=r.getCoordinates()),this.type_===Qt.MULTI_POINT?t.setGeometry(new Tg([e])):this.type_===Qt.MULTI_LINE_STRING?t.setGeometry(new Mg([e])):this.type_===Qt.MULTI_POLYGON&&t.setGeometry(new kg([e])),this.dispatchEvent(new Gg("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new Gg("drawabort",t))},e.prototype.appendCoordinates=function(t){var e=this.mode_,r=[];e===Ng?r=this.sketchCoords_:e===Dg&&(r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]);for(var n=r.pop(),i=0;i<t.length;i++)this.addToDrawing_(t[i]);this.addToDrawing_(n)},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new Gg(zg,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(fa),Ug=(Lg=function(t,e){return(Lg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Lg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Wg=function(t){function e(e){var r=t.call(this,"extentchanged")||this;return r.extent=e,r}return Ug(e,t),e}(j);function Yg(){var t=tc();return function(e,r){return t[Qt.POINT]}}function Vg(t){return function(e){return pt([t,e])}}function Xg(t,e){return t[0]==e[0]?function(r){return pt([t,[r[0],e[1]]])}:t[1]==e[1]?function(r){return pt([t,[e[0],r[1]]])}:null}var Zg,qg=function(t){function e(e){var r,n=this,i=e||{};return(n=t.call(this,i)||this).extent_=null,n.pointerHandler_=null,n.pixelTolerance_=void 0!==i.pixelTolerance?i.pixelTolerance:10,n.snappedToVertex_=!1,n.extentFeature_=null,n.vertexFeature_=null,e||(e={}),n.extentOverlay_=new zd({source:new ch({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.boxStyle?e.boxStyle:(r=tc(),function(t,e){return r[Qt.POLYGON]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),n.vertexOverlay_=new zd({source:new ch({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.pointerStyle?e.pointerStyle:Yg(),updateWhileAnimating:!0,updateWhileInteracting:!0}),e.extent&&n.setExtent(e.extent),n}return Ug(e,t),e.prototype.snapToVertex_=function(t,e){var r=e.getCoordinateFromPixelInternal(t),n=this.getExtentInternal();if(n){var i=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(n);i.sort((function(t,e){return Ci(r,t)-Ci(r,e)}));var o=i[0],a=wi(r,o),s=e.getPixelFromCoordinateInternal(a);if(Ti(t,s)<=this.pixelTolerance_){var u=e.getPixelFromCoordinateInternal(o[0]),l=e.getPixelFromCoordinateInternal(o[1]),c=Pi(s,u),h=Pi(s,l),f=Math.sqrt(Math.min(c,h));return this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(a=c>h?o[1]:o[0]),a}}return null},e.prototype.handlePointerMove_=function(t){var e=t.pixel,r=t.map,n=this.snapToVertex_(e,r);n||(n=r.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)},e.prototype.createOrUpdateExtentFeature_=function(t){var e=this.extentFeature_;return e?t?e.setGeometry(ln(t)):e.setGeometry(void 0):(e=new ht(t?ln(t):{}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e},e.prototype.createOrUpdatePointerFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new ht(new Wr(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(e.type!=Wn.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),t.prototype.handleEvent.call(this,e),!1)},e.prototype.handleDownEvent=function(t){var e=t.pixel,r=t.map,n=this.getExtentInternal(),i=this.snapToVertex_(e,r),o=function(t){var e=null,r=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?r=n[3]:t[1]==n[3]&&(r=n[1]),null!==e&&null!==r?[e,r]:null};if(i&&n){var a=i[0]==n[0]||i[0]==n[2]?i[0]:null,s=i[1]==n[1]||i[1]==n[3]?i[1]:null;null!==a&&null!==s?this.pointerHandler_=Vg(o(i)):null!==a?this.pointerHandler_=Xg(o([a,n[1]]),o([a,n[3]])):null!==s&&(this.pointerHandler_=Xg(o([n[0],s]),o([n[2],s])))}else i=r.getCoordinateFromPixelInternal(e),this.setExtent([i[0],i[1],i[0],i[1]]),this.pointerHandler_=Vg(i);return!0},e.prototype.handleDragEvent=function(t){if(this.pointerHandler_){var e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}return!0},e.prototype.handleUpEvent=function(t){this.pointerHandler_=null;var e=this.getExtentInternal();return e&&0!==Lt(e)||this.setExtent(null),!1},e.prototype.setMap=function(e){this.extentOverlay_.setMap(e),this.vertexOverlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getExtent=function(){return rr(this.getExtentInternal(),this.getMap().getView().getProjection())},e.prototype.getExtentInternal=function(){return this.extent_},e.prototype.setExtent=function(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new Wg(this.extent_))},e}(fa),Kg=(Zg=function(t,e){return(Zg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Zg(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Hg=[0,0,0,0],Jg=[],Qg="modifyend",$g=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.features=r,i.mapBrowserEvent=n,i}return Kg(e,t),e}(j);function ty(t,e){return t.index-e.index}function ey(t,e,r){var n=e.geometry;if(n.getType()===Qt.CIRCLE){var i=n;if(1===e.index){var o=$e();o&&(i=i.clone().transform(o,r));var a=Pi(i.getCenter(),er(t)),s=Math.sqrt(a)-i.getRadius();return s*s}}var u=er(t);return Jg[0]=er(e.segment[0]),Jg[1]=er(e.segment[1]),Ci(u,Jg)}function ry(t,e,r){var n=e.geometry;if(n.getType()===Qt.CIRCLE&&1===e.index){var i=n,o=$e();return o&&(i=i.clone().transform(o,r)),tr(i.getClosestPoint(er(t)))}var a=er(t);return Jg[0]=er(e.segment[0]),Jg[1]=er(e.segment[1]),tr(wi(a,Jg))}var ny,iy=function(t){function e(e){var r,n,i=t.call(this,e)||this;if(i.boundHandleFeatureChange_=i.handleFeatureChange_.bind(i),i.condition_=e.condition?e.condition:ua,i.defaultDeleteCondition_=function(t){return Jo(t)&&na(t)},i.deleteCondition_=e.deleteCondition?e.deleteCondition:i.defaultDeleteCondition_,i.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:ta,i.vertexFeature_=null,i.vertexSegments_=null,i.lastPixel_=[0,0],i.ignoreNextSingleClick_=!1,i.modified_=!1,i.rBush_=new sh,i.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,i.snappedToVertex_=!1,i.changingFeature_=!1,i.dragSegments_=[],i.overlay_=new zd({source:new ch({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:(r=tc(),function(t,e){return r[Qt.POINT]}),updateWhileAnimating:!0,updateWhileInteracting:!0}),i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i)},i.source_=null,e.source?(i.source_=e.source,n=new st(i.source_.getFeatures()),i.source_.addEventListener(rh,i.handleSourceAdd_.bind(i)),i.source_.addEventListener(ih,i.handleSourceRemove_.bind(i))):n=e.features,!n)throw new Error("The modify interaction requires features or a source");return i.features_=n,i.features_.forEach(i.addFeature_.bind(i)),i.features_.addEventListener(c,i.handleFeatureAdd_.bind(i)),i.features_.addEventListener(h,i.handleFeatureRemove_.bind(i)),i.lastPointerEvent_=null,i}return Kg(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var r=this.SEGMENT_WRITERS_[e.getType()];r&&r(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(z,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t){this.modified_||(this.modified_=!0,this.dispatchEvent(new $g("modifystart",this.features_,t)))},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(z,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,r=[];e.forEach((function(e){t===e.feature&&r.push(e)}));for(var n=r.length-1;n>=0;--n){for(var i=r[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===i&&this.dragSegments_.splice(o,1);e.remove(i)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,geometry:e,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(pt(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(pt(u),l)}},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,geometry:e,depth:[n],index:a,segment:u};this.rBush_.insert(pt(u),l)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,geometry:e,depth:[a,n],index:l,segment:h};this.rBush_.insert(pt(h),f)}},e.prototype.writeCircleGeometry_=function(t,e){var r=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[r,r]},i={feature:t,geometry:e,index:1,segment:[r,r]},o=[n,i];n.featureSegments=o,i.featureSegments=o,this.rBush_.insert(Et(r),n);var a=e,s=$e();if(s&&this.getMap()){var u=this.getMap().getView().getProjection();a=cn(a=a.clone().transform(s,u)).transform(u,s)}this.rBush_.insert(a.getExtent(),i)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=r[n];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}},e.prototype.createOrUpdateVertexFeature_=function(t){var e=this.vertexFeature_;return e?e.getGeometry().setCoordinates(t):(e=new ht(new Wr(t)),this.vertexFeature_=e,this.overlay_.getSource().addFeature(e)),e},e.prototype.handleEvent=function(e){return!e.pointerEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=Wn.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(r=!(e.type!=Wn.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==Wn.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!r);var r},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t);for(var e=t.coordinate,r=0,n=this.dragSegments_.length;r<n;++r){for(var i=this.dragSegments_[r],o=i[0],a=o.depth,s=o.geometry,u=void 0,l=o.segment,c=i[1];e.length<s.getStride();)e.push(l[c][e.length]);switch(s.getType()){case Qt.POINT:u=e,l[0]=e,l[1]=e;break;case Qt.MULTI_POINT:(u=s.getCoordinates())[o.index]=e,l[0]=e,l[1]=e;break;case Qt.LINE_STRING:(u=s.getCoordinates())[o.index+c]=e,l[c]=e;break;case Qt.MULTI_LINE_STRING:case Qt.POLYGON:(u=s.getCoordinates())[a[0]][o.index+c]=e,l[c]=e;break;case Qt.MULTI_POLYGON:(u=s.getCoordinates())[a[1]][a[0]][o.index+c]=e,l[c]=e;break;case Qt.CIRCLE:if(l[0]=e,l[1]=e,0===o.index)this.changingFeature_=!0,s.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var h=t.map.getView().getProjection(),f=Ti(er(s.getCenter()),er(e)),p=$e();if(p){var d=s.clone().transform(p,h);d.setRadius(f),f=d.transform(h,p).getRadius()}s.setRadius(f),this.changingFeature_=!1}}u&&this.setGeometryCoordinates_(s,u)}this.createOrUpdateVertexFeature_(e)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.modified_=!1;var r=this.vertexFeature_;if(r){var n=t.map.getView().getProjection(),i=[],a=r.getGeometry().getCoordinates(),s=pt([a]),u=this.rBush_.getInExtent(s),l={};u.sort(ty);for(var c=0,h=u.length;c<h;++c){var f=u[c],p=f.segment,d=o(f.feature),g=f.depth;if(g&&(d+="-"+g.join("-")),l[d]||(l[d]=new Array(2)),f.geometry.getType()!==Qt.CIRCLE||1!==f.index)if(!Ei(p[0],a)||l[d][0])if(!Ei(p[1],a)||l[d][1])o(p)in this.vertexSegments_&&!l[d][0]&&!l[d][1]&&this.insertVertexCondition_(t)&&i.push([f,a]);else{if((f.geometry.getType()===Qt.LINE_STRING||f.geometry.getType()===Qt.MULTI_LINE_STRING)&&l[d][0]&&0===l[d][0].index)continue;this.dragSegments_.push([f,1]),l[d][1]=f}else this.dragSegments_.push([f,0]),l[d][0]=f;else Ei(ry(e,f,n),a)&&!l[d][0]&&(this.dragSegments_.push([f,0]),l[d][0]=f)}i.length&&this.willModifyFeatures_(t);for(var y=i.length-1;y>=0;--y)this.insertVertex_.apply(this,i[y])}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var r=this.dragSegments_[e][0],n=r.geometry;if(n.getType()===Qt.CIRCLE){var i=n.getCenter(),o=r.featureSegments[0],a=r.featureSegments[1];o.segment[0]=i,o.segment[1]=i,a.segment[0]=i,a.segment[1]=i,this.rBush_.update(Et(i),o);var s=n,u=$e();if(u){var l=t.map.getView().getProjection();s=cn(s=s.clone().transform(u,l)).transform(l,u)}this.rBush_.update(s.getExtent(),a)}else this.rBush_.update(pt(r.segment),r)}return this.modified_&&(this.dispatchEvent(new $g(Qg,this.features_,t)),this.modified_=!1),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,r){var n=r||e.getCoordinateFromPixel(t),i=e.getView().getProjection(),a=rr(dt(nr(Et(n,Hg)),e.getView().getResolution()*this.pixelTolerance_,Hg)),s=this.rBush_.getInExtent(a);if(s.length>0){s.sort((function(t,e){return ey(n,t,i)-ey(n,e,i)}));var u=s[0],l=u.segment,c=ry(n,u,i),h=e.getPixelFromCoordinate(c),f=Ti(t,h);if(f<=this.pixelTolerance_){var p={};if(u.geometry.getType()===Qt.CIRCLE&&1===u.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c);else{var d=e.getPixelFromCoordinate(l[0]),g=e.getPixelFromCoordinate(l[1]),y=Pi(h,d),_=Pi(h,g);f=Math.sqrt(Math.min(y,_)),this.snappedToVertex_=f<=this.pixelTolerance_,this.snappedToVertex_&&(c=y>_?l[1]:l[0]),this.createOrUpdateVertexFeature_(c);for(var v=1,m=s.length;v<m;++v){var b=s[v].segment;if(!(Ei(l[0],b[0])&&Ei(l[1],b[1])||Ei(l[0],b[1])&&Ei(l[1],b[0])))break;p[o(b)]=!0}}return p[o(l)]=!0,void(this.vertexSegments_=p)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){for(var r,n=t.segment,i=t.feature,o=t.geometry,a=t.depth,s=t.index;e.length<o.getStride();)e.push(0);switch(o.getType()){case Qt.MULTI_LINE_STRING:case Qt.POLYGON:(r=o.getCoordinates())[a[0]].splice(s+1,0,e);break;case Qt.MULTI_POLYGON:(r=o.getCoordinates())[a[1]][a[0]].splice(s+1,0,e);break;case Qt.LINE_STRING:(r=o.getCoordinates()).splice(s+1,0,e);break;default:return}this.setGeometryCoordinates_(o,r);var u=this.rBush_;u.remove(t),this.updateSegmentIndices_(o,s,a,1);var l={segment:[n[0],e],feature:i,geometry:o,depth:a,index:s};u.insert(pt(l.segment),l),this.dragSegments_.push([l,1]);var c={segment:[e,n[1]],feature:i,geometry:o,depth:a,index:s+1};u.insert(pt(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Wn.POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t);var e=this.removeVertex_();return this.dispatchEvent(new $g(Qg,this.features_,t)),this.modified_=!1,e}return!1},e.prototype.removeVertex_=function(){var t,e,r,n,i,a,s,u,l,c,h,f=this.dragSegments_,p={},d=!1;for(i=f.length-1;i>=0;--i)h=o((c=(r=f[i])[0]).feature),c.depth&&(h+="-"+c.depth.join("-")),h in p||(p[h]={}),0===r[1]?(p[h].right=c,p[h].index=c.index):1==r[1]&&(p[h].left=c,p[h].index=c.index+1);for(h in p){switch(l=p[h].right,s=p[h].left,(u=(a=p[h].index)-1)<0&&(u=0),t=e=(n=(c=void 0!==s?s:l).geometry).getCoordinates(),d=!1,n.getType()){case Qt.MULTI_LINE_STRING:e[c.depth[0]].length>2&&(e[c.depth[0]].splice(a,1),d=!0);break;case Qt.LINE_STRING:e.length>2&&(e.splice(a,1),d=!0);break;case Qt.MULTI_POLYGON:t=t[c.depth[1]];case Qt.POLYGON:(t=t[c.depth[0]]).length>4&&(a==t.length-1&&(a=0),t.splice(a,1),d=!0,0===a&&(t.pop(),t.push(t[0]),u=t.length-1))}if(d){this.setGeometryCoordinates_(n,e);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==l&&(this.rBush_.remove(l),g.push(l.segment[1])),void 0!==s&&void 0!==l){var y={depth:c.depth,feature:c.feature,geometry:c.geometry,index:u,segment:g};this.rBush_.insert(pt(y.segment),y)}this.updateSegmentIndices_(n,a,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),f.length=0}}return d},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,r,n){this.rBush_.forEachInExtent(t.getExtent(),(function(i){i.geometry===t&&(void 0===r||void 0===i.depth||P(i.depth,r))&&i.index>e&&(i.index+=n)}))},e}(fa),oy=(ny=function(t,e){return(ny=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ny(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ay=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.selected=r,o.deselected=n,o.mapBrowserEvent=i,o}return oy(e,t),e}(j),sy={};function uy(t){if(!this.condition_(t))return!0;var e=this.addCondition_(t),r=this.removeCondition_(t),n=this.toggleCondition_(t),i=!e&&!r&&!n,o=t.map,a=this.getFeatures(),s=[],u=[];if(i){d(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,function(t,e){if(this.filter_(t,e))return u.push(t),this.addFeatureLayerAssociation_(t,e),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var l=a.getLength()-1;l>=0;--l){var c=a.item(l),h=u.indexOf(c);h>-1?u.splice(h,1):(a.remove(c),s.push(c))}0!==u.length&&a.extend(u)}else{o.forEachFeatureAtPixel(t.pixel,function(t,i){if(this.filter_(t,i))return!e&&!n||x(a.getArray(),t)?(r||n)&&x(a.getArray(),t)&&(s.push(t),this.removeFeatureLayerAssociation_(t)):(u.push(t),this.addFeatureLayerAssociation_(t,i)),!this.multi_}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(var f=s.length-1;f>=0;--f)a.remove(s[f]);a.extend(u)}return(u.length>0||s.length>0)&&this.dispatchEvent(new ay("select",u,s,t)),!0}var ly,cy=function(t){function e(e){var r,n,i=t.call(this,{handleEvent:uy})||this,o=e||{};if(i.boundAddFeature_=i.addFeature_.bind(i),i.boundRemoveFeature_=i.removeFeature_.bind(i),i.condition_=o.condition?o.condition:na,i.addCondition_=o.addCondition?o.addCondition:ra,i.removeCondition_=o.removeCondition?o.removeCondition:ra,i.toggleCondition_=o.toggleCondition?o.toggleCondition:oa,i.multi_=!!o.multi&&o.multi,i.filter_=o.filter?o.filter:C,i.hitTolerance_=o.hitTolerance?o.hitTolerance:0,i.style_=void 0!==o.style?o.style:(O((r=tc())[Qt.POLYGON],r[Qt.LINE_STRING]),O(r[Qt.GEOMETRY_COLLECTION],r[Qt.LINE_STRING]),function(t){return t.getGeometry()?r[t.getGeometry().getType()]:null}),i.features_=o.features||new st,o.layers)if("function"==typeof o.layers)n=o.layers;else{var a=o.layers;n=function(t){return x(a,t)}}else n=C;return i.layerFilter_=n,i.featureLayerAssociation_={},i}return oy(e,t),e.prototype.addFeatureLayerAssociation_=function(t,e){this.featureLayerAssociation_[o(t)]=e},e.prototype.getFeatures=function(){return this.features_},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.getLayer=function(t){return this.featureLayerAssociation_[o(t)]},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),t.prototype.setMap.call(this,e),e?(this.features_.addEventListener(c,this.boundAddFeature_),this.features_.addEventListener(h,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(c,this.boundAddFeature_),this.features_.removeEventListener(h,this.boundRemoveFeature_))},e.prototype.addFeature_=function(t){var e=t.element;this.style_&&this.applySelectedStyle_(e)},e.prototype.removeFeature_=function(t){var e=t.element;this.style_&&this.restorePreviousStyle_(e)},e.prototype.getStyle=function(){return this.style_},e.prototype.applySelectedStyle_=function(t){var e=o(t);e in sy||(sy[e]=t.getStyle()),t.setStyle(this.style_)},e.prototype.restorePreviousStyle_=function(t){var r=o(t),n=this.getMap().getInteractions().getArray().filter((function(r){return r instanceof e&&r.getStyle()&&-1!==r.getFeatures().getArray().indexOf(t)}));n.length>0?t.setStyle(n[n.length-1].getStyle()):(t.setStyle(sy[r]),delete sy[r])},e.prototype.removeFeatureLayerAssociation_=function(t){delete this.featureLayerAssociation_[o(t)]},e}(Xo),hy=(ly=function(t,e){return(ly=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ly(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function fy(t){return t.feature?t.feature:t.element?t.element:void 0}var py,dy,gy=[],yy=function(t){function e(e){var r=this,n=e||{},i=n;return i.handleDownEvent||(i.handleDownEvent=C),i.stopDown||(i.stopDown=I),(r=t.call(this,i)||this).source_=n.source?n.source:null,r.vertex_=void 0===n.vertex||n.vertex,r.edge_=void 0===n.edge||n.edge,r.features_=n.features?n.features:null,r.featuresListenerKeys_=[],r.featureChangeListenerKeys_={},r.indexedFeaturesExtents_={},r.pendingFeatures_={},r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.rBush_=new sh,r.SEGMENT_WRITERS_={Point:r.writePointGeometry_.bind(r),LineString:r.writeLineStringGeometry_.bind(r),LinearRing:r.writeLineStringGeometry_.bind(r),Polygon:r.writePolygonGeometry_.bind(r),MultiPoint:r.writeMultiPointGeometry_.bind(r),MultiLineString:r.writeMultiLineStringGeometry_.bind(r),MultiPolygon:r.writeMultiPolygonGeometry_.bind(r),GeometryCollection:r.writeGeometryCollectionGeometry_.bind(r),Circle:r.writeCircleGeometry_.bind(r)},r}return hy(e,t),e.prototype.addFeature=function(t,e){var r=void 0===e||e,n=o(t),i=t.getGeometry();if(i){var a=this.SEGMENT_WRITERS_[i.getType()];a&&(this.indexedFeaturesExtents_[n]=i.getExtent([1/0,1/0,-1/0,-1/0]),a(t,i))}r&&(this.featureChangeListenerKeys_[n]=_(t,z,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var r=this.snapTo(e.pixel,e.coordinate,e.map);return r.snapped&&(e.coordinate=r.vertex.slice(0,2),e.pixel=r.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=fy(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=fy(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var r=o(e);r in this.pendingFeatures_||(this.pendingFeatures_[r]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=g(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var r=void 0===e||e,n=o(t),i=this.indexedFeaturesExtents_[n];if(i){var a=this.rBush_,s=[];a.forEachInExtent(i,(function(e){t===e.feature&&s.push(e)}));for(var u=s.length-1;u>=0;--u)a.remove(s[u])}r&&(m(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var r=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();r&&(n.forEach(m),n.length=0,i.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?n.push(_(this.features_,c,this.handleFeatureAdd_,this),_(this.features_,h,this.handleFeatureRemove_,this)):this.source_&&n.push(_(this.source_,rh,this.handleFeatureAdd_,this),_(this.source_,ih,this.handleFeatureRemove_,this)),i.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,r){var n=pt([r.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_])]),i=this.rBush_.getInExtent(n);this.vertex_&&!this.edge_&&(i=i.filter((function(t){return t.feature.getGeometry().getType()!==Qt.CIRCLE})));var o=!1,a=null,s=null;if(0===i.length)return{snapped:o,vertex:a,vertexPixel:s};for(var u,l=r.getView().getProjection(),c=er(e),h=1/0,f=0;f<i.length;++f){var p=i[f];gy[0]=er(p.segment[0]),gy[1]=er(p.segment[1]);var d=Ci(c,gy);d<h&&(u=p,h=d)}var g=u.segment;if(this.vertex_&&!this.edge_){var y=r.getPixelFromCoordinate(g[0]),_=r.getPixelFromCoordinate(g[1]),v=Pi(t,y),m=Pi(t,_);Math.sqrt(Math.min(v,m))<=this.pixelTolerance_&&(o=!0,a=v>m?g[1]:g[0],s=r.getPixelFromCoordinate(a))}else if(this.edge_){var b=u.feature.getGeometry().getType()===Qt.CIRCLE;if(b){var w=u.feature.getGeometry(),x=$e();x&&(w=w.clone().transform(x,l)),a=tr(function(t,e){var r=e.getRadius(),n=e.getCenter(),i=n[0],o=n[1],a=t[0]-i,s=t[1]-o;0===a&&0===s&&(a=1);var u=Math.sqrt(a*a+s*s);return[i+r*a/u,o+r*s/u]}(c,w))}else gy[0]=er(g[0]),gy[1]=er(g[1]),a=tr(wi(c,gy));Ti(t,s=r.getPixelFromCoordinate(a))<=this.pixelTolerance_&&(o=!0,this.vertex_&&!b)&&(y=r.getPixelFromCoordinate(g[0]),_=r.getPixelFromCoordinate(g[1]),v=Pi(s,y),m=Pi(s,_),Math.sqrt(Math.min(v,m))<=this.pixelTolerance_&&(a=v>m?g[1]:g[0],s=r.getPixelFromCoordinate(a)))}return o&&(s=[Math.round(s[0]),Math.round(s[1])]),{snapped:o,vertex:a,vertexPixel:s}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var r=this.getMap().getView().getProjection(),n=e,i=$e();i&&(n=n.clone().transform(i,r));var o=cn(n);i&&o.transform(r,i);for(var a=o.getCoordinates()[0],s=0,u=a.length-1;s<u;++s){var l=a.slice(s,s+2),c={feature:t,segment:l};this.rBush_.insert(pt(l),c)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var r=e.getGeometriesArray(),n=0;n<r.length;++n){var i=this.SEGMENT_WRITERS_[r[n].getType()];i&&i(t,r[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length-1;n<i;++n){var o=r.slice(n,n+2),a={feature:t,segment:o};this.rBush_.insert(pt(o),a)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(pt(u),l)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n){var o=r[n],a={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),a)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length;a<s;++a)for(var u=o[a],l=0,c=u.length-1;l<c;++l){var h=u.slice(l,l+2),f={feature:t,segment:h};this.rBush_.insert(pt(h),f)}},e.prototype.writePointGeometry_=function(t,e){var r=e.getCoordinates(),n={feature:t,segment:[r,r]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var r=e.getCoordinates(),n=0,i=r.length;n<i;++n)for(var o=r[n],a=0,s=o.length-1;a<s;++a){var u=o.slice(a,a+2),l={feature:t,segment:u};this.rBush_.insert(pt(u),l)}},e}(fa),_y=(dy=function(t,e){return(dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}dy(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),vy=function(t){function e(e,r,n,i,o){var a=t.call(this,e)||this;return a.features=r,a.coordinate=n,a.startCoordinate=i,a.mapBrowserEvent=o,a}return _y(e,t),e}(j),my=function(t){function e(e){var r,n=this,i=e||{};if((n=t.call(this,i)||this).lastCoordinate_=null,n.startCoordinate_=null,n.features_=void 0!==i.features?i.features:null,i.layers)if("function"==typeof i.layers)r=i.layers;else{var o=i.layers;r=function(t){return x(o,t)}}else r=C;return n.layerFilter_=r,n.filter_=i.filter?i.filter:C,n.hitTolerance_=i.hitTolerance?i.hitTolerance:0,n.lastFeature_=null,n.addEventListener(rt(Uo),n.handleActiveChanged_),n}return _y(e,t),e.prototype.handleDownEvent=function(t){if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);var e=this.features_||new st([this.lastFeature_]);return this.dispatchEvent(new vy("translatestart",e,t.coordinate,this.startCoordinate_,t)),!0}return!1},e.prototype.handleUpEvent=function(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);var e=this.features_||new st([this.lastFeature_]);return this.dispatchEvent(new vy("translateend",e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1},e.prototype.handleDragEvent=function(t){if(this.lastCoordinate_){var e=t.coordinate,r=e[0]-this.lastCoordinate_[0],n=e[1]-this.lastCoordinate_[1],i=this.features_||new st([this.lastFeature_]);i.forEach((function(t){var e=t.getGeometry();e.translate(r,n),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new vy("translating",i,e,this.startCoordinate_,t))}},e.prototype.handleMoveEvent=function(t){var e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")},e.prototype.featuresAtPixel_=function(t,e){return e.forEachFeatureAtPixel(t,function(t,e){if(this.filter_(t,e)&&(!this.features_||x(this.features_.getArray(),t)))return t}.bind(this),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})},e.prototype.getHitTolerance=function(){return this.hitTolerance_},e.prototype.setHitTolerance=function(t){this.hitTolerance_=t},e.prototype.setMap=function(e){var r=this.getMap();t.prototype.setMap.call(this,e),this.updateState_(r)},e.prototype.handleActiveChanged_=function(){this.updateState_(null)},e.prototype.updateState_=function(t){var e=this.getMap(),r=this.getActive();e&&r||(e=e||t)&&e.getViewport().classList.remove("ol-grab","ol-grabbing")},e}(fa),by=(py=function(t,e){return(py=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}py(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function wy(t){for(var e=[],r=0,n=t.length;r<n;++r)e.push(t[r].clone());return e}var xy=function(t){function e(e){var r=t.call(this)||this;return r.geometries_=e||null,r.changeEventsKeys_=[],r.listenGeometriesChange_(),r}return by(e,t),e.prototype.unlistenGeometriesChange_=function(){this.changeEventsKeys_.forEach(m),this.changeEventsKeys_.length=0},e.prototype.listenGeometriesChange_=function(){if(this.geometries_)for(var t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push(_(this.geometries_[t],z,this.changed,this))},e.prototype.clone=function(){var t=new e(null);return t.setGeometries(this.geometries_),t},e.prototype.closestPointXY=function(t,e,r,n){if(n<yt(this.getExtent(),t,e))return n;for(var i=this.geometries_,o=0,a=i.length;o<a;++o)n=i[o].closestPointXY(t,e,r,n);return n},e.prototype.containsXY=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)if(r[n].containsXY(t,e))return!0;return!1},e.prototype.computeExtent=function(t){St(t);for(var e=this.geometries_,r=0,n=e.length;r<n;++r)Pt(t,e[r].getExtent());return t},e.prototype.getGeometries=function(){return wy(this.geometries_)},e.prototype.getGeometriesArray=function(){return this.geometries_},e.prototype.getGeometriesArrayRecursive=function(){for(var t=[],e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].getType()===this.getType()?t=t.concat(e[r].getGeometriesArrayRecursive()):t.push(e[r]);return t},e.prototype.getSimplifiedGeometry=function(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;for(var r=[],n=this.geometries_,i=!1,o=0,a=n.length;o<a;++o){var s=n[o],u=s.getSimplifiedGeometry(t);r.push(u),u!==s&&(i=!0)}if(i){var l=new e(null);return l.setGeometriesArray(r),l}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this},e.prototype.getType=function(){return Qt.GEOMETRY_COLLECTION},e.prototype.intersectsExtent=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)if(e[r].intersectsExtent(t))return!0;return!1},e.prototype.isEmpty=function(){return 0===this.geometries_.length},e.prototype.rotate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].rotate(t,e);this.changed()},e.prototype.scale=function(t,e,r){var n=r;n||(n=Ft(this.getExtent()));for(var i=this.geometries_,o=0,a=i.length;o<a;++o)i[o].scale(t,e,n);this.changed()},e.prototype.setGeometries=function(t){this.setGeometriesArray(wy(t))},e.prototype.setGeometriesArray=function(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()},e.prototype.applyTransform=function(t){for(var e=this.geometries_,r=0,n=e.length;r<n;++r)e[r].applyTransform(t);this.changed()},e.prototype.translate=function(t,e){for(var r=this.geometries_,n=0,i=r.length;n<i;++n)r[n].translate(t,e);this.changed()},e.prototype.disposeInternal=function(){this.unlistenGeometriesChange_(),t.prototype.disposeInternal.call(this)},e}(_r),Sy=function(){function t(){this.dataProjection=null,this.defaultFeatureProjection=null}return t.prototype.getReadOptions=function(t,e){var r;if(e){var n=e.dataProjection?De(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()===ve.TILE_PIXELS&&(n=De(n)).setWorldExtent(e.extent),r={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(r)},t.prototype.adaptOptions=function(t){return p({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)},t.prototype.getType=function(){return n()},t.prototype.readFeature=function(t,e){return n()},t.prototype.readFeatures=function(t,e){return n()},t.prototype.readGeometry=function(t,e){return n()},t.prototype.readProjection=function(t){return n()},t.prototype.writeFeature=function(t,e){return n()},t.prototype.writeFeatures=function(t,e){return n()},t.prototype.writeGeometry=function(t,e){return n()},t}();function Ey(t,e,r){var n,i=r?De(r.featureProjection):null,o=r?De(r.dataProjection):null;if(n=i&&o&&!Ye(i,o)?(e?t.clone():t).transform(e?i:o,e?o:i):t,e&&r&&void 0!==r.decimals){var a=Math.pow(10,r.decimals);n===t&&(n=t.clone()),n.applyTransform((function(t){for(var e=0,r=t.length;e<r;++e)t[e]=Math.round(t[e]*a)/a;return t}))}return n}function Oy(t,e){var r=e?De(e.featureProjection):null,n=e?De(e.dataProjection):null;return r&&n&&!Ye(r,n)?qe(t,n,r):t}var My,Py=(My=function(t,e){return(My=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}My(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function Ty(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var Cy,Iy=function(t){function e(){return t.call(this)||this}return Py(e,t),e.prototype.getType=function(){return"json"},e.prototype.readFeature=function(t,e){return this.readFeatureFromObject(Ty(t),this.getReadOptions(t,e))},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromObject(Ty(t),this.getReadOptions(t,e))},e.prototype.readFeatureFromObject=function(t,e){return n()},e.prototype.readFeaturesFromObject=function(t,e){return n()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromObject(Ty(t),this.getReadOptions(t,e))},e.prototype.readGeometryFromObject=function(t,e){return n()},e.prototype.readProjection=function(t){return this.readProjectionFromObject(Ty(t))},e.prototype.readProjectionFromObject=function(t){return n()},e.prototype.writeFeature=function(t,e){return JSON.stringify(this.writeFeatureObject(t,e))},e.prototype.writeFeatureObject=function(t,e){return n()},e.prototype.writeFeatures=function(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))},e.prototype.writeFeaturesObject=function(t,e){return n()},e.prototype.writeGeometry=function(t,e){return JSON.stringify(this.writeGeometryObject(t,e))},e.prototype.writeGeometryObject=function(t,e){return n()},e}(Sy),Ry=(Cy=function(t,e){return(Cy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Cy(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ly={};Ly[Qt.POINT]=function(t){return void 0!==t.m&&void 0!==t.z?new Wr([t.x,t.y,t.z,t.m],Jt):void 0!==t.z?new Wr([t.x,t.y,t.z],Kt):void 0!==t.m?new Wr([t.x,t.y,t.m],Ht):new Wr([t.x,t.y])},Ly[Qt.LINE_STRING]=function(t){var e=Fy(t);return new Yd(t.paths[0],e)},Ly[Qt.POLYGON]=function(t){var e=Fy(t);return new sn(t.rings,e)},Ly[Qt.MULTI_POINT]=function(t){var e=Fy(t);return new Tg(t.points,e)},Ly[Qt.MULTI_LINE_STRING]=function(t){var e=Fy(t);return new Mg(t.paths,e)},Ly[Qt.MULTI_POLYGON]=function(t){var e=Fy(t);return new kg(t.rings,e)};var Ay={};function ky(t,e){var r,n,i;if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)i=Qt.POINT;else if(t.points)i=Qt.MULTI_POINT;else if(t.paths)i=1===t.paths.length?Qt.LINE_STRING:Qt.MULTI_LINE_STRING;else if(t.rings){var o=t,a=Fy(o),s=function(t,e){var r,n,i=[],o=[],a=[];for(r=0,n=t.length;r<n;++r)i.length=0,Cr(i,0,t[r],e.length),$r(i,0,i.length,e.length)?o.push([t[r]]):a.push(t[r]);for(;a.length;){var s=a.shift(),u=!1;for(r=o.length-1;r>=0;r--){var l=o[r][0];if(vt(new Br(l).getExtent(),new Br(s).getExtent())){o[r].push(s),u=!0;break}}u||o.push([s.reverse()])}return o}(o.rings,a);1===s.length?(i=Qt.POLYGON,t=Object.assign({},t,((r={}).rings=s[0],r))):(i=Qt.MULTI_POLYGON,t=Object.assign({},t,((n={}).rings=s,n)))}return Ey((0,Ly[i])(t),!1,e)}function Fy(t){var e=qt;return!0===t.hasZ&&!0===t.hasM?e=Jt:!0===t.hasZ?e=Kt:!0===t.hasM&&(e=Ht),e}function jy(t){var e=t.getLayout();return{hasZ:e===Kt||e===Jt,hasM:e===Ht||e===Jt}}function Ny(t,e){return(0,Ay[t.getType()])(Ey(t,!0,e),e)}Ay[Qt.POINT]=function(t,e){var r,n=t.getCoordinates(),i=t.getLayout();return i===Kt?r={x:n[0],y:n[1],z:n[2]}:i===Ht?r={x:n[0],y:n[1],m:n[2]}:i===Jt?r={x:n[0],y:n[1],z:n[2],m:n[3]}:i===qt?r={x:n[0],y:n[1]}:ut(!1,34),r},Ay[Qt.LINE_STRING]=function(t,e){var r=jy(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:[t.getCoordinates()]}},Ay[Qt.POLYGON]=function(t,e){var r=jy(t);return{hasZ:r.hasZ,hasM:r.hasM,rings:t.getCoordinates(!1)}},Ay[Qt.MULTI_POINT]=function(t,e){var r=jy(t);return{hasZ:r.hasZ,hasM:r.hasM,points:t.getCoordinates()}},Ay[Qt.MULTI_LINE_STRING]=function(t,e){var r=jy(t);return{hasZ:r.hasZ,hasM:r.hasM,paths:t.getCoordinates()}},Ay[Qt.MULTI_POLYGON]=function(t,e){for(var r=jy(t),n=t.getCoordinates(!1),i=[],o=0;o<n.length;o++)for(var a=n[o].length-1;a>=0;a--)i.push(n[o][a]);return{hasZ:r.hasZ,hasM:r.hasM,rings:i}};var Dy,zy,Gy=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).geometryName_=n.geometryName,r}return Ry(e,t),e.prototype.readFeatureFromObject=function(t,e){var r=t,n=ky(r.geometry,e),i=new ht;return this.geometryName_&&i.setGeometryName(this.geometryName_),i.setGeometry(n),e&&e.idField&&r.attributes[e.idField]&&i.setId(r.attributes[e.idField]),r.attributes&&i.setProperties(r.attributes,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=e||{};if(t.features){var n=[],i=t.features;r.idField=t.objectIdFieldName;for(var o=0,a=i.length;o<a;++o)n.push(this.readFeatureFromObject(i[o],r));return n}return[this.readFeatureFromObject(t,r)]},e.prototype.readGeometryFromObject=function(t,e){return ky(t,e)},e.prototype.readProjectionFromObject=function(t){return t.spatialReference&&void 0!==t.spatialReference.wkid?De("EPSG:"+t.spatialReference.wkid):null},e.prototype.writeGeometryObject=function(t,e){return Ny(t,this.adaptOptions(e))},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={},n=t.getGeometry();n&&(r.geometry=Ny(n,e),e&&e.featureProjection&&(r.geometry.spatialReference={wkid:Number(De(e.featureProjection).getCode().split(":").pop())}));var i=t.getProperties();return delete i[t.getGeometryName()],y(i)?r.attributes={}:r.attributes=i,r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{features:r}},e}(Iy),By=(zy=function(t,e){return(zy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}zy(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Uy=function(t){function e(){var e=t.call(this)||this;return e.xmlSerializer_=(void 0===el&&"undefined"!=typeof XMLSerializer&&(el=new XMLSerializer),el),e}return By(e,t),e.prototype.getType=function(){return"xml"},e.prototype.readFeature=function(t,e){if(t){if("string"==typeof t){var r=zu(t);return this.readFeatureFromDocument(r,e)}return Du(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}return null},e.prototype.readFeatureFromDocument=function(t,e){var r=this.readFeaturesFromDocument(t,e);return r.length>0?r[0]:null},e.prototype.readFeatureFromNode=function(t,e){return null},e.prototype.readFeatures=function(t,e){if(t){if("string"==typeof t){var r=zu(t);return this.readFeaturesFromDocument(r,e)}return Du(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}return[]},e.prototype.readFeaturesFromDocument=function(t,e){for(var r=[],n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&O(r,this.readFeaturesFromNode(n,e));return r},e.prototype.readFeaturesFromNode=function(t,e){return n()},e.prototype.readGeometry=function(t,e){if(t){if("string"==typeof t){var r=zu(t);return this.readGeometryFromDocument(r,e)}return Du(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}return null},e.prototype.readGeometryFromDocument=function(t,e){return null},e.prototype.readGeometryFromNode=function(t,e){return null},e.prototype.readProjection=function(t){if(t){if("string"==typeof t){var e=zu(t);return this.readProjectionFromDocument(e)}return Du(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}return null},e.prototype.readProjectionFromDocument=function(t){return this.dataProjection},e.prototype.readProjectionFromNode=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){var r=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeatureNode=function(t,e){return null},e.prototype.writeFeatures=function(t,e){var r=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeFeaturesNode=function(t,e){return null},e.prototype.writeGeometry=function(t,e){var r=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(r)},e.prototype.writeGeometryNode=function(t,e){return null},e}(Sy),Wy=(Dy=function(t,e){return(Dy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Dy(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Yy="http://www.opengis.net/gml",Vy=/^[\s\xa0]*$/,Xy=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType=n.featureType,r.featureNS=n.featureNS,r.srsName=n.srsName,r.schemaLocation="",r.FEATURE_COLLECTION_PARSERS={},r.FEATURE_COLLECTION_PARSERS[r.namespace]={featureMember:Bu(r.readFeaturesInternal),featureMembers:Uu(r.readFeaturesInternal)},r}return Wy(e,t),e.prototype.readFeaturesInternal=function(t,e){var r=t.localName,n=null;if("FeatureCollection"==r)n=Qu([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==r||"featureMember"==r){var i=e[0],o=i.featureType,a=i.featureNS;if(!o&&t.childNodes){o=[],a={};for(var s=0,u=t.childNodes.length;s<u;++s){var l=t.childNodes[s];if(1===l.nodeType){var c=l.nodeName.split(":").pop();if(-1===o.indexOf(c)){var h="",f=0,p=l.namespaceURI;for(var d in a){if(a[d]===p){h=d;break}++f}h||(a[h="p"+f]=p),o.push(h+":"+c)}}}"featureMember"!=r&&(i.featureType=o,i.featureNS=a)}if("string"==typeof a){var g=a;(a={}).p0=g}var y={},_=Array.isArray(o)?o:[o];for(var v in a){var m={};for(s=0,u=_.length;s<u;++s)(-1===_[s].indexOf(":")?"p0":_[s].split(":")[0])===v&&(m[_[s].split(":").pop()]="featureMembers"==r?Bu(this.readFeatureElement,this):Uu(this.readFeatureElement,this));y[a[v]]=m}n=Qu("featureMember"==r?void 0:[],y,t,e)}return null===n&&(n=[]),n},e.prototype.readGeometryElement=function(t,e){var r=e[0];r.srsName=t.firstElementChild.getAttribute("srsName"),r.srsDimension=t.firstElementChild.getAttribute("srsDimension");var n=Qu(null,this.GEOMETRY_PARSERS,t,e,this);return n?Array.isArray(n)?Oy(n,r):Ey(n,!1,r):void 0},e.prototype.readFeatureElementInternal=function(t,e,r){for(var n,i={},o=t.firstElementChild;o;o=o.nextElementSibling){var a=void 0,s=o.localName;0===o.childNodes.length||1===o.childNodes.length&&(3===o.firstChild.nodeType||4===o.firstChild.nodeType)?(a=Nu(o,!1),Vy.test(a)&&(a=void 0)):(r&&(a=this.readGeometryElement(o,e)),a?"boundedBy"!==s&&(n=s):a=this.readFeatureElementInternal(o,e,!1)),i[s]?(i[s]instanceof Array||(i[s]=[i[s]]),i[s].push(a)):i[s]=a;var u=o.attributes.length;if(u>0){i[s]={_content_:i[s]};for(var l=0;l<u;l++){var c=o.attributes[l].name;i[s][c]=o.attributes[l].value}}}if(r){var h=new ht(i);n&&h.setGeometryName(n);var f=t.getAttribute("fid")||function(t,e,r){return t.getAttributeNS(e,"id")||""}(t,this.namespace);return f&&h.setId(f),h}return i},e.prototype.readFeatureElement=function(t,e){return this.readFeatureElementInternal(t,e,!0)},e.prototype.readPoint=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new Wr(r,Kt)},e.prototype.readMultiPoint=function(t,e){var r=Qu([],this.MULTIPOINT_PARSERS_,t,e,this);return r?new Tg(r):void 0},e.prototype.readMultiLineString=function(t,e){var r=Qu([],this.MULTILINESTRING_PARSERS_,t,e,this);if(r)return new Mg(r)},e.prototype.readMultiPolygon=function(t,e){var r=Qu([],this.MULTIPOLYGON_PARSERS_,t,e,this);if(r)return new kg(r)},e.prototype.pointMemberParser_=function(t,e){Ju(this.POINTMEMBER_PARSERS_,t,e,this)},e.prototype.lineStringMemberParser_=function(t,e){Ju(this.LINESTRINGMEMBER_PARSERS_,t,e,this)},e.prototype.polygonMemberParser_=function(t,e){Ju(this.POLYGONMEMBER_PARSERS_,t,e,this)},e.prototype.readLineString=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);return r?new Yd(r,Kt):void 0},e.prototype.readFlatLinearRing_=function(t,e){return Qu(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)||void 0},e.prototype.readLinearRing=function(t,e){var r=this.readFlatCoordinatesFromNode_(t,e);if(r)return new Br(r,Kt)},e.prototype.readPolygon=function(t,e){var r=Qu([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)O(i,r[a]),o.push(i.length);return new sn(i,Kt,o)}},e.prototype.readFlatCoordinatesFromNode_=function(t,e){return Qu(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.readGeometryFromNode=function(t,e){return this.readGeometryElement(t,[this.getReadOptions(t,e||{})])||null},e.prototype.readFeaturesFromNode=function(t,e){var r={featureType:this.featureType,featureNS:this.featureNS};return e&&p(r,this.getReadOptions(t,e)),this.readFeaturesInternal(t,[r])||[]},e.prototype.readProjectionFromNode=function(t){return De(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},e}(Uy);Xy.prototype.namespace=Yy,Xy.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Xy.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Xy.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Xy.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml":{pointMember:Bu(Xy.prototype.pointMemberParser_),pointMembers:Bu(Xy.prototype.pointMemberParser_)}},Xy.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml":{lineStringMember:Bu(Xy.prototype.lineStringMemberParser_),lineStringMembers:Bu(Xy.prototype.lineStringMemberParser_)}},Xy.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml":{polygonMember:Bu(Xy.prototype.polygonMemberParser_),polygonMembers:Bu(Xy.prototype.polygonMemberParser_)}},Xy.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml":{Point:Bu(Xy.prototype.readFlatCoordinatesFromNode_)}},Xy.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Bu(Xy.prototype.readLineString)}},Xy.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Bu(Xy.prototype.readPolygon)}},Xy.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:Uu(Xy.prototype.readFlatLinearRing_)}};var Zy=Xy;function qy(t){return Ky(Nu(t,!1))}function Ky(t){var e=/^\s*(true|1)|(false|0)\s*$/.exec(t);return e?void 0!==e[1]||!1:void 0}function Hy(t){var e=Nu(t,!1),r=Date.parse(e);return isNaN(r)?void 0:r/1e3}function Jy(t){return Qy(Nu(t,!1))}function Qy(t){var e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);return e?parseFloat(e[1]):void 0}function $y(t){return t_(Nu(t,!1))}function t_(t){var e=/^\s*(\d+)\s*$/.exec(t);return e?parseInt(e[1],10):void 0}function e_(t){return Nu(t,!1).trim()}function r_(t,e){o_(t,e?"1":"0")}function n_(t,e){var r=e.toPrecision();t.appendChild(nl().createTextNode(r))}function i_(t,e){var r=e.toString();t.appendChild(nl().createTextNode(r))}function o_(t,e){t.appendChild(nl().createTextNode(e))}var a_,s_=(a_=function(t,e){return(a_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}a_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),u_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},l_=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).surface_=void 0!==n.surface&&n.surface,r.curve_=void 0!==n.curve&&n.curve,r.multiCurve_=void 0===n.multiCurve||n.multiCurve,r.multiSurface_=void 0===n.multiSurface||n.multiSurface,r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",r.hasZ=void 0!==n.hasZ&&n.hasZ,r}return s_(e,t),e.prototype.readMultiCurve_=function(t,e){var r=Qu([],this.MULTICURVE_PARSERS_,t,e,this);return r?new Mg(r):void 0},e.prototype.readMultiSurface_=function(t,e){var r=Qu([],this.MULTISURFACE_PARSERS_,t,e,this);if(r)return new kg(r)},e.prototype.curveMemberParser_=function(t,e){Ju(this.CURVEMEMBER_PARSERS_,t,e,this)},e.prototype.surfaceMemberParser_=function(t,e){Ju(this.SURFACEMEMBER_PARSERS_,t,e,this)},e.prototype.readPatch_=function(t,e){return Qu([null],this.PATCHES_PARSERS_,t,e,this)},e.prototype.readSegment_=function(t,e){return Qu([null],this.SEGMENTS_PARSERS_,t,e,this)},e.prototype.readPolygonPatch_=function(t,e){return Qu([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)},e.prototype.readLineStringSegment_=function(t,e){return Qu([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)},e.prototype.interiorParser_=function(t,e){var r=Qu(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.exteriorParser_=function(t,e){var r=Qu(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.readSurface_=function(t,e){var r=Qu([null],this.SURFACE_PARSERS_,t,e,this);if(r&&r[0]){var n,i=r[0],o=[i.length],a=void 0;for(a=1,n=r.length;a<n;++a)O(i,r[a]),o.push(i.length);return new sn(i,Kt,o)}},e.prototype.readCurve_=function(t,e){var r=Qu([null],this.CURVE_PARSERS_,t,e,this);return r?new Yd(r,Kt):void 0},e.prototype.readEnvelope_=function(t,e){var r=Qu([null],this.ENVELOPE_PARSERS_,t,e,this);return xt(r[1][0],r[1][1],r[2][0],r[2][1])},e.prototype.readFlatPos_=function(t,e){for(var r,n=Nu(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,o=[];r=i.exec(n);)o.push(parseFloat(r[1])),n=n.substr(r[0].length);if(""===n){var a=e[0].srsName,s="enu";if(a&&(s=De(a).getAxisOrientation()),"neu"===s){var u,l=void 0;for(l=0,u=o.length;l<u;l+=3){var c=o[l],h=o[l+1];o[l]=h,o[l+1]=c}}var f=o.length;if(2==f&&o.push(0),0!==f)return o}},e.prototype.readFlatPosList_=function(t,e){var r=Nu(t,!1).replace(/^\s*|\s*$/g,""),n=e[0],i=n.srsName,o=n.srsDimension,a="enu";i&&(a=De(i).getAxisOrientation());var s,u,l,c=r.split(/\s+/),h=2;t.getAttribute("srsDimension")?h=t_(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=t_(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=t_(t.parentNode.getAttribute("srsDimension")):o&&(h=t_(o));for(var f=[],p=0,d=c.length;p<d;p+=h)s=parseFloat(c[p]),u=parseFloat(c[p+1]),l=3===h?parseFloat(c[p+2]):0,"en"===a.substr(0,2)?f.push(s,u,l):f.push(u,s,l);return f},e.prototype.writePos_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);var a=n.srsName,s="enu";a&&(s=De(a).getAxisOrientation());var u,l=e.getCoordinates();u="en"===s.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],i&&(u+=" "+(l[2]||0)),o_(t,u)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=De(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];return r&&(i+=" "+(t[2]||0)),i},e.prototype.writePosList_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=i?"3":"2";t.setAttribute("srsDimension",o);for(var a,s=n.srsName,u=e.getCoordinates(),l=u.length,c=new Array(l),h=0;h<l;++h)a=u[h],c[h]=this.getCoords_(a,s,i);o_(t,c.join(" "))},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=ju(t.namespaceURI,"pos");t.appendChild(i),this.writePos_(i,e,r)},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];tl({node:t},this.ENVELOPE_SERIALIZERS_,qu,i,r,["lowerCorner","upperCorner"],this)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=ju(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),ju(i.namespaceURI,void 0!==o?"interior":"exterior")},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();tl({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=ju(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=ju(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,r)}else if("Curve"===t.nodeName){var o=ju(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();tl({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.srsName,o=n.hasZ;i&&t.setAttribute("srsName",i);var a=e.getPoints();tl({node:t,hasZ:o,srsName:i},this.POINTMEMBER_SERIALIZERS_,Zu("pointMember"),a,r,void 0,this)},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();tl({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeRing_=function(t,e,r){var n=ju(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writePointMember_=function(t,e,r){var n=ju(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeSurfacePatches_=function(t,e,r){var n=ju(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeCurveSegments_=function(t,e,r){var n=ju(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=p({},i);o.node=t,n=Array.isArray(e)?Oy(e,i):Ey(e,!0,i),tl(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=Vu(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=Vu(o_)))}var f=p({},i);f.node=t,tl(f,i.serializers,Zu(void 0,o),l,r,u)},e.prototype.writeFeatureMembers_=function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a={};a[o]={},a[o][i]=Vu(this.writeFeatureElement,this);var s=p({},n);s.node=t,tl(s,a,Zu(i,o),e,r)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return ju(this.namespace,u_[n.nodeName])},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.curve,u=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"LineString"===n&&!0===s?n="Curve":"MultiLineString"===n&&!0===u&&(n="MultiCurve"),ju(this.namespace,n)},e.prototype.writeGeometryNode=function(t,e){e=this.adaptOptions(e);var r=ju(this.namespace,"geom"),n={node:r,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&p(n,e),this.writeGeometryElement(r,t,[n]),r},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=ju(this.namespace,"featureMembers");r.setAttributeNS(Fu,"xsi:schemaLocation",this.schemaLocation);var n={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&p(n,e),this.writeFeatureMembers_(r,t,[n]),r},e}(Zy);l_.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:Uu(l_.prototype.readFlatPos_),posList:Uu(l_.prototype.readFlatPosList_)}},l_.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:l_.prototype.interiorParser_,exterior:l_.prototype.exteriorParser_}},l_.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Uu(Zy.prototype.readPoint),MultiPoint:Uu(Zy.prototype.readMultiPoint),LineString:Uu(Zy.prototype.readLineString),MultiLineString:Uu(Zy.prototype.readMultiLineString),LinearRing:Uu(Zy.prototype.readLinearRing),Polygon:Uu(Zy.prototype.readPolygon),MultiPolygon:Uu(Zy.prototype.readMultiPolygon),Surface:Uu(l_.prototype.readSurface_),MultiSurface:Uu(l_.prototype.readMultiSurface_),Curve:Uu(l_.prototype.readCurve_),MultiCurve:Uu(l_.prototype.readMultiCurve_),Envelope:Uu(l_.prototype.readEnvelope_)}},l_.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml":{curveMember:Bu(l_.prototype.curveMemberParser_),curveMembers:Bu(l_.prototype.curveMemberParser_)}},l_.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml":{surfaceMember:Bu(l_.prototype.surfaceMemberParser_),surfaceMembers:Bu(l_.prototype.surfaceMemberParser_)}},l_.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml":{LineString:Bu(Zy.prototype.readLineString),Curve:Bu(l_.prototype.readCurve_)}},l_.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml":{Polygon:Bu(Zy.prototype.readPolygon),Surface:Bu(l_.prototype.readSurface_)}},l_.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml":{patches:Uu(l_.prototype.readPatch_)}},l_.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml":{segments:Uu(l_.prototype.readSegment_)}},l_.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml":{lowerCorner:Bu(l_.prototype.readFlatPosList_),upperCorner:Bu(l_.prototype.readFlatPosList_)}},l_.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml":{PolygonPatch:Uu(l_.prototype.readPolygonPatch_)}},l_.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml":{LineStringSegment:Uu(l_.prototype.readLineStringSegment_)}},l_.prototype.writeFeatures,l_.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{exterior:Vu(l_.prototype.writeRing_),interior:Vu(l_.prototype.writeRing_)}},l_.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Vu(o_),upperCorner:Vu(o_)}},l_.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Vu(l_.prototype.writeSurfaceOrPolygonMember_),polygonMember:Vu(l_.prototype.writeSurfaceOrPolygonMember_)}},l_.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Vu(l_.prototype.writePointMember_)}},l_.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Vu(l_.prototype.writeLineStringOrCurveMember_),curveMember:Vu(l_.prototype.writeLineStringOrCurveMember_)}},l_.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Vu(l_.prototype.writeCurveOrLineString_),MultiCurve:Vu(l_.prototype.writeMultiCurveOrLineString_),Point:Vu(l_.prototype.writePoint_),MultiPoint:Vu(l_.prototype.writeMultiPoint_),LineString:Vu(l_.prototype.writeCurveOrLineString_),MultiLineString:Vu(l_.prototype.writeMultiCurveOrLineString_),LinearRing:Vu(l_.prototype.writeLinearRing_),Polygon:Vu(l_.prototype.writeSurfaceOrPolygon_),MultiPolygon:Vu(l_.prototype.writeMultiSurfaceOrPolygon_),Surface:Vu(l_.prototype.writeSurfaceOrPolygon_),MultiSurface:Vu(l_.prototype.writeMultiSurfaceOrPolygon_),Envelope:Vu(l_.prototype.writeEnvelope)}};var c_=l_,h_=c_;h_.prototype.writeFeatures,h_.prototype.writeFeaturesNode;var f_,p_=h_,d_=(f_=function(t,e){return(f_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}f_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),g_={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},y_=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).FEATURE_COLLECTION_PARSERS[Yy].featureMember=Bu(r.readFeaturesInternal),r.schemaLocation=n.schemaLocation?n.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd",r}return d_(e,t),e.prototype.readFlatCoordinates_=function(t,e){var r=Nu(t,!1).replace(/^\s*|\s*$/g,""),n=e[0].srsName,i="enu";if(n){var o=De(n);o&&(i=o.getAxisOrientation())}for(var a=r.trim().split(/\s+/),s=[],u=0,l=a.length;u<l;u++){var c=a[u].split(/,+/),h=parseFloat(c[0]),f=parseFloat(c[1]),p=3===c.length?parseFloat(c[2]):0;"en"===i.substr(0,2)?s.push(h,f,p):s.push(f,h,p)}return s},e.prototype.readBox_=function(t,e){var r=Qu([null],this.BOX_PARSERS_,t,e,this);return xt(r[1][0],r[1][1],r[1][3],r[1][4])},e.prototype.innerBoundaryIsParser_=function(t,e){var r=Qu(void 0,this.RING_PARSERS,t,e,this);r&&e[e.length-1].push(r)},e.prototype.outerBoundaryIsParser_=function(t,e){var r=Qu(void 0,this.RING_PARSERS,t,e,this);r&&(e[e.length-1][0]=r)},e.prototype.GEOMETRY_NODE_FACTORY_=function(t,e,r){var n,i=e[e.length-1],o=i.multiSurface,a=i.surface,s=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===o?n="MultiSurface":"Polygon"===n&&!0===a?n="Surface":"MultiLineString"===n&&!0===s&&(n="MultiCurve"),ju("http://www.opengis.net/gml",n)},e.prototype.writeFeatureElement=function(t,e,r){var n=e.getId();n&&t.setAttribute("fid",n);var i=r[r.length-1],o=i.featureNS,a=e.getGeometryName();i.serializers||(i.serializers={},i.serializers[o]={});var s=e.getProperties(),u=[],l=[];for(var c in s){var h=s[c];null!==h&&(u.push(c),l.push(h),c==a||"function"==typeof h.getSimplifiedGeometry?c in i.serializers[o]||(i.serializers[o][c]=Vu(this.writeGeometryElement,this)):c in i.serializers[o]||(i.serializers[o][c]=Vu(o_)))}var f=p({},i);f.node=t,tl(f,i.serializers,Zu(void 0,o),l,r,u)},e.prototype.writeCurveOrLineString_=function(t,e,r){var n=r[r.length-1].srsName;if("LineStringSegment"!==t.nodeName&&n&&t.setAttribute("srsName",n),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)}else if("Curve"===t.nodeName){var o=ju(t.namespaceURI,"segments");t.appendChild(o),this.writeCurveSegments_(o,e,r)}},e.prototype.writeLineStringOrCurveMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeCurveOrLineString_(n,e,r))},e.prototype.writeMultiCurveOrLineString_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.curve;o&&t.setAttribute("srsName",o);var s=e.getLineStrings();tl({node:t,hasZ:i,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeGeometryElement=function(t,e,r){var n,i=r[r.length-1],o=p({},i);o.node=t,n=Array.isArray(e)?Oy(e,i):Ey(e,!0,i),tl(o,this.GEOMETRY_SERIALIZERS_,this.GEOMETRY_NODE_FACTORY_,[n],r,void 0,this)},e.prototype.createCoordinatesNode_=function(t){var e=ju(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e},e.prototype.writeCoordinates_=function(t,e,r){for(var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=e.getCoordinates(),s=a.length,u=new Array(s),l=0;l<s;++l){var c=a[l];u[l]=this.getCoords_(c,o,i)}o_(t,u.join(" "))},e.prototype.writeCurveSegments_=function(t,e,r){var n=ju(t.namespaceURI,"LineStringSegment");t.appendChild(n),this.writeCurveOrLineString_(n,e,r)},e.prototype.writeSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){var a=e.getLinearRings();tl({node:t,hasZ:i,srsName:o},this.RING_SERIALIZERS_,this.RING_NODE_FACTORY_,a,r,void 0,this)}else if("Surface"===t.nodeName){var s=ju(t.namespaceURI,"patches");t.appendChild(s),this.writeSurfacePatches_(s,e,r)}},e.prototype.RING_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1],i=n.node,o=n.exteriorWritten;return void 0===o&&(n.exteriorWritten=!0),ju(i.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},e.prototype.writeSurfacePatches_=function(t,e,r){var n=ju(t.namespaceURI,"PolygonPatch");t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r)},e.prototype.writeRing_=function(t,e,r){var n=ju(t.namespaceURI,"LinearRing");t.appendChild(n),this.writeLinearRing_(n,e,r)},e.prototype.getCoords_=function(t,e,r){var n="enu";e&&(n=De(e).getAxisOrientation());var i="en"===n.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];return r&&(i+=","+(t[2]||0)),i},e.prototype.writePoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(a);var s=e.getCoordinates();o_(a,this.getCoords_(s,o,i))},e.prototype.writeMultiPoint_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName;o&&t.setAttribute("srsName",o);var a=e.getPoints();tl({node:t,hasZ:i,srsName:o},this.POINTMEMBER_SERIALIZERS_,Zu("pointMember"),a,r,void 0,this)},e.prototype.writePointMember_=function(t,e,r){var n=ju(t.namespaceURI,"Point");t.appendChild(n),this.writePoint_(n,e,r)},e.prototype.writeLinearRing_=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,r)},e.prototype.writeMultiSurfaceOrPolygon_=function(t,e,r){var n=r[r.length-1],i=n.hasZ,o=n.srsName,a=n.surface;o&&t.setAttribute("srsName",o);var s=e.getPolygons();tl({node:t,hasZ:i,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS_,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,s,r,void 0,this)},e.prototype.writeSurfaceOrPolygonMember_=function(t,e,r){var n=this.GEOMETRY_NODE_FACTORY_(e,r);n&&(t.appendChild(n),this.writeSurfaceOrPolygon_(n,e,r))},e.prototype.writeEnvelope=function(t,e,r){var n=r[r.length-1].srsName;n&&t.setAttribute("srsName",n);var i=[e[0]+" "+e[1],e[2]+" "+e[3]];tl({node:t},this.ENVELOPE_SERIALIZERS_,qu,i,r,["lowerCorner","upperCorner"],this)},e.prototype.MULTIGEOMETRY_MEMBER_NODE_FACTORY_=function(t,e,r){var n=e[e.length-1].node;return ju("http://www.opengis.net/gml",g_[n.nodeName])},e}(Zy);y_.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:Uu(y_.prototype.readFlatCoordinates_)}},y_.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:y_.prototype.innerBoundaryIsParser_,outerBoundaryIs:y_.prototype.outerBoundaryIsParser_}},y_.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:Bu(y_.prototype.readFlatCoordinates_)}},y_.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:Uu(Zy.prototype.readPoint),MultiPoint:Uu(Zy.prototype.readMultiPoint),LineString:Uu(Zy.prototype.readLineString),MultiLineString:Uu(Zy.prototype.readMultiLineString),LinearRing:Uu(Zy.prototype.readLinearRing),Polygon:Uu(Zy.prototype.readPolygon),MultiPolygon:Uu(Zy.prototype.readMultiPolygon),Box:Uu(y_.prototype.readBox_)}},y_.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml":{Curve:Vu(y_.prototype.writeCurveOrLineString_),MultiCurve:Vu(y_.prototype.writeMultiCurveOrLineString_),Point:Vu(y_.prototype.writePoint_),MultiPoint:Vu(y_.prototype.writeMultiPoint_),LineString:Vu(y_.prototype.writeCurveOrLineString_),MultiLineString:Vu(y_.prototype.writeMultiCurveOrLineString_),LinearRing:Vu(y_.prototype.writeLinearRing_),Polygon:Vu(y_.prototype.writeSurfaceOrPolygon_),MultiPolygon:Vu(y_.prototype.writeMultiSurfaceOrPolygon_),Surface:Vu(y_.prototype.writeSurfaceOrPolygon_),MultiSurface:Vu(y_.prototype.writeMultiSurfaceOrPolygon_),Envelope:Vu(y_.prototype.writeEnvelope)}},y_.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{lineStringMember:Vu(y_.prototype.writeLineStringOrCurveMember_),curveMember:Vu(y_.prototype.writeLineStringOrCurveMember_)}},y_.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml":{outerBoundaryIs:Vu(y_.prototype.writeRing_),innerBoundaryIs:Vu(y_.prototype.writeRing_)}},y_.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{pointMember:Vu(y_.prototype.writePointMember_)}},y_.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml":{surfaceMember:Vu(y_.prototype.writeSurfaceOrPolygonMember_),polygonMember:Vu(y_.prototype.writeSurfaceOrPolygonMember_)}},y_.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml":{lowerCorner:Vu(o_),upperCorner:Vu(o_)}};var __,v_=y_,m_=(__=function(t,e){return(__=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}__(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),b_=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this,n)||this).schemaLocation=n.schemaLocation?n.schemaLocation:r.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd",r}return m_(e,t),e}(c_);b_.prototype.namespace="http://www.opengis.net/gml/3.2",b_.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:Uu(c_.prototype.readFlatPos_),posList:Uu(c_.prototype.readFlatPosList_)}},b_.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:c_.prototype.interiorParser_,exterior:c_.prototype.exteriorParser_}},b_.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:Uu(Zy.prototype.readPoint),MultiPoint:Uu(Zy.prototype.readMultiPoint),LineString:Uu(Zy.prototype.readLineString),MultiLineString:Uu(Zy.prototype.readMultiLineString),LinearRing:Uu(Zy.prototype.readLinearRing),Polygon:Uu(Zy.prototype.readPolygon),MultiPolygon:Uu(Zy.prototype.readMultiPolygon),Surface:Uu(b_.prototype.readSurface_),MultiSurface:Uu(c_.prototype.readMultiSurface_),Curve:Uu(b_.prototype.readCurve_),MultiCurve:Uu(c_.prototype.readMultiCurve_),Envelope:Uu(b_.prototype.readEnvelope_)}},b_.prototype.MULTICURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{curveMember:Bu(c_.prototype.curveMemberParser_),curveMembers:Bu(c_.prototype.curveMemberParser_)}},b_.prototype.MULTISURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:Bu(c_.prototype.surfaceMemberParser_),surfaceMembers:Bu(c_.prototype.surfaceMemberParser_)}},b_.prototype.CURVEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:Bu(Zy.prototype.readLineString),Curve:Bu(c_.prototype.readCurve_)}},b_.prototype.SURFACEMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:Bu(Zy.prototype.readPolygon),Surface:Bu(c_.prototype.readSurface_)}},b_.prototype.SURFACE_PARSERS_={"http://www.opengis.net/gml/3.2":{patches:Uu(c_.prototype.readPatch_)}},b_.prototype.CURVE_PARSERS_={"http://www.opengis.net/gml/3.2":{segments:Uu(c_.prototype.readSegment_)}},b_.prototype.ENVELOPE_PARSERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:Bu(c_.prototype.readFlatPosList_),upperCorner:Bu(c_.prototype.readFlatPosList_)}},b_.prototype.PATCHES_PARSERS_={"http://www.opengis.net/gml/3.2":{PolygonPatch:Uu(c_.prototype.readPolygonPatch_)}},b_.prototype.SEGMENTS_PARSERS_={"http://www.opengis.net/gml/3.2":{LineStringSegment:Uu(c_.prototype.readLineStringSegment_)}},b_.prototype.MULTIPOINT_PARSERS_={"http://www.opengis.net/gml/3.2":{pointMember:Bu(Zy.prototype.pointMemberParser_),pointMembers:Bu(Zy.prototype.pointMemberParser_)}},b_.prototype.MULTILINESTRING_PARSERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:Bu(Zy.prototype.lineStringMemberParser_),lineStringMembers:Bu(Zy.prototype.lineStringMemberParser_)}},b_.prototype.MULTIPOLYGON_PARSERS_={"http://www.opengis.net/gml/3.2":{polygonMember:Bu(Zy.prototype.polygonMemberParser_),polygonMembers:Bu(Zy.prototype.polygonMemberParser_)}},b_.prototype.POINTMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Point:Bu(Zy.prototype.readFlatCoordinatesFromNode_)}},b_.prototype.LINESTRINGMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{LineString:Bu(Zy.prototype.readLineString)}},b_.prototype.POLYGONMEMBER_PARSERS_={"http://www.opengis.net/gml/3.2":{Polygon:Bu(Zy.prototype.readPolygon)}},b_.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:Uu(Zy.prototype.readFlatLinearRing_)}},b_.prototype.RING_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{exterior:Vu(c_.prototype.writeRing_),interior:Vu(c_.prototype.writeRing_)}},b_.prototype.ENVELOPE_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lowerCorner:Vu(o_),upperCorner:Vu(o_)}},b_.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{surfaceMember:Vu(c_.prototype.writeSurfaceOrPolygonMember_),polygonMember:Vu(c_.prototype.writeSurfaceOrPolygonMember_)}},b_.prototype.POINTMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{pointMember:Vu(c_.prototype.writePointMember_)}},b_.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{lineStringMember:Vu(c_.prototype.writeLineStringOrCurveMember_),curveMember:Vu(c_.prototype.writeLineStringOrCurveMember_)}},b_.prototype.GEOMETRY_SERIALIZERS_={"http://www.opengis.net/gml/3.2":{Curve:Vu(c_.prototype.writeCurveOrLineString_),MultiCurve:Vu(c_.prototype.writeMultiCurveOrLineString_),Point:Vu(b_.prototype.writePoint_),MultiPoint:Vu(c_.prototype.writeMultiPoint_),LineString:Vu(c_.prototype.writeCurveOrLineString_),MultiLineString:Vu(c_.prototype.writeMultiCurveOrLineString_),LinearRing:Vu(c_.prototype.writeLinearRing_),Polygon:Vu(c_.prototype.writeSurfaceOrPolygon_),MultiPolygon:Vu(c_.prototype.writeMultiSurfaceOrPolygon_),Surface:Vu(c_.prototype.writeSurfaceOrPolygon_),MultiSurface:Vu(c_.prototype.writeMultiSurfaceOrPolygon_),Envelope:Vu(c_.prototype.writeEnvelope)}};var w_,x_=b_,S_=(w_=function(t,e){return(w_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}w_(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),E_=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],O_={rte:$_,trk:tv,wpt:ev},M_=Hu(E_,{rte:Bu($_),trk:Bu(tv),wpt:Bu(ev)}),P_=Hu(E_,{text:Yu(e_,"linkText"),type:Yu(e_,"linkType")}),T_=Hu(E_,{rte:Vu((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==Qt.LINE_STRING){var s=Ey(a,!0,n);o.geometryLayout=s.getLayout(),i.rtept=s.getCoordinates()}var u=r[r.length-1].node,l=D_[u.namespaceURI],c=Ku(i,l);tl(o,z_,qu,c,r,l)})),trk:Vu((function(t,e,r){var n=r[0],i=e.getProperties(),o={node:t};o.properties=i;var a=e.getGeometry();if(a.getType()==Qt.MULTI_LINE_STRING){var s=Ey(a,!0,n);i.trkseg=s.getLineStrings()}var u=r[r.length-1].node,l=B_[u.namespaceURI],c=Ku(i,l);tl(o,U_,qu,c,r,l)})),wpt:Vu((function(t,e,r){var n=r[0],i=r[r.length-1];i.properties=e.getProperties();var o=e.getGeometry();if(o.getType()==Qt.POINT){var a=Ey(o,!0,n);i.geometryLayout=a.getLayout(),nv(t,a.getCoordinates(),r)}}))}),C_=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=De("EPSG:4326"),r.readExtensions_=n.readExtensions,r}return S_(e,t),e.prototype.handleReadExtensions_=function(t){t||(t=[]);for(var e=0,r=t.length;e<r;++e){var n=t[e];if(this.readExtensions_){var i=n.get("extensionsNode_")||null;this.readExtensions_(n,i)}n.set("extensionsNode_",void 0)}},e.prototype.readFeatureFromNode=function(t,e){if(!x(E_,t.namespaceURI))return null;var r=O_[t.localName];if(!r)return null;var n=r(t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_([n]),n):null},e.prototype.readFeaturesFromNode=function(t,e){if(!x(E_,t.namespaceURI))return[];if("gpx"==t.localName){var r=Qu([],M_,t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_(r),r):[]}return[]},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=ju("http://www.topografix.com/GPX/1/1","gpx");return r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",Fu),r.setAttributeNS(Fu,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),r.setAttribute("version","1.1"),r.setAttribute("creator","OpenLayers"),tl({node:r},T_,q_,t,[e]),r},e}(Uy),I_=Hu(E_,{name:Yu(e_),cmt:Yu(e_),desc:Yu(e_),src:Yu(e_),link:J_,number:Yu($y),extensions:Q_,type:Yu(e_),rtept:function(t,e){var r=Qu({},R_,t,e);if(r){var n=e[e.length-1];K_(n.flatCoordinates,n.layoutOptions,t,r)}}}),R_=Hu(E_,{ele:Yu(Jy),time:Yu(Hy)}),L_=Hu(E_,{name:Yu(e_),cmt:Yu(e_),desc:Yu(e_),src:Yu(e_),link:J_,number:Yu($y),type:Yu(e_),extensions:Q_,trkseg:function(t,e){var r=e[e.length-1];Ju(A_,t,e);var n=r.flatCoordinates;r.ends.push(n.length)}}),A_=Hu(E_,{trkpt:function(t,e){var r=Qu({},k_,t,e);if(r){var n=e[e.length-1];K_(n.flatCoordinates,n.layoutOptions,t,r)}}}),k_=Hu(E_,{ele:Yu(Jy),time:Yu(Hy)}),F_=Hu(E_,{ele:Yu(Jy),time:Yu(Hy),magvar:Yu(Jy),geoidheight:Yu(Jy),name:Yu(e_),cmt:Yu(e_),desc:Yu(e_),src:Yu(e_),link:J_,sym:Yu(e_),type:Yu(e_),fix:Yu(e_),sat:Yu($y),hdop:Yu(Jy),vdop:Yu(Jy),pdop:Yu(Jy),ageofdgpsdata:Yu(Jy),dgpsid:Yu($y),extensions:Q_}),j_=["text","type"],N_=Hu(E_,{text:Vu(o_),type:Vu(o_)}),D_=Hu(E_,["name","cmt","desc","src","link","number","type","rtept"]),z_=Hu(E_,{name:Vu(o_),cmt:Vu(o_),desc:Vu(o_),src:Vu(o_),link:Vu(rv),number:Vu(i_),type:Vu(o_),rtept:Xu(Vu(nv))}),G_=Hu(E_,["ele","time"]),B_=Hu(E_,["name","cmt","desc","src","link","number","type","trkseg"]),U_=Hu(E_,{name:Vu(o_),cmt:Vu(o_),desc:Vu(o_),src:Vu(o_),link:Vu(rv),number:Vu(i_),type:Vu(o_),trkseg:Xu(Vu((function(t,e,r){var n={node:t};n.geometryLayout=e.getLayout(),n.properties={},tl(n,Y_,W_,e.getCoordinates(),r)})))}),W_=Zu("trkpt"),Y_=Hu(E_,{trkpt:Vu(nv)}),V_=Hu(E_,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),X_=Hu(E_,{ele:Vu(n_),time:Vu((function(t,e){var r=new Date(1e3*e),n=r.getUTCFullYear()+"-"+vi(r.getUTCMonth()+1,2)+"-"+vi(r.getUTCDate(),2)+"T"+vi(r.getUTCHours(),2)+":"+vi(r.getUTCMinutes(),2)+":"+vi(r.getUTCSeconds(),2)+"Z";t.appendChild(nl().createTextNode(n))})),magvar:Vu(n_),geoidheight:Vu(n_),name:Vu(o_),cmt:Vu(o_),desc:Vu(o_),src:Vu(o_),link:Vu(rv),sym:Vu(o_),type:Vu(o_),fix:Vu(o_),sat:Vu(i_),hdop:Vu(n_),vdop:Vu(n_),pdop:Vu(n_),ageofdgpsdata:Vu(n_),dgpsid:Vu(i_)}),Z_={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function q_(t,e,r){var n=t.getGeometry();if(n){var i=Z_[n.getType()];if(i)return ju(e[e.length-1].node.namespaceURI,i)}}function K_(t,e,r,n){return t.push(parseFloat(r.getAttribute("lon")),parseFloat(r.getAttribute("lat"))),"ele"in n?(t.push(n.ele),delete n.ele,e.hasZ=!0):t.push(0),"time"in n?(t.push(n.time),delete n.time,e.hasM=!0):t.push(0),t}function H_(t,e,r){var n=qt,i=2;if(t.hasZ&&t.hasM?(n=Jt,i=4):t.hasZ?(n=Kt,i=3):t.hasM&&(n=Ht,i=3),4!==i){for(var o=0,a=e.length/4;o<a;o++)e[o*i]=e[4*o],e[o*i+1]=e[4*o+1],t.hasZ&&(e[o*i+2]=e[4*o+2]),t.hasM&&(e[o*i+2]=e[4*o+3]);if(e.length=e.length/4*i,r)for(o=0,a=r.length;o<a;o++)r[o]=r[o]/4*i}return n}function J_(t,e){var r=e[e.length-1],n=t.getAttribute("href");null!==n&&(r.link=n),Ju(P_,t,e)}function Q_(t,e){e[e.length-1].extensionsNode_=t}function $_(t,e){var r=e[0],n=Qu({flatCoordinates:[],layoutOptions:{}},I_,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.layoutOptions;delete n.layoutOptions;var a=H_(o,i),s=new Yd(i,a);Ey(s,!1,r);var u=new ht(s);return u.setProperties(n,!0),u}}function tv(t,e){var r=e[0],n=Qu({flatCoordinates:[],ends:[],layoutOptions:{}},L_,t,e);if(n){var i=n.flatCoordinates;delete n.flatCoordinates;var o=n.ends;delete n.ends;var a=n.layoutOptions;delete n.layoutOptions;var s=H_(a,i,o),u=new Mg(i,s,o);Ey(u,!1,r);var l=new ht(u);return l.setProperties(n,!0),l}}function ev(t,e){var r=e[0],n=Qu({},F_,t,e);if(n){var i={},o=K_([],i,t,n),a=H_(i,o),s=new Wr(o,a);Ey(s,!1,r);var u=new ht(s);return u.setProperties(n,!0),u}}function rv(t,e,r){t.setAttribute("href",e);var n=r[r.length-1].properties,i=[n.linkText,n.linkType];tl({node:t},N_,qu,i,r,j_)}function nv(t,e,r){var n=r[r.length-1],i=n.node.namespaceURI,o=n.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case Jt:0!==e[3]&&(o.time=e[3]);case Kt:0!==e[2]&&(o.ele=e[2]);break;case Ht:0!==e[2]&&(o.time=e[2])}var a="rtept"==t.nodeName?G_[i]:V_[i],s=Ku(o,a);tl({node:t,properties:o},X_,qu,s,r,a)}var iv,ov=C_,av=(iv=function(t,e){return(iv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}iv(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function sv(t,e){if(!t)return null;var r;switch(t.type){case Qt.POINT:r=function(t){return new Wr(t.coordinates)}(t);break;case Qt.LINE_STRING:r=function(t){return new Yd(t.coordinates)}(t);break;case Qt.POLYGON:r=function(t){return new sn(t.coordinates)}(t);break;case Qt.MULTI_POINT:r=function(t){return new Tg(t.coordinates)}(t);break;case Qt.MULTI_LINE_STRING:r=function(t){return new Mg(t.coordinates)}(t);break;case Qt.MULTI_POLYGON:r=function(t){return new kg(t.coordinates)}(t);break;case Qt.GEOMETRY_COLLECTION:r=function(t,e){var r=t.geometries.map((function(t){return sv(t,void 0)}));return new xy(r)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return Ey(r,!1,e)}function uv(t,e){var r,n=(t=Ey(t,!0,e)).getType();switch(n){case Qt.POINT:r=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case Qt.LINE_STRING:r=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case Qt.POLYGON:r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(r)}}(t,e);break;case Qt.MULTI_POINT:r=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case Qt.MULTI_LINE_STRING:r=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case Qt.MULTI_POLYGON:r=function(t,e){var r;return e&&(r=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(r)}}(t,e);break;case Qt.GEOMETRY_COLLECTION:r=function(t,e){return{type:"GeometryCollection",geometries:t.getGeometriesArray().map((function(t){var r=p({},e);return delete r.featureProjection,uv(t,r)}))}}(t,e);break;case Qt.CIRCLE:r={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return r}var lv,cv=function(t){function e(e){var r=this,n=e||{};return(r=t.call(this)||this).dataProjection=De(n.dataProjection?n.dataProjection:"EPSG:4326"),n.featureProjection&&(r.defaultFeatureProjection=De(n.featureProjection)),r.geometryName_=n.geometryName,r.extractGeometryName_=n.extractGeometryName,r}return av(e,t),e.prototype.readFeatureFromObject=function(t,e){var r,n=sv((r="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e),i=new ht;return this.geometryName_?i.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in r!==void 0&&i.setGeometryName(r.geometry_name),i.setGeometry(n),"id"in r&&i.setId(r.id),r.properties&&i.setProperties(r.properties,!0),i},e.prototype.readFeaturesFromObject=function(t,e){var r=null;if("FeatureCollection"===t.type){r=[];for(var n=t.features,i=0,o=n.length;i<o;++i)r.push(this.readFeatureFromObject(n[i],e))}else r=[this.readFeatureFromObject(t,e)];return r},e.prototype.readGeometryFromObject=function(t,e){return sv(t,e)},e.prototype.readProjectionFromObject=function(t){var e,r=t.crs;return r?"name"==r.type?e=De(r.properties.name):"EPSG"===r.type?e=De("EPSG:"+r.properties.code):ut(!1,36):e=this.dataProjection,e},e.prototype.writeFeatureObject=function(t,e){e=this.adaptOptions(e);var r={type:"Feature",geometry:null,properties:null},n=t.getId();void 0!==n&&(r.id=n);var i=t.getGeometry();i&&(r.geometry=uv(i,e));var o=t.getProperties();return delete o[t.getGeometryName()],y(o)||(r.properties=o),r},e.prototype.writeFeaturesObject=function(t,e){e=this.adaptOptions(e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:r}},e.prototype.writeGeometryObject=function(t,e){return uv(t,this.adaptOptions(e))},e}(Iy),hv=(lv=function(t,e){return(lv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}lv(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function fv(t){return"string"==typeof t?t:""}var pv,dv,gv,yv,_v,vv,mv,bv,wv,xv,Sv,Ev,Ov=function(t){function e(){return t.call(this)||this}return hv(e,t),e.prototype.getType=function(){return"text"},e.prototype.readFeature=function(t,e){return this.readFeatureFromText(fv(t),this.adaptOptions(e))},e.prototype.readFeatureFromText=function(t,e){return n()},e.prototype.readFeatures=function(t,e){return this.readFeaturesFromText(fv(t),this.adaptOptions(e))},e.prototype.readFeaturesFromText=function(t,e){return n()},e.prototype.readGeometry=function(t,e){return this.readGeometryFromText(fv(t),this.adaptOptions(e))},e.prototype.readGeometryFromText=function(t,e){return n()},e.prototype.readProjection=function(t){return this.readProjectionFromText(fv(t))},e.prototype.readProjectionFromText=function(t){return this.dataProjection},e.prototype.writeFeature=function(t,e){return this.writeFeatureText(t,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){return n()},e.prototype.writeFeatures=function(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))},e.prototype.writeFeaturesText=function(t,e){return n()},e.prototype.writeGeometry=function(t,e){return this.writeGeometryText(t,this.adaptOptions(e))},e.prototype.writeGeometryText=function(t,e){return n()},e}(Sy),Mv=(pv=function(t,e){return(pv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}pv(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Pv="none",Tv=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Cv=/^H.([A-Z]{3}).*?:(.*)/,Iv=/^HFDTE(\d{2})(\d{2})(\d{2})/,Rv=/\r\n|\r|\n/,Lv=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=De("EPSG:4326"),r.altitudeMode_=n.altitudeMode?n.altitudeMode:Pv,r}return Mv(e,t),e.prototype.readFeatureFromText=function(t,e){var r,n,i=this.altitudeMode_,o=t.split(Rv),a={},s=[],u=2e3,l=0,c=1,h=-1;for(r=0,n=o.length;r<n;++r){var f=o[r],p=void 0;if("B"==f.charAt(0)){if(p=Tv.exec(f)){var d=parseInt(p[1],10),g=parseInt(p[2],10),y=parseInt(p[3],10),_=parseInt(p[4],10)+parseInt(p[5],10)/6e4;"S"==p[6]&&(_=-_);var v,m=parseInt(p[7],10)+parseInt(p[8],10)/6e4;if("W"==p[9]&&(m=-m),s.push(m,_),i!=Pv)v="gps"==i?parseInt(p[11],10):"barometric"==i?parseInt(p[12],10):0,s.push(v);var b=Date.UTC(u,l,c,d,g,y);b<h&&(b=Date.UTC(u,l,c+1,d,g,y)),s.push(b/1e3),h=b}}else"H"==f.charAt(0)&&((p=Iv.exec(f))?(c=parseInt(p[1],10),l=parseInt(p[2],10)-1,u=2e3+parseInt(p[3],10)):(p=Cv.exec(f))&&(a[p[1]]=p[2].trim()))}if(0===s.length)return null;var w=new Yd(s,i==Pv?Ht:Jt),x=new ht(Ey(w,!1,e));return x.setProperties(a,!0),x},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(Ov),Av=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},kv="version1",Fv="version2",jv="version3",Nv={version1:{level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},version2:{level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},version3:{level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},none:{none:{supports:[],formats:[],qualities:[]}}},Dv=new RegExp("^https?://library.stanford.edu/iiif/image-api/(1.1/)?compliance.html#level[0-2]$"),zv=new RegExp("^https?://iiif.io/api/image/2/level[0-2](.json)?$"),Gv=new RegExp("(^https?://iiif.io/api/image/3/level[0-2](.json)?$)|(^level[0-2]$)"),Bv={version1:function(t){var e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=Nv[kv].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),supports:e.supports,formats:Av(e.formats,[void 0===t.imageInfo.formats?[]:t.imageInfo.formats]),qualities:Av(e.qualities,[void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities]),resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},version2:function(t){var e=t.getComplianceLevelSupportedFeatures(),r=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=r&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],i=r&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],o=r&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(info.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:Av(e.supports,n),formats:Av(e.formats,i),qualities:Av(e.qualities,o)}},version3:function(t){var e=t.getComplianceLevelSupportedFeatures(),r=void 0===t.imageInfo.extraFormats?e.formats:Av(e.formats,t.imageInfo.extraFormats),n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return["jpg","png","gif"].includes(t)})).reduce((function(t,e){return void 0===t&&r.includes(e)?e:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:Av(e.supports,t.imageInfo.extraFeatures),formats:r,qualities:void 0===t.imageInfo.extraQualities?e.qualities:Av(e.qualities,t.imageInfo.extraQualities),preferredFormat:n}}},Uv=function(){function t(t){this.setImageInfo(t)}return t.prototype.setImageInfo=function(t){this.imageInfo="string"==typeof t?JSON.parse(t):t},t.prototype.getImageApiVersion=function(){if(void 0!==this.imageInfo){var t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(var e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return kv;case"http://iiif.io/api/image/2/context.json":return Fv;case"http://iiif.io/api/image/3/context.json":return jv;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(kv)&&this.imageInfo.identifier)return kv}ut(!1,61)}},t.prototype.getComplianceLevelEntryFromProfile=function(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case kv:if(Dv.test(this.imageInfo.profile))return this.imageInfo.profile;break;case jv:if(Gv.test(this.imageInfo.profile))return this.imageInfo.profile;break;case Fv:if("string"==typeof this.imageInfo.profile&&zv.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"==typeof this.imageInfo.profile[0]&&zv.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0]}},t.prototype.getComplianceLevelFromProfile=function(t){var e=this.getComplianceLevelEntryFromProfile(t);if(void 0!==e){var r=e.match(/level[0-2](\.json)?$/g);return Array.isArray(r)?r[0].replace(".json",""):void 0}},t.prototype.getComplianceLevelSupportedFeatures=function(){if(void 0!==this.imageInfo){var t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?Nv.none.none:Nv[t][e]}},t.prototype.getTileSourceOptions=function(t){var e=t||{},r=this.getImageApiVersion();if(void 0!==r){var n=void 0===r?void 0:Bv[r](this);if(void 0!==n)return{url:n.url,version:r,size:[this.imageInfo.width,this.imageInfo.height],sizes:n.sizes,format:void 0!==e.format&&n.formats.includes(e.format)?e.format:void 0!==n.preferredFormat?n.preferredFormat:"jpg",supports:n.supports,quality:e.quality&&n.qualities.includes(e.quality)?e.quality:n.qualities.includes("native")?"native":"default",resolutions:Array.isArray(n.resolutions)?n.resolutions.sort((function(t,e){return e-t})):void 0,tileSize:n.tileSize}}},t}(),Wv=(wv=function(t,e){return(wv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}wv(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Yv=["http://www.google.com/kml/ext/2.2"],Vv=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Xv={fraction:Al,pixels:kl,insetPixels:kl},Zv=Hu(Vv,{ExtendedData:Nm,Region:Dm,MultiGeometry:Yu(Tm,"geometry"),LineString:Yu(Om,"geometry"),LinearRing:Yu(Mm,"geometry"),Point:Yu(Cm,"geometry"),Polygon:Yu(Rm,"geometry"),Style:Yu(Am),StyleMap:function(t,e){var r=hm.call(this,t,e);if(r){var n=e[e.length-1];Array.isArray(r)?n.Style=r:"string"==typeof r?n.styleUrl=r:ut(!1,38)}},address:Yu(e_),description:Yu(e_),name:Yu(e_),open:Yu(qy),phoneNumber:Yu(e_),styleUrl:Yu(um),visibility:Yu(qy)},Hu(Yv,{MultiTrack:Yu((function(t,e){var r=Qu([],vm,t,e);if(r)return new Mg(r)}),"geometry"),Track:Yu(bm,"geometry")})),qv=Hu(Vv,{ExtendedData:Nm,Region:Dm,Link:function(t,e){Ju(Kv,t,e)},address:Yu(e_),description:Yu(e_),name:Yu(e_),open:Yu(qy),phoneNumber:Yu(e_),visibility:Yu(qy)}),Kv=Hu(Vv,{href:Yu(um)}),Hv=Hu(Vv,{LatLonAltBox:function(t,e){var r=Qu({},Bm,t,e);if(r){var n=e[e.length-1],i=[parseFloat(r.west),parseFloat(r.south),parseFloat(r.east),parseFloat(r.north)];n.extent=i,n.altitudeMode=r.altitudeMode,n.minAltitude=parseFloat(r.minAltitude),n.maxAltitude=parseFloat(r.maxAltitude)}},Lod:function(t,e){var r=Qu({},Um,t,e);if(r){var n=e[e.length-1];n.minLodPixels=parseFloat(r.minLodPixels),n.maxLodPixels=parseFloat(r.maxLodPixels),n.minFadeExtent=parseFloat(r.minFadeExtent),n.maxFadeExtent=parseFloat(r.maxFadeExtent)}}}),Jv=Hu(Vv,["Document","Placemark"]),Qv=Hu(Vv,{Document:Vu((function(t,e,r){tl({node:t},Zm,qm,e,r,void 0,this)})),Placemark:Vu(vb)}),$v=null,tm=null,em=null,rm=null,nm=null,im=null,om=function(t){function e(e){var r=t.call(this)||this,n=e||{};return im||($v=new Ll({color:dv=[255,255,255,1]}),tm=new Kl({anchor:gv=[20,2],anchorOrigin:Yl,anchorXUnits:yv=kl,anchorYUnits:_v=kl,crossOrigin:"anonymous",rotation:0,scale:bv=.5,size:vv=[64,64],src:mv="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"}),xv="NO_IMAGE",em=new Hl({color:dv,width:1}),Sv=new Hl({color:[51,51,51,1],width:2}),rm=new nc({font:"bold 16px Helvetica",fill:$v,stroke:Sv,scale:.8}),nm=new rc({fill:$v,image:tm,text:rm,stroke:em,zIndex:0}),im=[nm]),r.dataProjection=De("EPSG:4326"),r.defaultStyle_=n.defaultStyle?n.defaultStyle:im,r.extractStyles_=void 0===n.extractStyles||n.extractStyles,r.writeStyles_=void 0===n.writeStyles||n.writeStyles,r.sharedStyles_={},r.showPointNames_=void 0===n.showPointNames||n.showPointNames,r.crossOrigin_=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",r}return Wv(e,t),e.prototype.readDocumentOrFolder_=function(t,e){return Qu([],Hu(Vv,{Document:Gu(this.readDocumentOrFolder_,this),Folder:Gu(this.readDocumentOrFolder_,this),Placemark:Bu(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),t,e,this)||void 0},e.prototype.readPlacemark_=function(t,e){var r=Qu({geometry:null},Zv,t,e,this);if(r){var n=new ht,i=t.getAttribute("id");null!==i&&n.setId(i);var o=e[0],a=r.geometry;if(a&&Ey(a,!1,o),n.setGeometry(a),delete r.geometry,this.extractStyles_){var s=function(t,e,r,n,i){return function(o,a){var s=i,u="",l=[];if(s){var c=o.getGeometry();if(c){var h=c.getType();s=h===Qt.GEOMETRY_COLLECTION?(l=c.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Qt.POINT||e===Qt.MULTI_POINT}))).length>0:h===Qt.POINT||h===Qt.MULTI_POINT}}s&&(u=o.get("name"),(s=s&&!!u)&&u.search(/&[^&]+;/)>-1&&(Ev||(Ev=document.createElement("textarea")),Ev.innerHTML=u,u=Ev.value));var f=r;if(t?f=t:e&&(f=function t(e,r,n){return Array.isArray(e)?e:"string"==typeof e?(!(e in n)&&"#"+e in n&&(e="#"+e),t(n[e],r,n)):r}(e,r,n)),s){var p=function(t,e){var r=[0,0],n="start",i=t.getImage();if(i){var o=i.getImageSize();if(null===o&&(o=vv),2==o.length){var a=i.getScale();r[0]=a*o[0]/2,r[1]=-a*o[1]/2,n="left"}}var s=t.getText();return s?((s=s.clone()).setFont(s.getFont()||rm.getFont()),s.setScale(s.getScale()||rm.getScale()),s.setFill(s.getFill()||rm.getFill()),s.setStroke(s.getStroke()||Sv)):s=rm.clone(),s.setText(e),s.setOffsetX(r[0]),s.setOffsetY(r[1]),s.setTextAlign(n),new rc({image:i,text:s})}(f[0],u);return l.length>0?(p.setGeometry(new xy(l)),[p,new rc({geometry:f[0].getGeometry(),image:null,fill:f[0].getFill(),stroke:f[0].getStroke(),text:null})].concat(f.slice(1))):p}return f}}(r.Style,r.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);n.setStyle(s)}return delete r.Style,n.setProperties(r,!0),n}},e.prototype.readSharedStyle_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=Am.call(this,t,e);if(n){var i=void 0,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+r,o).href:"#"+r,this.sharedStyles_[i]=n}}},e.prototype.readSharedStyleMap_=function(t,e){var r=t.getAttribute("id");if(null!==r){var n=hm.call(this,t,e);if(n){var i,o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),i=o?new URL("#"+r,o).href:"#"+r,this.sharedStyles_[i]=n}}},e.prototype.readFeatureFromNode=function(t,e){return x(Vv,t.namespaceURI)&&this.readPlacemark_(t,[this.getReadOptions(t,e)])||null},e.prototype.readFeaturesFromNode=function(t,e){if(!x(Vv,t.namespaceURI))return[];var r,n=t.localName;if("Document"==n||"Folder"==n)return(r=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))||[];if("Placemark"==n){var i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==n){r=[];for(var o=t.firstElementChild;o;o=o.nextElementSibling){var a=this.readFeaturesFromNode(o,e);a&&O(r,a)}return r}return[]},e.prototype.readName=function(t){if(t){if("string"==typeof t){var e=zu(t);return this.readNameFromDocument(e)}return Du(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}},e.prototype.readNameFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var r=this.readNameFromNode(e);if(r)return r}},e.prototype.readNameFromNode=function(t){for(var e=t.firstElementChild;e;e=e.nextElementSibling)if(x(Vv,e.namespaceURI)&&"name"==e.localName)return e_(e);for(e=t.firstElementChild;e;e=e.nextElementSibling){var r=e.localName;if(x(Vv,e.namespaceURI)&&("Document"==r||"Folder"==r||"Placemark"==r||"kml"==r)){var n=this.readNameFromNode(e);if(n)return n}}},e.prototype.readNetworkLinks=function(t){var e=[];if("string"==typeof t){var r=zu(t);O(e,this.readNetworkLinksFromDocument(r))}else Du(t)?O(e,this.readNetworkLinksFromDocument(t)):O(e,this.readNetworkLinksFromNode(t));return e},e.prototype.readNetworkLinksFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&O(e,this.readNetworkLinksFromNode(r));return e},e.prototype.readNetworkLinksFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(x(Vv,r.namespaceURI)&&"NetworkLink"==r.localName){var n=Qu({},qv,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!x(Vv,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||O(e,this.readNetworkLinksFromNode(r))}return e},e.prototype.readRegion=function(t){var e=[];if("string"==typeof t){var r=zu(t);O(e,this.readRegionFromDocument(r))}else Du(t)?O(e,this.readRegionFromDocument(t)):O(e,this.readRegionFromNode(t));return e},e.prototype.readRegionFromDocument=function(t){for(var e=[],r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&O(e,this.readRegionFromNode(r));return e},e.prototype.readRegionFromNode=function(t){for(var e=[],r=t.firstElementChild;r;r=r.nextElementSibling)if(x(Vv,r.namespaceURI)&&"Region"==r.localName){var n=Qu({},Hv,r,[]);e.push(n)}for(r=t.firstElementChild;r;r=r.nextElementSibling){var i=r.localName;!x(Vv,r.namespaceURI)||"Document"!=i&&"Folder"!=i&&"kml"!=i||O(e,this.readRegionFromNode(r))}return e},e.prototype.writeFeaturesNode=function(t,e){e=this.adaptOptions(e);var r=ju(Vv[4],"kml"),n="http://www.w3.org/2000/xmlns/";r.setAttributeNS(n,"xmlns:gx",Yv[0]),r.setAttributeNS(n,"xmlns:xsi",Fu),r.setAttributeNS(Fu,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:r},o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);var a=Jv[r.namespaceURI],s=Ku(o,a);return tl(i,Qv,qu,s,[e],a,this),r},e}(Uy);function am(t){var e=Nu(t,!1),r=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(r){var n=r[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function sm(t){for(var e,r=Nu(t,!1),n=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=i.exec(r);){var o=parseFloat(e[1]),a=parseFloat(e[2]),s=e[3]?parseFloat(e[3]):0;n.push(o,a,s),r=r.substr(e[0].length)}if(""===r)return n}function um(t){var e=Nu(t,!1).trim(),r=t.baseURI;return r&&"about:blank"!=r||(r=window.location.href),r?new URL(e,r).href:e}function lm(t){return Jy(t)}var cm=Hu(Vv,{Pair:function(t,e){var r=Qu({},zm,t,e,this);if(r){var n=r.key;if(n&&"normal"==n){var i=r.styleUrl;i&&(e[e.length-1]=i);var o=r.Style;o&&(e[e.length-1]=o)}}}});function hm(t,e){return Qu(void 0,cm,t,e,this)}var fm=Hu(Vv,{Icon:Yu((function(t,e){return Qu({},wm,t,e)||null})),color:Yu(am),heading:Yu(Jy),hotSpot:Yu((function(t){var e,r=t.getAttribute("xunits"),n=t.getAttribute("yunits");return e="insetPixels"!==r?"insetPixels"!==n?Yl:Xl:"insetPixels"!==n?Vl:Zl,{x:parseFloat(t.getAttribute("x")),xunits:Xv[r],y:parseFloat(t.getAttribute("y")),yunits:Xv[n],origin:e}})),scale:Yu(lm)}),pm=Hu(Vv,{color:Yu(am),scale:Yu(lm)}),dm=Hu(Vv,{color:Yu(am),width:Yu(Jy)}),gm=Hu(Vv,{color:Yu(am),fill:Yu(qy),outline:Yu(qy)}),ym=Hu(Vv,{coordinates:Uu(sm)});function _m(t,e){return Qu(null,ym,t,e)}var vm=Hu(Yv,{Track:Bu(bm)}),mm=Hu(Vv,{when:function(t,e){var r=e[e.length-1].whens,n=Nu(t,!1),i=Date.parse(n);r.push(isNaN(i)?0:i)}},Hu(Yv,{coord:function(t,e){var r=e[e.length-1].flatCoordinates,n=Nu(t,!1),i=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(n);if(i){var o=parseFloat(i[1]),a=parseFloat(i[2]),s=parseFloat(i[3]);r.push(o,a,s,0)}else r.push(0,0,0,0)}}));function bm(t,e){var r=Qu({flatCoordinates:[],whens:[]},mm,t,e);if(r){for(var n=r.flatCoordinates,i=r.whens,o=0,a=Math.min(n.length,i.length);o<a;++o)n[4*o+3]=i[o];return new Yd(n,Jt)}}var wm=Hu(Vv,{href:Yu(um)},Hu(Yv,{x:Yu(Jy),y:Yu(Jy),w:Yu(Jy),h:Yu(Jy)})),xm=Hu(Vv,{coordinates:Uu(sm)});function Sm(t,e){return Qu(null,xm,t,e)}var Em=Hu(Vv,{extrude:Yu(qy),tessellate:Yu(qy),altitudeMode:Yu(e_)});function Om(t,e){var r=Qu({},Em,t,e),n=Sm(t,e);if(n){var i=new Yd(n,Kt);return i.setProperties(r,!0),i}}function Mm(t,e){var r=Qu({},Em,t,e),n=Sm(t,e);if(n){var i=new sn(n,Kt,[n.length]);return i.setProperties(r,!0),i}}var Pm=Hu(Vv,{LineString:Bu(Om),LinearRing:Bu(Mm),MultiGeometry:Bu(Tm),Point:Bu(Cm),Polygon:Bu(Rm)});function Tm(t,e){var r,n=Qu([],Pm,t,e);if(!n)return null;if(0===n.length)return new xy(n);for(var i=!0,o=n[0].getType(),a=1,s=n.length;a<s;++a)if(n[a].getType()!=o){i=!1;break}if(i){var u=void 0,l=void 0;if(o==Qt.POINT){var c=n[0];for(u=c.getLayout(),l=c.getFlatCoordinates(),a=1,s=n.length;a<s;++a)O(l,n[a].getFlatCoordinates());km(r=new Tg(l,u),n)}else o==Qt.LINE_STRING?km(r=new Mg(n),n):o==Qt.POLYGON?km(r=new kg(n),n):o==Qt.GEOMETRY_COLLECTION?r=new xy(n):ut(!1,37)}else r=new xy(n);return r}function Cm(t,e){var r=Qu({},Em,t,e),n=Sm(t,e);if(n){var i=new Wr(n,Kt);return i.setProperties(r,!0),i}}var Im=Hu(Vv,{innerBoundaryIs:function(t,e){var r=Qu(void 0,Wm,t,e);r&&e[e.length-1].push(r)},outerBoundaryIs:function(t,e){var r=Qu(void 0,Ym,t,e);r&&(e[e.length-1][0]=r)}});function Rm(t,e){var r=Qu({},Em,t,e),n=Qu([null],Im,t,e);if(n&&n[0]){for(var i=n[0],o=[i.length],a=1,s=n.length;a<s;++a)O(i,n[a]),o.push(i.length);var u=new sn(i,Kt,o);return u.setProperties(r,!0),u}}var Lm=Hu(Vv,{IconStyle:function(t,e){var r=Qu({},fm,t,e);if(r){var n,i,o,a,s=e[e.length-1],u="Icon"in r?r.Icon:{},l=!("Icon"in r)||Object.keys(u).length>0,c=u.href;c?n=c:l&&(n=mv);var h,f=Yl,p=r.hotSpot;p?(i=[p.x,p.y],o=p.xunits,a=p.yunits,f=p.origin):n===mv?(i=gv,o=yv,a=_v):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(n)&&(i=[.5,0],o=Al,a=Al);var d,g=u.x,y=u.y;void 0!==g&&void 0!==y&&(h=[g,y]);var _,v=u.w,m=u.h;void 0!==v&&void 0!==m&&(d=[v,m]);var b=r.heading;void 0!==b&&(_=se(b));var w=r.scale,x=r.color;if(l){n==mv&&(d=vv,void 0===w&&(w=bv));var S=new Kl({anchor:i,anchorOrigin:f,anchorXUnits:o,anchorYUnits:a,crossOrigin:this.crossOrigin_,offset:h,offsetOrigin:Yl,rotation:_,scale:w,size:d,src:n,color:x});s.imageStyle=S}else s.imageStyle=xv}},LabelStyle:function(t,e){var r=Qu({},pm,t,e);if(r){var n=e[e.length-1],i=new nc({fill:new Ll({color:"color"in r?r.color:dv}),scale:r.scale});n.textStyle=i}},LineStyle:function(t,e){var r=Qu({},dm,t,e);if(r){var n=e[e.length-1],i=new Hl({color:"color"in r?r.color:dv,width:"width"in r?r.width:1});n.strokeStyle=i}},PolyStyle:function(t,e){var r=Qu({},gm,t,e);if(r){var n=e[e.length-1],i=new Ll({color:"color"in r?r.color:dv});n.fillStyle=i;var o=r.fill;void 0!==o&&(n.fill=o);var a=r.outline;void 0!==a&&(n.outline=a)}}});function Am(t,e){var r=Qu({},Lm,t,e,this);if(!r)return null;var n,i="fillStyle"in r?r.fillStyle:$v,o=r.fill;void 0===o||o||(i=null),"imageStyle"in r?r.imageStyle!=xv&&(n=r.imageStyle):n=tm;var a="textStyle"in r?r.textStyle:rm,s="strokeStyle"in r?r.strokeStyle:em,u=r.outline;return void 0===u||u?[new rc({fill:i,image:n,stroke:s,text:a,zIndex:void 0})]:[new rc({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===Qt.GEOMETRY_COLLECTION?new xy(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e!==Qt.POLYGON&&e!==Qt.MULTI_POLYGON}))):r!==Qt.POLYGON&&r!==Qt.MULTI_POLYGON?e:void 0},fill:i,image:n,stroke:s,text:a,zIndex:void 0}),new rc({geometry:function(t){var e=t.getGeometry(),r=e.getType();return r===Qt.GEOMETRY_COLLECTION?new xy(e.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Qt.POLYGON||e===Qt.MULTI_POLYGON}))):r===Qt.POLYGON||r===Qt.MULTI_POLYGON?e:void 0},fill:i,stroke:null,zIndex:void 0})]}function km(t,e){var r,n,i,o=e.length,a=new Array(e.length),s=new Array(e.length),u=new Array(e.length);r=!1,n=!1,i=!1;for(var l=0;l<o;++l){var c=e[l];a[l]=c.get("extrude"),s[l]=c.get("tessellate"),u[l]=c.get("altitudeMode"),r=r||void 0!==a[l],n=n||void 0!==s[l],i=i||u[l]}r&&t.set("extrude",a),n&&t.set("tessellate",s),i&&t.set("altitudeMode",u)}var Fm=Hu(Vv,{displayName:Yu(e_),value:Yu(e_)}),jm=Hu(Vv,{Data:function(t,e){var r=t.getAttribute("name");Ju(Fm,t,e);var n=e[e.length-1];r&&n.displayName?n[r]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:null!==r?n[r]=n.value:null!==n.displayName&&(n[n.displayName]=n.value),delete n.value},SchemaData:function(t,e){Ju(Gm,t,e)}});function Nm(t,e){Ju(jm,t,e)}function Dm(t,e){Ju(Hv,t,e)}var zm=Hu(Vv,{Style:Yu(Am),key:Yu(e_),styleUrl:Yu(um)}),Gm=Hu(Vv,{SimpleData:function(t,e){var r=t.getAttribute("name");if(null!==r){var n=e_(t);e[e.length-1][r]=n}}}),Bm=Hu(Vv,{altitudeMode:Yu(e_),minAltitude:Yu(Jy),maxAltitude:Yu(Jy),north:Yu(Jy),south:Yu(Jy),east:Yu(Jy),west:Yu(Jy)}),Um=Hu(Vv,{minLodPixels:Yu(Jy),maxLodPixels:Yu(Jy),minFadeExtent:Yu(Jy),maxFadeExtent:Yu(Jy)}),Wm=Hu(Vv,{LinearRing:Uu(_m)}),Ym=Hu(Vv,{LinearRing:Uu(_m)});function Vm(t,e){for(var r=is(e),n=[255*(4==r.length?r[3]:1),r[2],r[1],r[0]],i=0;i<4;++i){var o=Math.floor(n[i]).toString(16);n[i]=1==o.length?"0"+o:o}o_(t,n.join(""))}var Xm=Hu(Vv,{Data:Vu((function(t,e,r){t.setAttribute("name",e.name);var n={node:t},i=e.value;"object"==a(i)?(null!==i&&i.displayName&&tl(n,Xm,qu,[i.displayName],r,["displayName"]),null!==i&&i.value&&tl(n,Xm,qu,[i.value],r,["value"])):tl(n,Xm,qu,[i],r,["value"])})),value:Vu((function(t,e){o_(t,e)})),displayName:Vu((function(t,e){!function(t,e){t.appendChild(nl().createCDATASection(e))}(t,e)}))}),Zm=Hu(Vv,{Placemark:Vu(vb)}),qm=function(t,e,r){return ju(e[e.length-1].node.namespaceURI,"Placemark")},Km=Zu("Data"),Hm=Hu(Vv,["href"],Hu(Yv,["x","y","w","h"])),Jm=Hu(Vv,{href:Vu(o_)},Hu(Yv,{x:Vu(n_),y:Vu(n_),w:Vu(n_),h:Vu(n_)})),Qm=function(t,e,r){return ju(Yv[0],"gx:"+r)},$m=Hu(Vv,["scale","heading","Icon","color","hotSpot"]),tb=Hu(Vv,{Icon:Vu((function(t,e,r){var n={node:t},i=r[r.length-1].node,o=Hm[i.namespaceURI],a=Ku(e,o);tl(n,Jm,qu,a,r,o),a=Ku(e,o=Hm[Yv[0]]),tl(n,Jm,Qm,a,r,o)})),color:Vu(Vm),heading:Vu(n_),hotSpot:Vu((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:Vu(Tb)}),eb=Hu(Vv,["color","scale"]),rb=Hu(Vv,{color:Vu(Vm),scale:Vu(Tb)}),nb=Hu(Vv,["color","width"]),ib=Hu(Vv,{color:Vu(Vm),width:Vu(n_)}),ob={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ab=function(t,e,r){if(t)return ju(e[e.length-1].node.namespaceURI,ob[t.getType()])},sb=Zu("Point"),ub=Zu("LineString"),lb=Zu("LinearRing"),cb=Zu("Polygon"),hb=Hu(Vv,{LineString:Vu(wb),Point:Vu(wb),Polygon:Vu(Mb),GeometryCollection:Vu(fb)});function fb(t,e,r){var n,i={node:t},o=e.getType(),a=[];o===Qt.GEOMETRY_COLLECTION?(e.getGeometriesArrayRecursive().forEach((function(t){var e=t.getType();e===Qt.MULTI_POINT?a=a.concat(t.getPoints()):e===Qt.MULTI_LINE_STRING?a=a.concat(t.getLineStrings()):e===Qt.MULTI_POLYGON?a=a.concat(t.getPolygons()):e===Qt.POINT||e===Qt.LINE_STRING||e===Qt.POLYGON?a.push(t):ut(!1,39)})),n=ab):o===Qt.MULTI_POINT?(a=e.getPoints(),n=sb):o===Qt.MULTI_LINE_STRING?(a=e.getLineStrings(),n=ub):o===Qt.MULTI_POLYGON?(a=e.getPolygons(),n=cb):ut(!1,39),tl(i,hb,n,a,r)}var pb=Hu(Vv,{LinearRing:Vu(wb)});function db(t,e,r){tl({node:t},pb,lb,[e],r)}var gb=Hu(Vv,{ExtendedData:Vu((function(t,e,r){for(var n={node:t},i=e.names,o=e.values,a=i.length,s=0;s<a;s++)tl(n,Xm,Km,[{name:i[s],value:o[s]}],r)})),MultiGeometry:Vu(fb),LineString:Vu(wb),LinearRing:Vu(wb),Point:Vu(wb),Polygon:Vu(Mb),Style:Vu((function(t,e,r){var n,i={node:t},o={};if(e.pointStyles.length){var a=e.pointStyles[0].getText();a&&(o.LabelStyle=a);var s=e.pointStyles[0].getImage();s&&"function"==typeof s.getSrc&&(o.IconStyle=s)}e.lineStyles.length&&(n=e.lineStyles[0].getStroke())&&(o.LineStyle=n),e.polyStyles.length&&((n=e.polyStyles[0].getStroke())&&!o.LineStyle&&(o.LineStyle=n),o.PolyStyle=e.polyStyles[0]);var u=r[r.length-1].node,l=Cb[u.namespaceURI],c=Ku(o,l);tl(i,Ib,qu,c,r,l)})),address:Vu(o_),description:Vu(o_),name:Vu(o_),open:Vu(r_),phoneNumber:Vu(o_),styleUrl:Vu(o_),visibility:Vu(r_)}),yb=Hu(Vv,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),_b=Zu("ExtendedData");function vb(t,e,r){var n={node:t};e.getId()&&t.setAttribute("id",e.getId());var i=e.getProperties(),o={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};o[e.getGeometryName()]=1;var a=Object.keys(i||{}).sort().filter((function(t){return!o[t]})),s=e.getStyleFunction();if(s){var u=s(e,0);if(u){var l=Array.isArray(u)?u:[u],c=l;if(e.getGeometry()&&(c=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===Qt.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Qt.POINT||e===Qt.MULTI_POINT})).length:n===Qt.POINT||n===Qt.MULTI_POINT}}))),this.writeStyles_){var h=l,f=l;e.getGeometry()&&(h=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===Qt.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Qt.LINE_STRING||e===Qt.MULTI_LINE_STRING})).length:n===Qt.LINE_STRING||n===Qt.MULTI_LINE_STRING}})),f=l.filter((function(t){var r=t.getGeometryFunction()(e);if(r){var n=r.getType();return n===Qt.GEOMETRY_COLLECTION?r.getGeometriesArrayRecursive().filter((function(t){var e=t.getType();return e===Qt.POLYGON||e===Qt.MULTI_POLYGON})).length:n===Qt.POLYGON||n===Qt.MULTI_POLYGON}}))),i.Style={pointStyles:c,lineStyles:h,polyStyles:f}}if(c.length&&void 0===i.name){var p=c[0].getText();p&&(i.name=p.getText())}}}var d=r[r.length-1].node,g=yb[d.namespaceURI],y=Ku(i,g);if(tl(n,gb,qu,y,r,g),a.length>0){var _=Ku(i,a);tl(n,gb,_b,[{names:a,values:_}],r)}var v=r[0],m=e.getGeometry();m&&(m=Ey(m,!0,v)),tl(n,gb,ab,[m],r)}var mb=Hu(Vv,["extrude","tessellate","altitudeMode","coordinates"]),bb=Hu(Vv,{extrude:Vu(r_),tessellate:Vu(r_),altitudeMode:Vu(o_),coordinates:Vu((function(t,e,r){var n,i=r[r.length-1],o=i.layout,a=i.stride;o==qt||o==Ht?n=2:o==Kt||o==Jt?n=3:ut(!1,34);var s=e.length,u="";if(s>0){u+=e[0];for(var l=1;l<n;++l)u+=","+e[l];for(var c=a;c<s;c+=a)for(u+=" "+e[c],l=1;l<n;++l)u+=","+e[c+l]}o_(t,u)}))});function wb(t,e,r){var n=e.getFlatCoordinates(),i={node:t};i.layout=e.getLayout(),i.stride=e.getStride();var o=e.getProperties();o.coordinates=n;var a=r[r.length-1].node,s=mb[a.namespaceURI],u=Ku(o,s);tl(i,bb,qu,u,r,s)}var xb=Hu(Vv,["color","fill","outline"]),Sb=Hu(Vv,{outerBoundaryIs:Vu(db),innerBoundaryIs:Vu(db)}),Eb=Zu("innerBoundaryIs"),Ob=Zu("outerBoundaryIs");function Mb(t,e,r){var n=e.getLinearRings(),i=n.shift(),o={node:t};tl(o,Sb,Eb,n,r),tl(o,Sb,Ob,[i],r)}var Pb=Hu(Vv,{color:Vu(Vm),fill:Vu(r_),outline:Vu(r_)});function Tb(t,e){n_(t,Math.round(1e6*e)/1e6)}var Cb=Hu(Vv,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Ib=Hu(Vv,{IconStyle:Vu((function(t,e,r){var n={node:t},i={},o=e.getSrc(),a=e.getSize(),s=e.getImageSize(),u={href:o};if(a){u.w=a[0],u.h=a[1];var l=e.getAnchor(),c=e.getOrigin();if(c&&s&&0!==c[0]&&c[1]!==a[1]&&(u.x=c[0],u.y=s[1]-(c[1]+a[1])),l&&(l[0]!==a[0]/2||l[1]!==a[1]/2)){var h={x:l[0],xunits:kl,y:a[1]-l[1],yunits:kl};i.hotSpot=h}}i.Icon=u;var f=e.getScale();1!==f&&(i.scale=f);var p=e.getRotation();0!==p&&(i.heading=p);var d=e.getColor();d&&(i.color=d);var g=r[r.length-1].node,y=$m[g.namespaceURI],_=Ku(i,y);tl(n,tb,qu,_,r,y)})),LabelStyle:Vu((function(t,e,r){var n={node:t},i={},o=e.getFill();o&&(i.color=o.getColor());var a=e.getScale();a&&1!==a&&(i.scale=a);var s=r[r.length-1].node,u=eb[s.namespaceURI],l=Ku(i,u);tl(n,rb,qu,l,r,u)})),LineStyle:Vu((function(t,e,r){var n={node:t},i={color:e.getColor(),width:Number(e.getWidth())||1},o=r[r.length-1].node,a=nb[o.namespaceURI],s=Ku(i,a);tl(n,ib,qu,s,r,a)})),PolyStyle:Vu((function(t,e,r){var n={node:t},i=e.getFill(),o=e.getStroke(),a={color:i?i.getColor():void 0,fill:!!i&&void 0,outline:!!o&&void 0},s=r[r.length-1].node,u=xb[s.namespaceURI],l=Ku(a,u);tl(n,Pb,qu,l,r,u)}))}),Rb=om,Lb=r(2),Ab=r.n(Lb),kb=[1,0,0,1,0,0],Fb=function(){function t(t,e,r,n,i){this.extent_,this.id_=i,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=r,this.properties_=n}return t.prototype.get=function(t){return this.properties_[t]},t.prototype.getExtent=function(){return this.extent_||(this.extent_=this.type_===Qt.POINT?Et(this.flatCoordinates_):Ot(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_},t.prototype.getFlatInteriorPoint=function(){if(!this.flatInteriorPoints_){var t=Ft(this.getExtent());this.flatInteriorPoints_=Zr(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_},t.prototype.getFlatInteriorPoints=function(){if(!this.flatInteriorPoints_){var t=Cg(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=qr(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_},t.prototype.getFlatMidpoint=function(){return this.flatMidpoints_||(this.flatMidpoints_=Gd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_},t.prototype.getFlatMidpoints=function(){if(!this.flatMidpoints_){this.flatMidpoints_=[];for(var t=this.flatCoordinates_,e=0,r=this.ends_,n=0,i=r.length;n<i;++n){var o=r[n],a=Gd(t,e,o,2,.5);O(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_},t.prototype.getId=function(){return this.id_},t.prototype.getOrientedFlatCoordinates=function(){return this.flatCoordinates_},t.prototype.getGeometry=function(){return this},t.prototype.getSimplifiedGeometry=function(t){return this},t.prototype.simplifyTransformed=function(t,e){return this},t.prototype.getProperties=function(){return this.properties_},t.prototype.getStride=function(){return 2},t.prototype.getStyleFunction=function(){},t.prototype.getType=function(){return this.type_},t.prototype.transform=function(t,e){var r=(t=De(t)).getExtent(),n=t.getWorldExtent(),i=Dt(n)/Dt(r);cr(kb,n[0],n[3],i,-i,0,0,0),$t(this.flatCoordinates_,0,this.flatCoordinates_.length,2,kb,this.flatCoordinates_)},t}();Fb.prototype.getEnds=function(){return this.ends_},Fb.prototype.getEndss=Fb.prototype.getEnds,Fb.prototype.getFlatCoordinates=Fb.prototype.getOrientedFlatCoordinates;var jb,Nb=Fb,Db=(jb=function(t,e){return(jb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}jb(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function zb(t,e,r){if(3===t){var n={keys:[],values:[],features:[]},i=r.readVarint()+r.pos;r.readFields(Gb,n,i),n.length=n.features.length,n.length&&(e[n.name]=n)}}function Gb(t,e,r){if(15===t)e.version=r.readVarint();else if(1===t)e.name=r.readString();else if(5===t)e.extent=r.readVarint();else if(2===t)e.features.push(r.pos);else if(3===t)e.keys.push(r.readString());else if(4===t){for(var n=null,i=r.readVarint()+r.pos;r.pos<i;)n=1==(t=r.readVarint()>>3)?r.readString():2===t?r.readFloat():3===t?r.readDouble():4===t?r.readVarint64():5===t?r.readVarint():6===t?r.readSVarint():7===t?r.readBoolean():null;e.values.push(n)}}function Bb(t,e,r){if(1==t)e.id=r.readVarint();else if(2==t)for(var n=r.readVarint()+r.pos;r.pos<n;){var i=e.layer.keys[r.readVarint()],o=e.layer.values[r.readVarint()];e.properties[i]=o}else 3==t?e.type=r.readVarint():4==t&&(e.geometry=r.pos)}function Ub(t,e,r){t.pos=e.features[r];var n=t.readVarint()+t.pos,i={layer:e,type:0,properties:{}};return t.readFields(Bb,i,n),i}var Wb,Yb=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=new me({code:"",units:ve.TILE_PIXELS}),r.featureClass_=n.featureClass?n.featureClass:Nb,r.geometryName_=n.geometryName,r.layerName_=n.layerName?n.layerName:"layer",r.layers_=n.layers?n.layers:null,r.idProperty_=n.idProperty,r}return Db(e,t),e.prototype.readRawGeometry_=function(t,e,r,n){t.pos=e.geometry;for(var i=t.readVarint()+t.pos,o=1,a=0,s=0,u=0,l=0,c=0;t.pos<i;){if(!a){var h=t.readVarint();o=7&h,a=h>>3}a--,1===o||2===o?(s+=t.readSVarint(),u+=t.readSVarint(),1===o&&l>c&&(n.push(l),c=l),r.push(s,u),l+=2):7===o?l>c&&(r.push(r[c],r[c+1]),l+=2):ut(!1,59)}l>c&&(n.push(l),c=l)},e.prototype.createFeature_=function(t,e,r){var n,i=e.type;if(0===i)return null;var o,a=e.properties;this.idProperty_?(o=a[this.idProperty_],delete a[this.idProperty_]):o=e.id,a[this.layerName_]=e.layer.name;var s=[],u=[];this.readRawGeometry_(t,e,s,u);var l=function(t,e){var r;return 1===t?r=1===e?Qt.POINT:Qt.MULTI_POINT:2===t?r=1===e?Qt.LINE_STRING:Qt.MULTI_LINE_STRING:3===t&&(r=Qt.POLYGON),r}(i,u.length);if(this.featureClass_===Nb)(n=new this.featureClass_(l,s,u,a,o)).transform(r.dataProjection,r.featureProjection);else{var c=void 0;if(l==Qt.POLYGON){for(var h=[],f=0,p=0,d=0,g=u.length;d<g;++d){var y=u[d];$r(s,f,y,2)||(h.push(u.slice(p,d)),p=d),f=y}c=h.length>1?new kg(s,qt,h):new sn(s,qt,u)}else c=l===Qt.POINT?new Wr(s,qt):l===Qt.LINE_STRING?new Yd(s,qt):l===Qt.POLYGON?new sn(s,qt,u):l===Qt.MULTI_POINT?new Tg(s,qt):l===Qt.MULTI_LINE_STRING?new Mg(s,qt,u):null;n=new(0,this.featureClass_),this.geometryName_&&n.setGeometryName(this.geometryName_);var _=Ey(c,!1,r);n.setGeometry(_),n.setId(o),n.setProperties(a,!0)}return n},e.prototype.getType=function(){return fu},e.prototype.readFeatures=function(t,e){var r=this.layers_,n=this.adaptOptions(e),i=De(n.dataProjection);i.setWorldExtent(n.extent),n.dataProjection=i;var o=new Ab.a(t),a=o.readFields(zb,{}),s=[];for(var u in a)if(!r||-1!=r.indexOf(u)){var l=a[u],c=l?[0,0,l.extent,l.extent]:null;i.setExtent(c);for(var h=0,f=l.length;h<f;++h){var p=Ub(o,l,h);s.push(this.createFeature_(o,p,n))}}return s},e.prototype.readProjection=function(t){return this.dataProjection},e.prototype.setLayers=function(t){this.layers_=t},e}(Sy),Vb=(Wb=function(t,e){return(Wb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Wb(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Xb=[null],Zb=Hu(Xb,{nd:function(t,e){e[e.length-1].ndrefs.push(t.getAttribute("ref"))},tag:Jb}),qb=Hu(Xb,{node:function(t,e){var r=e[0],n=e[e.length-1],i=t.getAttribute("id"),o=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];n.nodes[i]=o;var a=Qu({tags:{}},Hb,t,e);if(!y(a.tags)){var s=new Wr(o);Ey(s,!1,r);var u=new ht(s);u.setId(i),u.setProperties(a.tags,!0),n.features.push(u)}},way:function(t,e){var r=Qu({id:t.getAttribute("id"),ndrefs:[],tags:{}},Zb,t,e);e[e.length-1].ways.push(r)}}),Kb=function(t){function e(){var e=t.call(this)||this;return e.dataProjection=De("EPSG:4326"),e}return Vb(e,t),e.prototype.readFeaturesFromNode=function(t,e){var r=this.getReadOptions(t,e);if("osm"==t.localName){for(var n=Qu({nodes:{},ways:[],features:[]},qb,t,[r]),i=0;i<n.ways.length;i++){for(var o=n.ways[i],a=[],s=0,u=o.ndrefs.length;s<u;s++)O(a,n.nodes[o.ndrefs[s]]);var l;Ey(l=o.ndrefs[0]==o.ndrefs[o.ndrefs.length-1]?new sn(a,qt,[a.length]):new Yd(a,qt),!1,r);var c=new ht(l);c.setId(o.id),c.setProperties(o.tags,!0),n.features.push(c)}if(n.features)return n.features}return[]},e}(Uy),Hb=Hu(Xb,{tag:Jb});function Jb(t,e){e[e.length-1].tags[t.getAttribute("k")]=t.getAttribute("v")}var Qb=Kb;function $b(t,e,r,n,i,o){var a,s;void 0!==i?(a=i,s=void 0!==o?o:0):(a=[],s=0);for(var u=e;u<r;){var l=t[u++];a[s++]=t[u++],a[s++]=l;for(var c=2;c<n;++c)a[s++]=t[u++]}return a.length=s,a}var tw,ew=(tw=function(t,e){return(tw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}tw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function rw(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=0,s=t.length;a<s;)for(n=0;n<e;++n,++a){var u=t[a],l=u-o[n];o[n]=u,t[a]=l}return iw(t,i)}function nw(t,e,r){var n,i=r||1e5,o=new Array(e);for(n=0;n<e;++n)o[n]=0;for(var a=ow(t,i),s=0,u=a.length;s<u;)for(n=0;n<e;++n,++s)o[n]+=a[s],a[s]=o[n];return a}function iw(t,e){for(var r=e||1e5,n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*r);return function(t){for(var e=0,r=t.length;e<r;++e){var n=t[e];t[e]=n<0?~(n<<1):n<<1}return function(t){for(var e="",r=0,n=t.length;r<n;++r)e+=aw(t[r]);return e}(t)}(t)}function ow(t,e){for(var r=e||1e5,n=function(t){for(var e=function(t){for(var e=[],r=0,n=0,i=0,o=t.length;i<o;++i){var a=t.charCodeAt(i)-63;r|=(31&a)<<n,a<32?(e.push(r),r=0,n=0):n+=5}return e}(t),r=0,n=e.length;r<n;++r){var i=e[r];e[r]=1&i?~(i>>1):i>>1}return e}(t),i=0,o=n.length;i<o;++i)n[i]/=r;return n}function aw(t){for(var e,r="";t>=32;)e=63+(32|31&t),r+=String.fromCharCode(e),t>>=5;return e=t+63,r+String.fromCharCode(e)}var sw,uw=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.dataProjection=De("EPSG:4326"),r.factor_=n.factor?n.factor:1e5,r.geometryLayout_=n.geometryLayout?n.geometryLayout:qt,r}return ew(e,t),e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);return new ht(r)},e.prototype.readFeaturesFromText=function(t,e){return[this.readFeatureFromText(t,e)]},e.prototype.readGeometryFromText=function(t,e){var r=mr(this.geometryLayout_),n=nw(t,r,this.factor_);$b(n,0,n.length,r,n);var i=Rr(n,0,n.length,r);return Ey(new Yd(i,this.geometryLayout_),!1,this.adaptOptions(e))},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):(ut(!1,40),"")},e.prototype.writeFeaturesText=function(t,e){return this.writeFeatureText(t[0],e)},e.prototype.writeGeometryText=function(t,e){var r=(t=Ey(t,!0,this.adaptOptions(e))).getFlatCoordinates(),n=t.getStride();return $b(r,0,r.length,n,r),rw(r,n,this.factor_)},e}(Ov),lw=(sw=function(t,e){return(sw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}sw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),cw=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.layerName_=n.layerName,r.layers_=n.layers?n.layers:null,r.dataProjection=De(n.dataProjection?n.dataProjection:"EPSG:4326"),r}return lw(e,t),e.prototype.readFeaturesFromObject=function(t,e){if("Topology"==t.type){var r=t,n=void 0,i=null,o=null;r.transform&&(i=(n=r.transform).scale,o=n.translate);var a=r.arcs;n&&function(t,e,r){for(var n=0,i=t.length;n<i;++n)gw(t[n],e,r)}(a,i,o);var s=[],u=r.objects,l=this.layerName_,c=void 0;for(var h in u)this.layers_&&-1==this.layers_.indexOf(h)||("GeometryCollection"===u[h].type?(c=u[h],s.push.apply(s,pw(c,a,i,o,l,h,e))):(c=u[h],s.push(dw(c,a,i,o,l,h,e))));return s}return[]},e.prototype.readProjectionFromObject=function(t){return this.dataProjection},e}(Iy),hw={Point:function(t,e,r){var n=t.coordinates;return e&&r&&yw(n,e,r),new Wr(n)},LineString:function(t,e){var r=fw(t.arcs,e);return new Yd(r)},Polygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=fw(t.arcs[n],e);return new sn(r)},MultiPoint:function(t,e,r){var n=t.coordinates;if(e&&r)for(var i=0,o=n.length;i<o;++i)yw(n[i],e,r);return new Tg(n)},MultiLineString:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n)r[n]=fw(t.arcs[n],e);return new Mg(r)},MultiPolygon:function(t,e){for(var r=[],n=0,i=t.arcs.length;n<i;++n){for(var o=t.arcs[n],a=[],s=0,u=o.length;s<u;++s)a[s]=fw(o[s],e);r[n]=a}return new kg(r)}};function fw(t,e){for(var r,n,i=[],o=0,a=t.length;o<a;++o)r=t[o],o>0&&i.pop(),n=r>=0?e[r]:e[~r].slice().reverse(),i.push.apply(i,n);for(var s=0,u=i.length;s<u;++s)i[s]=i[s].slice();return i}function pw(t,e,r,n,i,o,a){for(var s=t.geometries,u=[],l=0,c=s.length;l<c;++l)u[l]=dw(s[l],e,r,n,i,o,a);return u}function dw(t,e,r,n,i,o,a){var s,u=t.type,l=hw[u];s="Point"===u||"MultiPoint"===u?l(t,r,n):l(t,e);var c=new ht;c.setGeometry(Ey(s,!1,a)),void 0!==t.id&&c.setId(t.id);var h=t.properties;return i&&(h||(h={}),h[i]=o),h&&c.setProperties(h,!0),c}function gw(t,e,r){for(var n=0,i=0,o=0,a=t.length;o<a;++o){var s=t[o];n+=s[0],i+=s[1],s[0]=n,s[1]=i,yw(s,e,r)}}function yw(t,e,r){t[0]=t[0]*e[0]+r[0],t[1]=t[1]*e[1]+r[1]}var _w,vw,mw,bw,ww,xw,Sw,Ew,Ow,Mw,Pw,Tw,Cw,Iw,Rw,Lw,Aw,kw,Fw,jw,Nw,Dw=cw,zw=function(){function t(t){this.tagName_=t}return t.prototype.getTagName=function(){return this.tagName_},t}(),Gw=(Nw=function(t,e){return(Nw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Nw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Bw=function(t){function e(e,r){var n=t.call(this,e)||this;return n.conditions=r,ut(n.conditions.length>=2,57),n}return Gw(e,t),e}(zw),Uw=(jw=function(t,e){return(jw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}jw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ww=function(t){function e(e){return t.call(this,"And",Array.prototype.slice.call(arguments))||this}return Uw(e,t),e}(Bw),Yw=(Fw=function(t,e){return(Fw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Fw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Vw=function(t){function e(e,r,n){var i=t.call(this,"BBOX")||this;if(i.geometryName=e,i.extent=r,4!==r.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");return i.srsName=n,i}return Yw(e,t),e}(zw),Xw=(kw=function(t,e){return(kw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}kw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Zw=function(t){function e(e,r,n,i){var o=t.call(this,e)||this;return o.geometryName=r||"the_geom",o.geometry=n,o.srsName=i,o}return Xw(e,t),e}(zw),qw=(Aw=function(t,e){return(Aw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Aw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Kw=function(t){function e(e,r,n){return t.call(this,"Contains",e,r,n)||this}return qw(e,t),e}(Zw),Hw=(Lw=function(t,e){return(Lw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Lw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Jw=function(t){function e(e,r){var n=t.call(this,e)||this;return n.propertyName=r,n}return Hw(e,t),e}(zw),Qw=(Rw=function(t,e){return(Rw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Rw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),$w=function(t){function e(e,r,n){var i=t.call(this,"During",e)||this;return i.begin=r,i.end=n,i}return Qw(e,t),e}(Jw),tx=(Iw=function(t,e){return(Iw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Iw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ex=function(t){function e(e,r,n,i){var o=t.call(this,e,r)||this;return o.expression=n,o.matchCase=i,o}return tx(e,t),e}(Jw),rx=(Cw=function(t,e){return(Cw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Cw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),nx=function(t){function e(e,r,n){return t.call(this,"PropertyIsEqualTo",e,r,n)||this}return rx(e,t),e}(ex),ix=(Tw=function(t,e){return(Tw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Tw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ox=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThan",e,r)||this}return ix(e,t),e}(ex),ax=(Pw=function(t,e){return(Pw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Pw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),sx=function(t){function e(e,r){return t.call(this,"PropertyIsGreaterThanOrEqualTo",e,r)||this}return ax(e,t),e}(ex),ux=(Mw=function(t,e){return(Mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Mw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),lx=function(t){function e(e,r,n){return t.call(this,"Intersects",e,r,n)||this}return ux(e,t),e}(Zw),cx=(Ow=function(t,e){return(Ow=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ow(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),hx=function(t){function e(e,r,n){var i=t.call(this,"PropertyIsBetween",e)||this;return i.lowerBoundary=r,i.upperBoundary=n,i}return cx(e,t),e}(Jw),fx=(Ew=function(t,e){return(Ew=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ew(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),px=function(t){function e(e,r,n,i,o,a){var s=t.call(this,"PropertyIsLike",e)||this;return s.pattern=r,s.wildCard=void 0!==n?n:"*",s.singleChar=void 0!==i?i:".",s.escapeChar=void 0!==o?o:"!",s.matchCase=a,s}return fx(e,t),e}(Jw),dx=(Sw=function(t,e){return(Sw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Sw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),gx=function(t){function e(e){return t.call(this,"PropertyIsNull",e)||this}return dx(e,t),e}(Jw),yx=(xw=function(t,e){return(xw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}xw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),_x=function(t){function e(e,r){return t.call(this,"PropertyIsLessThan",e,r)||this}return yx(e,t),e}(ex),vx=(ww=function(t,e){return(ww=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}ww(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),mx=function(t){function e(e,r){return t.call(this,"PropertyIsLessThanOrEqualTo",e,r)||this}return vx(e,t),e}(ex),bx=(bw=function(t,e){return(bw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}bw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),wx=function(t){function e(e){var r=t.call(this,"Not")||this;return r.condition=e,r}return bx(e,t),e}(zw),xx=(mw=function(t,e){return(mw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}mw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Sx=function(t){function e(e,r,n){return t.call(this,"PropertyIsNotEqualTo",e,r,n)||this}return xx(e,t),e}(ex),Ex=(vw=function(t,e){return(vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}vw(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Ox=function(t){function e(e){return t.call(this,"Or",Array.prototype.slice.call(arguments))||this}return Ex(e,t),e}(Bw),Mx=(_w=function(t,e){return(_w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}_w(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Px=function(t){function e(e,r,n){return t.call(this,"Within",e,r,n)||this}return Mx(e,t),e}(Zw);function Tx(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Ww,e))}function Cx(t,e,r){return new Vw(t,e,r)}var Ix,Rx=(Ix=function(t,e){return(Ix=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}Ix(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),Lx={"http://www.opengis.net/gml":{boundedBy:Yu(Zy.prototype.readGeometryElement,"bounds")}},Ax={"http://www.opengis.net/wfs":{totalInserted:Yu($y),totalUpdated:Yu($y),totalDeleted:Yu($y)}},kx={"http://www.opengis.net/wfs":{TransactionSummary:Yu((function(t,e){return Qu({},Ax,t,e)}),"transactionSummary"),InsertResults:Yu((function(t,e){return Qu([],Wx,t,e)}),"insertIds")}},Fx={"http://www.opengis.net/wfs":{PropertyName:Vu(o_)}},jx={"http://www.opengis.net/wfs":{Insert:Vu((function(t,e,r){var n=r[r.length-1],i=n.featureType,o=n.featureNS,a=n.gmlVersion,s=ju(o,i);t.appendChild(s),2===a?v_.prototype.writeFeatureElement(s,e,r):c_.prototype.writeFeatureElement(s,e,r)})),Update:Vu((function(t,e,r){var n=r[r.length-1];ut(void 0!==e.getId(),27);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=Vx(o,i),u=e.getGeometryName();t.setAttribute("typeName",s),t.setAttributeNS(Nx,"xmlns:"+o,a);var l=e.getId();if(void 0!==l){for(var c=e.getKeys(),h=[],f=0,p=c.length;f<p;f++){var d=e.get(c[f]);if(void 0!==d){var g=c[f];d&&"function"==typeof d.getSimplifiedGeometry&&(g=u),h.push({name:g,value:d})}}tl({gmlVersion:n.gmlVersion,node:t,hasZ:n.hasZ,srsName:n.srsName},jx,Zu("Property"),h,r),Yx(t,l)}})),Delete:Vu((function(t,e,r){var n=r[r.length-1];ut(void 0!==e.getId(),26);var i=n.featureType,o=n.featurePrefix,a=n.featureNS,s=Vx(o,i);t.setAttribute("typeName",s),t.setAttributeNS(Nx,"xmlns:"+o,a);var u=e.getId();void 0!==u&&Yx(t,u)})),Property:Vu((function(t,e,r){var n=ju(zx,"Name"),i=r[r.length-1].gmlVersion;if(t.appendChild(n),o_(n,e.name),void 0!==e.value&&null!==e.value){var o=ju(zx,"Value");t.appendChild(o),e.value&&"function"==typeof e.value.getSimplifiedGeometry?2===i?v_.prototype.writeGeometryElement(o,e.value,r):c_.prototype.writeGeometryElement(o,e.value,r):o_(o,e.value)}})),Native:Vu((function(t,e,r){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&o_(t,e.value)}))}},Nx="http://www.w3.org/2000/xmlns/",Dx="http://www.opengis.net/ogc",zx="http://www.opengis.net/wfs",Gx={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},Bx=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureType_=n.featureType,r.featureNS_=n.featureNS,r.gmlFormat_=n.gmlFormat?n.gmlFormat:new c_,r.schemaLocation_=n.schemaLocation?n.schemaLocation:Gx["1.1.0"],r}return Rx(e,t),e.prototype.getFeatureType=function(){return this.featureType_},e.prototype.setFeatureType=function(t){this.featureType_=t},e.prototype.readFeaturesFromNode=function(t,e){var r={node:t};p(r,{featureType:this.featureType_,featureNS:this.featureNS_}),p(r,this.getReadOptions(t,e||{}));var n=[r];this.gmlFormat_.FEATURE_COLLECTION_PARSERS[Yy].featureMember=Bu(Zy.prototype.readFeaturesInternal);var i=Qu([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,n,this.gmlFormat_);return i||(i=[]),i},e.prototype.readTransactionResponse=function(t){if(t){if("string"==typeof t){var e=zu(t);return this.readTransactionResponseFromDocument(e)}return Du(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}},e.prototype.readFeatureCollectionMetadata=function(t){if(t){if("string"==typeof t){var e=zu(t);return this.readFeatureCollectionMetadataFromDocument(e)}return Du(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}},e.prototype.readFeatureCollectionMetadataFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)},e.prototype.readFeatureCollectionMetadataFromNode=function(t){var e={},r=t_(t.getAttribute("numberOfFeatures"));return e.numberOfFeatures=r,Qu(e,Lx,t,[],this.gmlFormat_)},e.prototype.readTransactionResponseFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)},e.prototype.readTransactionResponseFromNode=function(t){return Qu({},kx,t,[])},e.prototype.writeGetFeature=function(t){var e,r=ju(zx,"GetFeature");if(r.setAttribute("service","WFS"),r.setAttribute("version","1.1.0"),t&&(t.handle&&r.setAttribute("handle",t.handle),t.outputFormat&&r.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&r.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&r.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&r.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&r.setAttribute("count",String(t.count)),void 0!==t.viewParams&&r.setAttribute("viewParams",t.viewParams),e=t.filter,t.bbox)){ut(t.geometryName,12);var n=Cx(t.geometryName,t.bbox,t.srsName);e=e?Tx(e,n):n}r.setAttributeNS(Fu,"xsi:schemaLocation",this.schemaLocation_);var i={node:r};return p(i,{srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:e,propertyNames:t.propertyNames?t.propertyNames:[]}),ut(Array.isArray(t.featureTypes),11),function(t,e,r){var n=p({},r[r.length-1]);n.node=t,tl(n,Xx,Zu("Query"),e,r)}(r,t.featureTypes,[i]),r},e.prototype.writeTransaction=function(t,e,r,n){var i,o,a=[],s=ju(zx,"Transaction"),u=n.version?n.version:"1.1.0",l="1.0.0"===u?2:3;s.setAttribute("service","WFS"),s.setAttribute("version",u),n&&(i=n.gmlOptions?n.gmlOptions:{},n.handle&&s.setAttribute("handle",n.handle));var c=Gx[u];s.setAttributeNS(Fu,"xsi:schemaLocation",c);var h=n.featurePrefix?n.featurePrefix:"feature";return t&&(o=p({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),p(o,i),tl(o,jx,Zu("Insert"),t,a)),e&&(o=p({node:s},{featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,hasZ:n.hasZ,srsName:n.srsName}),p(o,i),tl(o,jx,Zu("Update"),e,a)),r&&tl({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},jx,Zu("Delete"),r,a),n.nativeElements&&tl({node:s,featureNS:n.featureNS,featureType:n.featureType,featurePrefix:h,gmlVersion:l,srsName:n.srsName},jx,Zu("Native"),n.nativeElements,a),s},e.prototype.readProjectionFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null},e.prototype.readProjectionFromNode=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(var e=(t=t.firstElementChild.firstElementChild).firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){var r=[{}];return this.gmlFormat_.readGeometryElement(e,r),De(r.pop().srsName)}return null},e}(Uy),Ux={"http://www.opengis.net/ogc":{FeatureId:Bu((function(t,e){return t.getAttribute("fid")}))}},Wx={"http://www.opengis.net/wfs":{Feature:function(t,e){Ju(Ux,t,e)}}};function Yx(t,e,r){var n=ju(Dx,"Filter"),i=ju(Dx,"FeatureId");n.appendChild(i),i.setAttribute("fid",e),t.appendChild(n)}function Vx(t,e){var r=(t=t||"feature")+":";return 0===e.indexOf(r)?e:r+e}var Xx={"http://www.opengis.net/wfs":{Query:Vu((function(t,e,r){var n,i=r[r.length-1],o=i.featurePrefix,a=i.featureNS,s=i.propertyNames,u=i.srsName;n=o?Vx(o,e):e,t.setAttribute("typeName",n),u&&t.setAttribute("srsName",u),a&&t.setAttributeNS(Nx,"xmlns:"+o,a);var l=p({},i);l.node=t,tl(l,Fx,Zu("PropertyName"),s,r);var c=i.filter;if(c){var h=ju(Dx,"Filter");t.appendChild(h),Zx(h,c,r)}}))},"http://www.opengis.net/ogc":{During:Vu((function(t,e,r){var n=ju("http://www.opengis.net/fes","ValueReference");o_(n,e.propertyName),t.appendChild(n);var i=ju(Yy,"TimePeriod");t.appendChild(i);var o=ju(Yy,"begin");i.appendChild(o),$x(o,e.begin);var a=ju(Yy,"end");i.appendChild(a),$x(a,e.end)})),And:Vu(qx),Or:Vu(qx),Not:Vu((function(t,e,r){var n={node:t},i=e.condition;tl(n,Xx,Zu(i.getTagName()),[i],r)})),BBOX:Vu((function(t,e,r){r[r.length-1].srsName=e.srsName,Jx(t,e.geometryName),c_.prototype.writeGeometryElement(t,e.extent,r)})),Contains:Vu((function(t,e,r){r[r.length-1].srsName=e.srsName,Jx(t,e.geometryName),c_.prototype.writeGeometryElement(t,e.geometry,r)})),Intersects:Vu((function(t,e,r){r[r.length-1].srsName=e.srsName,Jx(t,e.geometryName),c_.prototype.writeGeometryElement(t,e.geometry,r)})),Within:Vu((function(t,e,r){r[r.length-1].srsName=e.srsName,Jx(t,e.geometryName),c_.prototype.writeGeometryElement(t,e.geometry,r)})),PropertyIsEqualTo:Vu(Kx),PropertyIsNotEqualTo:Vu(Kx),PropertyIsLessThan:Vu(Kx),PropertyIsLessThanOrEqualTo:Vu(Kx),PropertyIsGreaterThan:Vu(Kx),PropertyIsGreaterThanOrEqualTo:Vu(Kx),PropertyIsNull:Vu((function(t,e,r){Jx(t,e.propertyName)})),PropertyIsBetween:Vu((function(t,e,r){Jx(t,e.propertyName);var n=ju(Dx,"LowerBoundary");t.appendChild(n),Qx(n,""+e.lowerBoundary);var i=ju(Dx,"UpperBoundary");t.appendChild(i),Qx(i,""+e.upperBoundary)})),PropertyIsLike:Vu((function(t,e,r){t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Jx(t,e.propertyName),Qx(t,""+e.pattern)}))}};function Zx(t,e,r){tl({node:t},Xx,Zu(e.getTagName()),[e],r)}function qx(t,e,r){for(var n={node:t},i=e.conditions,o=0,a=i.length;o<a;++o){var s=i[o];tl(n,Xx,Zu(s.getTagName()),[s],r)}}function Kx(t,e,r){void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Jx(t,e.propertyName),Qx(t,""+e.expression)}function Hx(t,e,r){var n=ju(Dx,t);o_(n,r),e.appendChild(n)}function Jx(t,e){Hx("PropertyName",t,e)}function Qx(t,e){Hx("Literal",t,e)}function $x(t,e){var r=ju(Yy,"TimeInstant");t.appendChild(r);var n=ju(Yy,"timePosition");r.appendChild(n),o_(n,e)}var tS,eS=Bx,rS=(tS=function(t,e){return(tS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}tS(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),nS={POINT:Wr,LINESTRING:Yd,POLYGON:sn,MULTIPOINT:Tg,MULTILINESTRING:Mg,MULTIPOLYGON:kg},iS={};for(var oS in Qt)iS[oS]=Qt[oS].toUpperCase();var aS=function(){function t(t){this.wkt=t,this.index_=-1}return t.prototype.isAlpha_=function(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"},t.prototype.isNumeric_=function(t,e){return t>="0"&&t<="9"||"."==t&&!(void 0!==e&&e)},t.prototype.isWhiteSpace_=function(t){return" "==t||"\t"==t||"\r"==t||"\n"==t},t.prototype.nextChar_=function(){return this.wkt.charAt(++this.index_)},t.prototype.nextToken=function(){var t,e=this.nextChar_(),r=this.index_,n=e;if("("==e)t=2;else if(","==e)t=5;else if(")"==e)t=3;else if(this.isNumeric_(e)||"-"==e)t=4,n=this.readNumber_();else if(this.isAlpha_(e))t=1,n=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(""!==e)throw new Error("Unexpected character: "+e);t=6}return{position:r,value:n,type:t}},t.prototype.readNumber_=function(){var t,e=this.index_,r=!1,n=!1;do{"."==t?r=!0:"e"!=t&&"E"!=t||(n=!0),t=this.nextChar_()}while(this.isNumeric_(t,r)||!n&&("e"==t||"E"==t)||n&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))},t.prototype.readText_=function(){var t,e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()},t}(),sS=function(){function t(t){this.lexer_=t,this.token_,this.layout_=qt}return t.prototype.consume_=function(){this.token_=this.lexer_.nextToken()},t.prototype.isTokenType=function(t){return this.token_.type==t},t.prototype.match=function(t){var e=this.isTokenType(t);return e&&this.consume_(),e},t.prototype.parse=function(){return this.consume_(),this.parseGeometry_()},t.prototype.parseGeometryLayout_=function(){var t=qt,e=this.token_;if(this.isTokenType(1)){var r=e.value;"Z"===r?t=Kt:"M"===r?t=Ht:"ZM"===r&&(t=Jt),t!==qt&&this.consume_()}return t},t.prototype.parseGeometryCollectionText_=function(){if(this.match(2)){var t=[];do{t.push(this.parseGeometry_())}while(this.match(5));if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePointText_=function(){if(this.match(2)){var t=this.parsePoint_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return null;throw new Error(this.formatErrorMessage_())},t.prototype.parseLineStringText_=function(){if(this.match(2)){var t=this.parsePointList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePolygonText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPointText_=function(){var t;if(this.match(2)){if(t=2==this.token_.type?this.parsePointTextList_():this.parsePointList_(),this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiLineStringText_=function(){if(this.match(2)){var t=this.parseLineStringTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parseMultiPolygonText_=function(){if(this.match(2)){var t=this.parsePolygonTextList_();if(this.match(3))return t}else if(this.isEmptyGeometry_())return[];throw new Error(this.formatErrorMessage_())},t.prototype.parsePoint_=function(){for(var t=[],e=this.layout_.length,r=0;r<e;++r){var n=this.token_;if(!this.match(4))break;t.push(n.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())},t.prototype.parsePointList_=function(){for(var t=[this.parsePoint_()];this.match(5);)t.push(this.parsePoint_());return t},t.prototype.parsePointTextList_=function(){for(var t=[this.parsePointText_()];this.match(5);)t.push(this.parsePointText_());return t},t.prototype.parseLineStringTextList_=function(){for(var t=[this.parseLineStringText_()];this.match(5);)t.push(this.parseLineStringText_());return t},t.prototype.parsePolygonTextList_=function(){for(var t=[this.parsePolygonText_()];this.match(5);)t.push(this.parsePolygonText_());return t},t.prototype.isEmptyGeometry_=function(){var t=this.isTokenType(1)&&"EMPTY"==this.token_.value;return t&&this.consume_(),t},t.prototype.formatErrorMessage_=function(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"},t.prototype.parseGeometry_=function(){var t=this.token_;if(this.match(1)){var e=t.value;if(this.layout_=this.parseGeometryLayout_(),"GEOMETRYCOLLECTION"==e){var r=this.parseGeometryCollectionText_();return new xy(r)}var n=nS[e];if(!n)throw new Error("Invalid geometry type: "+e);var i=void 0;switch(e){case"POINT":i=this.parsePointText_();break;case"LINESTRING":i=this.parseLineStringText_();break;case"POLYGON":i=this.parsePolygonText_();break;case"MULTIPOINT":i=this.parseMultiPointText_();break;case"MULTILINESTRING":i=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":i=this.parseMultiPolygonText_();break;default:throw new Error("Invalid geometry type: "+e)}return i||(i=n===nS.POINT?[NaN,NaN]:[]),new n(i,this.layout_)}throw new Error(this.formatErrorMessage_())},t}(),uS=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.splitCollection_=void 0!==n.splitCollection&&n.splitCollection,r}return rS(e,t),e.prototype.parse_=function(t){var e=new aS(t);return new sS(e).parse()},e.prototype.readFeatureFromText=function(t,e){var r=this.readGeometryFromText(t,e);if(r){var n=new ht;return n.setGeometry(r),n}return null},e.prototype.readFeaturesFromText=function(t,e){for(var r,n=this.readGeometryFromText(t,e),i=[],o=0,a=(r=this.splitCollection_&&n.getType()==Qt.GEOMETRY_COLLECTION?n.getGeometriesArray():[n]).length;o<a;++o){var s=new ht;s.setGeometry(r[o]),i.push(s)}return i},e.prototype.readGeometryFromText=function(t,e){var r=this.parse_(t);return r?Ey(r,!1,e):null},e.prototype.writeFeatureText=function(t,e){var r=t.getGeometry();return r?this.writeGeometryText(r,e):""},e.prototype.writeFeaturesText=function(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);for(var r=[],n=0,i=t.length;n<i;++n)r.push(t[n].getGeometry());var o=new xy(r);return this.writeGeometryText(o,e)},e.prototype.writeGeometryText=function(t,e){return pS(Ey(t,!0,e))},e}(Ov);function lS(t){var e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function cS(t){for(var e=t.getCoordinates(),r=[],n=0,i=e.length;n<i;++n)r.push(e[n].join(" "));return r.join(",")}function hS(t){for(var e=[],r=t.getLinearRings(),n=0,i=r.length;n<i;++n)e.push("("+cS(r[n])+")");return e.join(",")}var fS={Point:lS,LineString:cS,Polygon:hS,MultiPoint:function(t){for(var e=[],r=t.getPoints(),n=0,i=r.length;n<i;++n)e.push("("+lS(r[n])+")");return e.join(",")},MultiLineString:function(t){for(var e=[],r=t.getLineStrings(),n=0,i=r.length;n<i;++n)e.push("("+cS(r[n])+")");return e.join(",")},MultiPolygon:function(t){for(var e=[],r=t.getPolygons(),n=0,i=r.length;n<i;++n)e.push("("+hS(r[n])+")");return e.join(",")},GeometryCollection:function(t){for(var e=[],r=t.getGeometries(),n=0,i=r.length;n<i;++n)e.push(pS(r[n]));return e.join(",")}};function pS(t){var e=t.getType(),r=(0,fS[e])(t);if(e=e.toUpperCase(),"function"==typeof t.getFlatCoordinates){var n=function(t){var e=t.getLayout(),r="";return e!==Kt&&e!==Jt||(r+="Z"),e!==Ht&&e!==Jt||(r+="M"),r}(t);n.length>0&&(e+=" "+n)}return 0===r.length?e+" EMPTY":e+"("+r+")"}var dS=uS;function gS(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}var yS,_S=function(){function t(){}return t.prototype.read=function(t){if(t){if("string"==typeof t){var e=zu(t);return this.readFromDocument(e)}return Du(t)?this.readFromDocument(t):this.readFromNode(t)}return null},t.prototype.readFromDocument=function(t){},t.prototype.readFromNode=function(t){},t}(),vS=(yS=function(t,e){return(yS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}yS(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),mS=[null,"http://www.opengis.net/wms"],bS=Hu(mS,{Service:Yu((function(t,e){return Qu({},SS,t,e)})),Capability:Yu((function(t,e){return Qu({},wS,t,e)}))}),wS=Hu(mS,{Request:Yu((function(t,e){return Qu({},RS,t,e)})),Exception:Yu((function(t,e){return Qu([],PS,t,e)})),Layer:Yu((function(t,e){return Qu({},TS,t,e)}))}),xS=function(t){function e(){var e=t.call(this)||this;return e.version=void 0,e}return vS(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return this.version=t.getAttribute("version").trim(),Qu({version:this.version},bS,t,[])||null},e}(_S),SS=Hu(mS,{Name:Yu(e_),Title:Yu(e_),Abstract:Yu(e_),KeywordList:Yu(BS),OnlineResource:Yu(gS),ContactInformation:Yu((function(t,e){return Qu({},ES,t,e)})),Fees:Yu(e_),AccessConstraints:Yu(e_),LayerLimit:Yu($y),MaxWidth:Yu($y),MaxHeight:Yu($y)}),ES=Hu(mS,{ContactPersonPrimary:Yu((function(t,e){return Qu({},OS,t,e)})),ContactPosition:Yu(e_),ContactAddress:Yu((function(t,e){return Qu({},MS,t,e)})),ContactVoiceTelephone:Yu(e_),ContactFacsimileTelephone:Yu(e_),ContactElectronicMailAddress:Yu(e_)}),OS=Hu(mS,{ContactPerson:Yu(e_),ContactOrganization:Yu(e_)}),MS=Hu(mS,{AddressType:Yu(e_),Address:Yu(e_),City:Yu(e_),StateOrProvince:Yu(e_),PostCode:Yu(e_),Country:Yu(e_)}),PS=Hu(mS,{Format:Bu(e_)}),TS=Hu(mS,{Name:Yu(e_),Title:Yu(e_),Abstract:Yu(e_),KeywordList:Yu(BS),CRS:Wu(e_),EX_GeographicBoundingBox:Yu((function(t,e){var r=Qu({},IS,t,e);if(r){var n=r.westBoundLongitude,i=r.southBoundLatitude,o=r.eastBoundLongitude,a=r.northBoundLatitude;if(void 0!==n&&void 0!==i&&void 0!==o&&void 0!==a)return[n,i,o,a]}})),BoundingBox:Wu((function(t,e){var r=[Qy(t.getAttribute("minx")),Qy(t.getAttribute("miny")),Qy(t.getAttribute("maxx")),Qy(t.getAttribute("maxy"))],n=[Qy(t.getAttribute("resx")),Qy(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:r,res:n}})),Dimension:Wu((function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Ky(t.getAttribute("multipleValues")),nearestValue:Ky(t.getAttribute("nearestValue")),current:Ky(t.getAttribute("current")),values:e_(t)}})),Attribution:Yu((function(t,e){return Qu({},CS,t,e)})),AuthorityURL:Wu((function(t,e){var r=DS(t,e);if(r)return r.name=t.getAttribute("name"),r})),Identifier:Wu(e_),MetadataURL:Wu((function(t,e){var r=DS(t,e);if(r)return r.type=t.getAttribute("type"),r})),DataURL:Wu(DS),FeatureListURL:Wu(DS),Style:Wu((function(t,e){return Qu({},FS,t,e)})),MinScaleDenominator:Yu(Jy),MaxScaleDenominator:Yu(Jy),Layer:Wu((function(t,e){var r=e[e.length-1],n=Qu({},TS,t,e);if(n){var i=Ky(t.getAttribute("queryable"));void 0===i&&(i=r.queryable),n.queryable=void 0!==i&&i;var o=t_(t.getAttribute("cascaded"));void 0===o&&(o=r.cascaded),n.cascaded=o;var a=Ky(t.getAttribute("opaque"));void 0===a&&(a=r.opaque),n.opaque=void 0!==a&&a;var s=Ky(t.getAttribute("noSubsets"));void 0===s&&(s=r.noSubsets),n.noSubsets=void 0!==s&&s;var u=Qy(t.getAttribute("fixedWidth"));u||(u=r.fixedWidth),n.fixedWidth=u;var l=Qy(t.getAttribute("fixedHeight"));return l||(l=r.fixedHeight),n.fixedHeight=l,["Style","CRS","AuthorityURL"].forEach((function(t){if(t in r){var e=n[t]||[];n[t]=e.concat(r[t])}})),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach((function(t){if(!(t in n)){var e=r[t];n[t]=e}})),n}}))}),CS=Hu(mS,{Title:Yu(e_),OnlineResource:Yu(gS),LogoURL:Yu(GS)}),IS=Hu(mS,{westBoundLongitude:Yu(Jy),eastBoundLongitude:Yu(Jy),southBoundLatitude:Yu(Jy),northBoundLatitude:Yu(Jy)}),RS=Hu(mS,{GetCapabilities:Yu(zS),GetMap:Yu(zS),GetFeatureInfo:Yu(zS)}),LS=Hu(mS,{Format:Wu(e_),DCPType:Wu((function(t,e){return Qu({},AS,t,e)}))}),AS=Hu(mS,{HTTP:Yu((function(t,e){return Qu({},kS,t,e)}))}),kS=Hu(mS,{Get:Yu(DS),Post:Yu(DS)}),FS=Hu(mS,{Name:Yu(e_),Title:Yu(e_),Abstract:Yu(e_),LegendURL:Wu(GS),StyleSheetURL:Yu(DS),StyleURL:Yu(DS)}),jS=Hu(mS,{Format:Yu(e_),OnlineResource:Yu(gS)}),NS=Hu(mS,{Keyword:Bu(e_)});function DS(t,e){return Qu({},jS,t,e)}function zS(t,e){return Qu({},LS,t,e)}function GS(t,e){var r=DS(t,e);if(r){var n=[t_(t.getAttribute("width")),t_(t.getAttribute("height"))];return r.size=n,r}}function BS(t,e){return Qu([],NS,t,e)}var US,WS,YS,VS=xS,XS=(WS=function(t,e){return(WS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}WS(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ZS=function(t){function e(e){var r=t.call(this)||this,n=e||{};return r.featureNS_="http://mapserver.gis.umn.edu/mapserver",r.gmlFormat_=new v_,r.layers_=n.layers?n.layers:null,r}return XS(e,t),e.prototype.getLayers=function(){return this.layers_},e.prototype.setLayers=function(t){this.layers_=t},e.prototype.readFeatures_=function(t,e){t.setAttribute("namespaceURI",this.featureNS_);var r=t.localName,n=[];if(0===t.childNodes.length)return n;if("msGMLOutput"==r)for(var i=0,o=t.childNodes.length;i<o;i++){var a=t.childNodes[i];if(a.nodeType===Node.ELEMENT_NODE){var s=a,u=e[0],l=s.localName.replace("_layer","");if(!this.layers_||x(this.layers_,l)){var c=l+"_feature";u.featureType=c,u.featureNS=this.featureNS_;var h={};h[c]=Bu(this.gmlFormat_.readFeatureElement,this.gmlFormat_);var f=Hu([u.featureNS,null],h);s.setAttribute("namespaceURI",this.featureNS_);var p=Qu([],f,s,e,this.gmlFormat_);p&&O(n,p)}}}if("FeatureCollection"==r){var d=Qu([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);d&&(n=d)}return n},e.prototype.readFeaturesFromNode=function(t,e){var r={};return e&&p(r,this.getReadOptions(t,e)),this.readFeatures_(t,[r])},e}(Uy),qS=(US=function(t,e){return(US=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}US(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),KS=[null,"http://www.opengis.net/ows/1.1"],HS=Hu(KS,{ServiceIdentification:Yu((function(t,e){return Qu({},lE,t,e)})),ServiceProvider:Yu((function(t,e){return Qu({},cE,t,e)})),OperationsMetadata:Yu((function(t,e){return Qu({},oE,t,e)}))}),JS=function(t){function e(){return t.call(this)||this}return qS(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){return Qu({},HS,t,[])||null},e}(_S),QS=Hu(KS,{DeliveryPoint:Yu(e_),City:Yu(e_),AdministrativeArea:Yu(e_),PostalCode:Yu(e_),Country:Yu(e_),ElectronicMailAddress:Yu(e_)}),$S=Hu(KS,{Value:Wu((function(t,e){return e_(t)}))}),tE=Hu(KS,{AllowedValues:Yu((function(t,e){return Qu({},$S,t,e)}))}),eE=Hu(KS,{Phone:Yu((function(t,e){return Qu({},aE,t,e)})),Address:Yu((function(t,e){return Qu({},QS,t,e)}))}),rE=Hu(KS,{HTTP:Yu((function(t,e){return Qu({},nE,t,e)}))}),nE=Hu(KS,{Get:Wu((function(t,e){var r=gS(t);if(r)return Qu({href:r},sE,t,e)})),Post:void 0}),iE=Hu(KS,{DCP:Yu((function(t,e){return Qu({},rE,t,e)}))}),oE=Hu(KS,{Operation:function(t,e){var r=t.getAttribute("name"),n=Qu({},iE,t,e);n&&(e[e.length-1][r]=n)}}),aE=Hu(KS,{Voice:Yu(e_),Facsimile:Yu(e_)}),sE=Hu(KS,{Constraint:Wu((function(t,e){var r=t.getAttribute("name");if(r)return Qu({name:r},tE,t,e)}))}),uE=Hu(KS,{IndividualName:Yu(e_),PositionName:Yu(e_),ContactInfo:Yu((function(t,e){return Qu({},eE,t,e)}))}),lE=Hu(KS,{Abstract:Yu(e_),AccessConstraints:Yu(e_),Fees:Yu(e_),Title:Yu(e_),ServiceTypeVersion:Yu(e_),ServiceType:Yu(e_)}),cE=Hu(KS,{ProviderName:Yu(e_),ProviderSite:Yu(gS),ServiceContact:Yu((function(t,e){return Qu({},uE,t,e)}))}),hE=JS,fE=(YS=function(t,e){return(YS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}YS(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),pE=[null,"http://www.opengis.net/wmts/1.0"],dE=[null,"http://www.opengis.net/ows/1.1"],gE=Hu(pE,{Contents:Yu((function(t,e){return Qu({},_E,t,e)}))}),yE=function(t){function e(){var e=t.call(this)||this;return e.owsParser_=new hE,e}return fE(e,t),e.prototype.readFromDocument=function(t){for(var e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null},e.prototype.readFromNode=function(t){var e=t.getAttribute("version");e&&(e=e.trim());var r=this.owsParser_.readFromNode(t);return r?(r.version=e,(r=Qu(r,gE,t,[]))||null):null},e}(_S),_E=Hu(pE,{Layer:Wu((function(t,e){return Qu({},vE,t,e)})),TileMatrixSet:Wu((function(t,e){return Qu({},OE,t,e)}))}),vE=Hu(pE,{Style:Wu((function(t,e){var r=Qu({},mE,t,e);if(r){var n="true"===t.getAttribute("isDefault");return r.isDefault=n,r}})),Format:Wu(e_),TileMatrixSetLink:Wu((function(t,e){return Qu({},bE,t,e)})),Dimension:Wu((function(t,e){return Qu({},SE,t,e)})),ResourceURL:Wu((function(t,e){var r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};return r&&(o.format=r),n&&(o.template=n),i&&(o.resourceType=i),o}))},Hu(dE,{Title:Yu(e_),Abstract:Yu(e_),WGS84BoundingBox:Yu((function(t,e){var r=Qu([],EE,t,e);if(2==r.length)return pt(r)})),Identifier:Yu(e_)})),mE=Hu(pE,{LegendURL:Wu((function(t,e){var r={};return r.format=t.getAttribute("format"),r.href=gS(t),r}))},Hu(dE,{Title:Yu(e_),Identifier:Yu(e_)})),bE=Hu(pE,{TileMatrixSet:Yu(e_),TileMatrixSetLimits:Yu((function(t,e){return Qu([],wE,t,e)}))}),wE=Hu(pE,{TileMatrixLimits:Bu((function(t,e){return Qu({},xE,t,e)}))}),xE=Hu(pE,{TileMatrix:Yu(e_),MinTileRow:Yu($y),MaxTileRow:Yu($y),MinTileCol:Yu($y),MaxTileCol:Yu($y)}),SE=Hu(pE,{Default:Yu(e_),Value:Wu(e_)},Hu(dE,{Identifier:Yu(e_)})),EE=Hu(dE,{LowerCorner:Bu(PE),UpperCorner:Bu(PE)}),OE=Hu(pE,{WellKnownScaleSet:Yu(e_),TileMatrix:Wu((function(t,e){return Qu({},ME,t,e)}))},Hu(dE,{SupportedCRS:Yu(e_),Identifier:Yu(e_)})),ME=Hu(pE,{TopLeftCorner:Yu(PE),ScaleDenominator:Yu(Jy),TileWidth:Yu($y),TileHeight:Yu($y),MatrixWidth:Yu($y),MatrixHeight:Yu($y)},Hu(dE,{Identifier:Yu(e_)}));function PE(t,e){var r=e_(t).split(/\s+/);if(r&&2==r.length){var n=+r[0],i=+r[1];if(!isNaN(n)&&!isNaN(i))return[n,i]}}var TE,CE=yE,IE=(TE=function(t,e){return(TE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}TE(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),RE=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"];function LE(){var t=document.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function AE(){return!!(document.webkitIsFullScreen||document.msFullscreenElement||document.fullscreenElement)}function kE(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}var FE,jE=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).cssClassName_=void 0!==n.className?n.className:"ol-full-screen";var i=void 0!==n.label?n.label:"⤢";r.labelNode_="string"==typeof i?document.createTextNode(i):i;var o=void 0!==n.labelActive?n.labelActive:"×";r.labelActiveNode_="string"==typeof o?document.createTextNode(o):o,r.button_=document.createElement("button");var a=n.tipLabel?n.tipLabel:"Toggle full-screen";r.setClassName_(r.button_,AE()),r.button_.setAttribute("type","button"),r.button_.title=a,r.button_.appendChild(r.labelNode_),r.button_.addEventListener(U,r.handleClick_.bind(r),!1);var s=r.cssClassName_+" ol-unselectable ol-control "+(LE()?"":"ol-unsupported"),u=r.element;return u.className=s,u.appendChild(r.button_),r.keys_=void 0!==n.keys&&n.keys,r.source_=n.source,r}return IE(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleFullScreen_()},e.prototype.handleFullScreen_=function(){if(LE()){var t=this.getMap();if(t)if(AE())document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitExitFullscreen&&document.webkitExitFullscreen();else{var e;e=this.source_?"string"==typeof this.source_?document.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():kE(t)}(e):kE(e)}}},e.prototype.handleFullScreenChange_=function(){var t=this.getMap();AE()?(this.setClassName_(this.button_,!0),Yi(this.labelActiveNode_,this.labelNode_),this.dispatchEvent("enterfullscreen")):(this.setClassName_(this.button_,!1),Yi(this.labelNode_,this.labelActiveNode_),this.dispatchEvent("leavefullscreen")),t&&t.updateSize()},e.prototype.setClassName_=function(t,e){var r=this.cssClassName_+"-true",n=this.cssClassName_+"-false",i=e?r:n;t.classList.remove(r),t.classList.remove(n),t.classList.add(i)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e)for(var r=0,n=RE.length;r<n;++r)this.listenerKeys.push(_(document,RE[r],this.handleFullScreenChange_,this))},e}(xo),NE=(FE=function(t,e){return(FE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}FE(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function DE(t){var e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}var zE,GE=function(t){function e(e){var r=this,n=e||{},i=document.createElement("div");return i.className=void 0!==n.className?n.className:"ol-mouse-position",(r=t.call(this,{element:i,render:n.render||DE,target:n.target})||this).addEventListener(rt("projection"),r.handleProjectionChanged_),n.coordinateFormat&&r.setCoordinateFormat(n.coordinateFormat),n.projection&&r.setProjection(n.projection),r.undefinedHTML_=void 0!==n.undefinedHTML?n.undefinedHTML:"&#160;",r.renderOnMouseOut_=!!r.undefinedHTML_,r.renderedHTML_=i.innerHTML,r.mapProjection_=null,r.transform_=null,r}return NE(e,t),e.prototype.handleProjectionChanged_=function(){this.transform_=null},e.prototype.getCoordinateFormat=function(){return this.get("coordinateFormat")},e.prototype.getProjection=function(){return this.get("projection")},e.prototype.handleMouseMove=function(t){var e=this.getMap();this.updateHTML_(e.getEventPixel(t))},e.prototype.handleMouseOut=function(t){this.updateHTML_(null)},e.prototype.setMap=function(e){if(t.prototype.setMap.call(this,e),e){var r=e.getViewport();this.listenerKeys.push(_(r,Xn,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(_(r,"pointerout",this.handleMouseOut,this))}},e.prototype.setCoordinateFormat=function(t){this.set("coordinateFormat",t)},e.prototype.setProjection=function(t){this.set("projection",De(t))},e.prototype.updateHTML_=function(t){var e=this.undefinedHTML_;if(t&&this.mapProjection_){if(!this.transform_){var r=this.getProjection();this.transform_=r?Ve(this.mapProjection_,r):je}var n=this.getMap().getCoordinateFromPixelInternal(t);if(n){var i=$e();i&&(this.transform_=Ve(this.mapProjection_,i)),this.transform_(n,n);var o=this.getCoordinateFormat();e=o?o(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)},e}(xo),BE=(zE=function(t,e){return(zE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}zE(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),UE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return BE(e,t),e.prototype.createRenderer=function(){return new $s(this)},e}(bo);function WE(t){this.validateExtent_(),this.updateBox_()}var YE,VE=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||WE,target:n.target})||this).boundHandleRotationChanged_=r.handleRotationChanged_.bind(r),r.collapsed_=void 0===n.collapsed||n.collapsed,r.collapsible_=void 0===n.collapsible||n.collapsible,r.collapsible_||(r.collapsed_=!1),r.rotateWithView_=void 0!==n.rotateWithView&&n.rotateWithView,r.viewExtent_=void 0;var i=void 0!==n.className?n.className:"ol-overviewmap",o=void 0!==n.tipLabel?n.tipLabel:"Overview map",a=void 0!==n.collapseLabel?n.collapseLabel:"«";"string"==typeof a?(r.collapseLabel_=document.createElement("span"),r.collapseLabel_.textContent=a):r.collapseLabel_=a;var s=void 0!==n.label?n.label:"»";"string"==typeof s?(r.label_=document.createElement("span"),r.label_.textContent=s):r.label_=s;var u=r.collapsible_&&!r.collapsed_?r.collapseLabel_:r.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=o,l.appendChild(u),l.addEventListener(U,r.handleClick_.bind(r),!1),r.ovmapDiv_=document.createElement("div"),r.ovmapDiv_.className="ol-overviewmap-map",r.view_=n.view,r.ovmap_=new UE({view:n.view});var c=r.ovmap_;n.layers&&n.layers.forEach((function(t){c.addLayer(t)}));var h=document.createElement("div");h.className="ol-overviewmap-box",h.style.boxSizing="border-box",r.boxOverlay_=new hu({position:[0,0],positioning:iu,element:h}),r.ovmap_.addOverlay(r.boxOverlay_);var f=i+" ol-unselectable ol-control"+(r.collapsed_&&r.collapsible_?" ol-collapsed":"")+(r.collapsible_?"":" ol-uncollapsible"),p=r.element;p.className=f,p.appendChild(r.ovmapDiv_),p.appendChild(l);var d=r,g=r.boxOverlay_,y=r.boxOverlay_.getElement(),_=function(t){var e,r={clientX:(e=t).clientX,clientY:e.clientY},n=c.getEventCoordinateInternal(r);g.setPosition(n)},v=function t(e){var r=c.getEventCoordinateInternal(e);d.getMap().getView().setCenterInternal(r),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",t)};return y.addEventListener("mousedown",(function(){window.addEventListener("mousemove",_),window.addEventListener("mouseup",v)})),r}return BE(e,t),e.prototype.setMap=function(e){var r=this.getMap();if(e!==r){if(r){var n=r.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(_(e,f,this.handleMapPropertyChange_,this));var i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===ei){var e=t.oldValue;e&&this.unbindView_(e);var r=this.getMap().getView();this.bindView_(r)}},e.prototype.bindView_=function(t){if(!this.view_){var e=new Gi({projection:t.getProjection()});this.ovmap_.setView(e)}t.addEventListener(rt(_i),this.boundHandleRotationChanged_),this.handleRotationChanged_()},e.prototype.unbindView_=function(t){t.removeEventListener(rt(_i),this.boundHandleRotationChanged_)},e.prototype.handleRotationChanged_=function(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView().calculateExtentInternal(r);if(!this.viewExtent_||!Mt(n,this.viewExtent_)){this.viewExtent_=n;var i=e.getSize(),o=e.getView().calculateExtentInternal(i),a=e.getPixelFromCoordinateInternal(Gt(n)),s=e.getPixelFromCoordinateInternal(kt(n)),u=Math.abs(a[0]-s[0]),l=Math.abs(a[1]-s[1]),c=i[0],h=i[1];u<.1*c||l<.1*h||u>.75*c||l>.75*h?this.resetExtent_():vt(o,n)||this.recenter_()}}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getSize(),n=t.getView().calculateExtentInternal(r),i=e.getView(),o=Math.log(7.5)/Math.LN2;Vt(n,1/(.1*Math.pow(2,o/2))),i.fitInternal(ln(n))},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,r=t.getView();e.getView().setCenterInternal(r.getCenterInternal())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var r=t.getSize(),n=t.getView(),i=e.getView(),o=this.rotateWithView_?0:-n.getRotation(),a=this.boxOverlay_,s=this.boxOverlay_.getElement(),u=n.getCenterInternal(),l=n.getResolution(),c=i.getResolution(),h=r[0]*l/c,f=r[1]*l/c;if(a.setPosition(u),s){s.style.width=h+"px",s.style.height=f+"px";var p="rotate("+o+"rad)";s.style.transform=p}}},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle("ol-collapsed"),this.collapsed_?Yi(this.collapseLabel_,this.label_):Yi(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),v(t,Jn,(function(t){this.updateBox_()}),this)}},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getRotateWithView=function(){return this.rotateWithView_},e.prototype.setRotateWithView=function(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(xo),XE=(YE=function(t,e){return(YE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}YE(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),ZE="degrees",qE=[1,2,5];function KE(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}var HE,JE=function(t){function e(e){var r=this,n=e||{},i=void 0!==n.className?n.className:n.bar?"ol-scale-bar":"ol-scale-line";return(r=t.call(this,{element:document.createElement("div"),render:n.render||KE,target:n.target})||this).innerElement_=document.createElement("div"),r.innerElement_.className=i+"-inner",r.element.className=i+" ol-unselectable",r.element.appendChild(r.innerElement_),r.viewState_=null,r.minWidth_=void 0!==n.minWidth?n.minWidth:64,r.renderedVisible_=!1,r.renderedWidth_=void 0,r.renderedHTML_="",r.addEventListener(rt("units"),r.handleUnitsChanged_),r.setUnits(n.units||"metric"),r.scaleBar_=n.bar||!1,r.scaleBarSteps_=n.steps||4,r.scaleBarText_=n.text||!1,r}return XE(e,t),e.prototype.getUnits=function(){return this.get("units")},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set("units",t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,r=t.projection,n=this.getUnits(),i=n==ZE?ve.DEGREES:ve.METERS,o=ze(r,t.resolution,e,i),a=this.minWidth_*o,s="";if(n==ZE){var u=ge[ve.DEGREES];(a*=u)<u/60?(s="″",o*=3600):a<u?(s="′",o*=60):s="°"}else"imperial"==n?a<.9144?(s="in",o/=.0254):a<1609.344?(s="ft",o/=.3048):(s="mi",o/=1609.344):"nautical"==n?(o/=1852,s="nm"):"metric"==n?a<.001?(s="μm",o*=1e6):a<1?(s="mm",o*=1e3):a<1e3?s="m":(s="km",o/=1e3):"us"==n?a<.9144?(s="in",o*=39.37):a<1609.344?(s="ft",o/=.30480061):(s="mi",o/=1609.3472):ut(!1,33);for(var l,c,h,f,p=3*Math.floor(Math.log(this.minWidth_*o)/Math.log(10));;){h=Math.floor(p/3);var d=Math.pow(10,h);if(l=qE[(p%3+3)%3]*d,c=Math.round(l/o),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=this.minWidth_)break;++p}f=this.scaleBar_?this.createScaleBar(c,l,s):l.toFixed(h<0?-h:0)+" "+s,this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e.prototype.createScaleBar=function(t,e,r){for(var n="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),i=[],o=t/this.scaleBarSteps_,a="#ffffff",s=0;s<this.scaleBarSteps_;s++)0===s&&i.push(this.createMarker("absolute",s)),i.push('<div><div class="ol-scale-singlebar" style="width: '+o+"px;background-color: "+a+';"></div>'+this.createMarker("relative",s)+(s%2==0||2===this.scaleBarSteps_?this.createStepText(s,t,!1,e,r):"")+"</div>"),s===this.scaleBarSteps_-1&&i.push(this.createStepText(s+1,t,!0,e,r)),a="#ffffff"===a?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+t+'px;">'+n+"</div>":"")+i.join("")+"</div>"},e.prototype.createMarker=function(t,e){return'<div class="ol-scale-step-marker" style="position: '+t+";top: "+("absolute"===t?3:-10)+'px;"></div>'},e.prototype.createStepText=function(t,e,r,n,i){var o=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+i);return'<div class="ol-scale-step-text" style="margin-left: '+(0===t?-3:e/this.scaleBarSteps_*-1)+"px;text-align: "+(0===t?"left":"center")+"; min-width: "+(0===t?0:e/this.scaleBarSteps_*2)+"px;left: "+(r?e+"px":"unset")+';">'+o+"</div>"},e.prototype.getScaleForResolution=function(){var t=this.getMap().getView().getResolution(),e=this.viewState_.projection.getMetersPerUnit();return parseFloat(t.toString())*e*39.37*(25.4/.28)},e}(xo),QE=(HE=function(t,e){return(HE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}HE(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});function $E(t){if(t.frameState){this.sliderInitialized_||this.initSlider_();var e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var tO,eO=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),render:n.render||$E})||this).dragListenerKeys_=[],r.currentResolution_=void 0,r.direction_=0,r.dragging_,r.heightLimit_=0,r.widthLimit_=0,r.startX_,r.startY_,r.thumbSize_=null,r.sliderInitialized_=!1,r.duration_=void 0!==n.duration?n.duration:200;var i=void 0!==n.className?n.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=i+"-thumb ol-unselectable";var a=r.element;return a.className=i+" ol-unselectable ol-control",a.appendChild(o),a.addEventListener(Zn,r.handleDraggerStart_.bind(r),!1),a.addEventListener(Xn,r.handleDraggerDrag_.bind(r),!1),a.addEventListener(qn,r.handleDraggerEnd_.bind(r),!1),a.addEventListener(U,r.handleContainerClick_.bind(r),!1),o.addEventListener(U,L,!1),r}return QE(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),e&&e.render()},e.prototype.initSlider_=function(){var t=this.element,e=t.offsetWidth,r=t.offsetHeight,n=t.firstElementChild,i=getComputedStyle(n),o=n.offsetWidth+parseFloat(i.marginRight)+parseFloat(i.marginLeft),a=n.offsetHeight+parseFloat(i.marginTop)+parseFloat(i.marginBottom);this.thumbSize_=[o,a],e>r?(this.direction_=1,this.widthLimit_=e-o):(this.direction_=0,this.heightLimit_=r-a),this.sliderInitialized_=!0},e.prototype.handleContainerClick_=function(t){var e=this.getMap().getView(),r=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(r),i=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:i,duration:this.duration_,easing:Ai})},e.prototype.handleDraggerStart_=function(t){if(!this.dragging_&&t.target===this.element.firstElementChild){var e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){var r=this.handleDraggerDrag_,n=this.handleDraggerEnd_;this.dragListenerKeys_.push(_(document,Xn,r,this),_(document,qn,n,this))}}},e.prototype.handleDraggerDrag_=function(t){if(this.dragging_){var e=t.clientX-this.startX_,r=t.clientY-this.startY_,n=this.getRelativePosition_(e,r);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}},e.prototype.handleDraggerEnd_=function(t){this.dragging_&&(this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(m),this.dragListenerKeys_.length=0)},e.prototype.setThumbPosition_=function(t){var e=this.getPositionForResolution_(t),r=this.element.firstElementChild;1==this.direction_?r.style.left=this.widthLimit_*e+"px":r.style.top=this.heightLimit_*e+"px"},e.prototype.getRelativePosition_=function(t,e){return re(1===this.direction_?t/this.widthLimit_:e/this.heightLimit_,0,1)},e.prototype.getResolutionForPosition_=function(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)},e.prototype.getPositionForResolution_=function(t){return re(1-this.getMap().getView().getValueForResolutionFunction()(t),0,1)},e}(xo),rO=(tO=function(t,e){return(tO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}tO(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),nO=function(t){function e(e){var r=this,n=e||{};(r=t.call(this,{element:document.createElement("div"),target:n.target})||this).extent=n.extent?n.extent:null;var i=void 0!==n.className?n.className:"ol-zoom-extent",o=void 0!==n.label?n.label:"E",a=void 0!==n.tipLabel?n.tipLabel:"Fit to extent",s=document.createElement("button");s.setAttribute("type","button"),s.title=a,s.appendChild("string"==typeof o?document.createTextNode(o):o),s.addEventListener(U,r.handleClick_.bind(r),!1);var u=i+" ol-unselectable ol-control",l=r.element;return l.className=u,l.appendChild(s),r}return rO(e,t),e.prototype.handleClick_=function(t){t.preventDefault(),this.handleZoomToExtent()},e.prototype.handleZoomToExtent=function(){var t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal(ln(e))},e}(xo),iO={array:{},color:{},colorlike:{},control:{},coordinate:{},easing:{},events:{}};iO.events.condition={},iO.extent={},iO.featureloader={},iO.format={},iO.format.filter={},iO.geom={},iO.has={},iO.interaction={},iO.layer={},iO.loadingstrategy={},iO.proj={},iO.proj.Units={},iO.proj.proj4={},iO.render={},iO.render.canvas={},iO.renderer={},iO.renderer.canvas={},iO.renderer.webgl={},iO.size={},iO.source={},iO.sphere={},iO.style={},iO.style.IconImageCache={},iO.tilegrid={},iO.transform={},iO.util={},iO.webgl={},iO.xml={},iO.Collection=st,iO.Feature=ht,iO.Geolocation=Cn,iO.Kinetic=In,iO.Map=eu,iO.Object=it,iO.Observable=J,iO.Observable.unByKey=function(t){if(Array.isArray(t))for(var e=0,r=t.length;e<r;++e)m(t[e]);else m(t)},iO.Overlay=hu,iO.PluggableMap=bo,iO.View=Gi,iO.array.stableSort=function(t,e){var r,n=t.length,i=Array(t.length);for(r=0;r<n;r++)i[r]={index:r,value:t[r]};for(i.sort((function(t,r){return e(t.value,r.value)||t.index-r.index})),r=0;r<t.length;r++)t[r]=i[r].value},iO.color.asArray=is,iO.color.asString=ts,iO.colorlike.asColorLike=ls,iO.control.Attribution=Ao,iO.control.Control=xo,iO.control.FullScreen=jE,iO.control.MousePosition=GE,iO.control.OverviewMap=VE,iO.control.Rotate=No,iO.control.ScaleLine=JE,iO.control.Zoom=zo,iO.control.ZoomSlider=eO,iO.control.ZoomToExtent=nO,iO.control.defaults=Go,iO.coordinate.add=bi,iO.coordinate.createStringXY=function(t){return function(e){return Ii(e,t)}},iO.coordinate.format=Si,iO.coordinate.rotate=Oi,iO.coordinate.toStringHDMS=function(t,e){return t?xi("NS",t[1],e)+" "+xi("EW",t[0],e):""},iO.coordinate.toStringXY=Ii,iO.easing.easeIn=Li,iO.easing.easeOut=Ai,iO.easing.inAndOut=ki,iO.easing.linear=Fi,iO.easing.upAndDown=function(t){return t<.5?ki(2*t):1-ki(2*(t-.5))},iO.events.condition.altKeyOnly=Jo,iO.events.condition.altShiftKeysOnly=Qo,iO.events.condition.always=ta,iO.events.condition.click=function(t){return t.type==Wn.CLICK},iO.events.condition.doubleClick=function(t){return t.type==Wn.DBLCLICK},iO.events.condition.focus=$o,iO.events.condition.mouseOnly=sa,iO.events.condition.never=ra,iO.events.condition.noModifierKeys=ia,iO.events.condition.penOnly=function(t){var e=t.pointerEvent;return ut(void 0!==e,56),"pen"===e.pointerType},iO.events.condition.platformModifierKeyOnly=function(t){var e=t.originalEvent;return!e.altKey&&(Dn?e.metaKey:e.ctrlKey)&&!e.shiftKey},iO.events.condition.pointerMove=function(t){return"pointermove"==t.type},iO.events.condition.primaryAction=ua,iO.events.condition.shiftKeyOnly=oa,iO.events.condition.singleClick=na,iO.events.condition.targetNotEditable=aa,iO.events.condition.touchOnly=function(t){var e=t.pointerEvent;return ut(void 0!==e,56),"touch"===e.pointerType},iO.extent.applyTransform=Xt,iO.extent.boundingExtent=pt,iO.extent.buffer=dt,iO.extent.containsCoordinate=_t,iO.extent.containsExtent=vt,iO.extent.containsXY=mt,iO.extent.createEmpty=wt,iO.extent.equals=Mt,iO.extent.extend=Pt,iO.extent.getArea=Lt,iO.extent.getBottomLeft=At,iO.extent.getBottomRight=kt,iO.extent.getCenter=Ft,iO.extent.getHeight=Dt,iO.extent.getIntersection=zt,iO.extent.getSize=function(t){return[t[2]-t[0],t[3]-t[1]]},iO.extent.getTopLeft=Gt,iO.extent.getTopRight=Bt,iO.extent.getWidth=Ut,iO.extent.intersects=Wt,iO.extent.isEmpty=Yt,iO.featureloader.setWithCredentials=function(t){pu=t},iO.featureloader.xhr=gu,iO.format.EsriJSON=Gy,iO.format.Feature=Sy,iO.format.GML=p_,iO.format.GML2=v_,iO.format.GML3=c_,iO.format.GML32=x_,iO.format.GPX=ov,iO.format.GeoJSON=cv,iO.format.IGC=Lv,iO.format.IIIFInfo=Uv,iO.format.KML=Rb,iO.format.MVT=Yb,iO.format.OSMXML=Qb,iO.format.Polyline=uw,iO.format.Polyline.decodeDeltas=nw,iO.format.Polyline.decodeFloats=ow,iO.format.Polyline.encodeDeltas=rw,iO.format.Polyline.encodeFloats=iw,iO.format.TopoJSON=Dw,iO.format.WFS=eS,iO.format.WFS.writeFilter=function(t){var e=ju(Dx,"Filter");return Zx(e,t,[]),e},iO.format.WKT=dS,iO.format.WMSCapabilities=VS,iO.format.WMSGetFeatureInfo=ZS,iO.format.WMTSCapabilities=CE,iO.format.filter.Bbox=Vw,iO.format.filter.Contains=Kw,iO.format.filter.During=$w,iO.format.filter.EqualTo=nx,iO.format.filter.GreaterThan=ox,iO.format.filter.GreaterThanOrEqualTo=sx,iO.format.filter.Intersects=lx,iO.format.filter.IsBetween=hx,iO.format.filter.IsLike=px,iO.format.filter.IsNull=gx,iO.format.filter.LessThan=_x,iO.format.filter.LessThanOrEqualTo=mx,iO.format.filter.Not=wx,iO.format.filter.NotEqualTo=Sx,iO.format.filter.Or=Ox,iO.format.filter.Within=Px,iO.format.filter.and=Tx,iO.format.filter.bbox=Cx,iO.format.filter.between=function(t,e,r){return new hx(t,e,r)},iO.format.filter.contains=function(t,e,r){return new Kw(t,e,r)},iO.format.filter.during=function(t,e,r){return new $w(t,e,r)},iO.format.filter.equalTo=function(t,e,r){return new nx(t,e,r)},iO.format.filter.greaterThan=function(t,e){return new ox(t,e)},iO.format.filter.greaterThanOrEqualTo=function(t,e){return new sx(t,e)},iO.format.filter.intersects=function(t,e,r){return new lx(t,e,r)},iO.format.filter.isNull=function(t){return new gx(t)},iO.format.filter.lessThan=function(t,e){return new _x(t,e)},iO.format.filter.lessThanOrEqualTo=function(t,e){return new mx(t,e)},iO.format.filter.like=function(t,e,r,n,i,o){return new px(t,e,r,n,i,o)},iO.format.filter.not=function(t){return new wx(t)},iO.format.filter.notEqualTo=function(t,e,r){return new Sx(t,e,r)},iO.format.filter.or=function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Ox,e))},iO.format.filter.within=function(t,e,r){return new Px(t,e,r)},iO.geom.Circle=Eg,iO.geom.Geometry=_r,iO.geom.GeometryCollection=xy,iO.geom.LineString=Yd,iO.geom.LinearRing=Br,iO.geom.MultiLineString=Mg,iO.geom.MultiPoint=Tg,iO.geom.MultiPolygon=kg,iO.geom.Point=Wr,iO.geom.Polygon=sn,iO.geom.Polygon.circular=un,iO.geom.Polygon.fromCircle=cn,iO.geom.Polygon.fromExtent=ln,iO.geom.SimpleGeometry=br,iO.has.DEVICE_PIXEL_RATIO=zn,iO.interaction.DoubleClickZoom=Ho,iO.interaction.DragAndDrop=_g,iO.interaction.DragBox=Ma,iO.interaction.DragPan=ma,iO.interaction.DragRotate=wa,iO.interaction.DragRotateAndZoom=mg,iO.interaction.DragZoom=Ia,iO.interaction.Draw=Bg,iO.interaction.Draw.createBox=function(){return function(t,e,r){var n=pt(t.map((function(t){return er(t)}))),i=[[At(n),kt(n),Bt(n),Gt(n),At(n)]],o=e;o?o.setCoordinates(i):o=new sn(i);var a=$e();return a&&o.transform(r,a),o}},iO.interaction.Draw.createRegularPolygon=function(t,e){return function(r,n,i){var o=er(r[0]),a=er(r[1]),s=Math.sqrt(Pi(o,a)),u=n||cn(new Eg(o),t),l=e;if(!e){var c=a[0]-o[0],h=a[1]-o[1];l=Math.atan(h/c)-(c<0?Math.PI:0)}hn(u,o,s,l);var f=$e();return f&&u.transform(i,f),u}},iO.interaction.Extent=qg,iO.interaction.Interaction=Xo,iO.interaction.KeyboardPan=ka,iO.interaction.KeyboardZoom=Ga,iO.interaction.Modify=iy,iO.interaction.MouseWheelZoom=Wa,iO.interaction.PinchRotate=Va,iO.interaction.PinchZoom=Za,iO.interaction.Pointer=fa,iO.interaction.Select=cy,iO.interaction.Snap=yy,iO.interaction.Translate=my,iO.interaction.defaults=qa,iO.layer.Base=io,iO.layer.BaseImage=hf,iO.layer.BaseTile=Sf,iO.layer.BaseVector=zp,iO.layer.Graticule=tg,iO.layer.Group=ho,iO.layer.Heatmap=ag,iO.layer.Image=mf,iO.layer.Layer=Co,iO.layer.Tile=If,iO.layer.Vector=zd,iO.layer.VectorImage=ug,iO.layer.VectorTile=cg,iO.loadingstrategy.all=yu,iO.loadingstrategy.bbox=function(t,e){return[t]},iO.loadingstrategy.tile=function(t){return function(e,r){var n=t.getZForResolution(r),i=t.getTileRangeForExtentAndZ(e,n),o=[],a=[n,0,0];for(a[1]=i.minX;a[1]<=i.maxX;++a[1])for(a[2]=i.minY;a[2]<=i.maxY;++a[2])o.push(t.getTileCoordExtent(a));return o}},iO.proj.Projection=me,iO.proj.Units.METERS_PER_UNIT=ge,iO.proj.addCoordinateTransforms=We,iO.proj.addEquivalentProjections=Ge,iO.proj.addProjection=Ne,iO.proj.equivalent=Ye,iO.proj.fromLonLat=function(t,e){return Ze(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")},iO.proj.get=De,iO.proj.getPointResolution=ze,iO.proj.getTransform=Xe,iO.proj.proj4.register=function(t){var e,r,n=Object.keys(t.defs),i=n.length;for(e=0;e<i;++e){var o=n[e];if(!De(o)){var a=t.defs(o);Ne(new me({code:o,axisOrientation:a.axis,metersPerUnit:a.to_meter,units:a.units}))}}for(e=0;e<i;++e){var s=n[e],u=De(s);for(r=0;r<i;++r){var l=n[r],c=De(l);if(!Ae(s,l))if(t.defs[s]===t.defs[l])Ge([u,c]);else{var h=t(s,l);We(u,c,h.forward,h.inverse)}}}},iO.proj.toLonLat=function(t,e){var r=Ze(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=ue(n+180,360)-180),r},iO.proj.transform=Ze,iO.proj.transformExtent=qe,iO.render.VectorContext=cs,iO.render.canvas.labelCache=ds,iO.render.getRenderPixel=function(t,e){var r=e.slice(0);return ur(t.inversePixelTransform.slice(),r),r},iO.render.getVectorContext=Ws,iO.render.toContext=function(t,e){var r=t.canvas,n=e||{},i=n.pixelRatio||zn,o=n.size;o&&(r.width=o[0]*i,r.height=o[1]*i,r.style.width=o[0]+"px",r.style.height=o[1]+"px");var a=[0,0,r.width,r.height],s=lr([1,0,0,1,0,0],i,i);return new Rs(t,i,a,s,0)},iO.renderer.Composite=$s,iO.renderer.canvas.ImageLayer=_f,iO.renderer.canvas.TileLayer=Tf,iO.renderer.canvas.VectorImageLayer=Ld,iO.renderer.canvas.VectorLayer=Id,iO.renderer.canvas.VectorTileLayer=Nd,iO.renderer.webgl.PointsLayer=Bp,iO.size.toSize=go,iO.source.BingMaps=Jc,iO.source.CartoDB=eh,iO.source.Cluster=fh,iO.source.IIIF=wh,iO.source.Image=Ph,iO.source.ImageArcGISRest=Yh,iO.source.ImageCanvas=qh,iO.source.ImageMapGuide=Hh,iO.source.ImageStatic=Qh,iO.source.ImageWMS=of,iO.source.OSM=uf,iO.source.OSM.ATTRIBUTION=sf,iO.source.Raster=zf,iO.source.Source=Ac,iO.source.Stamen=Yf,iO.source.Tile=Nc,iO.source.TileArcGISRest=Hf,iO.source.TileDebug=$f,iO.source.TileImage=Kc,iO.source.TileJSON=ep,iO.source.TileWMS=up,iO.source.UTFGrid=hp,iO.source.Vector=ch,iO.source.VectorTile=vp,iO.source.WMTS=Sp,iO.source.WMTS.optionsFromCapabilities=function(t,e){var r=M(t.Contents.Layer,(function(t,r,n){return t.Identifier==e.layer}));if(null===r)return null;var n,i=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?T(r.TileMatrixSetLink,"projection"in e?function(t,r,n){var o=M(i,(function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,a=De(o.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||De(o),s=De(e.projection);return a&&s?Ye(a,s):o==e.projection}:function(t,r,n){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var o=r.TileMatrixSetLink[n].TileMatrixSet,a=r.TileMatrixSetLink[n].TileMatrixSetLimits,s=r.Format[0];"format"in e&&(s=e.format),(n=T(r.Style,(function(t,r,n){return"style"in e?t.Title==e.style:t.isDefault})))<0&&(n=0);var u=r.Style[n].Identifier,l={};"Dimension"in r&&r.Dimension.forEach((function(t,e,r){var n=t.Identifier,i=t.Default;void 0===i&&(i=t.Value[0]),l[n]=i}));var c,h=M(t.Contents.TileMatrixSet,(function(t,e,r){return t.Identifier==o})),f=h.SupportedCRS;if(f&&(c=De(f.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"))||De(f)),"projection"in e){var p=De(e.projection);p&&(c&&!Ye(p,c)||(c=p))}var d=h.TileMatrix[0],g=28e-5*d.ScaleDenominator,y=c===De("EPSG:4326")?[d.TopLeftCorner[1],d.TopLeftCorner[0]]:d.TopLeftCorner,_=d.TileWidth*g,v=d.TileHeight*g,m=[y[0],y[1]-v*d.MatrixHeight,y[0]+_*d.MatrixWidth,y[1]];null===c.getExtent()&&c.setExtent(m);var b=xl(h,m,a),w=[],S=e.requestEncoding;if(S=void 0!==S?S:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(var E=t.OperationsMetadata.GetTile.DCP.HTTP.Get,O=0,P=E.length;O<P;++O)if(E[O].Constraint){var C=M(E[O].Constraint,(function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===S&&(S=C[0]),S!==wp)break;x(C,wp)&&w.push(E[O].href)}else E[O].href&&(S=wp,w.push(E[O].href));return 0===w.length&&(S="REST",r.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(s=t.format,w.push(t.template))}))),{urls:w,layer:e.layer,matrixSet:o,format:s,projection:c,requestEncoding:S,tileGrid:b,style:u,dimensions:l,wrapX:!1,crossOrigin:e.crossOrigin}},iO.source.XYZ=$c,iO.source.Zoomify=yh,iO.sphere.getArea=function t(e,r){var n=r||{},i=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==Qt.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case Qt.POINT:case Qt.MULTI_POINT:case Qt.LINE_STRING:case Qt.MULTI_LINE_STRING:case Qt.LINEAR_RING:break;case Qt.POLYGON:for(s=e.getCoordinates(),p=Math.abs(fe(s[0],i)),l=1,c=s.length;l<c;++l)p-=Math.abs(fe(s[l],i));break;case Qt.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(u=s[l],p+=Math.abs(fe(u[0],i)),h=1,f=u.length;h<f;++h)p-=Math.abs(fe(u[h],i));break;case Qt.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},iO.sphere.getDistance=ce,iO.sphere.getLength=function t(e,r){var n=r||{},i=n.radius||6371008.8,o=n.projection||"EPSG:3857",a=e.getType();a!==Qt.GEOMETRY_COLLECTION&&(e=e.clone().transform(o,"EPSG:4326"));var s,u,l,c,h,f,p=0;switch(a){case Qt.POINT:case Qt.MULTI_POINT:break;case Qt.LINE_STRING:case Qt.LINEAR_RING:p=he(s=e.getCoordinates(),i);break;case Qt.MULTI_LINE_STRING:case Qt.POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)p+=he(s[l],i);break;case Qt.MULTI_POLYGON:for(l=0,c=(s=e.getCoordinates()).length;l<c;++l)for(h=0,f=(u=s[l]).length;h<f;++h)p+=he(u[h],i);break;case Qt.GEOMETRY_COLLECTION:var d=e.getGeometries();for(l=0,c=d.length;l<c;++l)p+=t(d[l],r);break;default:throw new Error("Unsupported geometry type: "+a)}return p},iO.style.Circle=Rl,iO.style.Fill=Ll,iO.style.Icon=Kl,iO.style.IconImageCache.shared=us,iO.style.Image=Pl,iO.style.RegularShape=Cl,iO.style.Stroke=Hl,iO.style.Style=rc,iO.style.Text=nc,iO.tilegrid.TileGrid=Mu,iO.tilegrid.WMTS=wl,iO.tilegrid.WMTS.createFromCapabilitiesMatrixSet=xl,iO.tilegrid.createXYZ=Tu,iO.transform.composeCssTransform=function(t,e,r,n,i,o,a){return fr(cr([1,0,0,1,0,0],t,e,r,n,i,o,a))},iO.util.getUid=o,iO.webgl.ARRAY_BUFFER=34962,iO.webgl.Buffer=ol,iO.webgl.DYNAMIC_DRAW=35048,iO.webgl.ELEMENT_ARRAY_BUFFER=34963,iO.webgl.Helper=yl,iO.webgl.Helper.computeAttributesStride=pl,iO.webgl.PostProcessingPass=cl,iO.webgl.RenderTarget=vl,iO.webgl.STATIC_DRAW=35044,iO.webgl.STREAM_DRAW=35040,iO.xml.getAllTextContent=Nu,iO.xml.parse=zu,iO.xml.registerDocument=function(t){rl=t},iO.xml.registerXMLSerializer=function(t){el=t},e.default=iO}]).default},"object"==a(e)&&"object"==a(t)?t.exports=o():(n=[],void 0===(i="function"==typeof(r=o)?r.apply(e,n):r)||(t.exports=i))}).call(this,r(311)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){(function(r,n){var i,o,a,s;function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}s=function(){return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};e[a][0].call(l.exports,(function(t){var r=e[a][1][t];return i(r||t)}),l,l.exports,t,e,r,n)}return r[a].exports}for(var o=!1,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){var n=t("util/"),i=Array.prototype.slice,o=Object.prototype.hasOwnProperty,a=e.exports=c;function s(t,e){return n.isUndefined(e)?""+e:n.isNumber(e)&&!isFinite(e)||n.isFunction(e)||n.isRegExp(e)?e.toString():e}function u(t,e){return n.isString(t)?t.length<e?t:t.slice(0,e):t}function l(t,e,r,n,i){throw new a.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function c(t,e){t||l(t,!0,e,"==",a.ok)}function h(t,e){if(t===e)return!0;if(n.isBuffer(t)&&n.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return n.isDate(t)&&n.isDate(e)?t.getTime()===e.getTime():n.isRegExp(t)&&n.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:n.isObject(t)||n.isObject(e)?function(t,e){if(n.isNullOrUndefined(t)||n.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(n.isPrimitive(t)||n.isPrimitive(e))return t===e;var r=f(t),o=f(e);if(r&&!o||!r&&o)return!1;if(r)return t=i.call(t),e=i.call(e),h(t,e);var a,s,u=g(t),l=g(e);if(u.length!=l.length)return!1;for(u.sort(),l.sort(),s=u.length-1;s>=0;s--)if(u[s]!=l[s])return!1;for(s=u.length-1;s>=0;s--)if(a=u[s],!h(t[a],e[a]))return!1;return!0}(t,e):t==e}function f(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function p(t,e){return!(!t||!e)&&("[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e||!0===e.call({},t))}function d(t,e,r,i){var o;n.isString(r)&&(i=r,r=null);try{e()}catch(t){o=t}if(i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),t&&!o&&l(o,r,"Missing expected exception"+i),!t&&p(o,r)&&l(o,r,"Got unwanted exception"+i),t&&o&&r&&!p(o,r)||!t&&o)throw o}a.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=function(t){return u(JSON.stringify(t.actual,s),128)+" "+t.operator+" "+u(JSON.stringify(t.expected,s),128)}(this),this.generatedMessage=!0);var e=t.stackStartFunction||l;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,i=e.name,o=n.indexOf("\n"+i);if(o>=0){var a=n.indexOf("\n",o+1);n=n.substring(a+1)}this.stack=n}}},n.inherits(a.AssertionError,Error),a.fail=l,a.ok=c,a.equal=function(t,e,r){t!=e&&l(t,e,r,"==",a.equal)},a.notEqual=function(t,e,r){t==e&&l(t,e,r,"!=",a.notEqual)},a.deepEqual=function(t,e,r){h(t,e)||l(t,e,r,"deepEqual",a.deepEqual)},a.notDeepEqual=function(t,e,r){h(t,e)&&l(t,e,r,"notDeepEqual",a.notDeepEqual)},a.strictEqual=function(t,e,r){t!==e&&l(t,e,r,"===",a.strictEqual)},a.notStrictEqual=function(t,e,r){t===e&&l(t,e,r,"!==",a.notStrictEqual)},a.throws=function(t,e,r){d.apply(this,[!0].concat(i.call(arguments)))},a.doesNotThrow=function(t,e){d.apply(this,[!1].concat(i.call(arguments)))},a.ifError=function(t){if(t)throw t};var g=Object.keys||function(t){var e=[];for(var r in t)o.call(t,r)&&e.push(r);return e}},{"util/":107}],2:[function(t,e,r){"use strict";r.byteLength=function(t){return 3*t.length/4-l(t)},r.toByteArray=function(t){var e,r,n,a,s,u,c=t.length;s=l(t),u=new o(3*c/4-s),n=s>0?c-4:c;var h=0;for(e=0,r=0;e<n;e+=4,r+=3)a=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],u[h++]=a>>16&255,u[h++]=a>>8&255,u[h++]=255&a;return 2===s?(a=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,u[h++]=255&a):1===s&&(a=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,u[h++]=a>>8&255,u[h++]=255&a),u},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o="",a=[],s=0,u=r-i;s<u;s+=16383)a.push(c(t,s,s+16383>u?u:s+16383));return 1===i?(e=t[r-1],o+=n[e>>2],o+=n[e<<4&63],o+="=="):2===i&&(e=(t[r-2]<<8)+t[r-1],o+=n[e>>10],o+=n[e>>4&63],o+=n[e<<2&63],o+="="),a.push(o),a.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function c(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],3:[function(t,e,r){},{}],4:[function(t,e,n){(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */"use strict";var r=t("base64-js"),i=t("ieee754"),o=t("isarray");function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,r)}function l(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e),t}(t,e,r,n):"string"==typeof e?function(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|d(e,r),i=(t=s(t,n)).write(e,r);return i!==n&&(t=t.slice(0,i)),t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=s(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?s(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=s(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function g(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,r);case"utf8":case"utf-8":return M(this,e,r);case"ascii":return P(this,e,r);case"latin1":case"binary":return T(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:v(t,e,r,n,i);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):v(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,r/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=r;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var h=!0,f=0;f<u;f++)if(l(t,o+f)!==l(e,f)){h=!1;break}if(h)return o}return-1}function m(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[r+a]=s}return a}function b(t,e,r,n){return B(z(e,t.length-r),t,r,n)}function w(t,e,r,n){return B(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}function S(t,e,r,n){return B(G(e),t,r,n)}function E(t,e,r,n){return B(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function M(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,u,l=t[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(o=t[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}function P(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function T(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function C(t,e,r){var n,i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var o="",a=e;a<r;++a)o+=(n=t[a])<16?"0"+n.toString(16):n.toString(16);return o}function I(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function A(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function k(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function F(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(t,e,r,n,o){return o||F(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function N(t,e,r,n,o){return o||F(t,0,r,8),i.write(t,e,r,n,52,8),r+8}n.Buffer=u,n.SlowBuffer=function(t){return+t!=t&&(t=0),u.alloc(+t)},n.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return l(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return c(e),e<=0?s(t,e):void 0!==r?"string"==typeof n?s(t,e).fill(r,n):s(t,e).fill(r):s(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var a=t[r];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)y(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):g.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(n,i),c=t.slice(e,r),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return S(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;r=new u(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||R(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||L(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):k(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):k(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):k(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return j(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return j(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return N(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return N(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var a=u.isBuffer(t)?t:z(new u(t,n).toString()),s=a.length;for(o=0;o<r-e;++o)this[o+e]=a[o%s]}return this};var D=/[^+\/0-9A-Za-z-_]/g;function z(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function G(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function B(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:33,isarray:37}],5:[function(t,e,r){t("../modules/web.immediate"),e.exports=t("../modules/_core").setImmediate},{"../modules/_core":9,"../modules/web.immediate":25}],6:[function(t,e,r){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],7:[function(t,e,r){var n=t("./_is-object");e.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":20}],8:[function(t,e,r){var n={}.toString;e.exports=function(t){return n.call(t).slice(8,-1)}},{}],9:[function(t,e,r){var n=e.exports={version:"2.3.0"};"number"==typeof __e&&(__e=n)},{}],10:[function(t,e,r){var n=t("./_a-function");e.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":6}],11:[function(t,e,r){e.exports=!t("./_fails")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},{"./_fails":14}],12:[function(t,e,r){var n=t("./_is-object"),i=t("./_global").document,o=n(i)&&n(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{"./_global":15,"./_is-object":20}],13:[function(t,e,r){var n=t("./_global"),i=t("./_core"),o=t("./_ctx"),a=t("./_hide"),s=function t(e,r,s){var u,l,c,h=e&t.F,f=e&t.G,p=e&t.S,d=e&t.P,g=e&t.B,y=e&t.W,_=f?i:i[r]||(i[r]={}),v=_.prototype,m=f?n:p?n[r]:(n[r]||{}).prototype;for(u in f&&(s=r),s)(l=!h&&m&&void 0!==m[u])&&u in _||(c=l?m[u]:s[u],_[u]=f&&"function"!=typeof m[u]?s[u]:g&&l?o(c,n):y&&m[u]==c?function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(c):d&&"function"==typeof c?o(Function.call,c):c,d&&((_.virtual||(_.virtual={}))[u]=c,e&t.R&&v&&!v[u]&&a(v,u,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},{"./_core":9,"./_ctx":10,"./_global":15,"./_hide":16}],14:[function(t,e,r){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],15:[function(t,e,r){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],16:[function(t,e,r){var n=t("./_object-dp"),i=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},{"./_descriptors":11,"./_object-dp":21,"./_property-desc":22}],17:[function(t,e,r){e.exports=t("./_global").document&&document.documentElement},{"./_global":15}],18:[function(t,e,r){e.exports=!t("./_descriptors")&&!t("./_fails")((function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a}))},{"./_descriptors":11,"./_dom-create":12,"./_fails":14}],19:[function(t,e,r){e.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},{}],20:[function(t,e,r){e.exports=function(t){return"object"===u(t)?null!==t:"function"==typeof t}},{}],21:[function(t,e,r){var n=t("./_an-object"),i=t("./_ie8-dom-define"),o=t("./_to-primitive"),a=Object.defineProperty;r.f=t("./_descriptors")?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return a(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},{"./_an-object":7,"./_descriptors":11,"./_ie8-dom-define":18,"./_to-primitive":24}],22:[function(t,e,r){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],23:[function(t,e,r){var n,i,o,a=t("./_ctx"),s=t("./_invoke"),u=t("./_html"),l=t("./_dom-create"),c=t("./_global"),h=c.process,f=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,g=0,y={},_=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},v=function(t){_.call(t.data)};f&&p||(f=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return y[++g]=function(){s("function"==typeof t?t:Function(t),e)},n(g),g},p=function(t){delete y[t]},"process"==t("./_cof")(h)?n=function(t){h.nextTick(a(_,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=v,n=a(o.postMessage,o,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(n=function(t){c.postMessage(t+"","*")},c.addEventListener("message",v,!1)):n="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),e.exports={set:f,clear:p}},{"./_cof":8,"./_ctx":10,"./_dom-create":12,"./_global":15,"./_html":17,"./_invoke":19}],24:[function(t,e,r){var n=t("./_is-object");e.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":20}],25:[function(t,e,r){var n=t("./_export"),i=t("./_task");n(n.G+n.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":13,"./_task":23}],26:[function(t,e,r){(function(t){function e(t){return Object.prototype.toString.call(t)}r.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},r.isBoolean=function(t){return"boolean"==typeof t},r.isNull=function(t){return null===t},r.isNullOrUndefined=function(t){return null==t},r.isNumber=function(t){return"number"==typeof t},r.isString=function(t){return"string"==typeof t},r.isSymbol=function(t){return"symbol"===u(t)},r.isUndefined=function(t){return void 0===t},r.isRegExp=function(t){return"[object RegExp]"===e(t)},r.isObject=function(t){return"object"===u(t)&&null!==t},r.isDate=function(t){return"[object Date]"===e(t)},r.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},r.isFunction=function(t){return"function"==typeof t},r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===u(t)||void 0===t},r.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":36}],27:[function(t,e,r){e.exports.structure=t("./src/structure")},{"./src/structure":31}],28:[function(t,e,r){var n=t("./fieldsize"),i={string:"C",number:"N",boolean:"L",null:"C"};function o(t){var e={},r=[];for(var o in t)e[o]=null===t[o]?"null":u(t[o]);for(var a in e){var s=i[e[a]];s&&r.push({name:a,type:s,size:n[s]})}return r}e.exports.multi=function(t){var e={};return t.forEach((function(t){!function(t,e){for(var r in e){var n=void 0!==e[r]&&null!==e[r];(void 0===t[r]||n)&&(t[r]=e[r])}}(e,t)})),o(e)},e.exports.bytesPer=function(t){return t.reduce((function(t,e){return t+e.size}),1)},e.exports.obj=o},{"./fieldsize":29}],29:[function(t,e,r){e.exports={C:254,L:1,D:8,N:18,M:18,F:18,B:8}},{}],30:[function(t,e,r){e.exports.lpad=function(t,e,r){for(;t.length<e;)t=r+t;return t},e.exports.rpad=function(t,e,r){for(;t.length<e;)t+=r;return t},e.exports.writeField=function(t,e,r,n){for(var i=0;i<e;i++)t.setUint8(n,r.charCodeAt(i)),n++;return n}},{}],31:[function(t,e,r){t("./fieldsize");var n=t("./lib"),i=t("./fields");e.exports=function(t,e){var r=e||i.multi(t),o=32*r.length+1,a=i.bytesPer(r),s=new ArrayBuffer(o+32+a*t.length+1),u=new Date,l=new DataView(s);l.setUint8(0,3),l.setUint8(1,u.getFullYear()-1900),l.setUint8(2,u.getMonth()),l.setUint8(3,u.getDate()),l.setUint32(4,t.length,!0);var c=o+32;l.setUint16(8,c,!0),l.setUint16(10,a,!0),l.setInt8(32+o-1,13),r.forEach((function(t,e){t.name.split("").slice(0,8).forEach((function(t,r){l.setInt8(32+32*e+r,t.charCodeAt(0))})),l.setInt8(32+32*e+11,t.type.charCodeAt(0)),l.setInt8(32+32*e+16,t.size),"N"==t.type&&l.setInt8(32+32*e+17,3)}));var h=o+32;return t.forEach((function(t,e){l.setUint8(h,32),h++,r.forEach((function(e){var r=t[e.name];switch(null==r&&(r=""),e.type){case"L":l.setUint8(h,r?84:70),h++;break;case"D":h=n.writeField(l,8,n.lpad(r.toString(),8," "),h);break;case"N":h=n.writeField(l,e.size,n.lpad(r.toString(),e.size," ").substr(0,18),h);break;case"C":h=n.writeField(l,e.size,n.rpad(r.toString(),e.size," "),h);break;default:throw new Error("Unknown field type")}}))})),l.setUint8(h,26),l}},{"./fields":28,"./fieldsize":29,"./lib":30}],32:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"object"===u(t)&&null!==t}function a(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(a(r=this._events[t]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),n=(l=r.slice()).length,u=0;u<n;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var r,n,a,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(s=a;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],33:[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,l=u>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=f,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+h],h+=f,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[r+p]=255&a,p+=d,a/=256,l-=8);t[r+p-d]|=128*g}},{}],34:[function(t,e,n){(function(t){"use strict";var r,n,i=t.MutationObserver||t.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=t.document.createTextNode("");a.observe(s,{characterData:!0}),r=function(){s.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)r="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){c(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(c,0)};else{var u=new t.MessageChannel;u.port1.onmessage=c,r=function(){u.port2.postMessage(0)}}var l=[];function c(){var t,e;n=!0;for(var r=l.length;r;){for(e=l,l=[],t=-1;++t<r;)e[t]();r=l.length}n=!1}e.exports=function(t){1!==l.push(t)||n||r()}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],35:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],36:[function(t,e,r){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
e.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],37:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],38:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t){for(var e,r,i,a,s,u,l,c=[],h=0,f=t.length,p=f,d="string"!==n.getTypeOf(t);h<t.length;)p=f-h,d?(e=t[h++],r=h<f?t[h++]:0,i=h<f?t[h++]:0):(e=t.charCodeAt(h++),r=h<f?t.charCodeAt(h++):0,i=h<f?t.charCodeAt(h++):0),a=e>>2,s=(3&e)<<4|r>>4,u=p>1?(15&r)<<2|i>>6:64,l=p>2?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(l));return c.join("")},r.decode=function(t){var e,r,n,a,s,u,l=0,c=0;if("data:"===t.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var h,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&f--,t.charAt(t.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(h=i.uint8array?new Uint8Array(0|f):new Array(0|f);l<t.length;)e=o.indexOf(t.charAt(l++))<<2|(a=o.indexOf(t.charAt(l++)))>>4,r=(15&a)<<4|(s=o.indexOf(t.charAt(l++)))>>2,n=(3&s)<<6|(u=o.indexOf(t.charAt(l++))),h[c++]=e,64!==s&&(h[c++]=r),64!==u&&(h[c++]=n);return h}},{"./support":67,"./utils":69}],39:[function(t,e,r){"use strict";var n=t("./external"),i=t("./stream/DataWorker"),o=t("./stream/DataLengthProbe"),a=t("./stream/Crc32Probe");function s(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}o=t("./stream/DataLengthProbe"),s.prototype={getContentWorker:function(){var t=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(t,e,r){return t.pipe(new a).pipe(new o("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=s},{"./external":43,"./stream/Crc32Probe":62,"./stream/DataLengthProbe":63,"./stream/DataWorker":64}],40:[function(t,e,r){"use strict";var n=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(t){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":44,"./stream/GenericWorker":65}],41:[function(t,e,r){"use strict";var n=t("./utils"),i=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==n.getTypeOf(t)?function(t,e,r,n){var o=i,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}(0|e,t,t.length,0):function(t,e,r,n){var o=i,a=n+r;t^=-1;for(var s=n;s<a;s++)t=t>>>8^o[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":69}],42:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],43:[function(t,e,r){"use strict";var n=null;n="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:n}},{lie:73}],44:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako"),o=t("./utils"),a=t("./stream/GenericWorker"),s=n?"uint8array":"array";function u(t,e){a.call(this,"FlateWorker/"+t),this._pako=new i[t]({raw:!0,level:e.level||-1}),this.meta={};var r=this;this._pako.onData=function(t){r.push({data:t,meta:r.meta})}}r.magic="\b\0",o.inherits(u,a),u.prototype.processChunk=function(t){this.meta=t.meta,this._pako.push(o.transformTo(s,t.data),!1)},u.prototype.flush=function(){a.prototype.flush.call(this),this._pako.push([],!0)},u.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},r.compressWorker=function(t){return new u("Deflate",t)},r.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":65,"./utils":69,pako:74}],45:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker"),o=t("../utf8"),a=t("../crc32"),s=t("../signature"),u=function(t,e){var r,n="";for(r=0;r<e;r++)n+=String.fromCharCode(255&t),t>>>=8;return n},l=function(t,e,r,i,l,c){var h,f,p=t.file,d=t.compression,g=c!==o.utf8encode,y=n.transformTo("string",c(p.name)),_=n.transformTo("string",o.utf8encode(p.name)),v=p.comment,m=n.transformTo("string",c(v)),b=n.transformTo("string",o.utf8encode(v)),w=_.length!==p.name.length,x=b.length!==v.length,S="",E="",O="",M=p.dir,P=p.date,T={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(T.crc32=t.crc32,T.compressedSize=t.compressedSize,T.uncompressedSize=t.uncompressedSize);var C=0;e&&(C|=8),g||!w&&!x||(C|=2048);var I,R,L,A=0,k=0;M&&(A|=16),"UNIX"===l?(k=798,A|=(I=p.unixPermissions,R=M,L=I,I||(L=R?16893:33204),(65535&L)<<16)):(k=20,A|=63&(p.dosPermissions||0)),h=P.getUTCHours(),h<<=6,h|=P.getUTCMinutes(),h<<=5,h|=P.getUTCSeconds()/2,f=P.getUTCFullYear()-1980,f<<=4,f|=P.getUTCMonth()+1,f<<=5,f|=P.getUTCDate(),w&&(E=u(1,1)+u(a(y),4)+_,S+="up"+u(E.length,2)+E),x&&(O=u(1,1)+u(a(m),4)+b,S+="uc"+u(O.length,2)+O);var F="";return F+="\n\0",F+=u(C,2),F+=d.magic,F+=u(h,2),F+=u(f,2),F+=u(T.crc32,4),F+=u(T.compressedSize,4),F+=u(T.uncompressedSize,4),F+=u(y.length,2),F+=u(S.length,2),{fileRecord:s.LOCAL_FILE_HEADER+F+y+S,dirRecord:s.CENTRAL_FILE_HEADER+u(k,2)+F+u(m.length,2)+"\0\0\0\0"+u(A,4)+u(i,4)+y+S+m}},c=function(t){return s.DATA_DESCRIPTOR+u(t.crc32,4)+u(t.compressedSize,4)+u(t.uncompressedSize,4)};function h(t,e,r,n){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(h,i),h.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,i.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))},h.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=l(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=l(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:c(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,i=function(t,e,r,i,o){var a=n.transformTo("string",o(i));return s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+u(t,2)+u(t,2)+u(e,4)+u(r,4)+u(a.length,2)+a}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},h.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(t){var e=this._sources;if(!i.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(t){}return!0},h.prototype.lock=function(){i.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=h},{"../crc32":41,"../signature":60,"../stream/GenericWorker":65,"../utf8":68,"../utils":69}],46:[function(t,e,r){"use strict";var n=t("../compressions"),i=t("./ZipFileWorker");r.generateWorker=function(t,e,r){var o=new i(e.streamFiles,r,e.platform,e.encodeFileName),a=0;try{t.forEach((function(t,r){a++;var i=function(t,e){var r=t||e,i=n[r];if(!i)throw new Error(r+" is not a valid compression method !");return i}(r.options.compression,e.compression),s=r.options.compressionOptions||e.compressionOptions||{},u=r.dir,l=r.date;r._compressWorker(i,s).withStreamInfo("file",{name:t,dir:u,date:l,comment:r.comment||"",unixPermissions:r.unixPermissions,dosPermissions:r.dosPermissions}).pipe(o)})),o.entriesCount=a}catch(t){o.error(t)}return o}},{"../compressions":40,"./ZipFileWorker":45}],47:[function(t,e,r){"use strict";function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}n.prototype=t("./object"),n.prototype.loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.1.3",n.loadAsync=function(t,e){return(new n).loadAsync(t,e)},n.external=t("./external"),e.exports=n},{"./defaults":42,"./external":43,"./load":48,"./object":52,"./support":67}],48:[function(t,e,r){"use strict";var n=t("./utils"),i=t("./external"),o=t("./utf8"),a=(n=t("./utils"),t("./zipEntries")),s=t("./stream/Crc32Probe"),u=t("./nodejsUtils");function l(t){return new i.Promise((function(e,r){var n=t.decompressed.getContentWorker().pipe(new s);n.on("error",(function(t){r(t)})).on("end",(function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var r=this;return e=n.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),u.isNode&&u.isStream(t)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var r=new a(e);return r.load(t),r})).then((function(t){var r=[i.Promise.resolve(t)],n=t.files;if(e.checkCRC32)for(var o=0;o<n.length;o++)r.push(l(n[o]));return i.Promise.all(r)})).then((function(t){for(var n=t.shift(),i=n.files,o=0;o<i.length;o++){var a=i[o];r.file(a.fileNameStr,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:e.createFolders})}return n.zipComment.length&&(r.comment=n.zipComment),r}))}},{"./external":43,"./nodejsUtils":51,"./stream/Crc32Probe":62,"./utf8":68,"./utils":69,"./zipEntries":70}],49:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../stream/GenericWorker");function o(t,e){i.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}n.inherits(o,i),o.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":65,"../utils":69}],50:[function(t,e,r){"use strict";var n=t("readable-stream").Readable;function i(t,e,r){n.call(this,e),this._helper=t;var i=this;t.on("data",(function(t,e){i.push(t)||i._helper.pause(),r&&r(e)})).on("error",(function(t){i.emit("error",t)})).on("end",(function(){i.push(null)}))}t("util").inherits(i,n),i.prototype._read=function(){this._helper.resume()},e.exports=i},{"readable-stream":53,util:107}],51:[function(t,e,r){(function(t){"use strict";e.exports={isNode:void 0!==t,newBuffer:function(e,r){return new t(e,r)},isBuffer:function(e){return t.isBuffer(e)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}}).call(this,t("buffer").Buffer)},{buffer:4}],52:[function(t,e,r){"use strict";var n=t("./utf8"),i=t("./utils"),o=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),s=t("./defaults"),u=t("./compressedObject"),l=t("./zipObject"),c=t("./generate"),h=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),p=function(t,e,r){var n,a=i.getTypeOf(e),c=i.extend(r||{},s);c.date=c.date||new Date,null!==c.compression&&(c.compression=c.compression.toUpperCase()),"string"==typeof c.unixPermissions&&(c.unixPermissions=parseInt(c.unixPermissions,8)),c.unixPermissions&&16384&c.unixPermissions&&(c.dir=!0),c.dosPermissions&&16&c.dosPermissions&&(c.dir=!0),c.dir&&(t=g(t)),c.createFolders&&(n=d(t))&&y.call(this,n,!0);var p="string"===a&&!1===c.binary&&!1===c.base64;r&&void 0!==r.binary||(c.binary=!p),(e instanceof u&&0===e.uncompressedSize||c.dir||!e||0===e.length)&&(c.base64=!1,c.binary=!0,e="",c.compression="STORE",a="string");var _=null;_=e instanceof u||e instanceof o?e:h.isNode&&h.isStream(e)?new f(t,e):i.prepareContent(t,e,c.binary,c.optimizedBinaryString,c.base64);var v=new l(t,_,c);this.files[t]=v},d=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},y=function(t,e){return e=void 0!==e?e:s.createFolders,t=g(t),this.files[t]||p.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function _(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)this.files.hasOwnProperty(e)&&(n=this.files[e],(r=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(r,n))},filter:function(t){var e=[];return this.forEach((function(r,n){t(r,n)&&e.push(n)})),e},file:function(t,e,r){if(1===arguments.length){if(_(t)){var n=t;return this.filter((function(t,e){return!e.dir&&n.test(t)}))}var i=this.files[this.root+t];return i&&!i.dir?i:null}return t=this.root+t,p.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(_(t))return this.filter((function(e,r){return r.dir&&t.test(e)}));var e=this.root+t,r=y.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter((function(e,r){return r.name.slice(0,t.length)===t})),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if((r=i.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode})).type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),"binarystring"===r.type&&(r.type="string"),!r.type)throw new Error("No output type specified.");i.checkSupport(r.type),"darwin"!==r.platform&&"freebsd"!==r.platform&&"linux"!==r.platform&&"sunos"!==r.platform||(r.platform="UNIX"),"win32"===r.platform&&(r.platform="DOS");var s=r.comment||this.comment||"";e=c.generateWorker(this,r,s)}catch(t){(e=new o("error")).error(t)}return new a(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=v},{"./compressedObject":39,"./defaults":42,"./generate":46,"./nodejs/NodejsStreamInputAdapter":49,"./nodejsUtils":51,"./stream/GenericWorker":65,"./stream/StreamHelper":66,"./utf8":68,"./utils":69,"./zipObject":72}],53:[function(t,e,r){e.exports=t("stream")},{stream:102}],54:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data[this.zero+t]},i.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&r===o[1]&&n===o[2]&&i===o[3]},i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":69,"./DataReader":55}],55:[function(t,e,r){"use strict";var n=t("../utils");function i(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,r=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)r=(r<<8)+this.byteAt(e);return this.index+=t,r},readString:function(t){return n.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=i},{"../utils":69}],56:[function(t,e,r){"use strict";var n=t("./Uint8ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":69,"./Uint8ArrayReader":58}],57:[function(t,e,r){"use strict";var n=t("./DataReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},i.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},i.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},i.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":69,"./DataReader":55}],58:[function(t,e,r){"use strict";var n=t("./ArrayReader");function i(t){n.call(this,t)}t("../utils").inherits(i,n),i.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=i},{"../utils":69,"./ArrayReader":54}],59:[function(t,e,r){"use strict";var n=t("../utils"),i=t("../support"),o=t("./ArrayReader"),a=t("./StringReader"),s=t("./NodeBufferReader"),u=t("./Uint8ArrayReader");e.exports=function(t){var e=n.getTypeOf(t);return n.checkSupport(e),"string"!==e||i.uint8array?"nodebuffer"===e?new s(t):i.uint8array?new u(n.transformTo("uint8array",t)):new o(n.transformTo("array",t)):new a(t)}},{"../support":67,"../utils":69,"./ArrayReader":54,"./NodeBufferReader":56,"./StringReader":57,"./Uint8ArrayReader":58}],60:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],61:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../utils");function o(t){n.call(this,"ConvertWorker to "+t),this.destType=t}i.inherits(o,n),o.prototype.processChunk=function(t){this.push({data:i.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":69,"./GenericWorker":65}],62:[function(t,e,r){"use strict";var n=t("./GenericWorker"),i=t("../crc32");function o(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,n),o.prototype.processChunk=function(t){this.streamInfo.crc32=i(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":41,"../utils":69,"./GenericWorker":65}],63:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}n.inherits(o,i),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}i.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":69,"./GenericWorker":65}],64:[function(t,e,r){"use strict";var n=t("../utils"),i=t("./GenericWorker");function o(t){i.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=n.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}n.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":69,"./GenericWorker":65}],65:[function(t,e,r){"use strict";function n(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=n},{}],66:[function(t,e,r){(function(r){"use strict";var n=t("../utils"),i=t("./ConvertWorker"),o=t("./GenericWorker"),a=t("../base64"),s=t("../support"),u=t("../external"),l=null;if(s.nodestream)try{l=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function c(t,e){var n,i=0,o=null,a=0;for(n=0;n<e.length;n++)a+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(o=new Uint8Array(a),n=0;n<e.length;n++)o.set(e[n],i),i+=e[n].length;return o;case"nodebuffer":return r.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}function h(t,e){return new u.Promise((function(r,i){var o=[],s=t._internalType,u=t._outputType,l=t._mimeType;t.on("data",(function(t,r){o.push(t),e&&e(r)})).on("error",(function(t){o=[],i(t)})).on("end",(function(){try{var t=function(t,e,r,i){var o=null;switch(t){case"blob":return n.newBlob(r,i);case"base64":return o=c(e,r),a.encode(o);default:return o=c(e,r),n.transformTo(t,o)}}(u,s,o,l);r(t)}catch(t){i(t)}o=[]})).resume()}))}function f(t,e,r){var a=e;switch(e){case"blob":a="arraybuffer";break;case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=e,this._mimeType=r,n.checkSupport(a),this._worker=t.pipe(new i(a)),t.lock()}catch(t){this._worker=new o("error"),this._worker.error(t)}}f.prototype={accumulate:function(t){return h(this,t)},on:function(t,e){var r=this;return"data"===t?this._worker.on(t,(function(t){e.call(r,t.data,t.meta)})):this._worker.on(t,(function(){n.delay(e,arguments,r)})),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(n.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},t)}},e.exports=f}).call(this,t("buffer").Buffer)},{"../base64":38,"../external":43,"../nodejs/NodejsStreamOutputAdapter":50,"../support":67,"../utils":69,"./ConvertWorker":61,"./GenericWorker":65,buffer:4}],67:[function(t,e,r){(function(e){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==e,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var n=new ArrayBuffer(0);try{r.blob=0===new Blob([n],{type:"application/zip"}).size}catch(t){try{var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);i.append(n),r.blob=0===i.getBlob("application/zip").size}catch(t){r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch(t){r.nodestream=!1}}).call(this,t("buffer").Buffer)},{buffer:4,"readable-stream":53}],68:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),o=t("./nodejsUtils"),a=t("./stream/GenericWorker"),s=new Array(256),u=0;u<256;u++)s[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;function l(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,r.utf8encode=function(t){return i.nodebuffer?o.newBuffer(t,"utf-8"):function(t){var e,r,n,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(u):new Array(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(n=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e}(t)},r.utf8decode=function(t){return i.nodebuffer?n.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,r,i,o,a=t.length,u=new Array(2*a);for(r=0,e=0;e<a;)if((i=t[e++])<128)u[r++]=i;else if((o=s[i])>4)u[r++]=65533,e+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&e<a;)i=i<<6|63&t[e++],o--;o>1?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return u.length!==r&&(u.subarray?u=u.subarray(0,r):u.length=r),n.applyFromCharCode(u)}(t=n.transformTo(i.uint8array?"uint8array":"array",t))},n.inherits(l,a),l.prototype.processChunk=function(t){var e=n.transformTo(i.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+s[t[r]]>e?r:e}(e),u=e;a!==e.length&&(i.uint8array?(u=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(u=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:r.utf8decode(u),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=l,n.inherits(c,a),c.prototype.processChunk=function(t){this.push({data:r.utf8encode(t.data),meta:t.meta})},r.Utf8EncodeWorker=c},{"./nodejsUtils":51,"./stream/GenericWorker":65,"./support":67,"./utils":69}],69:[function(t,e,r){"use strict";var n=t("./support"),i=t("./base64"),o=t("./nodejsUtils"),a=t("core-js/library/fn/set-immediate"),s=t("./external");function u(t){return t}function l(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}r.newBlob=function(t,e){r.checkSupport("blob");try{return new Blob(t,{type:e})}catch(r){try{for(var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder),i=0;i<t.length;i++)n.append(t[i]);return n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(t,e,r){var n=[],i=0,o=t.length;if(o<=r)return String.fromCharCode.apply(null,t);for(;i<o;)"array"===e||"nodebuffer"===e?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,o)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,o)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&1===String.fromCharCode.apply(null,o.newBuffer(1)).length}catch(t){return!1}}()}};function h(t){var e=65536,n=r.getTypeOf(t),i=!0;if("uint8array"===n?i=c.applyCanBeUsed.uint8array:"nodebuffer"===n&&(i=c.applyCanBeUsed.nodebuffer),i)for(;e>1;)try{return c.stringifyByChunk(t,n,e)}catch(t){e=Math.floor(e/2)}return c.stringifyByChar(t)}function f(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}r.applyFromCharCode=h;var p={};p.string={string:u,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return p.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,o.newBuffer(t.length))}},p.array={string:h,array:u,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBuffer(t)}},p.arraybuffer={string:function(t){return h(new Uint8Array(t))},array:function(t){return f(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:u,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBuffer(new Uint8Array(t))}},p.uint8array={string:h,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){var e=new Uint8Array(t.length);return t.length&&e.set(t,0),e.buffer},uint8array:u,nodebuffer:function(t){return o.newBuffer(t)}},p.nodebuffer={string:h,array:function(t){return f(t,new Array(t.length))},arraybuffer:function(t){return p.nodebuffer.uint8array(t).buffer},uint8array:function(t){return f(t,new Uint8Array(t.length))},nodebuffer:u},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return p[n][t](e)},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":n.nodebuffer&&o.isBuffer(t)?"nodebuffer":n.uint8array&&t instanceof Uint8Array?"uint8array":n.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!n[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e,r,n="";for(r=0;r<(t||"").length;r++)n+="\\x"+((e=t.charCodeAt(r))<16?"0":"")+e.toString(16).toUpperCase();return n},r.delay=function(t,e,r){a((function(){t.apply(r||null,e||[])}))},r.inherits=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r},r.extend=function(){var t,e,r={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===r[e]&&(r[e]=arguments[t][e]);return r},r.prepareContent=function(t,e,o,a,u){return s.Promise.resolve(e).then((function(t){return n.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new s.Promise((function(e,r){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){r(t.target.error)},n.readAsArrayBuffer(t)})):t})).then((function(e){var c,h=r.getTypeOf(e);return h?("arraybuffer"===h?e=r.transformTo("uint8array",e):"string"===h&&(u?e=i.decode(e):o&&!0!==a&&(e=l(c=e,n.uint8array?new Uint8Array(c.length):new Array(c.length)))),e):s.Promise.reject(new Error("The data of '"+t+"' is in an unsupported format !"))}))}},{"./base64":38,"./external":43,"./nodejsUtils":51,"./support":67,"core-js/library/fn/set-immediate":5}],70:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),o=t("./signature"),a=t("./zipEntry"),s=(t("./utf8"),t("./support"));function u(t){this.files=[],this.loadOptions=t}u.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug : unexpected signature ("+i.pretty(e)+", expected "+i.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4)===e;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=s.uint8array?"uint8array":"array",r=i.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,r,n=this.zip64EndOfCentralSize-44;0<n;)t=this.reader.readInt(2),e=this.reader.readInt(4),r=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip : can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=e-r;if(n>0)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(t){this.reader=n(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=u},{"./reader/readerFor":59,"./signature":60,"./support":67,"./utf8":68,"./utils":69,"./zipEntry":71}],71:[function(t,e,r){"use strict";var n=t("./reader/readerFor"),i=t("./utils"),o=t("./compressedObject"),a=t("./crc32"),s=t("./utf8"),u=t("./compressions"),l=t("./support");function c(t,e){this.options=t,this.loadOptions=e}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in u)if(u.hasOwnProperty(e)&&u[e].magic===t)return u[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,r,n,i=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<i;)e=t.readInt(2),r=t.readInt(2),n=t.readData(r),this.extraFields[e]={id:e,length:r,value:n}},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var r=i.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var o=i.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=n(t.value);return 1!==e.readInt(1)||a(this.fileName)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=n(t.value);return 1!==e.readInt(1)||a(this.fileComment)!==e.readInt(4)?null:s.utf8decode(e.readData(t.length-5))}return null}},e.exports=c},{"./compressedObject":39,"./compressions":40,"./crc32":41,"./reader/readerFor":59,"./support":67,"./utf8":68,"./utils":69}],72:[function(t,e,r){"use strict";var n=t("./stream/StreamHelper"),i=t("./stream/DataWorker"),o=t("./utf8"),a=t("./compressedObject"),s=t("./stream/GenericWorker"),u=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};u.prototype={internalStream:function(t){var e=t.toLowerCase(),r="string"===e||"text"===e;"binarystring"!==e&&"text"!==e||(e="string");var i=this._decompressWorker(),a=!this._dataBinary;return a&&!r&&(i=i.pipe(new o.Utf8EncodeWorker)),!a&&r&&(i=i.pipe(new o.Utf8DecodeWorker)),new n(i,e,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof s?this._data:new i(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)u.prototype[l[h]]=c;e.exports=u},{"./compressedObject":39,"./stream/DataWorker":64,"./stream/GenericWorker":65,"./stream/StreamHelper":66,"./utf8":68}],73:[function(t,e,r){"use strict";var n=t("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,t!==i&&d(this,t)}function h(t,e,r){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){n((function(){var n;try{n=e(r)}catch(e){return o.reject(t,e)}n===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,n)}))}function p(t){var e=t&&t.then;if(t&&"object"===u(t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,o.reject(t,e))}function i(e){r||(r=!0,o.resolve(t,e))}var a=g((function(){e(i,n)}));"error"===a.status&&n(a.value)}function g(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!=typeof t&&this.state===s||"function"!=typeof e&&this.state===a)return this;var r=new this.constructor(i);return this.state!==l?f(r,this.state===s?t:e,this.outcome):this.queue.push(new h(r,t,e)),r},h.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},h.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},h.prototype.callRejected=function(t){o.reject(this.promise,t)},h.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},o.resolve=function(t,e){var r=g(p,e);if("error"===r.status)return o.reject(t,r.value);var n=r.value;if(n)d(t,n);else{t.state=s,t.outcome=e;for(var i=-1,a=t.queue.length;++i<a;)t.queue[i].callFulfilled(e)}return t},o.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=function(t){return t instanceof this?t:o.resolve(new this(i),t)},c.reject=function(t){var e=new this(i);return o.reject(e,t)},c.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),s=0,u=-1,l=new this(i);++u<r;)c(t[u],u);return l;function c(t,i){e.resolve(t).then((function(t){a[i]=t,++s!==r||n||(n=!0,o.resolve(l,a))}),(function(t){n||(n=!0,o.reject(l,t))}))}},c.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a,s=-1,u=new this(i);++s<r;)a=t[s],e.resolve(a).then((function(t){n||(n=!0,o.resolve(u,t))}),(function(t){n||(n=!0,o.reject(u,t))}));return u}},{immediate:34}],74:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":75,"./lib/inflate":76,"./lib/utils/common":77,"./lib/zlib/constants":80}],75:[function(t,e,r){"use strict";var n=t("./zlib/deflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/messages"),s=t("./zlib/zstream"),u=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var r=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(a[r]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var c;if(c="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,0!==(r=n.deflateSetDictionary(this.strm,c)))throw new Error(a[r]);this._dict_set=!0}}function c(t,e){var r=new l(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}l.prototype.push=function(t,e){var r,a,s=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?s.input=o.string2buf(t):"[object ArrayBuffer]"===u.call(t)?s.input=new Uint8Array(t):s.input=t,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(l),s.next_out=0,s.avail_out=l),1!==(r=n.deflate(s,a))&&0!==r)return this.onEnd(r),this.ended=!0,!1;0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((s.avail_in>0||0===s.avail_out)&&1!==r);return 4===a?(r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,0===r):2!==a||(this.onEnd(0),s.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=l,r.deflate=c,r.deflateRaw=function(t,e){return(e=e||{}).raw=!0,c(t,e)},r.gzip=function(t,e){return(e=e||{}).gzip=!0,c(t,e)}},{"./utils/common":77,"./utils/strings":78,"./zlib/deflate":82,"./zlib/messages":87,"./zlib/zstream":89}],76:[function(t,e,r){"use strict";var n=t("./zlib/inflate"),i=t("./utils/common"),o=t("./utils/strings"),a=t("./zlib/constants"),s=t("./zlib/messages"),u=t("./zlib/zstream"),l=t("./zlib/gzheader"),c=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=n.inflateInit2(this.strm,e.windowBits);if(r!==a.Z_OK)throw new Error(s[r]);this.header=new l,n.inflateGetHeader(this.strm,this.header)}function f(t,e){var r=new h(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}h.prototype.push=function(t,e){var r,s,u,l,h,f,p=this.strm,d=this.options.chunkSize,g=this.options.dictionary,y=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?p.input=o.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(d),p.next_out=0,p.avail_out=d),(r=n.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&g&&(f="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===c.call(g)?new Uint8Array(g):g,r=n.inflateSetDictionary(this.strm,f)),r===a.Z_BUF_ERROR&&!0===y&&(r=a.Z_OK,y=!1),r!==a.Z_STREAM_END&&r!==a.Z_OK)return this.onEnd(r),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&r!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(u=o.utf8border(p.output,p.next_out),l=p.next_out-u,h=o.buf2string(p.output,u),p.next_out=l,p.avail_out=d-l,l&&i.arraySet(p.output,p.output,u,l,0),this.onData(h)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(y=!0)}while((p.avail_in>0||0===p.avail_out)&&r!==a.Z_STREAM_END);return r===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),p.avail_out=0,!0)},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=h,r.inflate=f,r.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},r.ungzip=f},{"./utils/common":77,"./utils/strings":78,"./zlib/constants":80,"./zlib/gzheader":83,"./zlib/inflate":85,"./zlib/messages":87,"./zlib/zstream":89}],77:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!==u(r))throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){var e,r,n,i,o,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,r,n,i){for(var o=0;o<n;o++)t[i+o]=e[r+o]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],78:[function(t,e,r){"use strict";var n=t("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new n.Buf8(256),s=0;s<256;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;function u(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var r="",a=0;a<e;a++)r+=String.fromCharCode(t[a]);return r}a[254]=a[254]=1,r.string2buf=function(t){var e,r,i,o,a,s=t.length,u=0;for(o=0;o<s;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),u+=r<128?1:r<2048?2:r<65536?3:4;for(e=new n.Buf8(u),a=0,o=0;a<u;o++)55296==(64512&(r=t.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=t.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(i-56320),o++),r<128?e[a++]=r:r<2048?(e[a++]=192|r>>>6,e[a++]=128|63&r):r<65536?(e[a++]=224|r>>>12,e[a++]=128|r>>>6&63,e[a++]=128|63&r):(e[a++]=240|r>>>18,e[a++]=128|r>>>12&63,e[a++]=128|r>>>6&63,e[a++]=128|63&r);return e},r.buf2binstring=function(t){return u(t,t.length)},r.binstring2buf=function(t){for(var e=new n.Buf8(t.length),r=0,i=e.length;r<i;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,n,i,o,s=e||t.length,l=new Array(2*s);for(n=0,r=0;r<s;)if((i=t[r++])<128)l[n++]=i;else if((o=a[i])>4)l[n++]=65533,r+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&r<s;)i=i<<6|63&t[r++],o--;o>1?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return u(l,n)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0||0===r?e:r+a[t[r]]>e?r:e}},{"./common":77}],79:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+e[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},{}],80:[function(t,e,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],81:[function(t,e,r){"use strict";var n=function(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}();e.exports=function(t,e,r,i){var o=n,a=i+r;t^=-1;for(var s=i;s<a;s++)t=t>>>8^o[255&(t^e[s])];return-1^t}},{}],82:[function(t,e,r){"use strict";var n,i=t("../utils/common"),o=t("./trees"),a=t("./adler32"),s=t("./crc32"),u=t("./messages");function l(t,e){return t.msg=u[e],e}function c(t){return(t<<1)-(t>4?9:0)}function h(t){for(var e=t.length;--e>=0;)t[e]=0}function f(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(i.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function p(t,e){o._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,f(t.strm)}function d(t,e){t.pending_buf[t.pending++]=e}function g(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function y(t,e){var r,n,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,l=t.window,c=t.w_mask,h=t.prev,f=t.strstart+258,p=l[o+a-1],d=l[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(l[(r=e)+a]===d&&l[r+a-1]===p&&l[r]===l[o]&&l[++r]===l[o+1]){o+=2,r++;do{}while(l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&l[++o]===l[++r]&&o<f);if(n=258-(f-o),o=f-258,n>a){if(t.match_start=e,a=n,n>=s)break;p=l[o+a-1],d=l[o+a]}}}while((e=h[e&c])>u&&0!=--i);return a<=t.lookahead?a:t.lookahead}function _(t){var e,r,n,o,u,l,c,h,f,p,d=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=d+(d-262)){i.arraySet(t.window,t.window,d,d,0),t.match_start-=d,t.strstart-=d,t.block_start-=d,e=r=t.hash_size;do{n=t.head[--e],t.head[e]=n>=d?n-d:0}while(--r);e=r=d;do{n=t.prev[--e],t.prev[e]=n>=d?n-d:0}while(--r);o+=d}if(0===t.strm.avail_in)break;if(l=t.strm,c=t.window,h=t.strstart+t.lookahead,f=o,p=void 0,(p=l.avail_in)>f&&(p=f),r=0===p?0:(l.avail_in-=p,i.arraySet(c,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=a(l.adler,c,p,h):2===l.state.wrap&&(l.adler=s(l.adler,c,p,h)),l.next_in+=p,l.total_in+=p,p),t.lookahead+=r,t.lookahead+t.insert>=3)for(u=t.strstart-t.insert,t.ins_h=t.window[u],t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[u+3-1])&t.hash_mask,t.prev[u&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=u,u++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function v(t,e){for(var r,n;;){if(t.lookahead<262){if(_(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r)),t.match_length>=3)if(n=o._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function m(t,e){for(var r,n,i;;){if(t.lookahead<262){if(_(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(r=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-262&&(t.match_length=y(t,r),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,n=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,n&&(p(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((n=o._tr_tally(t,0,t.window[t.strstart-1]))&&p(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}function b(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(1146),this.dyn_dtree=new i.Buf16(122),this.bl_tree=new i.Buf16(78),h(this.dyn_ltree),h(this.dyn_dtree),h(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(16),this.heap=new i.Buf16(573),h(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(573),h(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function x(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,o._tr_init(e),0):l(t,-2)}function S(t){var e,r=x(t);return 0===r&&((e=t.state).window_size=2*e.w_size,h(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0),r}function E(t,e,r,n,o,a){if(!t)return-2;var s=1;if(-1===e&&(e=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),o<1||o>9||8!==r||n<8||n>15||e<0||e>9||a<0||a>4)return l(t,-2);8===n&&(n=9);var u=new w;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=n,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new i.Buf8(2*u.w_size),u.head=new i.Buf16(u.hash_size),u.prev=new i.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new i.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=r,S(t)}n=[new b(0,0,0,0,(function(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,p(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(p(t,!1),t.strm.avail_out),1)})),new b(4,4,8,4,v),new b(4,5,16,8,v),new b(4,6,32,32,v),new b(4,4,16,16,m),new b(8,16,32,32,m),new b(8,16,128,128,m),new b(8,32,128,256,m),new b(32,128,258,1024,m),new b(32,258,258,4096,m)],r.deflateInit=function(t,e){return E(t,e,8,15,8,0)},r.deflateInit2=E,r.deflateReset=S,r.deflateResetKeep=x,r.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2},r.deflate=function(t,e){var r,i,a,u;if(!t||!t.state||e>5||e<0)return t?l(t,-2):-2;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||666===i.status&&4!==e)return l(t,0===t.avail_out?-5:-2);if(i.strm=t,r=i.last_flush,i.last_flush=e,42===i.status)if(2===i.wrap)t.adler=0,d(i,31),d(i,139),d(i,8),i.gzhead?(d(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),d(i,255&i.gzhead.time),d(i,i.gzhead.time>>8&255),d(i,i.gzhead.time>>16&255),d(i,i.gzhead.time>>24&255),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(d(i,255&i.gzhead.extra.length),d(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=s(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(d(i,0),d(i,0),d(i,0),d(i,0),d(i,0),d(i,9===i.level?2:i.strategy>=2||i.level<2?4:0),d(i,3),i.status=113);else{var y=8+(i.w_bits-8<<4)<<8;y|=(i.strategy>=2||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(y|=32),y+=31-y%31,i.status=113,g(i,y),0!==i.strstart&&(g(i,t.adler>>>16),g(i,65535&t.adler)),t.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending!==i.pending_buf_size));)d(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),f(t),a=i.pending,i.pending===i.pending_buf_size)){u=1;break}u=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,d(i,u)}while(0!==u);i.gzhead.hcrc&&i.pending>a&&(t.adler=s(t.adler,i.pending_buf,i.pending-a,a)),0===u&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&f(t),i.pending+2<=i.pending_buf_size&&(d(i,255&t.adler),d(i,t.adler>>8&255),t.adler=0,i.status=113)):i.status=113),0!==i.pending){if(f(t),0===t.avail_out)return i.last_flush=-1,0}else if(0===t.avail_in&&c(e)<=c(r)&&4!==e)return l(t,-5);if(666===i.status&&0!==t.avail_in)return l(t,-5);if(0!==t.avail_in||0!==i.lookahead||0!==e&&666!==i.status){var v=2===i.strategy?function(t,e){for(var r;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):3===i.strategy?function(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=258){if(_(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(n=s[i=t.strstart-1])===s[++i]&&n===s[++i]&&n===s[++i]){a=t.strstart+258;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=258-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(r=o._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(p(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(p(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(p(t,!1),0===t.strm.avail_out)?1:2}(i,e):n[i.level].func(i,e);if(3!==v&&4!==v||(i.status=666),1===v||3===v)return 0===t.avail_out&&(i.last_flush=-1),0;if(2===v&&(1===e?o._tr_align(i):5!==e&&(o._tr_stored_block(i,0,0,!1),3===e&&(h(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),f(t),0===t.avail_out))return i.last_flush=-1,0}return 4!==e?0:i.wrap<=0?1:(2===i.wrap?(d(i,255&t.adler),d(i,t.adler>>8&255),d(i,t.adler>>16&255),d(i,t.adler>>24&255),d(i,255&t.total_in),d(i,t.total_in>>8&255),d(i,t.total_in>>16&255),d(i,t.total_in>>24&255)):(g(i,t.adler>>>16),g(i,65535&t.adler)),f(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?0:1)},r.deflateEnd=function(t){var e;return t&&t.state?42!==(e=t.state.status)&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?l(t,-2):(t.state=null,113===e?l(t,-3):0):-2},r.deflateSetDictionary=function(t,e){var r,n,o,s,u,l,c,f,p=e.length;if(!t||!t.state)return-2;if(2===(s=(r=t.state).wrap)||1===s&&42!==r.status||r.lookahead)return-2;for(1===s&&(t.adler=a(t.adler,e,p,0)),r.wrap=0,p>=r.w_size&&(0===s&&(h(r.head),r.strstart=0,r.block_start=0,r.insert=0),f=new i.Buf8(r.w_size),i.arraySet(f,e,p-r.w_size,r.w_size,0),e=f,p=r.w_size),u=t.avail_in,l=t.next_in,c=t.input,t.avail_in=p,t.next_in=0,t.input=e,_(r);r.lookahead>=3;){n=r.strstart,o=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[n+3-1])&r.hash_mask,r.prev[n&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=n,n++}while(--o);r.strstart=n,r.lookahead=2,_(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=l,t.input=c,t.avail_in=u,r.wrap=s,0},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":77,"./adler32":79,"./crc32":81,"./messages":87,"./trees":88}],83:[function(t,e,r){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],84:[function(t,e,r){"use strict";e.exports=function(t,e){var r,n,i,o,a,s,u,l,c,h,f,p,d,g,y,_,v,m,b,w,x,S,E,O,M;r=t.state,n=t.next_in,O=t.input,i=n+(t.avail_in-5),o=t.next_out,M=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=r.dmax,l=r.wsize,c=r.whave,h=r.wnext,f=r.window,p=r.hold,d=r.bits,g=r.lencode,y=r.distcode,_=(1<<r.lenbits)-1,v=(1<<r.distbits)-1;t:do{d<15&&(p+=O[n++]<<d,d+=8,p+=O[n++]<<d,d+=8),m=g[p&_];e:for(;;){if(p>>>=b=m>>>24,d-=b,0==(b=m>>>16&255))M[o++]=65535&m;else{if(!(16&b)){if(0==(64&b)){m=g[(65535&m)+(p&(1<<b)-1)];continue e}if(32&b){r.mode=12;break t}t.msg="invalid literal/length code",r.mode=30;break t}w=65535&m,(b&=15)&&(d<b&&(p+=O[n++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=O[n++]<<d,d+=8,p+=O[n++]<<d,d+=8),m=y[p&v];r:for(;;){if(p>>>=b=m>>>24,d-=b,!(16&(b=m>>>16&255))){if(0==(64&b)){m=y[(65535&m)+(p&(1<<b)-1)];continue r}t.msg="invalid distance code",r.mode=30;break t}if(x=65535&m,d<(b&=15)&&(p+=O[n++]<<d,(d+=8)<b&&(p+=O[n++]<<d,d+=8)),(x+=p&(1<<b)-1)>u){t.msg="invalid distance too far back",r.mode=30;break t}if(p>>>=b,d-=b,x>(b=o-a)){if((b=x-b)>c&&r.sane){t.msg="invalid distance too far back",r.mode=30;break t}if(S=0,E=f,0===h){if(S+=l-b,b<w){w-=b;do{M[o++]=f[S++]}while(--b);S=o-x,E=M}}else if(h<b){if(S+=l+h-b,(b-=h)<w){w-=b;do{M[o++]=f[S++]}while(--b);if(S=0,h<w){w-=b=h;do{M[o++]=f[S++]}while(--b);S=o-x,E=M}}}else if(S+=h-b,b<w){w-=b;do{M[o++]=f[S++]}while(--b);S=o-x,E=M}for(;w>2;)M[o++]=E[S++],M[o++]=E[S++],M[o++]=E[S++],w-=3;w&&(M[o++]=E[S++],w>1&&(M[o++]=E[S++]))}else{S=o-x;do{M[o++]=M[S++],M[o++]=M[S++],M[o++]=M[S++],w-=3}while(w>2);w&&(M[o++]=M[S++],w>1&&(M[o++]=M[S++]))}break}}break}}while(n<i&&o<s);n-=w=d>>3,p&=(1<<(d-=w<<3))-1,t.next_in=n,t.next_out=o,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=o<s?s-o+257:257-(o-s),r.hold=p,r.bits=d}},{}],85:[function(t,e,r){"use strict";var n=t("../utils/common"),i=t("./adler32"),o=t("./crc32"),a=t("./inffast"),s=t("./inftrees");function u(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function c(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(852),e.distcode=e.distdyn=new n.Buf32(592),e.sane=1,e.back=-1,0):-2}function h(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,c(t)):-2}function f(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,h(t))):-2}function p(t,e){var r,n;return t?(n=new l,t.state=n,n.window=null,0!==(r=f(t,e))&&(t.state=null),r):-2}var d,g,y=!0;function _(t){if(y){var e;for(d=new n.Buf32(512),g=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,d,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,g,0,t.work,{bits:5}),y=!1}t.lencode=d,t.lenbits=9,t.distcode=g,t.distbits=5}function v(t,e,r,i){var o,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new n.Buf8(a.wsize)),i>=a.wsize?(n.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((o=a.wsize-a.wnext)>i&&(o=i),n.arraySet(a.window,e,r-i,o,a.wnext),(i-=o)?(n.arraySet(a.window,e,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}r.inflateReset=h,r.inflateReset2=f,r.inflateResetKeep=c,r.inflateInit=function(t){return p(t,15)},r.inflateInit2=p,r.inflate=function(t,e){var r,l,c,h,f,p,d,g,y,m,b,w,x,S,E,O,M,P,T,C,I,R,L,A,k=0,F=new n.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;12===(r=t.state).mode&&(r.mode=13),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,g=r.hold,y=r.bits,m=p,b=d,R=0;t:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(2&r.wrap&&35615===g){r.check=0,F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0),g=0,y=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){t.msg="incorrect header check",r.mode=30;break}if(8!=(15&g)){t.msg="unknown compression method",r.mode=30;break}if(y-=4,I=8+(15&(g>>>=4)),0===r.wbits)r.wbits=I;else if(I>r.wbits){t.msg="invalid window size",r.mode=30;break}r.dmax=1<<I,t.adler=r.check=1,r.mode=512&g?10:12,g=0,y=0;break;case 2:for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(r.flags=g,8!=(255&r.flags)){t.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0)),g=0,y=0,r.mode=3;case 3:for(;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.head&&(r.head.time=g),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,F[2]=g>>>16&255,F[3]=g>>>24&255,r.check=o(r.check,F,4,0)),g=0,y=0,r.mode=4;case 4:for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0)),g=0,y=0,r.mode=5;case 5:if(1024&r.flags){for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(F[0]=255&g,F[1]=g>>>8&255,r.check=o(r.check,F,2,0)),g=0,y=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((w=r.length)>p&&(w=p),w&&(r.head&&(I=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,l,h,w,I)),512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,r.length-=w),r.length))break t;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===p)break t;w=0;do{I=l[h+w++],r.head&&I&&r.length<65536&&(r.head.name+=String.fromCharCode(I))}while(I&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,I)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===p)break t;w=0;do{I=l[h+w++],r.head&&I&&r.length<65536&&(r.head.comment+=String.fromCharCode(I))}while(I&&w<p);if(512&r.flags&&(r.check=o(r.check,l,w,h)),p-=w,h+=w,I)break t}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;y<16;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(g!==(65535&r.check)){t.msg="header crc mismatch",r.mode=30;break}g=0,y=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=12;break;case 10:for(;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}t.adler=r.check=u(g),g=0,y=0,r.mode=11;case 11:if(0===r.havedict)return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=g,r.bits=y,2;t.adler=r.check=1,r.mode=12;case 12:if(5===e||6===e)break t;case 13:if(r.last){g>>>=7&y,y-=7&y,r.mode=27;break}for(;y<3;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}switch(r.last=1&g,y-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(_(r),r.mode=20,6===e){g>>>=2,y-=2;break t}break;case 2:r.mode=17;break;case 3:t.msg="invalid block type",r.mode=30}g>>>=2,y-=2;break;case 14:for(g>>>=7&y,y-=7&y;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if((65535&g)!=(g>>>16^65535)){t.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&g,g=0,y=0,r.mode=15,6===e)break t;case 15:r.mode=16;case 16:if(w=r.length){if(w>p&&(w=p),w>d&&(w=d),0===w)break t;n.arraySet(c,l,h,w,f),p-=w,h+=w,d-=w,f+=w,r.length-=w;break}r.mode=12;break;case 17:for(;y<14;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(r.nlen=257+(31&g),g>>>=5,y-=5,r.ndist=1+(31&g),g>>>=5,y-=5,r.ncode=4+(15&g),g>>>=4,y-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;y<3;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.lens[j[r.have++]]=7&g,g>>>=3,y-=3}for(;r.have<19;)r.lens[j[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,L={bits:r.lenbits},R=s(0,r.lens,0,19,r.lencode,0,r.work,L),r.lenbits=L.bits,R){t.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;O=(k=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&k,!((E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(M<16)g>>>=E,y-=E,r.lens[r.have++]=M;else{if(16===M){for(A=E+2;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(g>>>=E,y-=E,0===r.have){t.msg="invalid bit length repeat",r.mode=30;break}I=r.lens[r.have-1],w=3+(3&g),g>>>=2,y-=2}else if(17===M){for(A=E+3;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}y-=E,I=0,w=3+(7&(g>>>=E)),g>>>=3,y-=3}else{for(A=E+7;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}y-=E,I=0,w=11+(127&(g>>>=E)),g>>>=7,y-=7}if(r.have+w>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=30;break}for(;w--;)r.lens[r.have++]=I}}if(30===r.mode)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,L={bits:r.lenbits},R=s(1,r.lens,0,r.nlen,r.lencode,0,r.work,L),r.lenbits=L.bits,R){t.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,L={bits:r.distbits},R=s(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,L),r.distbits=L.bits,R){t.msg="invalid distances set",r.mode=30;break}if(r.mode=20,6===e)break t;case 20:r.mode=21;case 21:if(p>=6&&d>=258){t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=g,r.bits=y,a(t,b),f=t.next_out,c=t.output,d=t.avail_out,h=t.next_in,l=t.input,p=t.avail_in,g=r.hold,y=r.bits,12===r.mode&&(r.back=-1);break}for(r.back=0;O=(k=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&k,!((E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(O&&0==(240&O)){for(P=E,T=O,C=M;O=(k=r.lencode[C+((g&(1<<P+T)-1)>>P)])>>>16&255,M=65535&k,!(P+(E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}g>>>=P,y-=P,r.back+=P}if(g>>>=E,y-=E,r.back+=E,r.length=M,0===O){r.mode=26;break}if(32&O){r.back=-1,r.mode=12;break}if(64&O){t.msg="invalid literal/length code",r.mode=30;break}r.extra=15&O,r.mode=22;case 22:if(r.extra){for(A=r.extra;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;O=(k=r.distcode[g&(1<<r.distbits)-1])>>>16&255,M=65535&k,!((E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(0==(240&O)){for(P=E,T=O,C=M;O=(k=r.distcode[C+((g&(1<<P+T)-1)>>P)])>>>16&255,M=65535&k,!(P+(E=k>>>24)<=y);){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}g>>>=P,y-=P,r.back+=P}if(g>>>=E,y-=E,r.back+=E,64&O){t.msg="invalid distance code",r.mode=30;break}r.offset=M,r.extra=15&O,r.mode=24;case 24:if(r.extra){for(A=r.extra;y<A;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,y-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(0===d)break t;if(w=b-d,r.offset>w){if((w=r.offset-w)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=30;break}w>r.wnext?(w-=r.wnext,x=r.wsize-w):x=r.wnext-w,w>r.length&&(w=r.length),S=r.window}else S=c,x=f-r.offset,w=r.length;w>d&&(w=d),d-=w,r.length-=w;do{c[f++]=S[x++]}while(--w);0===r.length&&(r.mode=21);break;case 26:if(0===d)break t;c[f++]=r.length,d--,r.mode=21;break;case 27:if(r.wrap){for(;y<32;){if(0===p)break t;p--,g|=l[h++]<<y,y+=8}if(b-=d,t.total_out+=b,r.total+=b,b&&(t.adler=r.check=r.flags?o(r.check,c,b,f-b):i(r.check,c,b,f-b)),b=d,(r.flags?g:u(g))!==r.check){t.msg="incorrect data check",r.mode=30;break}g=0,y=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;y<32;){if(0===p)break t;p--,g+=l[h++]<<y,y+=8}if(g!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=30;break}g=0,y=0}r.mode=29;case 29:R=1;break t;case 30:R=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=f,t.avail_out=d,t.next_in=h,t.avail_in=p,r.hold=g,r.bits=y,(r.wsize||b!==t.avail_out&&r.mode<30&&(r.mode<27||4!==e))&&v(t,t.output,t.next_out,b-t.avail_out)?(r.mode=31,-4):(m-=t.avail_in,b-=t.avail_out,t.total_in+=m,t.total_out+=b,r.total+=b,r.wrap&&b&&(t.adler=r.check=r.flags?o(r.check,c,b,t.next_out-b):i(r.check,c,b,t.next_out-b)),t.data_type=r.bits+(r.last?64:0)+(12===r.mode?128:0)+(20===r.mode||15===r.mode?256:0),(0===m&&0===b||4===e)&&0===R&&(R=-5),R)},r.inflateEnd=function(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0},r.inflateGetHeader=function(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?-2:(r.head=e,e.done=!1,0):-2},r.inflateSetDictionary=function(t,e){var r,n=e.length;return t&&t.state?0!==(r=t.state).wrap&&11!==r.mode?-2:11===r.mode&&i(1,e,n,0)!==r.check?-3:v(t,e,n,n)?(r.mode=31,-4):(r.havedict=1,0):-2},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":77,"./adler32":79,"./crc32":81,"./inffast":84,"./inftrees":86}],86:[function(t,e,r){"use strict";var n=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,r,u,l,c,h,f){var p,d,g,y,_,v,m,b,w,x=f.bits,S=0,E=0,O=0,M=0,P=0,T=0,C=0,I=0,R=0,L=0,A=null,k=0,F=new n.Buf16(16),j=new n.Buf16(16),N=null,D=0;for(S=0;S<=15;S++)F[S]=0;for(E=0;E<u;E++)F[e[r+E]]++;for(P=x,M=15;M>=1&&0===F[M];M--);if(P>M&&(P=M),0===M)return l[c++]=20971520,l[c++]=20971520,f.bits=1,0;for(O=1;O<M&&0===F[O];O++);for(P<O&&(P=O),I=1,S=1;S<=15;S++)if(I<<=1,(I-=F[S])<0)return-1;if(I>0&&(0===t||1!==M))return-1;for(j[1]=0,S=1;S<15;S++)j[S+1]=j[S]+F[S];for(E=0;E<u;E++)0!==e[r+E]&&(h[j[e[r+E]]++]=E);if(0===t?(A=N=h,v=19):1===t?(A=i,k-=257,N=o,D-=257,v=256):(A=a,N=s,v=-1),L=0,E=0,S=O,_=c,T=P,C=0,g=-1,y=(R=1<<P)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){m=S-C,h[E]<v?(b=0,w=h[E]):h[E]>v?(b=N[D+h[E]],w=A[k+h[E]]):(b=96,w=0),p=1<<S-C,O=d=1<<T;do{l[_+(L>>C)+(d-=p)]=m<<24|b<<16|w|0}while(0!==d);for(p=1<<S-1;L&p;)p>>=1;if(0!==p?(L&=p-1,L+=p):L=0,E++,0==--F[S]){if(S===M)break;S=e[r+h[E]]}if(S>P&&(L&y)!==g){for(0===C&&(C=P),_+=O,I=1<<(T=S-C);T+C<M&&!((I-=F[T+C])<=0);)T++,I<<=1;if(R+=1<<T,1===t&&R>852||2===t&&R>592)return 1;l[g=L&y]=P<<24|T<<16|_-c|0}}return 0!==L&&(l[_+L]=S-C<<24|64<<16|0),f.bits=P,0}},{"../utils/common":77}],87:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],88:[function(t,e,r){"use strict";var n=t("../utils/common");function i(t){for(var e=t.length;--e>=0;)t[e]=0}var o=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],a=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],u=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],l=new Array(576);i(l);var c=new Array(60);i(c);var h=new Array(512);i(h);var f=new Array(256);i(f);var p=new Array(29);i(p);var d,g,y,_=new Array(30);function v(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function m(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function b(t){return t<256?h[t]:h[256+(t>>>7)]}function w(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function x(t,e,r){t.bi_valid>16-r?(t.bi_buf|=e<<t.bi_valid&65535,w(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=r-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function S(t,e,r){x(t,r[2*e],r[2*e+1])}function E(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function O(t,e,r){var n,i,o=new Array(16),a=0;for(n=1;n<=15;n++)o[n]=a=a+r[n-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=E(o[s]++,s))}}function M(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function P(t){t.bi_valid>8?w(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function T(t,e,r,n){var i=2*e,o=2*r;return t[i]<t[o]||t[i]===t[o]&&n[e]<=n[r]}function C(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&T(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!T(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function I(t,e,r){var n,i,s,u,l=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===n?S(t,i,e):(S(t,(s=f[i])+256+1,e),0!==(u=o[s])&&x(t,i-=p[s],u),S(t,s=b(--n),r),0!==(u=a[s])&&x(t,n-=_[s],u))}while(l<t.last_lit);S(t,256,e)}function R(t,e){var r,n,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=573,r=0;r<u;r++)0!==o[2*r]?(t.heap[++t.heap_len]=l=r,t.depth[r]=0):o[2*r+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=l,r=t.heap_len>>1;r>=1;r--)C(t,o,r);i=u;do{r=t.heap[1],t.heap[1]=t.heap[t.heap_len--],C(t,o,1),n=t.heap[1],t.heap[--t.heap_max]=r,t.heap[--t.heap_max]=n,o[2*i]=o[2*r]+o[2*n],t.depth[i]=(t.depth[r]>=t.depth[n]?t.depth[r]:t.depth[n])+1,o[2*r+1]=o[2*n+1]=i,t.heap[1]=i++,C(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var r,n,i,o,a,s,u=e.dyn_tree,l=e.max_code,c=e.stat_desc.static_tree,h=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,g=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,r=t.heap_max+1;r<573;r++)(o=u[2*u[2*(n=t.heap[r])+1]+1]+1)>d&&(o=d,g++),u[2*n+1]=o,n>l||(t.bl_count[o]++,a=0,n>=p&&(a=f[n-p]),s=u[2*n],t.opt_len+=s*(o+a),h&&(t.static_len+=s*(c[2*n+1]+a)));if(0!==g){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,g-=2}while(g>0);for(o=d;0!==o;o--)for(n=t.bl_count[o];0!==n;)(i=t.heap[--r])>l||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),n--)}}(t,e),O(o,l,t.bl_count)}function L(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)i=a,a=e[2*(n+1)+1],++s<u&&i===a||(s<l?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4))}function A(t,e,r){var n,i,o=-1,a=e[1],s=0,u=7,l=4;for(0===a&&(u=138,l=3),n=0;n<=r;n++)if(i=a,a=e[2*(n+1)+1],!(++s<u&&i===a)){if(s<l)do{S(t,i,t.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(S(t,i,t.bl_tree),s--),S(t,16,t.bl_tree),x(t,s-3,2)):s<=10?(S(t,17,t.bl_tree),x(t,s-3,3)):(S(t,18,t.bl_tree),x(t,s-11,7));s=0,o=i,0===a?(u=138,l=3):i===a?(u=6,l=3):(u=7,l=4)}}i(_);var k=!1;function F(t,e,r,i){x(t,0+(i?1:0),3),function(t,e,r,i){P(t),i&&(w(t,r),w(t,~r)),n.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}(t,e,r,!0)}r._tr_init=function(t){k||(function(){var t,e,r,n,i,u=new Array(16);for(r=0,n=0;n<28;n++)for(p[n]=r,t=0;t<1<<o[n];t++)f[r++]=n;for(f[r-1]=n,i=0,n=0;n<16;n++)for(_[n]=i,t=0;t<1<<a[n];t++)h[i++]=n;for(i>>=7;n<30;n++)for(_[n]=i<<7,t=0;t<1<<a[n]-7;t++)h[256+i++]=n;for(e=0;e<=15;e++)u[e]=0;for(t=0;t<=143;)l[2*t+1]=8,t++,u[8]++;for(;t<=255;)l[2*t+1]=9,t++,u[9]++;for(;t<=279;)l[2*t+1]=7,t++,u[7]++;for(;t<=287;)l[2*t+1]=8,t++,u[8]++;for(O(l,287,u),t=0;t<30;t++)c[2*t+1]=5,c[2*t]=E(t,5);d=new v(l,o,257,286,15),g=new v(c,a,0,30,15),y=new v(new Array(0),s,0,19,7)}(),k=!0),t.l_desc=new m(t.dyn_ltree,d),t.d_desc=new m(t.dyn_dtree,g),t.bl_desc=new m(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,M(t)},r._tr_stored_block=F,r._tr_flush_block=function(t,e,r,n){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,r=4093624447;for(e=0;e<=31;e++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}(t)),R(t,t.l_desc),R(t,t.d_desc),a=function(t){var e;for(L(t,t.dyn_ltree,t.l_desc.max_code),L(t,t.dyn_dtree,t.d_desc.max_code),R(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*u[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=r+5,r+4<=i&&-1!==e?F(t,e,r,n):4===t.strategy||o===i?(x(t,2+(n?1:0),3),I(t,l,c)):(x(t,4+(n?1:0),3),function(t,e,r,n){var i;for(x(t,e-257,5),x(t,r-1,5),x(t,n-4,4),i=0;i<n;i++)x(t,t.bl_tree[2*u[i]+1],3);A(t,t.dyn_ltree,e-1),A(t,t.dyn_dtree,r-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),I(t,t.dyn_ltree,t.dyn_dtree)),M(t),n&&P(t)},r._tr_tally=function(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(f[r]+256+1)]++,t.dyn_dtree[2*b(e)]++),t.last_lit===t.lit_bufsize-1},r._tr_align=function(t){x(t,2,3),S(t,256,l),function(t){16===t.bi_valid?(w(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":77}],89:[function(t,e,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],90:[function(t,e,r){(function(t){"use strict";!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick((function(){e.apply(null,o)}))}}:e.exports=t.nextTick}).call(this,t("_process"))},{_process:91}],91:[function(t,e,r){var n,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function u(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var l,c=[],h=!1,f=-1;function p(){h&&l&&(h=!1,l.length?c=l.concat(c):f=-1,c.length&&d())}function d(){if(!h){var t=u(p);h=!0;for(var e=c.length;e;){for(l=c,c=[];++f<e;)l&&l[f].run();f=-1,e=c.length}l=null,h=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new g(t,e)),1!==c.length||h||u(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],92:[function(t,e,r){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":93}],93:[function(t,e,r){"use strict";var n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};e.exports=h;var i=t("process-nextick-args"),o=t("core-util-is");o.inherits=t("inherits");var a=t("./_stream_readable"),s=t("./_stream_writable");o.inherits(h,a);for(var u=n(s.prototype),l=0;l<u.length;l++){var c=u[l];h.prototype[c]||(h.prototype[c]=s.prototype[c])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i(p,this)}function p(t){t.end()}},{"./_stream_readable":95,"./_stream_writable":97,"core-util-is":26,inherits:35,"process-nextick-args":90}],94:[function(t,e,r){"use strict";e.exports=o;var n=t("./_stream_transform"),i=t("core-util-is");function o(t){if(!(this instanceof o))return new o(t);n.call(this,t)}i.inherits=t("inherits"),i.inherits(o,n),o.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":96,"core-util-is":26,inherits:35}],95:[function(t,e,r){(function(r){"use strict";e.exports=d;var n=t("process-nextick-args"),i=t("isarray"),o=t("buffer").Buffer;d.ReadableState=p,t("events");var a,s=function(t,e){return t.listeners(e).length};!function(){try{a=t("stream")}catch(t){}finally{a||(a=t("events").EventEmitter)}}(),o=t("buffer").Buffer;var u=t("core-util-is");u.inherits=t("inherits");var l,c,h=t("util"),f=void 0;function p(e,r){c=c||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,r instanceof c&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=t("string_decoder/").StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function d(e){if(c=c||t("./_stream_duplex"),!(this instanceof d))return new d(e);this._readableState=new p(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),a.call(this)}function g(t,e,r,i,a){var s=function(t,e){var r=null;return o.isBuffer(e)||"string"==typeof e||null==e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}(e,r);if(s)t.emit("error",s);else if(null===r)e.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,_(t)}}(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!a){var u=new Error("stream.push() after EOF");t.emit("error",u)}else if(e.endEmitted&&a)u=new Error("stream.unshift() after end event"),t.emit("error",u);else{var l;!e.decoder||a||i||(r=e.decoder.write(r),l=!e.objectMode&&0===r.length),a||(e.reading=!1),l||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,a?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&_(t))),function(t,e){e.readingMore||(e.readingMore=!0,n(m,t,e))}(t,e)}else a||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}function y(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function _(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n(v,t):v(t))}function v(t){f("emit readable"),t.emit("readable"),x(t)}function m(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function b(t){f("readable nexttick read 0"),t.read(0)}function w(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,t.emit("resume"),x(t),e.flowing&&!e.reading&&t.read(0)}function x(t){var e=t._readableState;if(f("flow",e.flowing),e.flowing)do{var r=t.read()}while(null!==r&&e.flowing)}function S(t,e){var r,n=e.buffer,i=e.length,a=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!t||t>=i)r=a?n.join(""):1===n.length?n[0]:o.concat(n,i),n.length=0;else if(t<n[0].length)r=(h=n[0]).slice(0,t),n[0]=h.slice(t);else if(t===n[0].length)r=n.shift();else{r=a?"":new o(t);for(var u=0,l=0,c=n.length;l<c&&u<t;l++){var h=n[0],f=Math.min(t-u,h.length);a?r+=h.slice(0,f):h.copy(r,u,0,f),f<h.length?n[0]=h.slice(f):n.shift(),u+=f}}return r}function E(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,n(O,e,t))}function O(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}f=h&&h.debuglog?h.debuglog("stream"):function(){},u.inherits(d,a),d.prototype.push=function(t,e){var r=this._readableState;return r.objectMode||"string"!=typeof t||(e=e||r.defaultEncoding)!==r.encoding&&(t=new o(t,e),e=""),g(this,r,t,e,!1)},d.prototype.unshift=function(t){return g(this,this._readableState,t,"",!0)},d.prototype.isPaused=function(){return!1===this._readableState.flowing},d.prototype.setEncoding=function(e){return l||(l=t("string_decoder/").StringDecoder),this._readableState.decoder=new l(e),this._readableState.encoding=e,this},d.prototype.read=function(t){f("read",t);var e=this._readableState,r=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?E(this):_(this),null;if(0===(t=y(t,e))&&e.ended)return 0===e.length&&E(this),null;var n,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",i=!0),(e.ended||e.reading)&&f("reading or ended",i=!1),i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=y(r,e)),null===(n=t>0?S(t,e):null)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),r!==t&&e.ended&&0===e.length&&E(this),null!==n&&this.emit("data",n),n},d.prototype._read=function(t){this.emit("error",new Error("not implemented"))},d.prototype.pipe=function(t,e){var o=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,e);var u=e&&!1===e.end||t===r.stdout||t===r.stderr?d:c;function l(t){f("onunpipe"),t===o&&d()}function c(){f("onend"),t.end()}a.endEmitted?n(u):o.once("end",u),t.on("unpipe",l);var h=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,x(t))}}(o);t.on("drain",h);var p=!1;function d(){f("cleanup"),t.removeListener("close",_),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",l),o.removeListener("end",c),o.removeListener("end",d),o.removeListener("data",g),p=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h()}function g(e){f("ondata"),!1===t.write(e)&&(1!==a.pipesCount||a.pipes[0]!==t||1!==o.listenerCount("data")||p||(f("false write response, pause",o._readableState.awaitDrain),o._readableState.awaitDrain++),o.pause())}function y(e){f("onerror",e),m(),t.removeListener("error",y),0===s(t,"error")&&t.emit("error",e)}function _(){t.removeListener("finish",v),m()}function v(){f("onfinish"),t.removeListener("close",_),m()}function m(){f("unpipe"),o.unpipe(t)}return o.on("data",g),t._events&&t._events.error?i(t._events.error)?t._events.error.unshift(y):t._events.error=[y,t._events.error]:t.on("error",y),t.once("close",_),t.once("finish",v),t.emit("pipe",o),a.flowing||(f("pipe resume"),o.resume()),t},d.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=function(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this)),this},d.prototype.on=function(t,e){var r=a.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&!this._readableState.endEmitted){var i=this._readableState;i.readableListening||(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading?i.length&&_(this):n(b,this))}return r},d.prototype.addListener=d.prototype.on,d.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n(w,t,e))}(this,t)),this},d.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},d.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;for(var i in t.on("end",(function(){if(f("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)})),t.on("data",(function(i){f("wrapped data"),e.decoder&&(i=e.decoder.write(i)),e.objectMode&&null==i||(e.objectMode||i&&i.length)&&(n.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return function(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}(["error","close","destroy","pause","resume"],(function(e){t.on(e,n.emit.bind(n,e))})),n._read=function(e){f("wrapped _read",e),r&&(r=!1,t.resume())},n},d._fromList=S}).call(this,t("_process"))},{"./_stream_duplex":93,_process:91,buffer:4,"core-util-is":26,events:32,inherits:35,isarray:37,"process-nextick-args":90,"string_decoder/":103,util:3}],96:[function(t,e,r){"use strict";e.exports=a;var n=t("./_stream_duplex"),i=t("core-util-is");function o(t){this.afterTransform=function(e,r){return function(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!=r&&t.push(r),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}(t,e,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(t){if(!(this instanceof a))return new a(t);n.call(this,t),this._transformState=new o(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",(function(){"function"==typeof this._flush?this._flush((function(t){s(e,t)})):s(e)}))}function s(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=t._transformState;if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}i.inherits=t("inherits"),i.inherits(a,n),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,n.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("not implemented")},a.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":93,"core-util-is":26,inherits:35}],97:[function(t,e,r){(function(r){"use strict";e.exports=d;var i=t("process-nextick-args"),o=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?n:i,a=t("buffer").Buffer;d.WritableState=p;var s=t("core-util-is");s.inherits=t("inherits");var u,l,c={deprecate:t("util-deprecate")};function h(){}function f(t,e,r){this.chunk=t,this.encoding=e,this.callback=r,this.next=null}function p(e,r){l=l||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,r instanceof l&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:a,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,n=r.sync,a=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,n,o){--e.pendingcb,r?i(o,n):o(n),t._writableState.errorEmitted=!0,t.emit("error",n)}(t,r,n,e,a);else{var s=v(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||_(t,r),n?o(y,t,r,s,a):y(t,r,s,a)}}(r,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new w(this),this.corkedRequestsFree.next=new w(this)}function d(e){if(l=l||t("./_stream_duplex"),!(this instanceof d||this instanceof l))return new d(e);this._writableState=new p(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),u.call(this)}function g(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function y(t,e,r,n){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,n(),b(t,e)}function _(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;g(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,e.corkedRequestsFree=o.next,o.next=null}else{for(;r;){var s=r.chunk,u=r.encoding,l=r.callback;if(g(t,e,!1,e.objectMode?1:s.length,s,u,l),r=r.next,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=r,e.bufferProcessing=!1}function v(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function m(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var r=v(e);return r&&(0===e.pendingcb?(m(t,e),e.finished=!0,t.emit("finish")):m(t,e)),r}function w(t){var e=this;this.next=null,this.entry=null,this.finish=function(r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}!function(){try{u=t("stream")}catch(t){}finally{u||(u=t("events").EventEmitter)}}(),a=t("buffer").Buffer,s.inherits(d,u),p.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(p.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}(),d.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},d.prototype.write=function(t,e,r){var n=this._writableState,o=!1;return"function"==typeof e&&(r=e,e=null),a.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=h),n.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),i(e,r)}(this,r):function(t,e,r,n){var o=!0;if(!a.isBuffer(r)&&"string"!=typeof r&&null!=r&&!e.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),i(n,s),o=!1}return o}(this,n,t,r)&&(n.pendingcb++,o=function(t,e,r,n,i){r=function(t,e,r){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=new a(e,r)),e}(e,r,n),a.isBuffer(r)&&(n="buffer");var o=e.objectMode?1:r.length;e.length+=o;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new f(r,n,i),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else g(t,e,!1,o,r,n,i);return s}(this,n,t,e,r)),o},d.prototype.cork=function(){this._writableState.corked++},d.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||_(this,t))},d.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);this._writableState.defaultEncoding=t},d.prototype._write=function(t,e,r){r(new Error("not implemented"))},d.prototype._writev=null,d.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!=t&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||function(t,e,r){e.ending=!0,b(t,e),r&&(e.finished?i(r):t.once("finish",r)),e.ended=!0,t.writable=!1}(this,n,r)}}).call(this,t("_process"))},{"./_stream_duplex":93,_process:91,buffer:4,"core-util-is":26,events:32,inherits:35,"process-nextick-args":90,"util-deprecate":104}],98:[function(t,e,r){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":94}],99:[function(t,e,r){var n=function(){try{return t("stream")}catch(t){}}();(r=e.exports=t("./lib/_stream_readable.js")).Stream=n||r,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":93,"./lib/_stream_passthrough.js":94,"./lib/_stream_readable.js":95,"./lib/_stream_transform.js":96,"./lib/_stream_writable.js":97}],100:[function(t,e,r){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":96}],101:[function(t,e,r){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":97}],102:[function(t,e,r){e.exports=i;var n=t("events").EventEmitter;function i(){n.call(this)}t("inherits")(i,n),i.Readable=t("readable-stream/readable.js"),i.Writable=t("readable-stream/writable.js"),i.Duplex=t("readable-stream/duplex.js"),i.Transform=t("readable-stream/transform.js"),i.PassThrough=t("readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(t,e){var r=this;function i(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function o(){r.readable&&r.resume&&r.resume()}r.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(r.on("end",s),r.on("close",u));var a=!1;function s(){a||(a=!0,t.end())}function u(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(c(),0===n.listenerCount(this,"error"))throw t}function c(){r.removeListener("data",i),t.removeListener("drain",o),r.removeListener("end",s),r.removeListener("close",u),r.removeListener("error",l),t.removeListener("error",l),r.removeListener("end",c),r.removeListener("close",c),t.removeListener("close",c)}return r.on("error",l),t.on("error",l),r.on("end",c),r.on("close",c),t.on("close",c),t.emit("pipe",r),t}},{events:32,inherits:35,"readable-stream/duplex.js":92,"readable-stream/passthrough.js":98,"readable-stream/readable.js":99,"readable-stream/transform.js":100,"readable-stream/writable.js":101}],103:[function(t,e,r){var n=t("buffer").Buffer,i=n.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},o=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!i(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=s;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=u;break;default:return void(this.write=a)}this.charBuffer=new n(6),this.charReceived=0,this.charLength=0};function a(t){return t.toString(this.encoding)}function s(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function u(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}o.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";if(t=t.slice(r,t.length),!((n=(e=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(e.length-1))>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var n,i=t.length;if(this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),i=(e+=t.toString(this.encoding,0,i)).length-1,(n=e.charCodeAt(i))>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},o.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(e<=2&&r>>4==14){this.charLength=3;break}if(e<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=e},o.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},{buffer:4}],104:[function(t,e,n){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(t){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}}}).call(this,void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],105:[function(t,e,r){arguments[4][35][0].apply(r,arguments)},{dup:35}],106:[function(t,e,r){e.exports=function(t){return t&&"object"===u(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],107:[function(t,e,n){(function(e,r){var i=/%[sdj%]/g;n.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),u=n[r];r<o;u=n[++r])y(u)||!w(u)?a+=" "+u:a+=" "+s(u);return a},n.deprecate=function(t,i){if(m(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var o,a={};function s(t,e){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(e)?r.showHidden=e:e&&n._extend(r,e),m(r.showHidden)&&(r.showHidden=!1),m(r.depth)&&(r.depth=2),m(r.colors)&&(r.colors=!1),m(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),h(r,t,r.depth)}function l(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function c(t,e){return t}function h(t,e,r){if(t.customInspect&&e&&E(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return v(i)||(i=h(t,i,r)),i}var o=function(t,e){if(m(e))return t.stylize("undefined","undefined");if(v(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return _(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,e);if(o)return o;var a=Object.keys(e),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),S(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(e);if(0===a.length){if(E(e)){var u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(b(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(x(e))return t.stylize(Date.prototype.toString.call(e),"date");if(S(e))return f(e)}var l,c="",w=!1,O=["{","}"];return d(e)&&(w=!0,O=["[","]"]),E(e)&&(c=" [Function"+(e.name?": "+e.name:"")+"]"),b(e)&&(c=" "+RegExp.prototype.toString.call(e)),x(e)&&(c=" "+Date.prototype.toUTCString.call(e)),S(e)&&(c=" "+f(e)),0!==a.length||w&&0!=e.length?r<0?b(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),l=w?function(t,e,r,n,i){for(var o=[],a=0,s=e.length;a<s;++a)C(e,String(a))?o.push(p(t,e,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(t,e,r,n,i,!0))})),o}(t,e,r,s,a):a.map((function(n){return p(t,e,r,s,n,w)})),t.seen.pop(),function(t,e,r){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}(l,c,O)):O[0]+c+O[1]}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,r,n,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),C(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=y(r)?h(t,u.value,null):h(t,u.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),m(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function _(t){return"number"==typeof t}function v(t){return"string"==typeof t}function m(t){return void 0===t}function b(t){return w(t)&&"[object RegExp]"===O(t)}function w(t){return"object"===u(t)&&null!==t}function x(t){return w(t)&&"[object Date]"===O(t)}function S(t){return w(t)&&("[object Error]"===O(t)||t instanceof Error)}function E(t){return"function"==typeof t}function O(t){return Object.prototype.toString.call(t)}function M(t){return t<10?"0"+t.toString(10):t.toString(10)}n.debuglog=function(t){if(m(o)&&(o=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var r=e.pid;a[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else a[t]=function(){};return a[t]},n.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=g,n.isNull=y,n.isNullOrUndefined=function(t){return null==t},n.isNumber=_,n.isString=v,n.isSymbol=function(t){return"symbol"===u(t)},n.isUndefined=m,n.isRegExp=b,n.isObject=w,n.isDate=x,n.isError=S,n.isFunction=E,n.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===u(t)||void 0===t},n.isBuffer=t("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(){var t=new Date,e=[M(t.getHours()),M(t.getMinutes()),M(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),void 0!==r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":106,_process:91,inherits:105}],108:[function(t,e,r){var n=t("./zip");e.exports=function(t,e){var r=n(t,e);location.href="data:application/zip;base64,"+r}},{"./zip":117}],109:[function(t,e,r){e.exports.enlarge=function(t,e){return e[0]<t.xmin&&(t.xmin=e[0]),e[0]>t.xmax&&(t.xmax=e[0]),e[1]<t.ymin&&(t.ymin=e[1]),e[1]>t.ymax&&(t.ymax=e[1]),t},e.exports.enlargeExtent=function(t,e){return e.xmax>t.xmax&&(t.xmax=e.xmax),e.xmin<t.xmin&&(t.xmin=e.xmin),e.ymax>t.ymax&&(t.ymax=e.ymax),e.ymin<t.ymin&&(t.ymin=e.ymin),t},e.exports.blank=function(){return{xmin:Number.MAX_VALUE,ymin:Number.MAX_VALUE,xmax:-Number.MAX_VALUE,ymax:-Number.MAX_VALUE}}},{}],110:[function(t,e,r){var n=t("./types").jstypes;function i(t){var e={},r=[];for(var i in t)e[i]=u(t[i]);for(var o in e)r.push({name:o,type:n[e[o]]});return r}e.exports.geojson=function(t){var e={};return t.forEach((function(t){!function(t,e){for(var r in e)t[r]=e[r]}(e,t.properties)})),i(e)},e.exports.obj=i},{"./types":115}],111:[function(t,e,r){function n(t,e){return function(r){var n,a=r.features.filter((n=t,function(t){return t.geometry.type===n}));return{geometries:"POLYGON"===e||"POLYLINE"===e?[a.map(i)]:a.map(i),properties:a.map(o),type:e}}}function i(t){return void 0!==t.geometry.coordinates[0]&&void 0!==t.geometry.coordinates[0][0]&&void 0!==t.geometry.coordinates[0][0][0]?t.geometry.coordinates[0]:t.geometry.coordinates}function o(t){return t.properties}e.exports.point=n("Point","POINT"),e.exports.line=n("LineString","POLYLINE"),e.exports.polygon=n("Polygon","POLYGON")},{}],112:[function(t,e,r){var n=t("./extent");e.exports.write=function(t,e,r,n){var i=100,o=0,a=0;t.forEach((function(t,e){r.setInt32(o,e),r.setInt32(o+4,10),r.setInt32(o+8,1,!0),r.setFloat64(o+12,t[0],!0),r.setFloat64(o+20,t[1],!0),n.setInt32(a,i/2),n.setInt32(a+4,10),a+=8,o+=28,i+=28}))},e.exports.extent=function(t){return t.reduce((function(t,e){return n.enlarge(t,e)}),n.blank())},e.exports.parts=function(t,e){return t.length},e.exports.shxLength=function(t){return 8*t.length},e.exports.shpLength=function(t){return 28*t.length}},{"./extent":109}],113:[function(t,e,r){var n=t("./extent"),i=t("./types");function o(t,e){var r=1;return e!==i.geometries.POLYGON&&e!==i.geometries.POLYLINE||(r=t.reduce((function(t,e){return t+1}),0)),r}function a(t,e){return void 0===e&&(e=[]),"object"==u(t[0][0])?t.reduce((function(t,e){return t.concat(a(e))}),e):t}e.exports.write=function(t,e,r,i,s){var u=0,l=0,c=100;t.forEach((function(t,e){var h=a(t),f=o([t],s),p=16*h.length+48+4*(f-1),d=h.reduce((function(t,e){return n.enlarge(t,e)}),n.blank());i.setInt32(l,c/2),i.setInt32(l+4,p/2),l+=8,c+=p+8,r.setInt32(u,e+1),r.setInt32(u+4,p/2),r.setInt32(u+8,s,!0),r.setFloat64(u+12,d.xmin,!0),r.setFloat64(u+20,d.ymin,!0),r.setFloat64(u+28,d.xmax,!0),r.setFloat64(u+36,d.ymax,!0),r.setInt32(u+44,f,!0),r.setInt32(u+48,h.length,!0),r.setInt32(u+52,0,!0);for(var g=t.reduce((function(t,e){return Array.isArray(e[0][0])?t=t.concat(e):t.push(e),t}),[]),y=1;y<f;y++)r.setInt32(u+52+4*y,g.reduce((function(t,e,r){return r<y?t+e.length:t}),0),!0);h.forEach((function(t,e){r.setFloat64(u+56+16*e+4*(f-1),t[0],!0),r.setFloat64(u+56+16*e+4*(f-1)+8,t[1],!0)})),u+=p+8}))},e.exports.shpLength=function(t){return 56*t.length+16*a(t).length},e.exports.shxLength=function(t){return 8*t.length},e.exports.extent=function(t){return a(t).reduce((function(t,e){return n.enlarge(t,e)}),n.blank())},e.exports.parts=o},{"./extent":109,"./types":115}],114:[function(t,e,r){e.exports='GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]]'},{}],115:[function(t,e,r){e.exports.geometries={NULL:0,POINT:1,POLYLINE:3,POLYGON:5,MULTIPOINT:8,POINTZ:11,POLYLINEZ:13,POLYGONZ:15,MULTIPOINTZ:18,POINTM:21,POLYLINEM:23,POLYGONM:25,MULTIPOINTM:28,MULTIPATCH:31}},{}],116:[function(t,e,r){var n=t("./types"),i=t("dbf"),o=t("./prj"),a=(t("./extent"),t("./fields"),t("assert"),t("./points")),s=t("./poly"),u={1:a,5:s,3:s};function l(t,e){t.setInt32(0,9994),t.setInt32(28,1e3,!0),t.setInt32(32,e,!0)}function c(t,e){e.setFloat64(36,t.xmin,!0),e.setFloat64(44,t.ymin,!0),e.setFloat64(52,t.xmax,!0),e.setFloat64(60,t.ymax,!0)}e.exports=function(t,e,r,a){var s=n.geometries[e],h=u[s],f=100+4*(h.parts(r,s)-r.length)+h.shpLength(r),p=100+h.shxLength(r),d=new ArrayBuffer(f),g=new DataView(d),y=new ArrayBuffer(p),_=new DataView(y),v=h.extent(r);l(g,s),l(_,s),c(v,g),c(v,_),h.write(r,v,new DataView(d,100),new DataView(y,100),s),g.setInt32(24,f/2),_.setInt32(24,50+4*r.length);var m=i.structure(t);a(null,{shp:g,shx:_,dbf:m,prj:o})}},{"./extent":109,"./fields":110,"./points":112,"./poly":113,"./prj":114,"./types":115,assert:1,dbf:27}],117:[function(t,e,r){(function(r){var n=t("./write"),i=t("./geojson"),o=t("./prj"),a=t("jszip");e.exports=function(t,e){var s=new a,u=s.folder(e&&e.folder?e.folder:"layers");[i.point(t),i.line(t),i.polygon(t)].forEach((function(t){t.geometries.length&&t.geometries[0].length&&n(t.properties,t.type,t.geometries[0],(function(r,n){var i=e&&e.types[t.type.toLowerCase()]?e.types[t.type.toLowerCase()]:t.type;u.file(i+".shp",n.shp.buffer,{binary:!0}),u.file(i+".shx",n.shx.buffer,{binary:!0}),u.file(i+".dbf",n.dbf.buffer,{binary:!0}),u.file(i+".prj",o)}))}));var l={compression:"STORE",type:"uint8array"};return r.browser||(l.type="nodebuffer"),s.generateAsync(l)}}).call(this,t("_process"))},{"./geojson":111,"./prj":114,"./write":116,_process:91,jszip:47}],118:[function(t,e,r){e.exports.download=t("./src/download"),e.exports.write=t("./src/write"),e.exports.zip=t("./src/zip")},{"./src/download":108,"./src/write":116,"./src/zip":117}]},{},[118])(118)},"object"===u(e)&&void 0!==t?t.exports=s():(o=[],void 0===(a="function"==typeof(i=s)?i.apply(e,o):i)||(t.exports=a))}).call(this,r(60),r(313).setImmediate)},function(t,e,r){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},r(314),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(60))},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var n,i,o,a,s,u=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},n=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,n=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):n=function(t){setTimeout(d,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),n=function(e){t.postMessage(a+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var i={callback:t,args:e};return l[u]=i,n(u),u++},f.clearImmediate=p}function p(t){delete l[t]}function d(t){if(c)setTimeout(d,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(void 0,r)}}(e)}finally{p(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(60),r(315))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,l=[],c=!1,h=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&p())}function p(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){var n,i,o;function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(r){"object"==a(e)&&void 0!==t?t.exports=r():(i=[],void 0===(o="function"==typeof(n=r)?n.apply(e,i):n)||(t.exports=o))}((function(){function t(t){var e;return function(r){return e||t(e={exports:{},parent:r},e.exports),e.exports}}var e=t((function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Interactable=void 0;var i=_(T),o=g(F),u=g(W),l=g(lt),c=_(d),h=g(ct),f=g(yt),p=r({});function g(t){return t&&t.__esModule?t:{default:t}}function y(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return y=function(){return t},t}function _(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=y();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),t}function b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var w=function(){function t(e,r,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._scopeEvents=i,b(this,"options",void 0),b(this,"_actions",void 0),b(this,"target",void 0),b(this,"events",new f.default),b(this,"_context",void 0),b(this,"_win",void 0),b(this,"_doc",void 0),this._actions=r.actions,this.target=e,this._context=r.context||n,this._win=(0,s.getWindow)((0,K.trySelector)(e)?this._context:e),this._doc=this._win.document,this.set(r)}return m(t,[{key:"_defaults",get:function(){return{base:{},perAction:{},actions:{}}}}]),m(t,[{key:"setOnEvents",value:function(t,e){return c.func(e.onstart)&&this.on("".concat(t,"start"),e.onstart),c.func(e.onmove)&&this.on("".concat(t,"move"),e.onmove),c.func(e.onend)&&this.on("".concat(t,"end"),e.onend),c.func(e.oninertiastart)&&this.on("".concat(t,"inertiastart"),e.oninertiastart),this}},{key:"updatePerActionListeners",value:function(t,e,r){(c.array(e)||c.object(e))&&this.off(t,e),(c.array(r)||c.object(r))&&this.on(t,r)}},{key:"setPerAction",value:function(t,e){var r=this._defaults;for(var n in e){var o=n,a=this.options[t],s=e[o];"listeners"===o&&this.updatePerActionListeners(t,a.listeners,s),c.array(s)?a[o]=i.from(s):c.plainObject(s)?(a[o]=(0,l.default)(a[o]||{},(0,u.default)(s)),c.object(r.perAction[o])&&"enabled"in r.perAction[o]&&(a[o].enabled=!1!==s.enabled)):c.bool(s)&&c.object(r.perAction[o])?a[o].enabled=s:a[o]=s}}},{key:"getRect",value:function(t){return t=t||(c.element(this.target)?this.target:null),c.string(this.target)&&(t=t||this._context.querySelector(this.target)),(0,K.getElementRect)(t)}},{key:"rectChecker",value:function(t){return c.func(t)?(this.getRect=t,this):null===t?(delete this.getRect,this):this.getRect}},{key:"_backCompatOption",value:function(t,e){if((0,K.trySelector)(e)||c.object(e)){for(var r in this.options[t]=e,this._actions.map)this.options[r][t]=e;return this}return this.options[t]}},{key:"origin",value:function(t){return this._backCompatOption("origin",t)}},{key:"deltaSource",value:function(t){return"page"===t||"client"===t?(this.options.deltaSource=t,this):this.options.deltaSource}},{key:"context",value:function(){return this._context}},{key:"inContext",value:function(t){return this._context===t.ownerDocument||(0,K.nodeContains)(this._context,t)}},{key:"testIgnoreAllow",value:function(t,e,r){return!this.testIgnore(t.ignoreFrom,e,r)&&this.testAllow(t.allowFrom,e,r)}},{key:"testAllow",value:function(t,e,r){return!t||!!c.element(r)&&(c.string(t)?(0,K.matchesUpTo)(r,t,e):!!c.element(t)&&(0,K.nodeContains)(t,r))}},{key:"testIgnore",value:function(t,e,r){return!(!t||!c.element(r))&&(c.string(t)?(0,K.matchesUpTo)(r,t,e):!!c.element(t)&&(0,K.nodeContains)(t,r))}},{key:"fire",value:function(t){return this.events.fire(t),this}},{key:"_onOff",value:function(t,e,r,n){c.object(e)&&!c.array(e)&&(n=r,r=null);var i="on"===t?"add":"remove",a=(0,h.default)(e,r);for(var s in a){"wheel"===s&&(s=o.default.wheelEvent);for(var u=0;u<a[s].length;u++){var l=a[s][u];(0,p.isNonNativeEvent)(s,this._actions)?this.events[t](s,l):c.string(this.target)?this._scopeEvents["".concat(i,"Delegate")](this.target,this._context,s,l,n):this._scopeEvents[i](this.target,s,l,n)}}return this}},{key:"on",value:function(t,e,r){return this._onOff("on",t,e,r)}},{key:"off",value:function(t,e,r){return this._onOff("off",t,e,r)}},{key:"set",value:function(t){var e=this._defaults;for(var r in c.object(t)||(t={}),this.options=(0,u.default)(e.base),this._actions.methodDict){var n=r,i=this._actions.methodDict[n];this.options[n]={},this.setPerAction(n,(0,l.default)((0,l.default)({},e.perAction),e.actions[n])),this[i](t[n])}for(var o in t)c.func(this[o])&&this[o](t[o]);return this}},{key:"unset",value:function(){if(c.string(this.target))for(var t in this._scopeEvents.delegatedEvents)for(var e=this._scopeEvents.delegatedEvents[t],r=e.length-1;0<=r;r--){var n=e[r],i=n.selector,o=n.context,a=n.listeners;i===this.target&&o===this._context&&e.splice(r,1);for(var s=a.length-1;0<=s;s--)this._scopeEvents.removeDelegate(this.target,this._context,t,a[s][0],a[s][1])}else this._scopeEvents.remove(this.target,"all")}}]),t}(),x=e.Interactable=w;e.default=x})),r=t((function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNonNativeEvent=function(t,e){if(e.phaselessTypes[t])return!0;for(var r in e.map)if(0===t.indexOf(r)&&t.substr(r.length)in e.phases)return!0;return!1},r.initScope=I,r.Scope=r.default=void 0;var o=y(R),s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==_(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(oe),u=y(yt),l=y(Re),c=y(i({})),h=y(e({})),f=y(Xe),p=y(Ce),d=y(ir),g=y(n({}));function y(t){return t&&t.__esModule?t:{default:t}}function _(t){return(_="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}function v(t,e){return!e||"object"!==_(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function m(t,e,r){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(r):i.value}})(t,e,r||t)}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function w(t,e){return(w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E(t,e,r){return e&&S(t.prototype,e),r&&S(t,r),t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var M=s.win,P=s.browser,T=s.raf,C=function(){function t(){var e=this;x(this,t),O(this,"id","__interact_scope_".concat(Math.floor(100*Math.random()))),O(this,"isInitialized",!1),O(this,"listenerMaps",[]),O(this,"browser",P),O(this,"utils",s),O(this,"defaults",s.clone(p.default)),O(this,"Eventable",u.default),O(this,"actions",{map:{},phases:{start:!0,move:!0,end:!0},methodDict:{},phaselessTypes:{}}),O(this,"interactStatic",new c.default(this)),O(this,"InteractEvent",l.default),O(this,"Interactable",void 0),O(this,"interactables",new f.default(this)),O(this,"_win",void 0),O(this,"document",void 0),O(this,"window",void 0),O(this,"documents",[]),O(this,"_plugins",{list:[],map:{}}),O(this,"onWindowUnload",(function(t){return e.removeDocument(t.target)}));var r=this;this.Interactable=function(){function t(){return x(this,t),v(this,b(t).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&w(t,e)}(t,h.default),E(t,[{key:"set",value:function(e){return m(b(t.prototype),"set",this).call(this,e),r.fire("interactable:set",{options:e,interactable:this}),this}},{key:"unset",value:function(){m(b(t.prototype),"unset",this).call(this),r.interactables.list.splice(r.interactables.list.indexOf(this),1),r.fire("interactable:unset",{interactable:this})}},{key:"_defaults",get:function(){return r.defaults}}]),t}()}return E(t,[{key:"addListeners",value:function(t,e){this.listenerMaps.push({id:e,map:t})}},{key:"fire",value:function(t,e){for(var r=0;r<this.listenerMaps.length;r++){var n=this.listenerMaps[r].map[t];if(n&&!1===n(e,this,t))return!1}}},{key:"init",value:function(t){return this.isInitialized?this:I(this,t)}},{key:"pluginIsInstalled",value:function(t){return this._plugins.map[t.id]||-1!==this._plugins.list.indexOf(t)}},{key:"usePlugin",value:function(t,e){if(this.pluginIsInstalled(t))return this;if(t.id&&(this._plugins.map[t.id]=t),this._plugins.list.push(t),t.install&&t.install(this,e),t.listeners&&t.before){for(var r=0,n=this.listenerMaps.length,i=t.before.reduce((function(t,e){return t[e]=!0,t}),{});r<n&&!i[this.listenerMaps[r].id];r++);this.listenerMaps.splice(r,0,{id:t.id,map:t.listeners})}else t.listeners&&this.listenerMaps.push({id:t.id,map:t.listeners});return this}},{key:"addDocument",value:function(t,e){if(-1!==this.getDocIndex(t))return!1;var r=M.getWindow(t);e=e?s.extend({},e):{},this.documents.push({doc:t,options:e}),this.events.documents.push(t),t!==this.document&&this.events.add(r,"unload",this.onWindowUnload),this.fire("scope:add-document",{doc:t,window:r,scope:this,options:e})}},{key:"removeDocument",value:function(t){var e=this.getDocIndex(t),r=M.getWindow(t),n=this.documents[e].options;this.events.remove(r,"unload",this.onWindowUnload),this.documents.splice(e,1),this.events.documents.splice(e,1),this.fire("scope:remove-document",{doc:t,window:r,scope:this,options:n})}},{key:"getDocIndex",value:function(t){for(var e=0;e<this.documents.length;e++)if(this.documents[e].doc===t)return e;return-1}},{key:"getDocOptions",value:function(t){var e=this.getDocIndex(t);return-1===e?null:this.documents[e].options}},{key:"now",value:function(){return(this.window.Date||Date).now()}}]),t}();function I(t,e){return t.isInitialized=!0,M.init(e),o.default.init(e),P.init(e),T.init(e),t.window=e,t.document=e.document,t.usePlugin(g.default),t.usePlugin(d.default),t}r.Scope=r.default=C})),n=t((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(F),i=c(R),o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==h(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(It),s=c(xr),u=c(Dr),l=c(Vr);function c(t){return t&&t.__esModule?t:{default:t}}function h(t){return(h="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return!e||"object"!==h(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}c(r({}));var _=["pointerDown","pointerMove","pointerUp","updatePointer","removePointer","windowBlur"];function v(t,e){return function(r){var i=e.interactions.list,a=o.getPointerType(r),s=f(o.getEventTargets(r),2),u=s[0],l=s[1],c=[];if(/^touch/.test(r.type)){e.prevTouchTime=e.now();for(var h=0;h<r.changedTouches.length;h++){var p,d={pointer:p=r.changedTouches[h],pointerId:o.getPointerId(p),pointerType:a,eventType:r.type,eventTarget:u,curEventTarget:l,scope:e},g=m(d);c.push([d.pointer,d.eventTarget,d.curEventTarget,g])}}else{var y=!1;if(!n.default.supportsPointerEvent&&/mouse/.test(r.type)){for(var _=0;_<i.length&&!y;_++)y="mouse"!==i[_].pointerType&&i[_].pointerIsDown;y=y||e.now()-e.prevTouchTime<500||0===r.timeStamp}if(!y){var v={pointer:r,pointerId:o.getPointerId(r),pointerType:a,eventType:r.type,curEventTarget:l,eventTarget:u,scope:e},b=m(v);c.push([v.pointer,v.eventTarget,v.curEventTarget,b])}}for(var w=0;w<c.length;w++){var x=f(c[w],4),S=x[0],E=x[1],O=x[2];x[3][t](S,r,E,O)}}}function m(t){var e=t.pointerType,r=t.scope,n={interaction:l.default.search(t),searchDetails:t};return r.fire("interactions:find",n),n.interaction||r.interactions.new({pointerType:e})}function b(t,e){var r=t.doc,n=t.scope,i=t.options,o=n.interactions.docEvents,a=n.events,s=a[e];for(var u in n.browser.isIOS&&!i.events&&(i.events={passive:!1}),a.delegatedEvents)s(r,u,a.delegateListener),s(r,u,a.delegateUseCapture,!0);for(var l=i&&i.events,c=0;c<o.length;c++){var h;s(r,(h=o[c]).type,h.listener,l)}}var w={id:"core/interactions",install:function(t){for(var e={},r=0;r<_.length;r++){var o;e[o=_[r]]=v(o,t)}var a,l=n.default.pEventTypes;function c(){for(var e=0;e<t.interactions.list.length;e++){var r=t.interactions.list[e];if(r.pointerIsDown&&"touch"===r.pointerType&&!r._interacting)for(var n=function(){var e=r.pointers[i];t.documents.some((function(t){var r=t.doc;return(0,K.nodeContains)(r,e.downTarget)}))||r.removePointer(e.pointer,e.event)},i=0;i<r.pointers.length;i++)n()}}(a=i.default.PointerEvent?[{type:l.down,listener:c},{type:l.down,listener:e.pointerDown},{type:l.move,listener:e.pointerMove},{type:l.up,listener:e.pointerUp},{type:l.cancel,listener:e.pointerUp}]:[{type:"mousedown",listener:e.pointerDown},{type:"mousemove",listener:e.pointerMove},{type:"mouseup",listener:e.pointerUp},{type:"touchstart",listener:c},{type:"touchstart",listener:e.pointerDown},{type:"touchmove",listener:e.pointerMove},{type:"touchend",listener:e.pointerUp},{type:"touchcancel",listener:e.pointerUp}]).push({type:"blur",listener:function(e){for(var r=0;r<t.interactions.list.length;r++)t.interactions.list[r].documentBlur(e)}}),t.prevTouchTime=0,t.Interaction=function(){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,g(e).apply(this,arguments))}var r,n;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(e,s.default),r=e,(n=[{key:"_now",value:function(){return t.now()}},{key:"pointerMoveTolerance",get:function(){return t.interactions.pointerMoveTolerance},set:function(e){t.interactions.pointerMoveTolerance=e}}])&&p(r.prototype,n),e}(),t.interactions={list:[],new:function(e){e.scopeFire=function(e,r){return t.fire(e,r)};var r=new t.Interaction(e);return t.interactions.list.push(r),r},listeners:e,docEvents:a,pointerMoveTolerance:1},t.usePlugin(u.default)},listeners:{"scope:add-document":function(t){return b(t,"add")},"scope:remove-document":function(t){return b(t,"remove")},"interactable:unset":function(t,e){for(var r=t.interactable,n=e.interactions.list.length-1;0<=n;n--){var i=e.interactions.list[n];i.interactable===r&&(i.stop(),e.fire("interactions:destroy",{interaction:i}),i.destroy(),2<e.interactions.list.length&&e.interactions.list.splice(n,1))}}},onDocSignal:b,doOnInteractions:v,methodNames:_};e.default=w})),i=t((function(t,e){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.InteractStatic=void 0;var i,o=(i=F)&&i.__esModule?i:{default:i},s=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==n(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var a=i?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}(oe),u=r({});function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scope=e,c(this,"getPointerAverage",s.pointer.pointerAverage),c(this,"getTouchBBox",s.pointer.touchBBox),c(this,"getTouchDistance",s.pointer.touchDistance),c(this,"getTouchAngle",s.pointer.touchAngle),c(this,"getElementRect",s.dom.getElementRect),c(this,"getElementClientRect",s.dom.getElementClientRect),c(this,"matchesSelector",s.dom.matchesSelector),c(this,"closest",s.dom.closest),c(this,"globalEvents",{}),c(this,"dynamicDrop",void 0),c(this,"version","1.9.9"),c(this,"interact",void 0);for(var n=this.constructor.prototype,i=function(t,n){var i=e.interactables.get(t,n);return i||((i=e.interactables.new(t,n)).events.global=r.globalEvents),i},o=0;o<Object.getOwnPropertyNames(this.constructor.prototype).length;o++){var a;i[a=Object.getOwnPropertyNames(this.constructor.prototype)[o]]=n[a]}return s.extend(i,this),i.constructor=this.constructor,this.interact=i}var e,r;return e=t,(r=[{key:"use",value:function(t,e){return this.scope.usePlugin(t,e),this}},{key:"isSet",value:function(t,e){return!!this.scope.interactables.get(t,e&&e.context)}},{key:"on",value:function(t,e,r){if(s.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s.is.array(t)){for(var n=0;n<t.length;n++){var i=t[n];this.on(i,e,r)}return this}if(s.is.object(t)){for(var o in t)this.on(o,t[o],e);return this}return(0,u.isNonNativeEvent)(t,this.scope.actions)?this.globalEvents[t]?this.globalEvents[t].push(e):this.globalEvents[t]=[e]:this.scope.events.add(this.scope.document,t,e,{options:r}),this}},{key:"off",value:function(t,e,r){if(s.is.string(t)&&-1!==t.search(" ")&&(t=t.trim().split(/ +/)),s.is.array(t)){for(var n=0;n<t.length;n++){var i=t[n];this.off(i,e,r)}return this}if(s.is.object(t)){for(var o in t)this.off(o,t[o],e);return this}var a;return(0,u.isNonNativeEvent)(t,this.scope.actions)?t in this.globalEvents&&-1!==(a=this.globalEvents[t].indexOf(e))&&this.globalEvents[t].splice(a,1):this.scope.events.remove(this.scope.document,t,e,r),this}},{key:"debug",value:function(){return this.scope}},{key:"supportsTouch",value:function(){return o.default.supportsTouch}},{key:"supportsPointerEvent",value:function(){return o.default.supportsPointerEvent}},{key:"stop",value:function(){for(var t=0;t<this.scope.interactions.list.length;t++)this.scope.interactions.list[t].stop();return this}},{key:"pointerMoveTolerance",value:function(t){return s.is.number(t)?(this.scope.interactions.pointerMoveTolerance=t,this):this.scope.interactions.pointerMoveTolerance}},{key:"addDocument",value:function(t,e){this.scope.addDocument(t,e)}},{key:"removeDocument",value:function(t){this.scope.removeDocument(t)}}])&&l(e.prototype,r),t}(),f=e.InteractStatic=h;e.default=f})),o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0,o.default=function(t){return!(!t||!t.Window)&&t instanceof t.Window};var s={};Object.defineProperty(s,"__esModule",{value:!0}),s.init=h,s.getWindow=f,s.default=void 0;var u,l=(u=o)&&u.__esModule?u:{default:u},c={realWindow:void 0,window:void 0,getWindow:f,init:h};function h(t){var e=(c.realWindow=t).document.createTextNode("");e.ownerDocument!==t.document&&"function"==typeof t.wrap&&t.wrap(e)===e&&(t=t.wrap(t)),c.window=t}function f(t){return(0,l.default)(t)?t:(t.ownerDocument||t).defaultView||c.window}"undefined"==typeof window?(c.window=void 0,c.realWindow=void 0):h(window),c.init=h;var p=c;s.default=p;var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.array=d.plainObject=d.element=d.string=d.bool=d.number=d.func=d.object=d.docFrag=d.window=void 0;var g=_(o),y=_(s);function _(t){return t&&t.__esModule?t:{default:t}}function v(t){return(v="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}d.window=function(t){return t===y.default.window||(0,g.default)(t)},d.docFrag=function(t){return m(t)&&11===t.nodeType};var m=function(t){return!!t&&"object"===v(t)};function b(t){return"function"==typeof t}d.object=m,d.func=b,d.number=function(t){return"number"==typeof t},d.bool=function(t){return"boolean"==typeof t},d.string=function(t){return"string"==typeof t},d.element=function(t){if(!t||"object"!==v(t))return!1;var e=y.default.getWindow(t)||y.default.window;return/object|function/.test(v(e.Element))?t instanceof e.Element:1===t.nodeType&&"string"==typeof t.nodeName},d.plainObject=function(t){return m(t)&&!!t.constructor&&/function Object\b/.test(t.constructor.toString())},d.array=function(t){return m(t)&&void 0!==t.length&&b(t.splice)};var w={};function x(t){return(x="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(w,"__esModule",{value:!0}),w.default=void 0;var S=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==x(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d);function E(t){var e=t.interaction;if("drag"===e.prepared.name){var r=e.prepared.axis;"x"===r?(e.coords.cur.page.y=e.coords.start.page.y,e.coords.cur.client.y=e.coords.start.client.y,e.coords.velocity.client.y=0,e.coords.velocity.page.y=0):"y"===r&&(e.coords.cur.page.x=e.coords.start.page.x,e.coords.cur.client.x=e.coords.start.client.x,e.coords.velocity.client.x=0,e.coords.velocity.page.x=0)}}function O(t){var e=t.iEvent,r=t.interaction;if("drag"===r.prepared.name){var n=r.prepared.axis;if("x"===n||"y"===n){var i="x"===n?"y":"x";e.page[i]=r.coords.start.page[i],e.client[i]=r.coords.start.client[i],e.delta[i]=0}}}var M={id:"actions/drag",install:function(t){var e=t.actions,r=t.Interactable,n=t.defaults;r.prototype.draggable=M.draggable,e.map.drag=M,e.methodDict.drag="draggable",n.actions.drag=M.defaults},listeners:{"interactions:before-action-move":E,"interactions:action-resume":E,"interactions:action-move":O,"auto-start:check":function(t){var e=t.interaction,r=t.interactable,n=t.buttons,i=r.options.drag;if(i&&i.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(n&r.options.drag.mouseButtons)))return!(t.action={name:"drag",axis:"start"===i.lockAxis?i.startAxis:i.lockAxis})}},draggable:function(t){return S.object(t)?(this.options.drag.enabled=!1!==t.enabled,this.setPerAction("drag",t),this.setOnEvents("drag",t),/^(xy|x|y|start)$/.test(t.lockAxis)&&(this.options.drag.lockAxis=t.lockAxis),/^(xy|x|y)$/.test(t.startAxis)&&(this.options.drag.startAxis=t.startAxis),this):S.bool(t)?(this.options.drag.enabled=t,this):this.options.drag},beforeMove:E,move:O,defaults:{startAxis:"xy",lockAxis:"xy"},getCursor:function(){return"move"}},P=M;w.default=P;var T={};function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];t.push(n)}return t}function I(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r,t))return r;return-1}Object.defineProperty(T,"__esModule",{value:!0}),T.find=T.findIndex=T.from=T.merge=T.remove=T.contains=void 0,T.contains=function(t,e){return-1!==t.indexOf(e)},T.remove=function(t,e){return t.splice(t.indexOf(e),1)},T.merge=C,T.from=function(t){return C([],t)},T.findIndex=I,T.find=function(t,e){return t[I(t,e)]};var R={};Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var L={init:function(t){var e=t;L.document=e.document,L.DocumentFragment=e.DocumentFragment||A,L.SVGElement=e.SVGElement||A,L.SVGSVGElement=e.SVGSVGElement||A,L.SVGElementInstance=e.SVGElementInstance||A,L.Element=e.Element||A,L.HTMLElement=e.HTMLElement||L.Element,L.Event=e.Event,L.Touch=e.Touch||A,L.PointerEvent=e.PointerEvent||e.MSPointerEvent},document:null,DocumentFragment:null,SVGElement:null,SVGSVGElement:null,SVGElementInstance:null,Element:null,HTMLElement:null,Event:null,Touch:null,PointerEvent:null};function A(){}var k=L;R.default=k;var F={};function j(t){return(j="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(F,"__esModule",{value:!0}),F.default=void 0;var N=G(R),D=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==j(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d),z=G(s);function G(t){return t&&t.__esModule?t:{default:t}}var B={init:function(t){var e=N.default.Element,r=z.default.window.navigator;B.supportsTouch="ontouchstart"in t||D.func(t.DocumentTouch)&&N.default.document instanceof t.DocumentTouch,B.supportsPointerEvent=!1!==r.pointerEnabled&&!!N.default.PointerEvent,B.isIOS=/iP(hone|od|ad)/.test(r.platform),B.isIOS7=/iP(hone|od|ad)/.test(r.platform)&&/OS 7[^\d]/.test(r.appVersion),B.isIe9=/MSIE 9/.test(r.userAgent),B.isOperaMobile="Opera"===r.appName&&B.supportsTouch&&/Presto/.test(r.userAgent),B.prefixedMatchesSelector="matches"in e.prototype?"matches":"webkitMatchesSelector"in e.prototype?"webkitMatchesSelector":"mozMatchesSelector"in e.prototype?"mozMatchesSelector":"oMatchesSelector"in e.prototype?"oMatchesSelector":"msMatchesSelector",B.pEventTypes=B.supportsPointerEvent?N.default.PointerEvent===t.MSPointerEvent?{up:"MSPointerUp",down:"MSPointerDown",over:"mouseover",out:"mouseout",move:"MSPointerMove",cancel:"MSPointerCancel"}:{up:"pointerup",down:"pointerdown",over:"pointerover",out:"pointerout",move:"pointermove",cancel:"pointercancel"}:null,B.wheelEvent="onmousewheel"in N.default.document?"mousewheel":"wheel"},supportsTouch:null,supportsPointerEvent:null,isIOS7:null,isIOS:null,isIe9:null,isOperaMobile:null,prefixedMatchesSelector:null,pEventTypes:null,wheelEvent:null},U=B;F.default=U;var W={};function Y(t){return(Y="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(W,"__esModule",{value:!0}),W.default=function t(e){var r={};for(var n in e){var i=e[n];X.plainObject(i)?r[n]=t(i):X.array(i)?r[n]=V.from(i):r[n]=i}return r};var V=q(T),X=q(d);function Z(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Z=function(){return t},t}function q(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Y(t)&&"function"!=typeof t)return{default:t};var e=Z();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}var K={};function H(t){return(H="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(K,"__esModule",{value:!0}),K.nodeContains=function(t,e){for(;e;){if(e===t)return!0;e=e.parentNode}return!1},K.closest=function(t,e){for(;$.element(t);){if(ot(t,e))return t;t=it(t)}return null},K.parentNode=it,K.matchesSelector=ot,K.indexOfDeepestElement=function(t){var e,r,n=[],i=t[0],o=i?0:-1;for(e=1;e<t.length;e++){var a=t[e];if(a&&a!==i)if(i){if(a.parentNode!==a.ownerDocument)if(i.parentNode!==a.ownerDocument)if(a.parentNode!==i.parentNode){if(!n.length)for(var s=i,u=void 0;(u=at(s))&&u!==s.ownerDocument;)n.unshift(s),s=u;var l=void 0;if(i instanceof Q.default.HTMLElement&&a instanceof Q.default.SVGElement&&!(a instanceof Q.default.SVGSVGElement)){if(a===i.parentNode)continue;l=a.ownerSVGElement}else l=a;for(var c=[];l.parentNode!==l.ownerDocument;)c.unshift(l),l=at(l);for(r=0;c[r]&&c[r]===n[r];)r++;for(var h=[c[r-1],c[r],n[r]],f=h[0].lastChild;f;){if(f===h[1]){i=a,o=e,n=c;break}if(f===h[2])break;f=f.previousSibling}}else{(parseInt((0,tt.getWindow)(i).getComputedStyle(i).zIndex,10)||0)<=(parseInt((0,tt.getWindow)(a).getComputedStyle(a).zIndex,10)||0)&&(i=a,o=e)}else i=a,o=e}else i=a,o=e}return o},K.matchesUpTo=function(t,e,r){for(;$.element(t);){if(ot(t,e))return!0;if((t=it(t))===r)return ot(t,e)}return!1},K.getActualElement=function(t){return t instanceof Q.default.SVGElementInstance?t.correspondingUseElement:t},K.getScrollXY=st,K.getElementClientRect=ut,K.getElementRect=function(t){var e=ut(t);if(!J.default.isIOS7&&e){var r=st(tt.default.getWindow(t));e.left+=r.x,e.right+=r.x,e.top+=r.y,e.bottom+=r.y}return e},K.getPath=function(t){for(var e=[];t;)e.push(t),t=it(t);return e},K.trySelector=function(t){return!!$.string(t)&&(Q.default.document.querySelector(t),!0)};var J=nt(F),Q=nt(R),$=rt(d),tt=rt(s);function et(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return et=function(){return t},t}function rt(t){if(t&&t.__esModule)return t;if(null===t||"object"!==H(t)&&"function"!=typeof t)return{default:t};var e=et();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function nt(t){return t&&t.__esModule?t:{default:t}}function it(t){var e=t.parentNode;if($.docFrag(e)){for(;(e=e.host)&&$.docFrag(e););return e}return e}function ot(t,e){return tt.default.window!==tt.default.realWindow&&(e=e.replace(/\/deep\//g," ")),t[J.default.prefixedMatchesSelector](e)}var at=function(t){return t.parentNode?t.parentNode:t.host};function st(t){return{x:(t=t||tt.default.window).scrollX||t.document.documentElement.scrollLeft,y:t.scrollY||t.document.documentElement.scrollTop}}function ut(t){var e=t instanceof Q.default.SVGElement?t.getBoundingClientRect():t.getClientRects()[0];return e&&{left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width||e.right-e.left,height:e.height||e.bottom-e.top}}var lt={};Object.defineProperty(lt,"__esModule",{value:!0}),lt.default=function(t,e){for(var r in e)t[r]=e[r];return t};var ct={};function ht(t){return(ht="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(ct,"__esModule",{value:!0}),ct.default=function t(e,r,n){if(n=n||{},dt.string(e)&&-1!==e.search(" ")&&(e=gt(e)),dt.array(e))return e.reduce((function(e,i){return(0,pt.default)(e,t(i,r,n))}),n);if(dt.object(e)&&(r=e,e=""),dt.func(r))n[e]=n[e]||[],n[e].push(r);else if(dt.array(r))for(var i=0;i<r.length;i++){var o=r[i];t(e,o,n)}else if(dt.object(r))for(var a in r){var s=gt(a).map((function(t){return"".concat(e).concat(t)}));t(s,r[a],n)}return n};var ft,pt=(ft=lt)&&ft.__esModule?ft:{default:ft},dt=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ht(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d);function gt(t){return t.trim().split(/ +/)}var yt={};function _t(t){return(_t="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(yt,"__esModule",{value:!0}),yt.default=void 0;var vt=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==_t(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(T),mt=wt(lt),bt=wt(ct);function wt(t){return t&&t.__esModule?t:{default:t}}function xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function St(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Et(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(t.immediatePropagationStopped)break;n(t)}}var Ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),St(this,"options",void 0),St(this,"types",{}),St(this,"propagationStopped",!1),St(this,"immediatePropagationStopped",!1),St(this,"global",void 0),this.options=(0,mt.default)({},e||{})}var e,r;return e=t,(r=[{key:"fire",value:function(t){var e,r=this.global;(e=this.types[t.type])&&Et(t,e),!t.propagationStopped&&r&&(e=r[t.type])&&Et(t,e)}},{key:"on",value:function(t,e){var r=(0,bt.default)(t,e);for(t in r)this.types[t]=vt.merge(this.types[t]||[],r[t])}},{key:"off",value:function(t,e){var r=(0,bt.default)(t,e);for(t in r){var n=this.types[t];if(n&&n.length)for(var i=0;i<r[t].length;i++){var o=r[t][i],a=n.indexOf(o);-1!==a&&n.splice(a,1)}}}},{key:"getRect",value:function(){return null}}])&&xt(e.prototype,r),t}();yt.default=Ot;var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.default=void 0,Mt.default=function(t,e){return Math.sqrt(t*t+e*e)};var Pt={};function Tt(t,e){for(var r in e){var n=Tt.prefixedPropREs,i=!1;for(var o in n)if(0===r.indexOf(o)&&n[o].test(r)){i=!0;break}i||"function"==typeof e[r]||(t[r]=e[r])}return t}Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.default=void 0,Tt.prefixedPropREs={webkit:/(Movement[XY]|Radius[XY]|RotationAngle|Force)$/,moz:/(Pressure)$/};var Ct=Tt;Pt.default=Ct;var It={};function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(It,"__esModule",{value:!0}),It.copyCoords=function(t,e){t.page=t.page||{},t.page.x=e.page.x,t.page.y=e.page.y,t.client=t.client||{},t.client.x=e.client.x,t.client.y=e.client.y,t.timeStamp=e.timeStamp},It.setCoordDeltas=function(t,e,r){t.page.x=r.page.x-e.page.x,t.page.y=r.page.y-e.page.y,t.client.x=r.client.x-e.client.x,t.client.y=r.client.y-e.client.y,t.timeStamp=r.timeStamp-e.timeStamp},It.setCoordVelocity=function(t,e){var r=Math.max(e.timeStamp/1e3,.001);t.page.x=e.page.x/r,t.page.y=e.page.y/r,t.client.x=e.client.x/r,t.client.y=e.client.y/r,t.timeStamp=r},It.setZeroCoords=function(t){t.page.x=0,t.page.y=0,t.client.x=0,t.client.y=0},It.isNativePointer=Bt,It.getXY=Ut,It.getPageXY=Wt,It.getClientXY=Yt,It.getPointerId=function(t){return jt.number(t.pointerId)?t.pointerId:t.identifier},It.setCoords=function(t,e,r){var n=1<e.length?Xt(e):e[0],i={};Wt(n,i),t.page.x=i.x,t.page.y=i.y,Yt(n,i),t.client.x=i.x,t.client.y=i.y,t.timeStamp=r},It.getTouchPair=Vt,It.pointerAverage=Xt,It.touchBBox=function(t){if(!(t.length||t.touches&&1<t.touches.length))return null;var e=Vt(t),r=Math.min(e[0].pageX,e[1].pageX),n=Math.min(e[0].pageY,e[1].pageY),i=Math.max(e[0].pageX,e[1].pageX),o=Math.max(e[0].pageY,e[1].pageY);return{x:r,y:n,left:r,top:n,right:i,bottom:o,width:i-r,height:o-n}},It.touchDistance=function(t,e){var r=e+"X",n=e+"Y",i=Vt(t),o=i[0][r]-i[1][r],a=i[0][n]-i[1][n];return(0,Ft.default)(o,a)},It.touchAngle=function(t,e){var r=e+"X",n=e+"Y",i=Vt(t),o=i[1][r]-i[0][r],a=i[1][n]-i[0][n];return 180*Math.atan2(a,o)/Math.PI},It.getPointerType=function(t){return jt.string(t.pointerType)?t.pointerType:jt.number(t.pointerType)?[void 0,void 0,"touch","pen","mouse"][t.pointerType]:/touch/.test(t.type)||t instanceof At.default.Touch?"touch":"mouse"},It.getEventTargets=function(t){var e=jt.func(t.composedPath)?t.composedPath():t.path;return[kt.getActualElement(e?e[0]:t.target),kt.getActualElement(t.currentTarget)]},It.newCoords=function(){return{page:{x:0,y:0},client:{x:0,y:0},timeStamp:0}},It.coordsToEvent=function(t){return{coords:t,get page(){return this.coords.page},get client(){return this.coords.client},get timeStamp(){return this.coords.timeStamp},get pageX(){return this.coords.page.x},get pageY(){return this.coords.page.y},get clientX(){return this.coords.client.x},get clientY(){return this.coords.client.y},get pointerId(){return this.coords.pointerId},get target(){return this.coords.target},get type(){return this.coords.type},get pointerType(){return this.coords.pointerType},get buttons(){return this.coords.buttons},preventDefault:function(){}}},Object.defineProperty(It,"pointerExtend",{enumerable:!0,get:function(){return Nt.default}});var Lt=Gt(F),At=Gt(R),kt=zt(K),Ft=Gt(Mt),jt=zt(d),Nt=Gt(Pt);function Dt(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Dt=function(){return t},t}function zt(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Rt(t)&&"function"!=typeof t)return{default:t};var e=Dt();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function Gt(t){return t&&t.__esModule?t:{default:t}}function Bt(t){return t instanceof At.default.Event||t instanceof At.default.Touch}function Ut(t,e,r){return(r=r||{}).x=e[(t=t||"page")+"X"],r.y=e[t+"Y"],r}function Wt(t,e){return e=e||{x:0,y:0},Lt.default.isOperaMobile&&Bt(t)?(Ut("screen",t,e),e.x+=window.scrollX,e.y+=window.scrollY):Ut("page",t,e),e}function Yt(t,e){return e=e||{},Lt.default.isOperaMobile&&Bt(t)?Ut("screen",t,e):Ut("client",t,e),e}function Vt(t){var e=[];return jt.array(t)?(e[0]=t[0],e[1]=t[1]):"touchend"===t.type?1===t.touches.length?(e[0]=t.touches[0],e[1]=t.changedTouches[0]):0===t.touches.length&&(e[0]=t.changedTouches[0],e[1]=t.changedTouches[1]):(e[0]=t.touches[0],e[1]=t.touches[1]),e}function Xt(t){for(var e={pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0},r=0;r<t.length;r++){var n=t[r];for(var i in e)e[i]+=n[i]}for(var o in e)e[o]/=t.length;return e}var Zt={};function qt(t){return(qt="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.getStringOptionResult=Qt,Zt.resolveRectLike=function(t,e,r,n){var i=t;return Jt.string(i)?i=Qt(i,e,r):Jt.func(i)&&(i=i.apply(void 0,function(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(n))),Jt.element(i)&&(i=(0,K.getElementRect)(i)),i},Zt.rectToXY=function(t){return t&&{x:"x"in t?t.x:t.left,y:"y"in t?t.y:t.top}},Zt.xywhToTlbr=function(t){return!t||"left"in t&&"top"in t||((t=(0,Ht.default)({},t)).left=t.x||0,t.top=t.y||0,t.right=t.right||t.left+t.width,t.bottom=t.bottom||t.top+t.height),t},Zt.tlbrToXywh=function(t){return!t||"x"in t&&"y"in t||((t=(0,Ht.default)({},t)).x=t.left||0,t.y=t.top||0,t.width=t.width||t.right||0-t.x,t.height=t.height||t.bottom||0-t.y),t},Zt.addEdges=function(t,e,r){t.left&&(e.left+=r.x),t.right&&(e.right+=r.x),t.top&&(e.top+=r.y),t.bottom&&(e.bottom+=r.y),e.width=e.right-e.left,e.height=e.bottom-e.top};var Kt,Ht=(Kt=lt)&&Kt.__esModule?Kt:{default:Kt},Jt=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==qt(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d);function Qt(t,e,r){return"parent"===t?(0,K.parentNode)(r):"self"===t?e.getRect(r):(0,K.closest)(r,t)}var $t={};Object.defineProperty($t,"__esModule",{value:!0}),$t.default=function(t,e,r){var n=t.options[r],i=n&&n.origin||t.options.origin,o=(0,Zt.resolveRectLike)(i,t,e,[t&&e]);return(0,Zt.rectToXY)(o)||{x:0,y:0}};var te={};Object.defineProperty(te,"__esModule",{value:!0}),te.default=void 0;var ee,re,ne=0,ie={request:function(t){return ee(t)},cancel:function(t){return re(t)},init:function(t){if(ee=t.requestAnimationFrame,re=t.cancelAnimationFrame,!ee)for(var e=["ms","moz","webkit","o"],r=0;r<e.length;r++){var n=e[r];ee=t["".concat(n,"RequestAnimationFrame")],re=t["".concat(n,"CancelAnimationFrame")]||t["".concat(n,"CancelRequestAnimationFrame")]}ee||(ee=function(t){var e=Date.now(),r=Math.max(0,16-(e-ne)),n=setTimeout((function(){t(e+r)}),r);return ne=e+r,n},re=function(t){return clearTimeout(t)})}};te.default=ie;var oe={};function ae(t){return(ae="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(oe,"__esModule",{value:!0}),oe.warnOnce=function(t,e){var r=!1;return function(){return r||(fe.default.window.console.warn(e),r=!0),t.apply(this,arguments)}},oe.copyAction=function(t,e){return t.name=e.name,t.axis=e.axis,t.edges=e.edges,t},Object.defineProperty(oe,"win",{enumerable:!0,get:function(){return fe.default}}),Object.defineProperty(oe,"browser",{enumerable:!0,get:function(){return pe.default}}),Object.defineProperty(oe,"clone",{enumerable:!0,get:function(){return de.default}}),Object.defineProperty(oe,"extend",{enumerable:!0,get:function(){return ge.default}}),Object.defineProperty(oe,"getOriginXY",{enumerable:!0,get:function(){return ye.default}}),Object.defineProperty(oe,"hypot",{enumerable:!0,get:function(){return _e.default}}),Object.defineProperty(oe,"normalizeListeners",{enumerable:!0,get:function(){return ve.default}}),Object.defineProperty(oe,"raf",{enumerable:!0,get:function(){return me.default}}),oe.rect=oe.pointer=oe.is=oe.dom=oe.arr=void 0;var se=xe(T);oe.arr=se;var ue=xe(K);oe.dom=ue;var le=xe(d);oe.is=le;var ce=xe(It);oe.pointer=ce;var he=xe(Zt);oe.rect=he;var fe=be(s),pe=be(F),de=be(W),ge=be(lt),ye=be($t),_e=be(Mt),ve=be(ct),me=be(te);function be(t){return t&&t.__esModule?t:{default:t}}function we(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return we=function(){return t},t}function xe(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ae(t)&&"function"!=typeof t)return{default:t};var e=we();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}var Se={};function Ee(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Oe(t,e,r){return e&&Ee(t.prototype,e),r&&Ee(t,r),t}function Me(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Object.defineProperty(Se,"__esModule",{value:!0}),Se.default=Se.BaseEvent=void 0;var Pe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Me(this,"type",void 0),Me(this,"target",void 0),Me(this,"currentTarget",void 0),Me(this,"interactable",void 0),Me(this,"_interaction",void 0),Me(this,"timeStamp",void 0),Me(this,"immediatePropagationStopped",!1),Me(this,"propagationStopped",!1),this._interaction=e}return Oe(t,[{key:"interaction",get:function(){return this._interaction._proxy}}]),Oe(t,[{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}]),t}(),Te=Se.BaseEvent=Pe;Se.default=Te;var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.default=Ce.defaults=void 0;var Ie=Ce.defaults={base:{preventDefault:"auto",deltaSource:"page"},perAction:{enabled:!1,origin:{x:0,y:0}},actions:{}};Ce.default=Ie;var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.default=Re.InteractEvent=void 0;var Le=Ne(lt),Ae=Ne($t),ke=Ne(Mt),Fe=Ne(Se),je=Ne(Ce);function Ne(t){return t&&t.__esModule?t:{default:t}}function De(t){return(De="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}function ze(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ge(t){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function We(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ye=function(){function t(e,r,n,i,o,a,s){var u,l;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),u=!(l=Ge(t).call(this,e))||"object"!==De(l)&&"function"!=typeof l?Be(this):l,We(Be(u),"target",void 0),We(Be(u),"currentTarget",void 0),We(Be(u),"relatedTarget",null),We(Be(u),"screenX",void 0),We(Be(u),"screenY",void 0),We(Be(u),"button",void 0),We(Be(u),"buttons",void 0),We(Be(u),"ctrlKey",void 0),We(Be(u),"shiftKey",void 0),We(Be(u),"altKey",void 0),We(Be(u),"metaKey",void 0),We(Be(u),"page",void 0),We(Be(u),"client",void 0),We(Be(u),"delta",void 0),We(Be(u),"rect",void 0),We(Be(u),"x0",void 0),We(Be(u),"y0",void 0),We(Be(u),"t0",void 0),We(Be(u),"dt",void 0),We(Be(u),"duration",void 0),We(Be(u),"clientX0",void 0),We(Be(u),"clientY0",void 0),We(Be(u),"velocity",void 0),We(Be(u),"speed",void 0),We(Be(u),"swipe",void 0),We(Be(u),"timeStamp",void 0),We(Be(u),"dragEnter",void 0),We(Be(u),"dragLeave",void 0),We(Be(u),"axes",void 0),We(Be(u),"preEnd",void 0),o=o||e.element;var c=e.interactable,h=(c&&c.options||je.default).deltaSource,f=(0,Ae.default)(c,o,n),p="start"===i,d="end"===i,g=p?Be(u):e.prevEvent,y=p?e.coords.start:d?{page:g.page,client:g.client,timeStamp:e.coords.cur.timeStamp}:e.coords.cur;return u.page=(0,Le.default)({},y.page),u.client=(0,Le.default)({},y.client),u.rect=(0,Le.default)({},e.rect),u.timeStamp=y.timeStamp,d||(u.page.x-=f.x,u.page.y-=f.y,u.client.x-=f.x,u.client.y-=f.y),u.ctrlKey=r.ctrlKey,u.altKey=r.altKey,u.shiftKey=r.shiftKey,u.metaKey=r.metaKey,u.button=r.button,u.buttons=r.buttons,u.target=o,u.currentTarget=o,u.preEnd=a,u.type=s||n+(i||""),u.interactable=c,u.t0=p?e.pointers[e.pointers.length-1].downTime:g.t0,u.x0=e.coords.start.page.x-f.x,u.y0=e.coords.start.page.y-f.y,u.clientX0=e.coords.start.client.x-f.x,u.clientY0=e.coords.start.client.y-f.y,u.delta=p||d?{x:0,y:0}:{x:u[h].x-g[h].x,y:u[h].y-g[h].y},u.dt=e.coords.delta.timeStamp,u.duration=u.timeStamp-u.t0,u.velocity=(0,Le.default)({},e.coords.velocity[h]),u.speed=(0,ke.default)(u.velocity.x,u.velocity.y),u.swipe=d||"inertiastart"===i?u.getSwipe():null,u}var e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(t,Fe.default),e=t,(r=[{key:"getSwipe",value:function(){var t=this._interaction;if(t.prevEvent.speed<600||150<this.timeStamp-t.prevEvent.timeStamp)return null;var e=180*Math.atan2(t.prevEvent.velocityY,t.prevEvent.velocityX)/Math.PI;e<0&&(e+=360);var r=112.5<=e&&e<247.5,n=202.5<=e&&e<337.5;return{up:n,down:!n&&22.5<=e&&e<157.5,left:r,right:!r&&(292.5<=e||e<67.5),angle:e,speed:t.prevEvent.speed,velocity:{x:t.prevEvent.velocityX,y:t.prevEvent.velocityY}}}},{key:"preventDefault",value:function(){}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"pageX",get:function(){return this.page.x},set:function(t){this.page.x=t}},{key:"pageY",get:function(){return this.page.y},set:function(t){this.page.y=t}},{key:"clientX",get:function(){return this.client.x},set:function(t){this.client.x=t}},{key:"clientY",get:function(){return this.client.y},set:function(t){this.client.y=t}},{key:"dx",get:function(){return this.delta.x},set:function(t){this.delta.x=t}},{key:"dy",get:function(){return this.delta.y},set:function(t){this.delta.y=t}},{key:"velocityX",get:function(){return this.velocity.x},set:function(t){this.velocity.x=t}},{key:"velocityY",get:function(){return this.velocity.y},set:function(t){this.velocity.y=t}}])&&ze(e.prototype,r),t}(),Ve=Re.InteractEvent=Ye;Re.default=Ve;var Xe={};function Ze(t){return(Ze="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.default=void 0;var qe,Ke=tr(T),He=tr(K),Je=(qe=lt)&&qe.__esModule?qe:{default:qe},Qe=tr(d);function $e(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return $e=function(){return t},t}function tr(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Ze(t)&&"function"!=typeof t)return{default:t};var e=$e();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function er(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var nr=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scope=e,rr(this,"list",[]),rr(this,"selectorMap",{}),e.addListeners({"interactable:unset":function(t){var e=t.interactable,n=e.target,i=e._context,o=Qe.string(n)?r.selectorMap[n]:n[r.scope.id],a=o.findIndex((function(t){return t.context===i}));o[a]&&(o[a].context=null,o[a].interactable=null),o.splice(a,1)}})}var e,r;return e=t,(r=[{key:"new",value:function(t,e){e=(0,Je.default)(e||{},{actions:this.scope.actions});var r=new this.scope.Interactable(t,e,this.scope.document,this.scope.events),n={context:r._context,interactable:r};return this.scope.addDocument(r._doc),this.list.push(r),Qe.string(t)?(this.selectorMap[t]||(this.selectorMap[t]=[]),this.selectorMap[t].push(n)):(r.target[this.scope.id]||Object.defineProperty(t,this.scope.id,{value:[],configurable:!0}),t[this.scope.id].push(n)),this.scope.fire("interactable:new",{target:t,options:e,interactable:r,win:this.scope._win}),r}},{key:"get",value:function(t,e){var r=e&&e.context||this.scope.document,n=Qe.string(t),i=n?this.selectorMap[t]:t[this.scope.id];if(!i)return null;var o=Ke.find(i,(function(e){return e.context===r&&(n||e.interactable.inContext(t))}));return o&&o.interactable}},{key:"forEachMatch",value:function(t,e){for(var r=0;r<this.list.length;r++){var n=this.list[r],i=void 0;if((Qe.string(n.target)?Qe.element(t)&&He.matchesSelector(t,n.target):t===n.target)&&n.inContext(t)&&(i=e(n)),void 0!==i)return i}}}])&&er(e.prototype,r),t}();Xe.default=nr;var ir={};function or(t){return(or="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(ir,"__esModule",{value:!0}),ir.default=ir.FakeEvent=void 0;var ar=dr(T),sr=dr(K),ur=fr(lt),lr=dr(d),cr=fr(Pt),hr=dr(It);function fr(t){return t&&t.__esModule?t:{default:t}}function pr(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return pr=function(){return t},t}function dr(t){if(t&&t.__esModule)return t;if(null===t||"object"!==or(t)&&"function"!=typeof t)return{default:t};var e=pr();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function gr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var _r=function(){function t(e){var r,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.originalEvent=e,n=void 0,(r="currentTarget")in this?Object.defineProperty(this,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[r]=n,(0,cr.default)(this,e)}var e,r;return e=t,(r=[{key:"preventOriginalDefault",value:function(){this.originalEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.originalEvent.stopPropagation()}},{key:"stopImmediatePropagation",value:function(){this.originalEvent.stopImmediatePropagation()}}])&&gr(e.prototype,r),t}();function vr(t){if(!lr.object(t))return{capture:!!t,passive:!1};var e=(0,ur.default)({},t);return e.capture=!!t.capture,e.passive=!!t.passive,e}ir.FakeEvent=_r;var mr={id:"events",install:function(t){var e=[],r={},n=[],i={add:o,remove:a,addDelegate:function(t,e,i,a,l){var c=vr(l);if(!r[i]){r[i]=[];for(var h=0;h<n.length;h++){var f=n[h];o(f,i,s),o(f,i,u,!0)}}var p=r[i],d=ar.find(p,(function(r){return r.selector===t&&r.context===e}));d||(d={selector:t,context:e,listeners:[]},p.push(d)),d.listeners.push([a,c])},removeDelegate:function(t,e,n,i,o){var l,c=vr(o),h=r[n],f=!1;if(h)for(l=h.length-1;0<=l;l--){var p=h[l];if(p.selector===t&&p.context===e){for(var d=p.listeners,g=d.length-1;0<=g;g--){var y=yr(d[g],2),_=y[0],v=y[1],m=v.capture,b=v.passive;if(_===i&&m===c.capture&&b===c.passive){d.splice(g,1),d.length||(h.splice(l,1),a(e,n,s),a(e,n,u,!0)),f=!0;break}}if(f)break}}},delegateListener:s,delegateUseCapture:u,delegatedEvents:r,documents:n,targets:e,supportsOptions:!1,supportsPassive:!1};function o(t,r,n,o){var a=vr(o),s=ar.find(e,(function(e){return e.eventTarget===t}));s||(s={eventTarget:t,events:{}},e.push(s)),s.events[r]||(s.events[r]=[]),t.addEventListener&&!ar.contains(s.events[r],n)&&(t.addEventListener(r,n,i.supportsOptions?a:a.capture),s.events[r].push(n))}function a(t,r,n,o){var s=vr(o),u=ar.findIndex(e,(function(e){return e.eventTarget===t})),l=e[u];if(l&&l.events)if("all"!==r){var c=!1,h=l.events[r];if(h){if("all"===n){for(var f=h.length-1;0<=f;f--)a(t,r,h[f],s);return}for(var p=0;p<h.length;p++)if(h[p]===n){t.removeEventListener(r,n,i.supportsOptions?s:s.capture),h.splice(p,1),0===h.length&&(delete l.events[r],c=!0);break}}c&&!Object.keys(l.events).length&&e.splice(u,1)}else for(r in l.events)l.events.hasOwnProperty(r)&&a(t,r,"all")}function s(t,e){for(var n=vr(e),i=new _r(t),o=r[t.type],a=yr(hr.getEventTargets(t),1)[0],s=a;lr.element(s);){for(var u=0;u<o.length;u++){var l=o[u],c=l.selector,h=l.context;if(sr.matchesSelector(s,c)&&sr.nodeContains(h,a)&&sr.nodeContains(h,s)){var f=l.listeners;i.currentTarget=s;for(var p=0;p<f.length;p++){var d=yr(f[p],2),g=d[0],y=d[1],_=y.capture,v=y.passive;_===n.capture&&v===n.passive&&g(i)}}}s=sr.parentNode(s)}}function u(t){return s.call(this,t,!0)}return t.document.createElement("div").addEventListener("test",null,{get capture(){return i.supportsOptions=!0},get passive(){return i.supportsPassive=!0}}),t.events=i}};ir.default=mr;var br={};Object.defineProperty(br,"__esModule",{value:!0}),br.default=br.PointerInfo=void 0;var wr=br.PointerInfo=function t(e,r,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.pointer=r,this.event=n,this.downTime=i,this.downTarget=o};br.default=wr;var xr={};function Sr(t){return(Sr="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(xr,"__esModule",{value:!0}),Object.defineProperty(xr,"PointerInfo",{enumerable:!0,get:function(){return Ir.default}}),xr.default=xr.Interaction=xr._ProxyMethods=xr._ProxyValues=void 0;var Er,Or,Mr,Pr,Tr=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Sr(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(oe),Cr=Rr(Re),Ir=Rr(br);function Rr(t){return t&&t.__esModule?t:{default:t}}function Lr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ar(t,e,r){return e&&Lr(t.prototype,e),r&&Lr(t,r),t}function kr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}xr._ProxyValues=Er,(Or=Er||(xr._ProxyValues=Er={})).interactable="",Or.element="",Or.prepared="",Or.pointerIsDown="",Or.pointerWasMoved="",Or._proxy="",xr._ProxyMethods=Mr,(Pr=Mr||(xr._ProxyMethods=Mr={})).start="",Pr.move="",Pr.end="",Pr.stop="",Pr.interacting="";var Fr=0,jr=function(){function t(e){var r=this,n=e.pointerType,i=e.scopeFire;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),kr(this,"interactable",null),kr(this,"element",null),kr(this,"rect",void 0),kr(this,"_rects",void 0),kr(this,"edges",void 0),kr(this,"_scopeFire",void 0),kr(this,"prepared",{name:null,axis:null,edges:null}),kr(this,"pointerType",void 0),kr(this,"pointers",[]),kr(this,"downEvent",null),kr(this,"downPointer",{}),kr(this,"_latestPointer",{pointer:null,event:null,eventTarget:null}),kr(this,"prevEvent",null),kr(this,"pointerIsDown",!1),kr(this,"pointerWasMoved",!1),kr(this,"_interacting",!1),kr(this,"_ending",!1),kr(this,"_stopped",!0),kr(this,"_proxy",null),kr(this,"simulation",null),kr(this,"doMove",Tr.warnOnce((function(t){this.move(t)}),"The interaction.doMove() method has been renamed to interaction.move()")),kr(this,"coords",{start:Tr.pointer.newCoords(),prev:Tr.pointer.newCoords(),cur:Tr.pointer.newCoords(),delta:Tr.pointer.newCoords(),velocity:Tr.pointer.newCoords()}),kr(this,"_id",Fr++),this._scopeFire=i,this.pointerType=n;var o=this;function a(t){Object.defineProperty(r._proxy,t,{get:function(){return o[t]}})}for(var s in this._proxy={},Er)a(s);function u(t){Object.defineProperty(r._proxy,t,{value:function(){return o[t].apply(o,arguments)}})}for(var l in Mr)u(l);this._scopeFire("interactions:new",{interaction:this})}return Ar(t,[{key:"pointerMoveTolerance",get:function(){return 1}}]),Ar(t,[{key:"pointerDown",value:function(t,e,r){var n=this.updatePointer(t,e,r,!0),i=this.pointers[n];this._scopeFire("interactions:down",{pointer:t,event:e,eventTarget:r,pointerIndex:n,pointerInfo:i,type:"down",interaction:this})}},{key:"start",value:function(t,e,r){return!(this.interacting()||!this.pointerIsDown||this.pointers.length<("gesture"===t.name?2:1)||!e.options[t.name].enabled)&&(Tr.copyAction(this.prepared,t),this.interactable=e,this.element=r,this.rect=e.getRect(r),this.edges=this.prepared.edges?Tr.extend({},this.prepared.edges):{left:!0,right:!0,top:!0,bottom:!0},this._stopped=!1,this._interacting=this._doPhase({interaction:this,event:this.downEvent,phase:"start"})&&!this._stopped,this._interacting)}},{key:"pointerMove",value:function(t,e,r){this.simulation||this.modification&&this.modification.endResult||this.updatePointer(t,e,r,!1);var n,i,o=this.coords.cur.page.x===this.coords.prev.page.x&&this.coords.cur.page.y===this.coords.prev.page.y&&this.coords.cur.client.x===this.coords.prev.client.x&&this.coords.cur.client.y===this.coords.prev.client.y;this.pointerIsDown&&!this.pointerWasMoved&&(n=this.coords.cur.client.x-this.coords.start.client.x,i=this.coords.cur.client.y-this.coords.start.client.y,this.pointerWasMoved=Tr.hypot(n,i)>this.pointerMoveTolerance);var a=this.getPointerIndex(t),s={pointer:t,pointerIndex:a,pointerInfo:this.pointers[a],event:e,type:"move",eventTarget:r,dx:n,dy:i,duplicate:o,interaction:this};o||Tr.pointer.setCoordVelocity(this.coords.velocity,this.coords.delta),this._scopeFire("interactions:move",s),o||this.simulation||(this.interacting()&&(s.type=null,this.move(s)),this.pointerWasMoved&&Tr.pointer.copyCoords(this.coords.prev,this.coords.cur))}},{key:"move",value:function(t){t&&t.event||Tr.pointer.setZeroCoords(this.coords.delta),(t=Tr.extend({pointer:this._latestPointer.pointer,event:this._latestPointer.event,eventTarget:this._latestPointer.eventTarget,interaction:this},t||{})).phase="move",this._doPhase(t)}},{key:"pointerUp",value:function(t,e,r,n){var i=this.getPointerIndex(t);-1===i&&(i=this.updatePointer(t,e,r,!1));var o=/cancel$/i.test(e.type)?"cancel":"up";this._scopeFire("interactions:".concat(o),{pointer:t,pointerIndex:i,pointerInfo:this.pointers[i],event:e,eventTarget:r,type:o,curEventTarget:n,interaction:this}),this.simulation||this.end(e),this.pointerIsDown=!1,this.removePointer(t,e)}},{key:"documentBlur",value:function(t){this.end(t),this._scopeFire("interactions:blur",{event:t,type:"blur",interaction:this})}},{key:"end",value:function(t){var e;this._ending=!0,t=t||this._latestPointer.event,this.interacting()&&(e=this._doPhase({event:t,interaction:this,phase:"end"})),!(this._ending=!1)===e&&this.stop()}},{key:"currentAction",value:function(){return this._interacting?this.prepared.name:null}},{key:"interacting",value:function(){return this._interacting}},{key:"stop",value:function(){this._scopeFire("interactions:stop",{interaction:this}),this.interactable=this.element=null,this._interacting=!1,this._stopped=!0,this.prepared.name=this.prevEvent=null}},{key:"getPointerIndex",value:function(t){var e=Tr.pointer.getPointerId(t);return"mouse"===this.pointerType||"pen"===this.pointerType?this.pointers.length-1:Tr.arr.findIndex(this.pointers,(function(t){return t.id===e}))}},{key:"getPointerInfo",value:function(t){return this.pointers[this.getPointerIndex(t)]}},{key:"updatePointer",value:function(t,e,r,n){var i=Tr.pointer.getPointerId(t),o=this.getPointerIndex(t),a=this.pointers[o];return n=!1!==n&&(n||/(down|start)$/i.test(e.type)),a?a.pointer=t:(a=new Ir.default(i,t,e,null,null),o=this.pointers.length,this.pointers.push(a)),Tr.pointer.setCoords(this.coords.cur,this.pointers.map((function(t){return t.pointer})),this._now()),Tr.pointer.setCoordDeltas(this.coords.delta,this.coords.prev,this.coords.cur),n&&(this.pointerIsDown=!0,a.downTime=this.coords.cur.timeStamp,a.downTarget=r,Tr.pointer.pointerExtend(this.downPointer,t),this.interacting()||(Tr.pointer.copyCoords(this.coords.start,this.coords.cur),Tr.pointer.copyCoords(this.coords.prev,this.coords.cur),this.downEvent=e,this.pointerWasMoved=!1)),this._updateLatestPointer(t,e,r),this._scopeFire("interactions:update-pointer",{pointer:t,event:e,eventTarget:r,down:n,pointerInfo:a,pointerIndex:o,interaction:this}),o}},{key:"removePointer",value:function(t,e){var r=this.getPointerIndex(t);if(-1!==r){var n=this.pointers[r];this._scopeFire("interactions:remove-pointer",{pointer:t,event:e,eventTarget:null,pointerIndex:r,pointerInfo:n,interaction:this}),this.pointers.splice(r,1)}}},{key:"_updateLatestPointer",value:function(t,e,r){this._latestPointer.pointer=t,this._latestPointer.event=e,this._latestPointer.eventTarget=r}},{key:"destroy",value:function(){this._latestPointer.pointer=null,this._latestPointer.event=null,this._latestPointer.eventTarget=null}},{key:"_createPreparedEvent",value:function(t,e,r,n){return new Cr.default(this,t,this.prepared.name,e,this.element,r,n)}},{key:"_fireEvent",value:function(t){this.interactable.fire(t),(!this.prevEvent||t.timeStamp>=this.prevEvent.timeStamp)&&(this.prevEvent=t)}},{key:"_doPhase",value:function(t){var e=t.event,r=t.phase,n=t.preEnd,i=t.type,o=this.rect;if(o&&"move"===r&&(Tr.rect.addEdges(this.edges,o,this.coords.delta[this.interactable.options.deltaSource]),o.width=o.right-o.left,o.height=o.bottom-o.top),!1===this._scopeFire("interactions:before-action-".concat(r),t))return!1;var a=t.iEvent=this._createPreparedEvent(e,r,n,i);return this._scopeFire("interactions:action-".concat(r),t),"start"===r&&(this.prevEvent=a),this._fireEvent(a),this._scopeFire("interactions:after-action-".concat(r),t),!0}},{key:"_now",value:function(){return Date.now()}}]),t}(),Nr=xr.Interaction=jr;xr.default=Nr;var Dr={};function zr(t){return(zr="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.install=Wr,Dr.default=void 0;var Gr=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==zr(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d);function Br(t){return/^(always|never|auto)$/.test(t)?(this.options.preventDefault=t,this):Gr.bool(t)?(this.options.preventDefault=t?"always":"never",this):this.options.preventDefault}function Ur(t){var e=t.interaction,r=t.event;e.interactable&&e.interactable.checkAndPreventDefault(r)}function Wr(t){var e=t.Interactable;e.prototype.preventDefault=Br,e.prototype.checkAndPreventDefault=function(e){return function(t,e,r){var n=t.options.preventDefault;if("never"!==n)if("always"!==n){if(e.events.supportsPassive&&/^touch(start|move)$/.test(r.type)){var i=(0,s.getWindow)(r.target).document,o=e.getDocOptions(i);if(!o||!o.events||!1!==o.events.passive)return}/^(mouse|pointer|touch)*(down|start)/i.test(r.type)||Gr.element(r.target)&&(0,K.matchesSelector)(r.target,"input,select,textarea,[contenteditable=true],[contenteditable=true] *")||r.preventDefault()}else r.preventDefault()}(this,t,e)},t.interactions.docEvents.push({type:"dragstart",listener:function(e){for(var r=0;r<t.interactions.list.length;r++){var n=t.interactions.list[r];if(n.element&&(n.element===e.target||(0,K.nodeContains)(n.element,e.target)))return void n.interactable.checkAndPreventDefault(e)}}})}var Yr={id:"core/interactablePreventDefault",install:Wr,listeners:["down","move","up","cancel"].reduce((function(t,e){return t["interactions:".concat(e)]=Ur,t}),{})};Dr.default=Yr;var Vr={};function Xr(t){return(Xr="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Vr,"__esModule",{value:!0}),Vr.default=void 0;var Zr=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Xr(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(K);var qr={methodOrder:["simulationResume","mouseOrPen","hasPointer","idle"],search:function(t){for(var e=0;e<qr.methodOrder.length;e++){var r;r=qr.methodOrder[e];var n=qr[r](t);if(n)return n}return null},simulationResume:function(t){var e=t.pointerType,r=t.eventType,n=t.eventTarget,i=t.scope;if(!/down|start/i.test(r))return null;for(var o=0;o<i.interactions.list.length;o++){var a=i.interactions.list[o],s=n;if(a.simulation&&a.simulation.allowResume&&a.pointerType===e)for(;s;){if(s===a.element)return a;s=Zr.parentNode(s)}}return null},mouseOrPen:function(t){var e,r=t.pointerId,n=t.pointerType,i=t.eventType,o=t.scope;if("mouse"!==n&&"pen"!==n)return null;for(var a=0;a<o.interactions.list.length;a++){var s=o.interactions.list[a];if(s.pointerType===n){if(s.simulation&&!Kr(s,r))continue;if(s.interacting())return s;e=e||s}}if(e)return e;for(var u=0;u<o.interactions.list.length;u++){var l=o.interactions.list[u];if(!(l.pointerType!==n||/down/i.test(i)&&l.simulation))return l}return null},hasPointer:function(t){for(var e=t.pointerId,r=t.scope,n=0;n<r.interactions.list.length;n++){var i=r.interactions.list[n];if(Kr(i,e))return i}return null},idle:function(t){for(var e=t.pointerType,r=t.scope,n=0;n<r.interactions.list.length;n++){var i=r.interactions.list[n];if(1===i.pointers.length){var o=i.interactable;if(o&&(!o.options.gesture||!o.options.gesture.enabled))continue}else if(2<=i.pointers.length)continue;if(!i.interacting()&&e===i.pointerType)return i}return null}};function Kr(t,e){return t.pointers.some((function(t){return t.id===e}))}var Hr=qr;Vr.default=Hr;var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0}),Jr.default=void 0;var Qr,$r=(Qr=Se)&&Qr.__esModule?Qr:{default:Qr},tn=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==en(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(T);function en(t){return(en="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}function rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nn(t){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function on(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function an(t,e){return(an=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function sn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var un=function(){function t(e,r,n){var i,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=!(o=nn(t).call(this,r._interaction))||"object"!==en(o)&&"function"!=typeof o?on(this):o,sn(on(i),"target",void 0),sn(on(i),"dropzone",void 0),sn(on(i),"dragEvent",void 0),sn(on(i),"relatedTarget",void 0),sn(on(i),"draggable",void 0),sn(on(i),"timeStamp",void 0),sn(on(i),"propagationStopped",!1),sn(on(i),"immediatePropagationStopped",!1);var a="dragleave"===n?e.prev:e.cur,s=a.element,u=a.dropzone;return i.type=n,i.target=s,i.currentTarget=s,i.dropzone=u,i.dragEvent=r,i.relatedTarget=r.target,i.draggable=r.interactable,i.timeStamp=r.timeStamp,i}var e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&an(t,e)}(t,$r.default),e=t,(r=[{key:"reject",value:function(){var e=this,r=this._interaction.dropState;if("dropactivate"===this.type||this.dropzone&&r.cur.dropzone===this.dropzone&&r.cur.element===this.target)if(r.prev.dropzone=this.dropzone,r.prev.element=this.target,r.rejected=!0,r.events.enter=null,this.stopImmediatePropagation(),"dropactivate"===this.type){var n=r.activeDrops,i=tn.findIndex(n,(function(t){var r=t.dropzone,n=t.element;return r===e.dropzone&&n===e.target}));r.activeDrops.splice(i,1);var o=new t(r,this.dragEvent,"dropdeactivate");o.dropzone=this.dropzone,o.target=this.target,this.dropzone.fire(o)}else this.dropzone.fire(new t(r,this.dragEvent,"dragleave"))}},{key:"preventDefault",value:function(){}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"stopImmediatePropagation",value:function(){this.immediatePropagationStopped=this.propagationStopped=!0}}])&&rn(e.prototype,r),t}();Jr.default=un;var ln={};function cn(t){return(cn="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(ln,"__esModule",{value:!0}),ln.default=void 0,dn(e({})),dn(r({}));var hn=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==cn(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(oe),fn=dn(w),pn=dn(Jr);function dn(t){return t&&t.__esModule?t:{default:t}}function gn(t,e){for(var r=0;r<t.slice().length;r++){var n,i=(n=t.slice()[r]).dropzone,o=n.element;e.dropzone=i,e.target=o,i.fire(e),e.propagationStopped=e.immediatePropagationStopped=!1}}function yn(t,e){for(var r=function(t,e){for(var r=t.interactables,n=[],i=0;i<r.list.length;i++){var o=r.list[i];if(o.options.drop.enabled){var a=o.options.drop.accept;if(!(hn.is.element(a)&&a!==e||hn.is.string(a)&&!hn.dom.matchesSelector(e,a)||hn.is.func(a)&&!a({dropzone:o,draggableElement:e})))for(var s=hn.is.string(o.target)?o._context.querySelectorAll(o.target):hn.is.array(o.target)?o.target:[o.target],u=0;u<s.length;u++){var l;(l=s[u])!==e&&n.push({dropzone:o,element:l})}}}return n}(t,e),n=0;n<r.length;n++){var i;(i=r[n]).rect=i.dropzone.getRect(i.element)}return r}function _n(t,e,r){for(var n=t.dropState,i=t.interactable,o=t.element,a=[],s=0;s<n.activeDrops.length;s++){var u,l=(u=n.activeDrops[s]).dropzone,c=u.element,h=u.rect;a.push(l.dropCheck(e,r,i,o,c,h)?c:null)}var f=hn.dom.indexOfDeepestElement(a);return n.activeDrops[f]||null}function vn(t,e,r){var n=t.dropState,i={enter:null,leave:null,activate:null,deactivate:null,move:null,drop:null};return"dragstart"===r.type&&(i.activate=new pn.default(n,r,"dropactivate"),i.activate.target=null,i.activate.dropzone=null),"dragend"===r.type&&(i.deactivate=new pn.default(n,r,"dropdeactivate"),i.deactivate.target=null,i.deactivate.dropzone=null),n.rejected||(n.cur.element!==n.prev.element&&(n.prev.dropzone&&(i.leave=new pn.default(n,r,"dragleave"),r.dragLeave=i.leave.target=n.prev.element,r.prevDropzone=i.leave.dropzone=n.prev.dropzone),n.cur.dropzone&&(i.enter=new pn.default(n,r,"dragenter"),r.dragEnter=n.cur.element,r.dropzone=n.cur.dropzone)),"dragend"===r.type&&n.cur.dropzone&&(i.drop=new pn.default(n,r,"drop"),r.dropzone=n.cur.dropzone,r.relatedTarget=n.cur.element),"dragmove"===r.type&&n.cur.dropzone&&(i.move=new pn.default(n,r,"dropmove"),(i.move.dragmove=r).dropzone=n.cur.dropzone)),i}function mn(t,e){var r=t.dropState,n=r.activeDrops,i=r.cur,o=r.prev;e.leave&&o.dropzone.fire(e.leave),e.move&&i.dropzone.fire(e.move),e.enter&&i.dropzone.fire(e.enter),e.drop&&i.dropzone.fire(e.drop),e.deactivate&&gn(n,e.deactivate),r.prev.dropzone=i.dropzone,r.prev.element=i.element}function bn(t,e){var r=t.interaction,n=t.iEvent,i=t.event;if("dragmove"===n.type||"dragend"===n.type){var o=r.dropState;e.dynamicDrop&&(o.activeDrops=yn(e,r.element));var a=n,s=_n(r,a,i);o.rejected=o.rejected&&!!s&&s.dropzone===o.cur.dropzone&&s.element===o.cur.element,o.cur.dropzone=s&&s.dropzone,o.cur.element=s&&s.element,o.events=vn(r,0,a)}}var wn={id:"actions/drop",install:function(t){var e=t.actions,r=t.interactStatic,n=t.Interactable,i=t.defaults;t.usePlugin(fn.default),n.prototype.dropzone=function(t){return function(t,e){if(hn.is.object(e)){if(t.options.drop.enabled=!1!==e.enabled,e.listeners){var r=hn.normalizeListeners(e.listeners),n=Object.keys(r).reduce((function(t,e){return t[/^(enter|leave)/.test(e)?"drag".concat(e):/^(activate|deactivate|move)/.test(e)?"drop".concat(e):e]=r[e],t}),{});t.off(t.options.drop.listeners),t.on(n),t.options.drop.listeners=n}return hn.is.func(e.ondrop)&&t.on("drop",e.ondrop),hn.is.func(e.ondropactivate)&&t.on("dropactivate",e.ondropactivate),hn.is.func(e.ondropdeactivate)&&t.on("dropdeactivate",e.ondropdeactivate),hn.is.func(e.ondragenter)&&t.on("dragenter",e.ondragenter),hn.is.func(e.ondragleave)&&t.on("dragleave",e.ondragleave),hn.is.func(e.ondropmove)&&t.on("dropmove",e.ondropmove),/^(pointer|center)$/.test(e.overlap)?t.options.drop.overlap=e.overlap:hn.is.number(e.overlap)&&(t.options.drop.overlap=Math.max(Math.min(1,e.overlap),0)),"accept"in e&&(t.options.drop.accept=e.accept),"checker"in e&&(t.options.drop.checker=e.checker),t}return hn.is.bool(e)?(t.options.drop.enabled=e,t):t.options.drop}(this,t)},n.prototype.dropCheck=function(t,e,r,n,i,o){return function(t,e,r,n,i,o,a){var s=!1;if(!(a=a||t.getRect(o)))return!!t.options.drop.checker&&t.options.drop.checker(e,r,s,t,o,n,i);var u=t.options.drop.overlap;if("pointer"===u){var l=hn.getOriginXY(n,i,"drag"),c=hn.pointer.getPageXY(e);c.x+=l.x,c.y+=l.y;var h=c.x>a.left&&c.x<a.right,f=c.y>a.top&&c.y<a.bottom;s=h&&f}var p=n.getRect(i);if(p&&"center"===u){var d=p.left+p.width/2,g=p.top+p.height/2;s=d>=a.left&&d<=a.right&&g>=a.top&&g<=a.bottom}p&&hn.is.number(u)&&(s=u<=Math.max(0,Math.min(a.right,p.right)-Math.max(a.left,p.left))*Math.max(0,Math.min(a.bottom,p.bottom)-Math.max(a.top,p.top))/(p.width*p.height));return t.options.drop.checker&&(s=t.options.drop.checker(e,r,s,t,o,n,i)),s}(this,t,e,r,n,i,o)},r.dynamicDrop=function(e){return hn.is.bool(e)?(t.dynamicDrop=e,r):t.dynamicDrop},hn.extend(e.phaselessTypes,{dragenter:!0,dragleave:!0,dropactivate:!0,dropdeactivate:!0,dropmove:!0,drop:!0}),e.methodDict.drop="dropzone",t.dynamicDrop=!1,i.actions.drop=wn.defaults},listeners:{"interactions:before-action-start":function(t){var e=t.interaction;"drag"===e.prepared.name&&(e.dropState={cur:{dropzone:null,element:null},prev:{dropzone:null,element:null},rejected:null,events:null,activeDrops:[]})},"interactions:after-action-start":function(t,e){var r=t.interaction,n=(t.event,t.iEvent);if("drag"===r.prepared.name){var i=r.dropState;i.activeDrops=null,i.events=null,i.activeDrops=yn(e,r.element),i.events=vn(r,0,n),i.events.activate&&(gn(i.activeDrops,i.events.activate),e.fire("actions/drop:start",{interaction:r,dragEvent:n}))}},"interactions:action-move":bn,"interactions:action-end":bn,"interactions:after-action-move":function(t,e){var r=t.interaction,n=t.iEvent;"drag"===r.prepared.name&&(mn(r,r.dropState.events),e.fire("actions/drop:move",{interaction:r,dragEvent:n}),r.dropState.events={})},"interactions:after-action-end":function(t,e){var r=t.interaction,n=t.iEvent;"drag"===r.prepared.name&&(mn(r,r.dropState.events),e.fire("actions/drop:end",{interaction:r,dragEvent:n}))},"interactions:stop":function(t){var e=t.interaction;if("drag"===e.prepared.name){var r=e.dropState;r&&(r.activeDrops=null,r.events=null,r.cur.dropzone=null,r.cur.element=null,r.prev.dropzone=null,r.prev.element=null,r.rejected=!1)}}},getActiveDrops:yn,getDrop:_n,getDropEvents:vn,fireDropEvents:mn,defaults:{enabled:!1,accept:null,overlap:"pointer"}},xn=wn;ln.default=xn;var Sn={};function En(t){return(En="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.default=void 0;var On=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==En(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(oe);function Mn(t){var e=t.interaction,r=t.iEvent,n=t.phase;if("gesture"===e.prepared.name){var i=e.pointers.map((function(t){return t.pointer})),o="start"===n,a="end"===n,s=e.interactable.options.deltaSource;if(r.touches=[i[0],i[1]],o)r.distance=On.pointer.touchDistance(i,s),r.box=On.pointer.touchBBox(i),r.scale=1,r.ds=0,r.angle=On.pointer.touchAngle(i,s),r.da=0,e.gesture.startDistance=r.distance,e.gesture.startAngle=r.angle;else if(a){var u=e.prevEvent;r.distance=u.distance,r.box=u.box,r.scale=u.scale,r.ds=0,r.angle=u.angle,r.da=0}else r.distance=On.pointer.touchDistance(i,s),r.box=On.pointer.touchBBox(i),r.scale=r.distance/e.gesture.startDistance,r.angle=On.pointer.touchAngle(i,s),r.ds=r.scale-e.gesture.scale,r.da=r.angle-e.gesture.angle;e.gesture.distance=r.distance,e.gesture.angle=r.angle,On.is.number(r.scale)&&r.scale!==1/0&&!isNaN(r.scale)&&(e.gesture.scale=r.scale)}}var Pn={id:"actions/gesture",before:["actions/drag","actions/resize"],install:function(t){var e=t.actions,r=t.Interactable,n=t.defaults;r.prototype.gesturable=function(t){return On.is.object(t)?(this.options.gesture.enabled=!1!==t.enabled,this.setPerAction("gesture",t),this.setOnEvents("gesture",t),this):On.is.bool(t)?(this.options.gesture.enabled=t,this):this.options.gesture},e.map.gesture=Pn,e.methodDict.gesture="gesturable",n.actions.gesture=Pn.defaults},listeners:{"interactions:action-start":Mn,"interactions:action-move":Mn,"interactions:action-end":Mn,"interactions:new":function(t){t.interaction.gesture={angle:0,distance:0,scale:1,startAngle:0,startDistance:0}},"auto-start:check":function(t){if(!(t.interaction.pointers.length<2)){var e=t.interactable.options.gesture;if(e&&e.enabled)return!(t.action={name:"gesture"})}}},defaults:{},getCursor:function(){return""}},Tn=Pn;Sn.default=Tn;var Cn={};function In(t){return(In="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.default=void 0;var Rn,Ln=jn(K),An=(Rn=lt)&&Rn.__esModule?Rn:{default:Rn},kn=jn(d);function Fn(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Fn=function(){return t},t}function jn(t){if(t&&t.__esModule)return t;if(null===t||"object"!==In(t)&&"function"!=typeof t)return{default:t};var e=Fn();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function Nn(t,e,r,n,i,o,a){if(!e)return!1;if(!0===e){var s=kn.number(o.width)?o.width:o.right-o.left,u=kn.number(o.height)?o.height:o.bottom-o.top;if(a=Math.min(a,("left"===t||"right"===t?s:u)/2),s<0&&("left"===t?t="right":"right"===t&&(t="left")),u<0&&("top"===t?t="bottom":"bottom"===t&&(t="top")),"left"===t)return r.x<(0<=s?o.left:o.right)+a;if("top"===t)return r.y<(0<=u?o.top:o.bottom)+a;if("right"===t)return r.x>(0<=s?o.right:o.left)-a;if("bottom"===t)return r.y>(0<=u?o.bottom:o.top)-a}return!!kn.element(n)&&(kn.element(e)?e===n:Ln.matchesUpTo(n,e,i))}function Dn(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.resizeAxes){var n=e;r.interactable.options.resize.square?("y"===r.resizeAxes?n.delta.x=n.delta.y:n.delta.y=n.delta.x,n.axes="xy"):(n.axes=r.resizeAxes,"x"===r.resizeAxes?n.delta.y=0:"y"===r.resizeAxes&&(n.delta.x=0))}}var zn={id:"actions/resize",before:["actions/drag"],install:function(t){var e=t.actions,r=t.browser,n=t.Interactable,i=t.defaults;zn.cursors=r.isIe9?{x:"e-resize",y:"s-resize",xy:"se-resize",top:"n-resize",left:"w-resize",bottom:"s-resize",right:"e-resize",topleft:"se-resize",bottomright:"se-resize",topright:"ne-resize",bottomleft:"ne-resize"}:{x:"ew-resize",y:"ns-resize",xy:"nwse-resize",top:"ns-resize",left:"ew-resize",bottom:"ns-resize",right:"ew-resize",topleft:"nwse-resize",bottomright:"nwse-resize",topright:"nesw-resize",bottomleft:"nesw-resize"},zn.defaultMargin=r.supportsTouch||r.supportsPointerEvent?20:10,n.prototype.resizable=function(e){return function(t,e,r){return kn.object(e)?(t.options.resize.enabled=!1!==e.enabled,t.setPerAction("resize",e),t.setOnEvents("resize",e),kn.string(e.axis)&&/^x$|^y$|^xy$/.test(e.axis)?t.options.resize.axis=e.axis:null===e.axis&&(t.options.resize.axis=r.defaults.actions.resize.axis),kn.bool(e.preserveAspectRatio)?t.options.resize.preserveAspectRatio=e.preserveAspectRatio:kn.bool(e.square)&&(t.options.resize.square=e.square),t):kn.bool(e)?(t.options.resize.enabled=e,t):t.options.resize}(this,e,t)},e.map.resize=zn,e.methodDict.resize="resizable",i.actions.resize=zn.defaults},listeners:{"interactions:new":function(t){t.interaction.resizeAxes="xy"},"interactions:action-start":function(t){!function(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.prepared.edges){var n=e,i=r.rect;r._rects={start:(0,An.default)({},i),corrected:(0,An.default)({},i),previous:(0,An.default)({},i),delta:{left:0,right:0,width:0,top:0,bottom:0,height:0}},n.edges=r.prepared.edges,n.rect=r._rects.corrected,n.deltaRect=r._rects.delta}}(t),Dn(t)},"interactions:action-move":function(t){!function(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.prepared.edges){var n=e,i=r.interactable.options.resize.invert,o="reposition"===i||"negate"===i,a=r.rect,s=r._rects,u=s.start,l=s.corrected,c=s.delta,h=s.previous;if((0,An.default)(h,l),o){if((0,An.default)(l,a),"reposition"===i){if(l.top>l.bottom){var f=l.top;l.top=l.bottom,l.bottom=f}if(l.left>l.right){var p=l.left;l.left=l.right,l.right=p}}}else l.top=Math.min(a.top,u.bottom),l.bottom=Math.max(a.bottom,u.top),l.left=Math.min(a.left,u.right),l.right=Math.max(a.right,u.left);for(var d in l.width=l.right-l.left,l.height=l.bottom-l.top,l)c[d]=l[d]-h[d];n.edges=r.prepared.edges,n.rect=l,n.deltaRect=c}}(t),Dn(t)},"interactions:action-end":function(t){var e=t.iEvent,r=t.interaction;if("resize"===r.prepared.name&&r.prepared.edges){var n=e;n.edges=r.prepared.edges,n.rect=r._rects.corrected,n.deltaRect=r._rects.delta}},"auto-start:check":function(t){var e=t.interaction,r=t.interactable,n=t.element,i=t.rect,o=t.buttons;if(i){var a=(0,An.default)({},e.coords.cur.page),s=r.options.resize;if(s&&s.enabled&&(!e.pointerIsDown||!/mouse|pointer/.test(e.pointerType)||0!=(o&s.mouseButtons))){if(kn.object(s.edges)){var u={left:!1,right:!1,top:!1,bottom:!1};for(var l in u)u[l]=Nn(l,s.edges[l],a,e._latestPointer.eventTarget,n,i,s.margin||zn.defaultMargin);u.left=u.left&&!u.right,u.top=u.top&&!u.bottom,(u.left||u.right||u.top||u.bottom)&&(t.action={name:"resize",edges:u})}else{var c="y"!==s.axis&&a.x>i.right-zn.defaultMargin,h="x"!==s.axis&&a.y>i.bottom-zn.defaultMargin;(c||h)&&(t.action={name:"resize",axes:(c?"x":"")+(h?"y":"")})}return!t.action&&void 0}}}},defaults:{square:!1,preserveAspectRatio:!1,axis:"xy",margin:NaN,edges:null,invert:"none"},cursors:null,getCursor:function(t){var e=t.edges,r=t.axis,n=t.name,i=zn.cursors,o=null;if(r)o=i[n+r];else if(e){for(var a="",s=["top","bottom","left","right"],u=0;u<s.length;u++){var l=s[u];e[l]&&(a+=l)}o=i[a]}return o},defaultMargin:null},Gn=zn;Cn.default=Gn;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0}),Object.defineProperty(Bn,"drag",{enumerable:!0,get:function(){return Un.default}}),Object.defineProperty(Bn,"drop",{enumerable:!0,get:function(){return Wn.default}}),Object.defineProperty(Bn,"gesture",{enumerable:!0,get:function(){return Yn.default}}),Object.defineProperty(Bn,"resize",{enumerable:!0,get:function(){return Vn.default}}),Bn.default=void 0;var Un=Xn(w),Wn=Xn(ln),Yn=Xn(Sn),Vn=Xn(Cn);function Xn(t){return t&&t.__esModule?t:{default:t}}var Zn={id:"actions",install:function(t){t.usePlugin(Yn.default),t.usePlugin(Vn.default),t.usePlugin(Un.default),t.usePlugin(Wn.default)}};Bn.default=Zn;var qn={};Object.defineProperty(qn,"__esModule",{value:!0}),qn.default=void 0,qn.default={};var Kn={};function Hn(t){return(Hn="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.getContainer=ii,Kn.getScroll=oi,Kn.getScrollSize=function(t){return $n.window(t)&&(t=window.document.body),{x:t.scrollWidth,y:t.scrollHeight}},Kn.getScrollSizeDelta=function(t,e){var r=t.interaction,n=t.element,i=r&&r.interactable.options[r.prepared.name].autoScroll;if(!i||!i.enabled)return e(),{x:0,y:0};var o=ii(i.container,r.interactable,n),a=oi(o);e();var s=oi(o);return{x:s.x-a.x,y:s.y-a.y}},Kn.default=void 0;var Jn,Qn=ri(K),$n=ri(d),ti=(Jn=te)&&Jn.__esModule?Jn:{default:Jn};function ei(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return ei=function(){return t},t}function ri(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Hn(t)&&"function"!=typeof t)return{default:t};var e=ei();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}var ni={defaults:{enabled:!1,margin:60,container:null,speed:300},now:Date.now,interaction:null,i:0,x:0,y:0,isScrolling:!1,prevTime:0,margin:0,speed:0,start:function(t){ni.isScrolling=!0,ti.default.cancel(ni.i),(t.autoScroll=ni).interaction=t,ni.prevTime=ni.now(),ni.i=ti.default.request(ni.scroll)},stop:function(){ni.isScrolling=!1,ni.interaction&&(ni.interaction.autoScroll=null),ti.default.cancel(ni.i)},scroll:function(){var t=ni.interaction,e=t.interactable,r=t.element,n=t.prepared.name,i=e.options[n].autoScroll,o=ii(i.container,e,r),a=ni.now(),s=(a-ni.prevTime)/1e3,u=i.speed*s;if(1<=u){var l={x:ni.x*u,y:ni.y*u};if(l.x||l.y){var c=oi(o);$n.window(o)?o.scrollBy(l.x,l.y):o&&(o.scrollLeft+=l.x,o.scrollTop+=l.y);var h=oi(o),f={x:h.x-c.x,y:h.y-c.y};(f.x||f.y)&&e.fire({type:"autoscroll",target:r,interactable:e,delta:f,interaction:t,container:o})}ni.prevTime=a}ni.isScrolling&&(ti.default.cancel(ni.i),ni.i=ti.default.request(ni.scroll))},check:function(t,e){var r=t.options;return r[e].autoScroll&&r[e].autoScroll.enabled},onInteractionMove:function(t){var e=t.interaction,r=t.pointer;if(e.interacting()&&ni.check(e.interactable,e.prepared.name))if(e.simulation)ni.x=ni.y=0;else{var n,i,o,a,s=e.interactable,u=e.element,l=e.prepared.name,c=s.options[l].autoScroll,h=ii(c.container,s,u);if($n.window(h))a=r.clientX<ni.margin,n=r.clientY<ni.margin,i=r.clientX>h.innerWidth-ni.margin,o=r.clientY>h.innerHeight-ni.margin;else{var f=Qn.getElementClientRect(h);a=r.clientX<f.left+ni.margin,n=r.clientY<f.top+ni.margin,i=r.clientX>f.right-ni.margin,o=r.clientY>f.bottom-ni.margin}ni.x=i?1:a?-1:0,ni.y=o?1:n?-1:0,ni.isScrolling||(ni.margin=c.margin,ni.speed=c.speed,ni.start(e))}}};function ii(t,e,r){return($n.string(t)?(0,Zt.getStringOptionResult)(t,e,r):t)||(0,s.getWindow)(r)}function oi(t){return $n.window(t)&&(t=window.document.body),{x:t.scrollLeft,y:t.scrollTop}}var ai={id:"auto-scroll",install:function(t){var e=t.defaults,r=t.actions;(t.autoScroll=ni).now=function(){return t.now()},r.phaselessTypes.autoscroll=!0,e.perAction.autoScroll=ni.defaults},listeners:{"interactions:new":function(t){t.interaction.autoScroll=null},"interactions:destroy":function(t){t.interaction.autoScroll=null,ni.stop(),ni.interaction&&(ni.interaction=null)},"interactions:stop":ni.stop,"interactions:action-move":function(t){return ni.onInteractionMove(t)}}};Kn.default=ai;var si={};function ui(t){return(ui="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(si,"__esModule",{value:!0}),si.default=void 0;var li=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ui(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d);function ci(t){return li.bool(t)?(this.options.styleCursor=t,this):null===t?(delete this.options.styleCursor,this):this.options.styleCursor}function hi(t){return li.func(t)?(this.options.actionChecker=t,this):null===t?(delete this.options.actionChecker,this):this.options.actionChecker}var fi={id:"auto-start/interactableMethods",install:function(t){var e=t.Interactable;e.prototype.getAction=function(e,r,n,i){var o,a,s,u,l,c,h,f=(a=r,s=n,u=i,l=t,c=(o=this).getRect(u),h={action:null,interactable:o,interaction:s,element:u,rect:c,buttons:a.buttons||{0:1,1:4,3:8,4:16}[a.button]},l.fire("auto-start:check",h),h.action);return this.options.actionChecker?this.options.actionChecker(e,r,f,this,i,n):f},e.prototype.ignoreFrom=(0,oe.warnOnce)((function(t){return this._backCompatOption("ignoreFrom",t)}),"Interactable.ignoreFrom() has been deprecated. Use Interactble.draggable({ignoreFrom: newValue})."),e.prototype.allowFrom=(0,oe.warnOnce)((function(t){return this._backCompatOption("allowFrom",t)}),"Interactable.allowFrom() has been deprecated. Use Interactble.draggable({allowFrom: newValue})."),e.prototype.actionChecker=hi,e.prototype.styleCursor=ci}};si.default=fi;var pi={};function di(t){return(di="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(pi,"__esModule",{value:!0}),pi.default=void 0;var gi,yi=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==di(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(oe),_i=(gi=si)&&gi.__esModule?gi:{default:gi};function vi(t,e,r,n,i){return e.testIgnoreAllow(e.options[t.name],r,n)&&e.options[t.name].enabled&&xi(e,r,t,i)?t:null}function mi(t,e,r,n,i,o,a){for(var s=0,u=n.length;s<u;s++){var l=n[s],c=i[s],h=l.getAction(e,r,t,c);if(h){var f=vi(h,l,c,o,a);if(f)return{action:f,interactable:l,element:c}}}return{action:null,interactable:null,element:null}}function bi(t,e,r,n,i){var o=[],a=[],s=n;function u(t){o.push(t),a.push(s)}for(;yi.is.element(s);){o=[],a=[],i.interactables.forEachMatch(s,u);var l=mi(t,e,r,o,a,n,i);if(l.action&&!l.interactable.options[l.action.name].manualStart)return l;s=yi.dom.parentNode(s)}return{action:null,interactable:null,element:null}}function wi(t,e,r){var n=e.action,i=e.interactable,o=e.element;n=n||{name:null},t.interactable=i,t.element=o,yi.copyAction(t.prepared,n),t.rect=i&&n.name?i.getRect(o):null,Oi(t,r),r.fire("autoStart:prepared",{interaction:t})}function xi(t,e,r,n){var i=t.options,o=i[r.name].max,a=i[r.name].maxPerElement,s=n.autoStart.maxInteractions,u=0,l=0,c=0;if(!(o&&a&&s))return!1;for(var h=0;h<n.interactions.list.length;h++){var f=n.interactions.list[h],p=f.prepared.name;if(f.interacting()){if(s<=++u)return!1;if(f.interactable===t){if(o<=(l+=p===r.name?1:0))return!1;if(f.element===e&&(c++,p===r.name&&a<=c))return!1}}}return 0<s}function Si(t,e){return yi.is.number(t)?(e.autoStart.maxInteractions=t,this):e.autoStart.maxInteractions}function Ei(t,e,r){var n=r.autoStart.cursorElement;n&&n!==t&&(n.style.cursor=""),t.ownerDocument.documentElement.style.cursor=e,t.style.cursor=e,r.autoStart.cursorElement=e?t:null}function Oi(t,e){var r=t.interactable,n=t.element,i=t.prepared;if("mouse"===t.pointerType&&r&&r.options.styleCursor){var o="";if(i.name){var a=r.options[i.name].cursorChecker;o=yi.is.func(a)?a(i,r,n,t._interacting):e.actions.map[i.name].getCursor(i)}Ei(t.element,o||"",e)}else e.autoStart.cursorElement&&Ei(e.autoStart.cursorElement,"",e)}var Mi={id:"auto-start/base",before:["actions","actions/drag","actions/resize","actions/gesture"],install:function(t){var e=t.interactStatic,r=t.defaults;t.usePlugin(_i.default),r.base.actionChecker=null,r.base.styleCursor=!0,yi.extend(r.perAction,{manualStart:!1,max:1/0,maxPerElement:1,allowFrom:null,ignoreFrom:null,mouseButtons:1}),e.maxInteractions=function(e){return Si(e,t)},t.autoStart={maxInteractions:1/0,withinInteractionLimit:xi,cursorElement:null}},listeners:{"interactions:down":function(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget;r.interacting()||wi(r,bi(r,n,i,o,e),e)},"interactions:move":function(t,e){var r,n,i,o,a,s;n=e,i=(r=t).interaction,o=r.pointer,a=r.event,s=r.eventTarget,"mouse"!==i.pointerType||i.pointerIsDown||i.interacting()||wi(i,bi(i,o,a,s,n),n),function(t,e){var r=t.interaction;if(r.pointerIsDown&&!r.interacting()&&r.pointerWasMoved&&r.prepared.name){e.fire("autoStart:before-start",t);var n=r.interactable,i=r.prepared.name;i&&n&&(n.options[i].manualStart||!xi(n,r.element,r.prepared,e)?r.stop():(r.start(r.prepared,n,r.element),Oi(r,e)))}}(t,e)},"interactions:stop":function(t,e){var r=t.interaction,n=r.interactable;n&&n.options.styleCursor&&Ei(r.element,"",e)}},maxInteractions:Si,withinInteractionLimit:xi,validateAction:vi};pi.default=Mi;var Pi={};function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.default=void 0;var Ci,Ii=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Ti(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d),Ri=(Ci=pi)&&Ci.__esModule?Ci:{default:Ci};var Li={id:"auto-start/dragAxis",listeners:{"autoStart:before-start":function(t,e){var r=t.interaction,n=t.eventTarget,i=t.dx,o=t.dy;if("drag"===r.prepared.name){var a=Math.abs(i),s=Math.abs(o),u=r.interactable.options.drag,l=u.startAxis,c=s<a?"x":a<s?"y":"xy";if(r.prepared.axis="start"===u.lockAxis?c[0]:u.lockAxis,"xy"!=c&&"xy"!==l&&l!==c){var h=function(t){if(t!==r.interactable){var i=r.interactable.options.drag;if(!i.manualStart&&t.testIgnoreAllow(i,f,n)){var o=t.getAction(r.downPointer,r.downEvent,r,f);if(o&&"drag"===o.name&&function(t,e){if(e){var r=e.options.drag.startAxis;return"xy"===t||"xy"===r||r===t}}(c,t)&&Ri.default.validateAction(o,t,f,n,e))return t}}};r.prepared.name=null;for(var f=n;Ii.element(f);){var p=e.interactables.forEachMatch(f,h);if(p){r.prepared.name="drag",r.interactable=p,r.element=f;break}f=(0,K.parentNode)(f)}}}}}};Pi.default=Li;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.default=void 0;var ki,Fi=(ki=pi)&&ki.__esModule?ki:{default:ki};function ji(t){var e=t.prepared&&t.prepared.name;if(!e)return null;var r=t.interactable.options;return r[e].hold||r[e].delay}var Ni={id:"auto-start/hold",install:function(t){var e=t.defaults;t.usePlugin(Fi.default),e.perAction.hold=0,e.perAction.delay=0},listeners:{"interactions:new":function(t){t.interaction.autoStartHoldTimer=null},"autoStart:prepared":function(t){var e=t.interaction,r=ji(e);0<r&&(e.autoStartHoldTimer=setTimeout((function(){e.start(e.prepared,e.interactable,e.element)}),r))},"interactions:move":function(t){var e=t.interaction,r=t.duplicate;e.pointerWasMoved&&!r&&clearTimeout(e.autoStartHoldTimer)},"autoStart:before-start":function(t){var e=t.interaction;0<ji(e)&&(e.prepared.name=null)}},getHoldDuration:ji};Ai.default=Ni;var Di={};Object.defineProperty(Di,"__esModule",{value:!0}),Object.defineProperty(Di,"autoStart",{enumerable:!0,get:function(){return zi.default}}),Object.defineProperty(Di,"dragAxis",{enumerable:!0,get:function(){return Gi.default}}),Object.defineProperty(Di,"hold",{enumerable:!0,get:function(){return Bi.default}}),Di.default=void 0;var zi=Ui(pi),Gi=Ui(Pi),Bi=Ui(Ai);function Ui(t){return t&&t.__esModule?t:{default:t}}var Wi={id:"auto-start",install:function(t){t.usePlugin(zi.default),t.usePlugin(Bi.default),t.usePlugin(Gi.default)}};Di.default=Wi;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.default=void 0,Yi.default={};var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.default=void 0,Vi.default={};var Xi={};function Zi(t){return(Zi="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.default=void 0;var qi,Ki;Hi(R),Hi(lt),function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Zi(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}r.default=t,e&&e.set(t,r)}(d),Hi(s);function Hi(t){return t&&t.__esModule?t:{default:t}}(Ki=qi=qi||{}).touchAction="touchAction",Ki.boxSizing="boxSizing",Ki.noListeners="noListeners";qi.touchAction,qi.boxSizing,qi.noListeners;var Ji={id:"dev-tools",install:function(){}};Xi.default=Ji;var Qi={};Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.default=void 0,Qi.default={};var $i={};function to(t){return(to="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty($i,"__esModule",{value:!0}),$i.getRectOffset=co,$i.default=void 0;var eo=io(W),ro=io(lt),no=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==to(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(Zt);function io(t){return t&&t.__esModule?t:{default:t}}function oo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ao(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function so(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var uo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.interaction=e,so(this,"states",[]),so(this,"startOffset",{left:0,right:0,top:0,bottom:0}),so(this,"startDelta",null),so(this,"result",null),so(this,"endResult",null),so(this,"edges",void 0),this.result=lo()}var e,r;return e=t,(r=[{key:"start",value:function(t,e){var r=t.phase,n=this.interaction,i=function(t){var e=t.interactable.options[t.prepared.name],r=e.modifiers;return r&&r.length?r.filter((function(t){return!t.options||!1!==t.options.enabled})):["snap","snapSize","snapEdges","restrict","restrictEdges","restrictSize"].map((function(t){var r=e[t];return r&&r.enabled&&{options:r,methods:r._methods}})).filter((function(t){return!!t}))}(n);this.prepareStates(i),this.edges=(0,ro.default)({},n.edges),this.startOffset=co(n.rect,e);var o={phase:r,pageCoords:e,preEnd:!(this.startDelta={x:0,y:0})};return this.result=lo(),this.startAll(o),this.result=this.setAll(o)}},{key:"fillArg",value:function(t){var e=this.interaction;t.interaction=e,t.interactable=e.interactable,t.element=e.element,t.rect=t.rect||e.rect,t.edges=this.edges,t.startOffset=this.startOffset}},{key:"startAll",value:function(t){this.fillArg(t);for(var e=0;e<this.states.length;e++){var r=this.states[e];r.methods.start&&(t.state=r).methods.start(t)}}},{key:"setAll",value:function(t){this.fillArg(t);var e=t.phase,r=t.preEnd,n=t.skipModifiers,i=t.rect;t.coords=(0,ro.default)({},t.pageCoords),t.rect=(0,ro.default)({},i);for(var o=n?this.states.slice(n):this.states,a=lo(t.coords,t.rect),s=0;s<o.length;s++){var u=o[s],l=u.options,c=(0,ro.default)({},t.coords),h=null;u.methods.set&&this.shouldDo(l,r,e)&&(h=(t.state=u).methods.set(t),no.addEdges(this.interaction.edges,t.rect,{x:t.coords.x-c.x,y:t.coords.y-c.y})),a.eventProps.push(h)}a.delta.x=t.coords.x-t.pageCoords.x,a.delta.y=t.coords.y-t.pageCoords.y,a.rectDelta.left=t.rect.left-i.left,a.rectDelta.right=t.rect.right-i.right,a.rectDelta.top=t.rect.top-i.top,a.rectDelta.bottom=t.rect.bottom-i.bottom;var f=this.result.coords,p=this.result.rect;if(f&&p){var d=a.rect.left!==p.left||a.rect.right!==p.right||a.rect.top!==p.top||a.rect.bottom!==p.bottom;a.changed=d||f.x!==a.coords.x||f.y!==a.coords.y}return a}},{key:"applyToInteraction",value:function(t){var e=this.interaction,r=t.phase,n=e.coords.cur,i=e.coords.start,o=this.result,a=this.startDelta,s=o.delta;"start"===r&&(0,ro.default)(this.startDelta,o.delta);for(var u=0;u<[[i,a],[n,s]].length;u++){var l=oo([[i,a],[n,s]][u],2),c=l[0],h=l[1];c.page.x+=h.x,c.page.y+=h.y,c.client.x+=h.x,c.client.y+=h.y}var f=this.result.rectDelta,p=t.rect||e.rect;p.left+=f.left,p.right+=f.right,p.top+=f.top,p.bottom+=f.bottom,p.width=p.right-p.left,p.height=p.bottom-p.top}},{key:"setAndApply",value:function(t){var e=this.interaction,r=t.phase,n=t.preEnd,i=t.skipModifiers,o=this.setAll({preEnd:n,phase:r,pageCoords:t.modifiedCoords||e.coords.cur.page});if(!(this.result=o).changed&&(!i||i<this.states.length)&&e.interacting())return!1;if(t.modifiedCoords){var a=e.coords.cur.page,s=t.modifiedCoords.x-a.x,u=t.modifiedCoords.y-a.y;o.coords.x+=s,o.coords.y+=u,o.delta.x+=s,o.delta.y+=u}this.applyToInteraction(t)}},{key:"beforeEnd",value:function(t){var e=t.interaction,r=t.event,n=this.states;if(n&&n.length){for(var i=!1,o=0;o<n.length;o++){var a=n[o],s=(t.state=a).options,u=a.methods,l=u.beforeEnd&&u.beforeEnd(t);if(l)return this.endResult=l,!1;i=i||!i&&this.shouldDo(s,!0,t.phase,!0)}i&&e.move({event:r,preEnd:!0})}}},{key:"stop",value:function(t){var e=t.interaction;if(this.states&&this.states.length){var r=(0,ro.default)({states:this.states,interactable:e.interactable,element:e.element,rect:null},t);this.fillArg(r);for(var n=0;n<this.states.length;n++){var i=this.states[n];(r.state=i).methods.stop&&i.methods.stop(r)}this.states=null,this.endResult=null}}},{key:"prepareStates",value:function(t){this.states=[];for(var e=0;e<t.length;e++){var r=t[e],n=r.options,i=r.methods,o=r.name;n&&!1===n.enabled||this.states.push({options:n,methods:i,index:e,name:o})}return this.states}},{key:"restoreInteractionCoords",value:function(t){var e=t.interaction,r=e.coords,n=e.rect,i=e.modification;if(i.result){for(var o=i.startDelta,a=i.result,s=a.delta,u=a.rectDelta,l=[[r.start,o],[r.cur,s]],c=0;c<l.length;c++){var h=oo(l[c],2),f=h[0],p=h[1];f.page.x-=p.x,f.page.y-=p.y,f.client.x-=p.x,f.client.y-=p.y}n.left-=u.left,n.right-=u.right,n.top-=u.top,n.bottom-=u.bottom}}},{key:"shouldDo",value:function(t,e,r,n){return!(!t||!1===t.enabled||n&&!t.endOnly||t.endOnly&&!e||"start"===r&&!t.setStart)}},{key:"copyFrom",value:function(t){this.startOffset=t.startOffset,this.startDelta=t.startDelta,this.edges=t.edges,this.states=t.states.map((function(t){return(0,eo.default)(t)})),this.result=lo((0,ro.default)({},t.result.coords),(0,ro.default)({},t.result.rect))}},{key:"destroy",value:function(){for(var t in this)this[t]=null}}])&&ao(e.prototype,r),t}();function lo(t,e){return{rect:e,coords:t,delta:{x:0,y:0},rectDelta:{left:0,right:0,top:0,bottom:0},eventProps:[],changed:!0}}function co(t,e){return t?{left:e.x-t.left,top:e.y-t.top,right:t.right-e.x,bottom:t.bottom-e.y}:{left:0,top:0,right:0,bottom:0}}$i.default=uo;var ho={};Object.defineProperty(ho,"__esModule",{value:!0}),ho.makeModifier=function(t,e){function r(t){var r=t||{};for(var o in r.enabled=!1!==r.enabled,n)o in r||(r[o]=n[o]);return{options:r,methods:i,name:e}}var n=t.defaults,i={start:t.start,set:t.set,beforeEnd:t.beforeEnd,stop:t.stop};return e&&"string"==typeof e&&(r._defaults=n,r._methods=i),r},ho.addEventModifiers=go,ho.default=void 0;var fo,po=(fo=$i)&&fo.__esModule?fo:{default:fo};function go(t){var e=t.iEvent,r=t.interaction.modification.result;r&&(e.modifiers=r.eventProps)}var yo={id:"modifiers/base",install:function(t){t.defaults.perAction.modifiers=[]},listeners:{"interactions:new":function(t){var e=t.interaction;e.modification=new po.default(e)},"interactions:before-action-start":function(t){var e=t.interaction.modification;e.start(t,t.interaction.coords.start.page),t.interaction.edges=e.edges,e.applyToInteraction(t)},"interactions:before-action-move":function(t){return t.interaction.modification.setAndApply(t)},"interactions:before-action-end":function(t){return t.interaction.modification.beforeEnd(t)},"interactions:action-start":go,"interactions:action-move":go,"interactions:action-end":go,"interactions:after-action-start":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-move":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:stop":function(t){return t.interaction.modification.stop(t)}},before:["actions","action/drag","actions/resize","actions/gesture"]};ho.default=yo;var _o={};function vo(t){return(vo="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(_o,"__esModule",{value:!0}),_o.addTotal=bo,_o.applyPending=xo,_o.default=void 0;var mo=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==vo(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(Zt);function bo(t){t.pointerIsDown&&(Eo(t.coords.cur,t.offset.total),t.offset.pending.x=0,t.offset.pending.y=0)}function wo(t){xo(t.interaction)}function xo(t){if(!(e=t).offset.pending.x&&!e.offset.pending.y)return!1;var e,r=t.offset.pending;return Eo(t.coords.cur,r),Eo(t.coords.delta,r),mo.addEdges(t.edges,t.rect,r),r.x=0,!(r.y=0)}function So(t){var e=t.x,r=t.y;this.offset.pending.x+=e,this.offset.pending.y+=r,this.offset.total.x+=e,this.offset.total.y+=r}function Eo(t,e){var r=t.page,n=t.client,i=e.x,o=e.y;r.x+=i,r.y+=o,n.x+=i,n.y+=o}xr._ProxyMethods.offsetBy="";var Oo={id:"offset",install:function(t){t.Interaction.prototype.offsetBy=So},listeners:{"interactions:new":function(t){t.interaction.offset={total:{x:0,y:0},pending:{x:0,y:0}}},"interactions:update-pointer":function(t){return bo(t.interaction)},"interactions:before-action-start":wo,"interactions:before-action-move":wo,"interactions:before-action-end":function(t){var e=t.interaction;if(xo(e))return e.move({offset:!0}),e.end(),!1},"interactions:stop":function(t){var e=t.interaction;e.offset.total.x=0,e.offset.total.y=0,e.offset.pending.x=0,e.offset.pending.y=0}}};_o.default=Oo;var Mo={};function Po(t){return(Po="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.default=Mo.InertiaState=void 0;var To=No($i),Co=jo(ho),Io=No(_o),Ro=jo(K),Lo=No(Mt),Ao=jo(d),ko=No(te);function Fo(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return Fo=function(){return t},t}function jo(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Po(t)&&"function"!=typeof t)return{default:t};var e=Fo();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function No(t){return t&&t.__esModule?t:{default:t}}function Do(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Go=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.interaction=e,zo(this,"active",!1),zo(this,"isModified",!1),zo(this,"smoothEnd",!1),zo(this,"allowResume",!1),zo(this,"modification",null),zo(this,"modifierCount",0),zo(this,"modifierArg",null),zo(this,"startCoords",null),zo(this,"t0",0),zo(this,"v0",0),zo(this,"te",0),zo(this,"targetOffset",null),zo(this,"modifiedOffset",null),zo(this,"currentOffset",null),zo(this,"lambda_v0",0),zo(this,"one_ve_v0",0),zo(this,"timeout",null)}var e,r;return e=t,(r=[{key:"start",value:function(t){var e=this.interaction,r=Bo(e);if(!r||!r.enabled)return!1;var n=e.coords.velocity.client,i=(0,Lo.default)(n.x,n.y),o=this.modification||(this.modification=new To.default(e));if(o.copyFrom(e.modification),this.t0=e._now(),this.allowResume=r.allowResume,this.v0=i,this.currentOffset={x:0,y:0},this.startCoords=e.coords.cur.page,this.modifierArg={interaction:e,interactable:e.interactable,element:e.element,rect:e.rect,edges:e.edges,pageCoords:this.startCoords,preEnd:!0,phase:"inertiastart"},this.t0-e.coords.cur.timeStamp<50&&i>r.minSpeed&&i>r.endSpeed)this.startInertia();else{if(o.result=o.setAll(this.modifierArg),!o.result.changed)return!1;this.startSmoothEnd()}return e.modification.result.rect=null,e.offsetBy(this.targetOffset),e._doPhase({interaction:e,event:t,phase:"inertiastart"}),e.offsetBy({x:-this.targetOffset.x,y:-this.targetOffset.y}),e.modification.result.rect=null,this.active=!0,e.simulation=this,!0}},{key:"startInertia",value:function(){var t=this,e=this.interaction.coords.velocity.client,r=Bo(this.interaction),n=r.resistance,i=-Math.log(r.endSpeed/this.v0)/n;this.targetOffset={x:(e.x-i)/n,y:(e.y-i)/n},this.te=i,this.lambda_v0=n/this.v0,this.one_ve_v0=1-r.endSpeed/this.v0;var o=this.modification,a=this.modifierArg;a.pageCoords={x:this.startCoords.x+this.targetOffset.x,y:this.startCoords.y+this.targetOffset.y},o.result=o.setAll(a),o.result.changed&&(this.isModified=!0,this.modifiedOffset={x:this.targetOffset.x+o.result.delta.x,y:this.targetOffset.y+o.result.delta.y}),this.timeout=ko.default.request((function(){return t.inertiaTick()}))}},{key:"startSmoothEnd",value:function(){var t=this;this.smoothEnd=!0,this.isModified=!0,this.targetOffset={x:this.modification.result.delta.x,y:this.modification.result.delta.y},this.timeout=ko.default.request((function(){return t.smoothEndTick()}))}},{key:"inertiaTick",value:function(){var t,e,r,n,i,o,a=this,s=this.interaction,u=Bo(s).resistance,l=(s._now()-this.t0)/1e3;if(l<this.te){var c,h=1-(Math.exp(-u*l)-this.lambda_v0)/this.one_ve_v0,f={x:(c=this.isModified?(t=0,e=this.targetOffset.x,r=this.targetOffset.y,n=this.modifiedOffset.x,i=this.modifiedOffset.y,{x:Uo(o=h,0,e,n),y:Uo(o,t,r,i)}):{x:this.targetOffset.x*h,y:this.targetOffset.y*h}).x-this.currentOffset.x,y:c.y-this.currentOffset.y};this.currentOffset.x+=f.x,this.currentOffset.y+=f.y,s.offsetBy(f),s.move(),this.timeout=ko.default.request((function(){return a.inertiaTick()}))}else s.offsetBy({x:this.modifiedOffset.x-this.currentOffset.x,y:this.modifiedOffset.y-this.currentOffset.y}),this.end()}},{key:"smoothEndTick",value:function(){var t=this,e=this.interaction,r=e._now()-this.t0,n=Bo(e).smoothEndDuration;if(r<n){var i=Wo(r,0,this.targetOffset.x,n),o=Wo(r,0,this.targetOffset.y,n),a={x:i-this.currentOffset.x,y:o-this.currentOffset.y};this.currentOffset.x+=a.x,this.currentOffset.y+=a.y,e.offsetBy(a),e.move({skipModifiers:this.modifierCount}),this.timeout=ko.default.request((function(){return t.smoothEndTick()}))}else e.offsetBy({x:this.targetOffset.x-this.currentOffset.x,y:this.targetOffset.y-this.currentOffset.y}),this.end()}},{key:"resume",value:function(t){var e=t.pointer,r=t.event,n=t.eventTarget,i=this.interaction;i.offsetBy({x:-this.currentOffset.x,y:-this.currentOffset.y}),i.updatePointer(e,r,n,!0),i._doPhase({interaction:i,event:r,phase:"resume"}),(0,It.copyCoords)(i.coords.prev,i.coords.cur),this.stop()}},{key:"end",value:function(){this.interaction.move(),this.interaction.end(),this.stop()}},{key:"stop",value:function(){this.active=this.smoothEnd=!1,this.interaction.simulation=null,ko.default.cancel(this.timeout)}}])&&Do(e.prototype,r),t}();function Bo(t){var e=t.interactable,r=t.prepared;return e&&e.options&&r.name&&e.options[r.name].inertia}function Uo(t,e,r,n){var i=1-t;return i*i*e+2*i*t*r+t*t*n}function Wo(t,e,r,n){return-r*(t/=n)*(t-2)+e}Mo.InertiaState=Go;var Yo={id:"inertia",before:["modifiers/base"],install:function(t){var e=t.defaults;t.usePlugin(Io.default),t.usePlugin(Co.default),t.actions.phases.inertiastart=!0,t.actions.phases.resume=!0,e.perAction.inertia={enabled:!1,resistance:10,minSpeed:100,endSpeed:10,allowResume:!0,smoothEndDuration:300}},listeners:{"interactions:new":function(t){var e=t.interaction;e.inertia=new Go(e)},"interactions:before-action-end":function(t){var e=t.interaction,r=t.event;return(!e._interacting||e.simulation||!e.inertia.start(r))&&null},"interactions:down":function(t){var e=t.interaction,r=t.eventTarget,n=e.inertia;if(n.active)for(var i=r;Ao.element(i);){if(i===e.element){n.resume(t);break}i=Ro.parentNode(i)}},"interactions:stop":function(t){var e=t.interaction.inertia;e.active&&e.stop()},"interactions:before-action-resume":function(t){var e=t.interaction.modification;e.stop(t),e.start(t,t.interaction.coords.cur.page),e.applyToInteraction(t)},"interactions:before-action-inertiastart":function(t){return t.interaction.modification.setAndApply(t)},"interactions:action-resume":Co.addEventModifiers,"interactions:action-inertiastart":Co.addEventModifiers,"interactions:after-action-inertiastart":function(t){return t.interaction.modification.restoreInteractionCoords(t)},"interactions:after-action-resume":function(t){return t.interaction.modification.restoreInteractionCoords(t)}}};Mo.default=Yo;var Vo,Xo={};function Zo(t){return(Zo="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Xo,"__esModule",{value:!0}),Xo.init=Xo.default=void 0;var qo=new(((Vo=r({}))&&Vo.__esModule?Vo:{default:Vo}).default),Ko=qo.interactStatic;function Ho(t){return qo.init(t)}Xo.default=Ko,Xo.init=Ho,"object"===("undefined"==typeof window?"undefined":Zo(window))&&window&&Ho(window);var Jo={};Object.defineProperty(Jo,"__esModule",{value:!0}),Jo.default=void 0,Jo.default={};var Qo={};Object.defineProperty(Qo,"__esModule",{value:!0}),Qo.default=void 0,Qo.default={};var $o={};function ta(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Object.defineProperty($o,"__esModule",{value:!0}),$o.default=void 0,$o.default=function(t){function e(e,n){for(var i=t.range,o=t.limits,a=void 0===o?{left:-1/0,right:1/0,top:-1/0,bottom:1/0}:o,s=t.offset,u=void 0===s?{x:0,y:0}:s,l={range:i,grid:t,x:null,y:null},c=0;c<r.length;c++){var h=ta(r[c],2),f=h[0],p=h[1],d=Math.round((e-u.x)/t[f]),g=Math.round((n-u.y)/t[p]);l[f]=Math.max(a.left,Math.min(a.right,d*t[f]+u.x)),l[p]=Math.max(a.top,Math.min(a.bottom,g*t[p]+u.y))}return l}var r=[["x","y"],["left","top"],["right","bottom"],["width","height"]].filter((function(e){var r=ta(e,2),n=r[0],i=r[1];return n in t||i in t}));return e.grid=t,e.coordFields=r,e};var ea={};Object.defineProperty(ea,"__esModule",{value:!0}),Object.defineProperty(ea,"edgeTarget",{enumerable:!0,get:function(){return ra.default}}),Object.defineProperty(ea,"elements",{enumerable:!0,get:function(){return na.default}}),Object.defineProperty(ea,"grid",{enumerable:!0,get:function(){return ia.default}});var ra=oa(Jo),na=oa(Qo),ia=oa($o);function oa(t){return t&&t.__esModule?t:{default:t}}var aa={};function sa(t){return(sa="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(aa,"__esModule",{value:!0}),aa.default=void 0;var ua,la=(ua=lt)&&ua.__esModule?ua:{default:ua},ca=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==sa(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(ea);var ha={id:"snappers",install:function(t){var e=t.interactStatic;e.snappers=(0,la.default)(e.snappers||{},ca),e.createSnapGrid=e.snappers.grid}};aa.default=ha;var fa={};Object.defineProperty(fa,"__esModule",{value:!0}),fa.aspectRatio=fa.default=void 0;var pa=ga(lt),da=ga($i);function ga(t){return t&&t.__esModule?t:{default:t}}function ya(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ya(Object(r),!0).forEach((function(e){va(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function va(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ma={start:function(t){var e=t.state,r=t.rect,n=t.edges,i=t.pageCoords,o=e.options.ratio,a=e.options,s=a.equalDelta,u=a.modifiers;"preserve"===o&&(o=r.width/r.height),e.startCoords=(0,pa.default)({},i),e.startRect=(0,pa.default)({},r),e.ratio=o,e.equalDelta=s;var l=e.linkedEdges={top:n.top||n.left&&!n.bottom,left:n.left||n.top&&!n.right,bottom:n.bottom||n.right&&!n.top,right:n.right||n.bottom&&!n.left};if(e.xIsPrimaryAxis=!(!n.left&&!n.right),e.equalDelta)e.edgeSign=(l.left?1:-1)*(l.top?1:-1);else{var c=e.xIsPrimaryAxis?l.top:l.left;e.edgeSign=c?-1:1}if((0,pa.default)(t.edges,l),u&&u.length){var h=new da.default(t.interaction);h.copyFrom(t.interaction.modification),h.prepareStates(u),(e.subModification=h).startAll(_a({},t))}},set:function(t){var e=t.state,r=t.rect,n=t.coords,i=(0,pa.default)({},n),o=e.equalDelta?ba:wa;if(o(e,e.xIsPrimaryAxis,n,r),!e.subModification)return null;var a=(0,pa.default)({},r);(0,Zt.addEdges)(e.linkedEdges,a,{x:n.x-i.x,y:n.y-i.y});var s=e.subModification.setAll(_a({},t,{rect:a,edges:e.linkedEdges,pageCoords:n,prevCoords:n,prevRect:a})),u=s.delta;return s.changed&&(o(e,Math.abs(u.x)>Math.abs(u.y),s.coords,s.rect),(0,pa.default)(n,s.coords)),s.eventProps},defaults:{ratio:"preserve",equalDelta:!1,modifiers:[],enabled:!1}};function ba(t,e,r){var n=t.startCoords,i=t.edgeSign;e?r.y=n.y+(r.x-n.x)*i:r.x=n.x+(r.y-n.y)*i}function wa(t,e,r,n){var i=t.startRect,o=t.startCoords,a=t.ratio,s=t.edgeSign;if(e){var u=n.width/a;r.y=o.y+(u-i.height)*s}else{var l=n.height*a;r.x=o.x+(l-i.width)*s}}fa.aspectRatio=ma;var xa=(0,ho.makeModifier)(ma,"aspectRatio");fa.default=xa;var Sa={};function Ea(){}Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.default=void 0,Ea._defaults={};var Oa=Ea;Sa.default=Oa;var Ma={};function Pa(t){return(Pa="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Ma,"__esModule",{value:!0}),Ma.getRestrictionRect=ka,Ma.restrict=Ma.default=void 0;var Ta,Ca=(Ta=lt)&&Ta.__esModule?Ta:{default:Ta},Ia=Aa(d),Ra=Aa(Zt);function La(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return La=function(){return t},t}function Aa(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Pa(t)&&"function"!=typeof t)return{default:t};var e=La();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function ka(t,e,r){return Ia.func(t)?Ra.resolveRectLike(t,e.interactable,e.element,[r.x,r.y,e]):Ra.resolveRectLike(t,e.interactable,e.element)}var Fa={start:function(t){var e=t.rect,r=t.startOffset,n=t.state,i=t.interaction,o=t.pageCoords,a=n.options,s=a.elementRect,u=(0,Ca.default)({left:0,top:0,right:0,bottom:0},a.offset||{});if(e&&s){var l=ka(a.restriction,i,o);if(l){var c=l.right-l.left-e.width,h=l.bottom-l.top-e.height;c<0&&(u.left+=c,u.right+=c),h<0&&(u.top+=h,u.bottom+=h)}u.left+=r.left-e.width*s.left,u.top+=r.top-e.height*s.top,u.right+=r.right-e.width*(1-s.right),u.bottom+=r.bottom-e.height*(1-s.bottom)}n.offset=u},set:function(t){var e=t.coords,r=t.interaction,n=t.state,i=n.options,o=n.offset,a=ka(i.restriction,r,e);if(a){var s=Ra.xywhToTlbr(a);e.x=Math.max(Math.min(s.right-o.right,e.x),s.left+o.left),e.y=Math.max(Math.min(s.bottom-o.bottom,e.y),s.top+o.top)}},defaults:{restriction:null,elementRect:null,offset:null,endOnly:!1,enabled:!1}};Ma.restrict=Fa;var ja=(0,ho.makeModifier)(Fa,"restrict");Ma.default=ja;var Na={};function Da(t){return(Da="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Na,"__esModule",{value:!0}),Na.restrictEdges=Na.default=void 0;var za,Ga=(za=lt)&&za.__esModule?za:{default:za},Ba=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Da(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(Zt);var Ua={top:1/0,left:1/0,bottom:-1/0,right:-1/0},Wa={top:-1/0,left:-1/0,bottom:1/0,right:1/0};function Ya(t,e){for(var r=["top","left","bottom","right"],n=0;n<r.length;n++){var i=r[n];i in t||(t[i]=e[i])}return t}var Va={noInner:Ua,noOuter:Wa,start:function(t){var e,r=t.interaction,n=t.startOffset,i=t.state,o=i.options;if(o){var a=(0,Ma.getRestrictionRect)(o.offset,r,r.coords.start.page);e=Ba.rectToXY(a)}e=e||{x:0,y:0},i.offset={top:e.y+n.top,left:e.x+n.left,bottom:e.y-n.bottom,right:e.x-n.right}},set:function(t){var e=t.coords,r=t.edges,n=t.interaction,i=t.state,o=i.offset,a=i.options;if(r){var s=(0,Ga.default)({},e),u=(0,Ma.getRestrictionRect)(a.inner,n,s)||{},l=(0,Ma.getRestrictionRect)(a.outer,n,s)||{};Ya(u,Ua),Ya(l,Wa),r.top?e.y=Math.min(Math.max(l.top+o.top,s.y),u.top+o.top):r.bottom&&(e.y=Math.max(Math.min(l.bottom+o.bottom,s.y),u.bottom+o.bottom)),r.left?e.x=Math.min(Math.max(l.left+o.left,s.x),u.left+o.left):r.right&&(e.x=Math.max(Math.min(l.right+o.right,s.x),u.right+o.right))}},defaults:{inner:null,outer:null,offset:null,endOnly:!1,enabled:!1}};Na.restrictEdges=Va;var Xa=(0,ho.makeModifier)(Va,"restrictEdges");Na.default=Xa;var Za,qa={};Object.defineProperty(qa,"__esModule",{value:!0}),qa.restrictRect=qa.default=void 0;var Ka=(0,((Za=lt)&&Za.__esModule?Za:{default:Za}).default)({get elementRect(){return{top:0,left:0,bottom:1,right:1}},set elementRect(t){}},Ma.restrict.defaults),Ha={start:Ma.restrict.start,set:Ma.restrict.set,defaults:Ka};qa.restrictRect=Ha;var Ja=(0,ho.makeModifier)(Ha,"restrictRect");qa.default=Ja;var Qa={};function $a(t){return($a="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(Qa,"__esModule",{value:!0}),Qa.restrictSize=Qa.default=void 0;var ts,es=(ts=lt)&&ts.__esModule?ts:{default:ts},rs=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==$a(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(Zt);var ns={width:-1/0,height:-1/0},is={width:1/0,height:1/0},os={start:function(t){return Na.restrictEdges.start(t)},set:function(t){var e=t.interaction,r=t.state,n=t.rect,i=t.edges,o=r.options;if(i){var a=rs.tlbrToXywh((0,Ma.getRestrictionRect)(o.min,e,t.coords))||ns,s=rs.tlbrToXywh((0,Ma.getRestrictionRect)(o.max,e,t.coords))||is;r.options={endOnly:o.endOnly,inner:(0,es.default)({},Na.restrictEdges.noInner),outer:(0,es.default)({},Na.restrictEdges.noOuter)},i.top?(r.options.inner.top=n.bottom-a.height,r.options.outer.top=n.bottom-s.height):i.bottom&&(r.options.inner.bottom=n.top+a.height,r.options.outer.bottom=n.top+s.height),i.left?(r.options.inner.left=n.right-a.width,r.options.outer.left=n.right-s.width):i.right&&(r.options.inner.right=n.left+a.width,r.options.outer.right=n.left+s.width),Na.restrictEdges.set(t),r.options=o}},defaults:{min:null,max:null,endOnly:!1,enabled:!1}};Qa.restrictSize=os;var as=(0,ho.makeModifier)(os,"restrictSize");Qa.default=as;var ss={};function us(){}Object.defineProperty(ss,"__esModule",{value:!0}),ss.default=void 0,us._defaults={};var ls=us;ss.default=ls;var cs={};function hs(t){return(hs="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(cs,"__esModule",{value:!0}),cs.snap=cs.default=void 0;var fs=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==hs(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(oe);var ps={start:function(t){var e,r,n,i=t.interaction,o=t.interactable,a=t.element,s=t.rect,u=t.state,l=t.startOffset,c=u.options,h=c.offsetWithOrigin?(r=(e=t).interaction.element,fs.rect.rectToXY(fs.rect.resolveRectLike(e.state.options.origin,null,null,[r]))||fs.getOriginXY(e.interactable,r,e.interaction.prepared.name)):{x:0,y:0};if("startCoords"===c.offset)n={x:i.coords.start.page.x,y:i.coords.start.page.y};else{var f=fs.rect.resolveRectLike(c.offset,o,a,[i]);(n=fs.rect.rectToXY(f)||{x:0,y:0}).x+=h.x,n.y+=h.y}var p=c.relativePoints;u.offsets=s&&p&&p.length?p.map((function(t,e){return{index:e,relativePoint:t,x:l.left-s.width*t.x+n.x,y:l.top-s.height*t.y+n.y}})):[fs.extend({index:0,relativePoint:null},n)]},set:function(t){var e=t.interaction,r=t.coords,n=t.state,i=n.options,o=n.offsets,a=fs.getOriginXY(e.interactable,e.element,e.prepared.name),s=fs.extend({},r),u=[];i.offsetWithOrigin||(s.x-=a.x,s.y-=a.y);for(var l=0;l<o.length;l++)for(var c=o[l],h=s.x-c.x,f=s.y-c.y,p=0,d=i.targets.length;p<d;p++){var g,y=i.targets[p];(g=fs.is.func(y)?y(h,f,e,c,p):y)&&u.push({x:(fs.is.number(g.x)?g.x:h)+c.x,y:(fs.is.number(g.y)?g.y:f)+c.y,range:fs.is.number(g.range)?g.range:i.range,source:y,index:p,offset:c})}for(var _={target:null,inRange:!1,distance:0,range:0,delta:{x:0,y:0}},v=0;v<u.length;v++){var m=u[v],b=m.range,w=m.x-s.x,x=m.y-s.y,S=fs.hypot(w,x),E=S<=b;b===1/0&&_.inRange&&_.range!==1/0&&(E=!1),_.target&&!(E?_.inRange&&b!==1/0?S/b<_.distance/_.range:b===1/0&&_.range!==1/0||S<_.distance:!_.inRange&&S<_.distance)||(_.target=m,_.distance=S,_.range=b,_.inRange=E,_.delta.x=w,_.delta.y=x)}return _.inRange&&(r.x=_.target.x,r.y=_.target.y),n.closest=_},defaults:{range:1/0,targets:null,offset:null,offsetWithOrigin:!0,origin:null,relativePoints:null,endOnly:!1,enabled:!1}};cs.snap=ps;var ds=(0,ho.makeModifier)(ps,"snap");cs.default=ds;var gs={};function ys(t){return(ys="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(gs,"__esModule",{value:!0}),gs.snapSize=gs.default=void 0;var _s,vs=(_s=lt)&&_s.__esModule?_s:{default:_s},ms=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==ys(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(d);function bs(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ws={start:function(t){var e=t.state,r=t.edges,n=e.options;if(!r)return null;t.state={options:{targets:null,relativePoints:[{x:r.left?0:1,y:r.top?0:1}],offset:n.offset||"self",origin:{x:0,y:0},range:n.range}},e.targetFields=e.targetFields||[["width","height"],["x","y"]],cs.snap.start(t),e.offsets=t.state.offsets,t.state=e},set:function(t){var e=t.interaction,r=t.state,n=t.coords,i=r.options,o=r.offsets,a={x:n.x-o[0].x,y:n.y-o[0].y};r.options=(0,vs.default)({},i),r.options.targets=[];for(var s=0;s<(i.targets||[]).length;s++){var u=(i.targets||[])[s],l=void 0;if(l=ms.func(u)?u(a.x,a.y,e):u){for(var c=0;c<r.targetFields.length;c++){var h=bs(r.targetFields[c],2),f=h[0],p=h[1];if(f in l||p in l){l.x=l[f],l.y=l[p];break}}r.options.targets.push(l)}}var d=cs.snap.set(t);return r.options=i,d},defaults:{range:1/0,targets:null,offset:null,endOnly:!1,enabled:!1}};gs.snapSize=ws;var xs=(0,ho.makeModifier)(ws,"snapSize");gs.default=xs;var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.snapEdges=Ss.default=void 0;var Es=Ms(W),Os=Ms(lt);function Ms(t){return t&&t.__esModule?t:{default:t}}var Ps={start:function(t){var e=t.edges;return e?(t.state.targetFields=t.state.targetFields||[[e.left?"left":"right",e.top?"top":"bottom"]],gs.snapSize.start(t)):null},set:gs.snapSize.set,defaults:(0,Os.default)((0,Es.default)(gs.snapSize.defaults),{targets:null,range:null,offset:{x:0,y:0}})};Ss.snapEdges=Ps;var Ts=(0,ho.makeModifier)(Ps,"snapEdges");Ss.default=Ts;var Cs={};function Is(){}Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.default=void 0,Is._defaults={};var Rs=Is;Cs.default=Rs;var Ls={};function As(){}Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.default=void 0,As._defaults={};var ks=As;Ls.default=ks;var Fs={};Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.default=void 0;var js=qs(fa),Ns=qs(Sa),Ds=qs(Na),zs=qs(Ma),Gs=qs(qa),Bs=qs(Qa),Us=qs(ss),Ws=qs(Ss),Ys=qs(cs),Vs=qs(gs),Xs=qs(Cs),Zs=qs(Ls);function qs(t){return t&&t.__esModule?t:{default:t}}var Ks={aspectRatio:js.default,restrictEdges:Ds.default,restrict:zs.default,restrictRect:Gs.default,restrictSize:Bs.default,snapEdges:Ws.default,snap:Ys.default,snapSize:Vs.default,spring:Xs.default,avoid:Ns.default,transform:Zs.default,rubberband:Us.default};Fs.default=Ks;var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.default=void 0;var Js=tu(aa),Qs=tu(Fs),$s=tu(ho);function tu(t){return t&&t.__esModule?t:{default:t}}var eu={id:"modifiers",install:function(t){var e=t.interactStatic;for(var r in t.usePlugin($s.default),t.usePlugin(Js.default),e.modifiers=Qs.default,Qs.default){var n=Qs.default[r],i=n._defaults,o=n._methods;i._methods=o,t.defaults.perAction[r]=i}}};Hs.default=eu;var ru={};Object.defineProperty(ru,"__esModule",{value:!0}),ru.default=void 0,ru.default={};var nu={};Object.defineProperty(nu,"__esModule",{value:!0}),nu.PointerEvent=nu.default=void 0;var iu,ou=(iu=Se)&&iu.__esModule?iu:{default:iu},au=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==su(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(It);function su(t){return(su="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}function uu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lu(t){return(lu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function cu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hu(t,e){return(hu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var pu=function(){function t(e,r,n,i,o,a){var s,u;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this,s=!(u=lu(t).call(this,o))||"object"!==su(u)&&"function"!=typeof u?cu(this):u,fu(cu(s),"type",void 0),fu(cu(s),"originalEvent",void 0),fu(cu(s),"pointerId",void 0),fu(cu(s),"pointerType",void 0),fu(cu(s),"double",void 0),fu(cu(s),"pageX",void 0),fu(cu(s),"pageY",void 0),fu(cu(s),"clientX",void 0),fu(cu(s),"clientY",void 0),fu(cu(s),"dt",void 0),fu(cu(s),"eventable",void 0),au.pointerExtend(cu(s),n),n!==r&&au.pointerExtend(cu(s),r),s.timeStamp=a,s.originalEvent=n,s.type=e,s.pointerId=au.getPointerId(r),s.pointerType=au.getPointerType(r),s.target=i,s.currentTarget=null,"tap"===e){var l=o.getPointerIndex(r);s.dt=s.timeStamp-o.pointers[l].downTime;var c=s.timeStamp-o.tapTime;s.double=!!(o.prevTap&&"doubletap"!==o.prevTap.type&&o.prevTap.target===s.target&&c<500)}else"doubletap"===e&&(s.dt=r.timeStamp-o.tapTime);return s}var e,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hu(t,e)}(t,ou.default),e=t,(r=[{key:"_subtractOrigin",value:function(t){var e=t.x,r=t.y;return this.pageX-=e,this.pageY-=r,this.clientX-=e,this.clientY-=r,this}},{key:"_addOrigin",value:function(t){var e=t.x,r=t.y;return this.pageX+=e,this.pageY+=r,this.clientX+=e,this.clientY+=r,this}},{key:"preventDefault",value:function(){this.originalEvent.preventDefault()}}])&&uu(e.prototype,r),t}();nu.PointerEvent=nu.default=pu;var du={};function gu(t){return(gu="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(du,"__esModule",{value:!0}),du.default=void 0,vu(xr),vu(r({}));var yu=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==gu(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(oe),_u=vu(nu);function vu(t){return t&&t.__esModule?t:{default:t}}var mu={id:"pointer-events/base",install:function(t){t.pointerEvents=mu,t.defaults.actions.pointerEvents=mu.defaults,yu.extend(t.actions.phaselessTypes,mu.types)},listeners:{"interactions:new":function(t){var e=t.interaction;e.prevTap=null,e.tapTime=0},"interactions:update-pointer":function(t){var e=t.down,r=t.pointerInfo;!e&&r.hold||(r.hold={duration:1/0,timeout:null})},"interactions:move":function(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,a=t.duplicate,s=r.getPointerIndex(n);a||r.pointerIsDown&&!r.pointerWasMoved||(r.pointerIsDown&&clearTimeout(r.pointers[s].hold.timeout),bu({interaction:r,pointer:n,event:i,eventTarget:o,type:"move"},e))},"interactions:down":function(t,e){!function(t,e){for(var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,a=t.pointerIndex,s=r.pointers[a].hold,u=yu.dom.getPath(o),l={interaction:r,pointer:n,event:i,eventTarget:o,type:"hold",targets:[],path:u,node:null},c=0;c<u.length;c++){var h=u[c];l.node=h,e.fire("pointerEvents:collect-targets",l)}if(l.targets.length){for(var f=1/0,p=0;p<l.targets.length;p++){var d=l.targets[p].eventable.options.holdDuration;d<f&&(f=d)}s.duration=f,s.timeout=setTimeout((function(){bu({interaction:r,eventTarget:o,pointer:n,event:i,type:"hold"},e)}),f)}}(t,e),bu(t,e)},"interactions:up":function(t,e){var r,n,i,o,a,s;xu(t),bu(t,e),n=e,i=(r=t).interaction,o=r.pointer,a=r.event,s=r.eventTarget,i.pointerWasMoved||bu({interaction:i,eventTarget:s,pointer:o,event:a,type:"tap"},n)},"interactions:cancel":function(t,e){xu(t),bu(t,e)}},PointerEvent:_u.default,fire:bu,collectEventTargets:wu,defaults:{holdDuration:600,ignoreFrom:null,allowFrom:null,origin:{x:0,y:0}},types:{down:!0,move:!0,up:!0,cancel:!0,tap:!0,doubletap:!0,hold:!0}};function bu(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,a=t.type,s=t.targets,u=void 0===s?wu(t,e):s,l=new _u.default(a,n,i,o,r,e.now());e.fire("pointerEvents:new",{pointerEvent:l});for(var c={interaction:r,pointer:n,event:i,eventTarget:o,targets:u,type:a,pointerEvent:l},h=0;h<u.length;h++){var f=u[h];for(var p in f.props||{})l[p]=f.props[p];var d=yu.getOriginXY(f.eventable,f.node);if(l._subtractOrigin(d),l.eventable=f.eventable,l.currentTarget=f.node,f.eventable.fire(l),l._addOrigin(d),l.immediatePropagationStopped||l.propagationStopped&&h+1<u.length&&u[h+1].node!==l.currentTarget)break}if(e.fire("pointerEvents:fired",c),"tap"===a){var g=l.double?bu({interaction:r,pointer:n,event:i,eventTarget:o,type:"doubletap"},e):l;r.prevTap=g,r.tapTime=g.timeStamp}return l}function wu(t,e){var r=t.interaction,n=t.pointer,i=t.event,o=t.eventTarget,a=t.type,s=r.getPointerIndex(n),u=r.pointers[s];if("tap"===a&&(r.pointerWasMoved||!u||u.downTarget!==o))return[];for(var l=yu.dom.getPath(o),c={interaction:r,pointer:n,event:i,eventTarget:o,type:a,path:l,targets:[],node:null},h=0;h<l.length;h++){var f=l[h];c.node=f,e.fire("pointerEvents:collect-targets",c)}return"hold"===a&&(c.targets=c.targets.filter((function(t){return t.eventable.options.holdDuration===r.pointers[s].hold.duration}))),c.targets}function xu(t){var e=t.interaction,r=t.pointerIndex;e.pointers[r].hold&&clearTimeout(e.pointers[r].hold.timeout)}var Su=mu;du.default=Su;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0}),Eu.default=void 0,Mu(nu);var Ou=Mu(du);function Mu(t){return t&&t.__esModule?t:{default:t}}function Pu(t){var e=t.interaction;e.holdIntervalHandle&&(clearInterval(e.holdIntervalHandle),e.holdIntervalHandle=null)}var Tu={id:"pointer-events/holdRepeat",install:function(t){t.usePlugin(Ou.default);var e=t.pointerEvents;e.defaults.holdRepeatInterval=0,e.types.holdrepeat=t.actions.phaselessTypes.holdrepeat=!0},listeners:["move","up","cancel","endall"].reduce((function(t,e){return t["pointerEvents:".concat(e)]=Pu,t}),{"pointerEvents:new":function(t){var e=t.pointerEvent;"hold"===e.type&&(e.count=(e.count||0)+1)},"pointerEvents:fired":function(t,e){var r=t.interaction,n=t.pointerEvent,i=t.eventTarget,o=t.targets;if("hold"===n.type&&o.length){var a=o[0].eventable.options.holdRepeatInterval;a<=0||(r.holdIntervalHandle=setTimeout((function(){e.pointerEvents.fire({interaction:r,eventTarget:i,type:"hold",pointer:n,event:n},e)}),a))}}})};Eu.default=Tu;var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.default=void 0;var Iu,Ru=(Iu=lt)&&Iu.__esModule?Iu:{default:Iu};function Lu(t){return(0,Ru.default)(this.events.options,t),this}var Au={id:"pointer-events/interactableTargets",install:function(t){var e=t.Interactable;e.prototype.pointerEvents=Lu;var r=e.prototype._backCompatOption;e.prototype._backCompatOption=function(t,e){var n=r.call(this,t,e);return n===this&&(this.events.options[t]=e),n}},listeners:{"pointerEvents:collect-targets":function(t,e){var r=t.targets,n=t.node,i=t.type,o=t.eventTarget;e.interactables.forEachMatch(n,(function(t){var e=t.events,a=e.options;e.types[i]&&e.types[i].length&&t.testIgnoreAllow(a,n,o)&&r.push({node:n,eventable:e,props:{interactable:t}})}))},"interactable:new":function(t){var e=t.interactable;e.events.getRect=function(t){return e.getRect(t)}},"interactable:set":function(t,e){var r=t.interactable,n=t.options;(0,Ru.default)(r.events.options,e.pointerEvents.defaults),(0,Ru.default)(r.events.options,n.pointerEvents||{})}}};Cu.default=Au;var ku={};function Fu(t){return(Fu="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(ku,"__esModule",{value:!0}),Object.defineProperty(ku,"holdRepeat",{enumerable:!0,get:function(){return Nu.default}}),Object.defineProperty(ku,"interactableTargets",{enumerable:!0,get:function(){return Du.default}}),ku.pointerEvents=ku.default=void 0;var ju=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Fu(t)&&"function"!=typeof t)return{default:t};var e=function(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return function(){return t},t}();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}(du);ku.pointerEvents=ju;var Nu=zu(Eu),Du=zu(Cu);function zu(t){return t&&t.__esModule?t:{default:t}}var Gu={id:"pointer-events",install:function(t){t.usePlugin(ju),t.usePlugin(Nu.default),t.usePlugin(Du.default)}};ku.default=Gu;var Bu,Uu={};function Wu(t){var e=t.Interactable;t.actions.phases.reflow=!0,e.prototype.reflow=function(e){return function(t,e,r){function n(){var n=i[s],u=t.getRect(n);if(!u)return"break";var l=oe.arr.find(r.interactions.list,(function(r){return r.interacting()&&r.interactable===t&&r.element===n&&r.prepared.name===e.name})),c=void 0;if(l)l.move(),a&&(c=l._reflowPromise||new o((function(t){l._reflowResolve=t})));else{var h=oe.rect.tlbrToXywh(u),f={page:{x:h.x,y:h.y},client:{x:h.x,y:h.y},timeStamp:r.now()},p=oe.pointer.coordsToEvent(f);c=function(t,e,r,n,i){var o=t.interactions.new({pointerType:"reflow"}),a={interaction:o,event:i,pointer:i,eventTarget:r,phase:"reflow"};o.interactable=e,o.element=r,o.prepared=(0,oe.extend)({},n),o.prevEvent=i,o.updatePointer(i,i,r,!0),o._doPhase(a);var s=oe.win.window.Promise?new oe.win.window.Promise((function(t){o._reflowResolve=t})):null;return o._reflowPromise=s,o.start(n,e,r),o._interacting?(o.move(a),o.end(i)):o.stop(),o.removePointer(i,i),o.pointerIsDown=!1,s}(r,t,n,e,p)}a&&a.push(c)}for(var i=oe.is.string(t.target)?oe.arr.from(t._context.querySelectorAll(t.target)):[t.target],o=oe.win.window.Promise,a=o?[]:null,s=0;s<i.length&&"break"!==n();s++);return a&&o.all(a).then((function(){return t}))}(this,e,t)}}Object.defineProperty(Uu,"__esModule",{value:!0}),Uu.install=Wu,Uu.default=void 0,(Bu=e({}))&&Bu.__esModule;var Yu={id:"reflow",install:Wu,listeners:{"interactions:stop":function(t,e){var r=t.interaction;"reflow"===r.pointerType&&(r._reflowResolve&&r._reflowResolve(),oe.arr.remove(e.interactions.list,r))}}};Uu.default=Yu;var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0}),Vu.default=void 0,Vu.default={};var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0}),Xu.exchange=void 0,Xu.exchange={};var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.default=void 0,Zu.default={};var qu={};function Ku(t){return(Ku="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}Object.defineProperty(qu,"__esModule",{value:!0}),qu.default=void 0;var Hu=yl(Bn),Ju=yl(qn),Qu=yl(Kn),$u=yl(Di),tl=yl(Yi),el=yl(Vi),rl=yl(Dr),nl=(yl(Xi),gl(Qi)),il=yl(Mo),ol=yl(Xo),al=yl(Hs),sl=yl(ru),ul=yl(_o),ll=yl(ku),cl=yl(Uu),hl=gl(Vu),fl=gl(It),pl=gl(Zu);function dl(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return dl=function(){return t},t}function gl(t){if(t&&t.__esModule)return t;if(null===t||"object"!==Ku(t)&&"function"!=typeof t)return{default:t};var e=dl();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var o=n?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function yl(t){return t&&t.__esModule?t:{default:t}}ol.default.use(sl.default),ol.default.use(rl.default),ol.default.use(ul.default),ol.default.use(tl.default),ol.default.use(Ju.default),ol.default.use(ll.default),ol.default.use(il.default),ol.default.use(al.default),ol.default.use($u.default),ol.default.use(Hu.default),ol.default.use(Qu.default),ol.default.use(cl.default),ol.default.feedback=nl,ol.default.use(el.default),ol.default.vue={components:pl},ol.default.__utils={exchange:Xu.exchange,displace:hl,pointer:fl};var _l=ol.default;qu.default=_l;var vl={exports:{}};Object.defineProperty(vl.exports,"__esModule",{value:!0}),vl.exports.default=void 0;var ml,bl=(ml=qu)&&ml.__esModule?ml:{default:ml};function wl(t){return(wl="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(t){return a(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":a(t)})(t)}if("object"===wl(vl)&&vl)try{vl.exports=bl.default}catch(t){}bl.default.default=bl.default;var xl=bl.default;return vl.exports.default=xl,vl.exports}))}]);